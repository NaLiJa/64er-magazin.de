# Drucker oder Plotter?

Man braucht keinen teuren Farbdrucker, um eine farbige Hardcopy zu erstellen: es geht — wie wir mit einer in diesem Heft veröffentlichten Routine beweisen — auch mit dem preiswerten Printer/Plotter 1520. Dieses Listing zeigt zugleich, daß die Möglichkeiten eines Plotters häufig unterschätzt werden — er kann eben mehr, als nur schöne Linien und Kurven zeichnen. Er ist zwar nicht der schnellste, bringt aber auch Listings und Texte sauber zu (Rollen-)Papier. Bei der letzten Commodore-Fachausstellung demonstrierte ein Softwarehaus sogar, daß man Formulare unter Umständen leichter mit einem Plotter (der Formate wegen freilich nicht mit dem 1520) als mit einem üblichen Drucker ausfüllen kann. Ein bißchen Phantasie kann nicht schaden: Sicher gäbe es noch eine ganze Reihe weiterer Anwendungen für Plotter — auch die Flachbettplotter für DIN A4 oder gar DIN A3 sind ja nicht mehr unerschwinglich teuer.

Wir gehen in diesem und in den nächsten Heften ausführlich auf die wichtigsten Ausgabegeräte, ihre Stärken und Schwächen ein: Matrixdrucker, Typenraddrucker und Plotter. Ergänzend veröffentlichen wir im Listingteil häufig benötigte Routinen für die wichtigsten Geräte. Wir würden uns freuen, wenn sich Leser melden, die bessere Druckprogramme geschrieben haben, über interessante Anwendungen berichten oder Tips für die Lösung bestimmter Anschlußprobleme geben können.

Michael Pauly, Chefredakteur

# Aktuelles aus der Datenfernübertragung

## Commodore-64-Mailboxen in Krefeld

In Krefeld gibt es zwei Mailboxen. Beide laufen mit dem Automodem-Interface und sind vorwiegend abends zu erreichen. Die erste - von der Firma Hawischa Infosystems - hat die Nummer (02151) 779243. Diese Mailbox-System ist hauptsächlich für den C 64-Anwender gedacht. Andere Systeme nehmen aber auch daran teil. Für den Anwender-Menüpunkt Top-Secret«, wird ein Passwort verlangt. Dieses Passwort kann man sich auf Anforderung zuschicken lassen. Was geboten wird, ist bis auf weiteres unbekannt. Das andere Mailboxsystem wird von dem »Erfinder« des Automodems auf privater Basis betrieben und hat die Nummer (02151) 20130. Jeder, der ein Mailbox in Betrieb nimmt, kann auf Anfrage seine Adresse und Nummer veröffentlichen lassen.

## Hackertreff in München

Ende Juli trafen sich 20 Münchener Hacker in einer Wirtschaft vor dem Sendlinger Tor. Bekannt gemacht wurde der Termin im Mailboxsystem TEDAS: und in der RMI-Mailbox von der RMI-Nachrichtentechnik GmbH. Viele Teilnehmer waren aus den Mailboxen unter ihrem Pseudonym bekannt, wie zum Beispiel Professor Falken, König Ludwig, Kaiser Ferdinand, Donald Duck, Holy Hacker, Rastro Fodens, Graf Binaer Statement von Hohen Opcode, Christian Schwarz-Schilling. Die hauptsächliche Aktivität bestand natürlich im Tauschen von Telefonnummern, NUAs, NUIs, User-IDs und Passwörtern. Ferner wurden Adressen ausgetauscht und gefragt, wer welche Software für was hat. Zu erreichen sind die Münchener Hacker im RMI-Net noch unter dem User SENDLINGER TOR; diese Kontaktstelle soll aber bald aufgelöst werden. Dann kann ein Außenstehender die Mitglieder nur noch einzeln unter dem jeweiligen Pseudonym erreichen. Der Termin für das nächste Treffen, das wahrscheinlich am selben Ort stattfindet, steht noch nichts fest.

(Thomas Obermair/aa)

## Modem aus Großbritannien

Dieses Modem aus England ist speziell für den Acorn BBC Computer konzipiert worden. Es arbeitet sowohl im 300/300 als auch im 1200/75 Baud-Modus und kann zwischen dem (europäischen) CCITT- oder dem (amerikanischen) Bell-Standard umgeschaltet werden. Der Anschluß an den BBC Model B Computer findet einfach über ein fünfpoliges DIN-Kabel statt. Natürlich hat das Gerät noch keine FTZ-Nummer.

(aa)

Software Express GmbH, Hugo Viehoffstraße 84, 4000 Düsseldorf 30, Tel. 0211-424223

## Interessante Modems

Um es vorwegzuschicken, die hier beschriebenen Modems wird es vorläufig nicht auf dem deutschen Markt geben, da ist die Bundespost vor. Dennoch sollen sie kurz vorgestellt werden, um vielleicht wenigstens als Denkanstoß für unsere gute alte BP dienen zu können.

Das Modem-Phone stellt eine Kombination aus einem Telefon und einem Modem dar. Der Telefonteil kann also wie ein normales Telefon (in den USA, also mit Bell 103 und CCITT V.21/V.23 Norm ausgestattet) gehandhabt werden. Der Modemteil läßt sich über eine RS232C-Schnittstelle mit allen Computern die selbige besitzen (beispielweise IBM, Apple, Radio Shack (TRS 80 etc.), DEC und anderen ) betreiben. Mit einem entsprechenden Interface natürlich auch mit dem C 64. Das Modem kann sowohl im 300 als auch im 1200 Baud-Modus (asynchron) betrieben werden. Dieses Modem-Phone ist also hauptsächlich auf den amerikanischen (und englischen) Markt zu geschnitten. Deshalb die Frage an den Bundespost-Minister: Wieso gibt es so etwas noch nicht in Deutschland? Müssen wir eigentlich immer hinter den anderen herlaufen oder hat das (Kupfer-) Kabelprojekt wirklich einen so großen Stellenwert?

(aa)

# SX 64 ausgezeichnet

> Eine internationale Jury hat Commodore für ihr vorbildliches Industriedesign ausgezeichnet. Sie erhielt für ihren seit dem Herbst ’83 auf dem Markt befindlichen SX 64 (die tragbare Version des Commodore 64) das if-Emplem des Vereins »Die gute Industrieform Hannover e.V.«, das alljährlich zur Hannover-Messe verliehen wird.

Hohe Gestaltungsqualität, hoher praktischer Nutzen und ergonomische Anpassung, technische und formale Eigenständigkeit und Gebrauchs-Visualisierung waren unter anderem die Wertmaßstäbe, die die zwölf if-Juroren und Sachverständigen ihrer Bewertung zugrunde legten. Nahezu dreihundert Unternehmen aus vierzehn Ländern beteiligten sich an dem Designer-Wettbewerb.

Commodore kann reichlich stolz sein auf diese Auszeichnung. Dennoch gibt es aus unserer Sicht (und aus der des Lesers) auch einige Punkte die Anlaß zu Kritik geben. So kann man den zu klein geratetenen Monitor sicherlich nicht als sehr ergonomisch bezeichnen; genaueres ist in der Ausgabe 4 nachzulesen. Einige Leser monierten mit Recht, daß in Deutschland der SX 64 nur mit dem (zwar deutschen) Handbuch für den Commodore 64 ausgeliefert wird. Nützlicher wäre es da doch, den SX 64 mit seinem englischen Handbuch auszustatten. Dieses SX 64-Handbuch ist nämlich — gemessen an Commodore-Maßstäben — um einiges umfangreicher und besser als das zum Commodore 64. Der Idealzustand wäre natürlich eine gute deutsche Übersetzung. Die Anregung ist da, was Commodore macht, bleibt abzuwarten. Der SX 64 ist es sicherlich wert.

(aa)

# Super Disk Drive

> Nun gibt es sie auch in Deutschland, die MSD Super Disk II.

In der CES-Berichterstattung aus Chicago wurden sie schon einmal kurz angeschnitten, die Laufwerke von MSD Systems. Damals noch mit der Einschränkung, auf dem deutschen Markt müsse mit der Einführung wohl noch eine geraume Zeit gewartet werden. Diese Wartezeit ist nun vorbei. Softline tritt als Importeur auf.

Was bietet nun dieses Doppellaufwerk? Zunächst einmal zwei normale serielle Anschlüsse, wie wir sie auch von der VC 1541 her gewohnt sind. Zudem aber ist, über ein IEEE-Interface, auch der parallele IEC-Bus der größeren CBM-Systeme verfügbar. Durch den Einsatz dieses Busses ergeben sich natürlich erhebliche Geschwindigkeitsvorteile. So beträgt die Zeit, um eine volle Diskette zu kopieren 1 Minute und 55 Sekunden. Darin sind die Zeiten für das Formatieren der neuen, leeren Diskette, das Kopieren und das Verifizieren eingeschlossen. Die reine Formatierungszeit für eine neue Diskette beträgt 17 Sekunden. Diese Werte beziehen sich nur auf den parallelen Bus. Arbeitet man mit dem seriellen Anschluß, unterscheiden sich die Zeiten nicht wesentlich von denen der VC 1541. Dieser Anschluß ist aber dennoch nötig: denn nicht alle Programme laufen mit der parallelen Schnittstelle. So hatten wir beispielsweise Schwierigkeiten mit kopiergeschützten Programmen. Die Aussage der 100prozentigen Kompatibilität kann also noch nicht gemacht werden.

(aa)

Info: Softline, R. Alverdes, Schwarzwaldstraße 8a, 7602 Oberkirch, Tel. 07802-3707

# Das Klavier am C 64

## Wersiboard Music 64

Ein neues Musiksystem für den Commodore 64 hat die Firma Wersi vorgestellt. Es nennt sich Wersiboard Music 64 und besteht aus einem Keyboard mit 149 Tasten, einem Interface sowie der zugehörigen Software.

Somit gehören nun fingerverrenkende Spielübungen auf der Schreibmaschinentastatur des Commodore 64 der Vergangenheit an. Musiker und musikliebende Computerfans können |jetzt Melodien und bis zu dreistimmige Lieder in gewohnter Weise auf einer Klaviatur spielen. Die Computertastatur benötigt man nur noch zur Bedienung der Software. Jeder auf der Klaviatur angeschlagene Ton klingt sofort aus dem Monitorlautsprecher. Auf dem System läßt sich also spielen wie auf einem kleinen dreistimmigen Synthesizer beziehungsweise einer dreistimmigen Orgel. Zur Klangerzeugung dient der SID-Chip des C 64. Die Software wird auf Diskette geliefert und besteht aus den 2 Programmen »Mono 64« und »Poly 64«.

Mono 64 ist für einen monophon spielbaren Synthesizer. Monophon bedeutet einstimmig. Mit diesem Programm lassen sich also nur Melodien spielen. Dafür bietet es umfangreiche Klangeinstellmöglichkeiten. 13 Klangprogramme stehen während des Spieles zur Auswahl. Ein Set von 13 Demonstrations-Klängen befindet sich bereits auf der Diskette: Trompete, Blechbläser, Klarinette, Glocken, Flöte, Gitarre, Streicher, Klavier, Orgel und Akkordeon gehören hierzu. Sie klingen alle sehr echt. Ist man mit diesen Klängen nicht zufrieden oder will man neue »erfinden«, sind Experimenten kaum Grenzen gesetzt. Nahezu alle Parameter des SID-Chips können in weiten Bereichen verändert werden. Attack, Decay, Sustain und Release lassen sich getrennt regeln. An Filter-Modi stehen Tiefpass, Hochpass und Bandpass zur Verfügung. Einer der drei SID-Oszillatoren ist als langsamschwingender Modulationsoszillator geschalten. Mit diesem lassen sich Tremolos und Vibratos erzeugen. Die beiden anderen Oszillatoren spielen die Melodie. Sie lassen sich in der Tonhöhe gegeneinander verstimmen und mit unterschiedlichen Kurvenformen ausstatten, wodurch interessante Klangvariationen möglich sind.

Poly 64 ist das Programm für einen polyphonen Synthesizer. Maximal sind natürlich nur drei Stimmen gleichzeitig spielbar. Dieses Programm weist etwas weniger Klangvariationsmöglichkeiten als das vorhergehende auf. Ein Modulationsoszillator ist nicht vorhanden. Über das Menü kann man nur 5 Klangfarben auswählen. Spinett, Accordeon, Flöte, Banjo und Tubular Bell sind schon fertig programmiert. Über
die Funktionstasten des Commodore 64 lassen sich Attack, Decay, Sustain, Release, Lautstärke, Filterfrequenz, Kurvenform der Oszillatoren und die Pulsbreite ändern. Leider können beide Programme gespielte Melodien und Lieder weder in Notenschrift am Bildschirm ausgeben, noch speichern (Sequenzer). Ergänzungs-Software mit diesen Möglichkeiten wäre sehr wünschenswert. Hoffentlich nehmen sich die Softwareingenieure der Firma Wersi dieser Probleme bald an.

(Richard Aicher/aa)

Info: Wersi, Industriestraße, 6401 Halsenbach/Hunsrück, Tel. 06747-7131

# Die Alternativen kommen

> Es rührt sich was auf dem Markt der alternativen Diskettenlaufwerke. Knock out für die 1541?

Nicht nur auf dem amerikanischen Markt tut sich einiges in bezug auf die alternativen Laufwerke für die VC 1541. So' haben sich einige Importeure gefunden, die Laufwerke aus Hongkong oder Korea anbieten, teilweise aber auch aus europäischer Produktion.
Da wäre zunächst einmal das Doppellaufwerk Micropower 2000 von WCS (Wemper Soft-Comp) in Aumühle. Dieses Laufwerk bietet ebenfalls wie das MSD Super Disk zwei serielle Anschlüsse und einen Anschluß über den IEEE-488-Bus. Über den zuletzt genannten Bus ist das Micropower 2000 an die größeren CBM-Computer anschließbar. Es versteht die Befehle von Basic 3.0 und 4.0.
Beispiel: Basic V 3.0; LOAD"0: Name",8 oder LOAD"1: Name",8 zum Laden eines Programms von Diskette in Laufwerk 0 beziehungsweise Laufwerk 1. In Basic V 4.0 sehen die entsprechenden Befehle so aus; DLOAD "Name",D0 oder DLOAD "Name",D1. Eine genaue Angabe wie sich die Micropower 2000 mit dem C 64 verträgt kann noch nicht gegeben werden. Ein ausführlicher Testbericht wird aber noch folgen.

Info: WCS Wemper Comp-Soft, Börnsener Str. 6, 2055 Aumühle/Hbg., Tel. 04104-5365

## Alternative 1541

Von ncs Computersysteme in Nettetal wird ein vollkommen kompatibles Laufwerk zur 1541 angeboten. Das heißt auf den IEC-Bus wurde verzichtet. Mit diesem Laufwerk hat man also eine 1541 vor sich, nur mit wesentlich verbesserten Leistungsmerkmalen. Diese beziehen sich allerdings nicht auf die Geschwindigkeit, sondern nur auf die Zuverlässigkeit. Die 100prozentige Kompatibilität bedingt aber auch, daß das Commmodore-Floppy-Betriebssystem 1:1 übernommen werden müßte. Und da liegt der Hase im Pfeffer. Commodore läßt die Freigabe dieses Laufwerkes nicht zu. In der letzen Ausgabe hatten wir über ein ähnliches Laufwerk von WM-Computer berichtet. Bei diesem Laufwerk liegt dieselbe Sachlage vor. Das Laufwerk ist vorhanden, es kann geliefert werden, nur es darf nicht. Das Copyright des Floppy-DOS liegt selbstverständlich bei Commodore, und die geben es nicht frei.

Die Importeure dieser beiden Laufwerke bemühen sich nun, ein anderes Disketten-Operation-System in ihre Laufwerke einbauen zu lassen. Eine traurige Tatsache, da gäbe es nun zwei zuverlässige Laufwerke auf dem Markt, doch sie dürfen nicht verkauft werden.

Wir halten Sie über den Stand der Dinge auf dem laufenden.

## Wafertape

Ebenfalls von ncs Computersysteme wird es demnächst ein Wafertape-Laufwerk für den C 64 geben. Die Übertragungsrate liegt bei 19,2 KBit pro Sekunde. Das SF1403 genannte Wafertape-Laufwerk kann direkt an den C 64 oder den VC 20 angeschlossen werden, und bietet aber außerdem noch eine Centronics- sowie eine RS232-Schnittstelle. Die Datenspeicherung findet auf einem sogenannten magnetischem Endlosband (in etwa einer verkleinerten Musikkassette vergleichbar) statt. Es können je nach Bandlänge bis zu 140 KByte an Daten gespeichert werden. Die Handhabung entspricht der einer Diskette, also mit Directory, sequentiellen Dateien etc. Das Doppel-Laufwerk soll 599 Mark kosten, und wird wahrscheinlich Ende dieses Jahres erhältlich sein.

(aa)

Info: ncs Computersysteme GmbH, Klemensstraße 7, 4054 Nettetal 2, Tel. 02157-1616

# Kreatives Chaos

> Der Computer bietet in der Datenfernübertragung ungeahnte Möglichkeiten. Aber die Gefahr des Mißbrauchs ist gegeben. Hier werden immer wieder die Hacker genannt. Ihre bekannteste »Vereinigung« ist in Deutschland der Chaos Computer Club in Hamburg. Das folgende Interview ist weder eine Rechfertigung noch eine Verurteilung der Hacker. Der Artikel soll einen Einblick in die »Philosophie« des CCC-Teams bieten.

Dieses Interview wurde telefonisch durchgeführt, wobei die Interviewten, zwei Mitglieder des CCC, vor einem Telefonverstärker saßen. Das wohl wichtigste Ergebnis ist: Das Bild vom Hacker, der nur aus Spaß und aus Freude an der Sache selber in Datenbanken eindringt, ist nicht mehr aktuell. Die »Hacker« vom Chaos Computer Club (CCC) verstehen sich selber als Kommunikationsexperten, die das neue Medium Datenfernübertragung per Modem zur weltweiten Kommunikation nutzen. Letztendlich soll jeder unzensiert Informationen austauschen können. Das langfristige Ziel ist die Installation von besseren, objektiveren Möglichkeiten zur freien Meinungsbildung. Ein »Hacker« dieser Couleur sieht also in seinem Handeln eine gesellschaftliche Aufgabe.

Was macht der Chaos Computer Club überhaupt?

Wir verbreiten Informationen über neue Medien und unsere Erfahrungen und tauschen Informationen über die verschiedensten Sachen aus. Computer sind so etwas wie ein neues Medium für uns und diese Datenverbindungen sind für uns eine neue Form von Straßen und öffentlichen Plätzen, auf denen wir uns bewegen. Wir möchten mit der Zeitschrift »Datenschleuder« andere Leute auf die bestehenden Möglichkeiten und die Gefahren hinweisen.

Das ist doch ein bißchen harmlos ausgedrückt, oder?

Ich weiß nicht, was Du willst. Die ganzen Zeitschriften oder was immer so berichtet, die versuchen uns immer in eine leicht kriminelle Ecke hineinzudrücken. Das ist überhaupt nicht unser Sinn und Zweck oder gar unser Anliegen. Wir möchten ganz einfach nur miteinander Kontakt halten und aufnehmen und natürlich auch — also ich persönlich — in den Rechnern gucken, was da so abläuft. Um da reinzukommen muß man ein bißchen kreativ sein.

Wie kam es zur Gründung des Chaos Computer Clubs?

Vor drei Jahren haben sich ein paar Leute zusammengehockt, und gemeint, daß man mit Computern auch andere Sachen machen kann, als das, was zumindest hier in Deutschland zu diesen Zeiten üblich war. Da ist dann eine Kleinanzeige in einer Tageszeitung erschienen, und in Berlin fand ein Treffen von zwei Dutzend Leuten aus dem Bundesgebiet statt. Da haben wir damals beschlossen in Kontakt zu bleiben und Erfahrungen auszutauschen. Die Idee war einfach die, eine Zeitschrift zu machen, aber zu dem Zeitpunkt war das alles zu locker, und es hat nicht hingehauen. Weiter haben sich Kontakte zu den USA ergeben, zu Cheshire Catalyst (dem »König« der Hacker in den USA, d.Red.) und zu dessen Zeitschrift Cap, die eine ganze Reihe von Leuten hier im Bundesgebiet schon kannten und abonniert haben. Auf der TELECOM im Herbst 83 habe ich ihn selber kennengelernt und darüber eine Doppelseite in einer Tageszeitung geschrieben. Und diese Doppelseite hat eine ganze Menge an Resonanz hervorgebracht. Zur Jahreswende war es dann soweit, eine Zeitschrift zu machen. Vorher gab es die Idee, alle Informationen über Floppy auszutauschen, aber das war alles inkompatibel und hatte keinen Zweck. Die Zeitschrift wurde zur Jahreswende angekündigt und brachte binnen einer Woche an die 100 Zuschriften. Da war das hier in Hamburg einfach klar: Wenn 100 Leute das haben wollen, muß die einfach gemacht werden. Im März war es dann endlich soweit, fertig war die erste Nummer. Als dann die erste und die zweite Nummer heraus waren, ergab sich eine wahre Briefflut. Wenn ich meine beiden Hände hochkant hinhalte, das entspricht der eingegangenen Post.

Wieviele Abonnenten hat die Zeitschrift?

Wir sind einfach den Weg gegangen, daß der, der geschrieben hat, auch Informationen bekam, egal ob er jetzt Geld schickte oder nicht. Die Zahl der Abonnenten bewegt sich bei etwas über 200.

Wie schauen jetzt eure finanziellen Möglichkeiten aus?

Schlecht! Die Produktionskosten von der Zeitung liegen pro Exemplar rund bei 10 Pfennig, die Doppelseite DIN-A-3 bedruckt. Auf der anderen Seite ist das Teuerste halt das Porto. 50 Pfennig fürjedes Ding. Auf ein Exemplar kommen drei Exemplare, die nicht bezahlt sind, die wireinfachwegschicken, sei es zur Probe, oder auf eine Anfrage, wo nichts bei lag. Sie finanziert sich eben gerade über der Grasnarbe, aber wir haben die Hoffnung, daß eine Reihe von Leuten dazu bereit ist, dafür auch zu zahlen. Wenn Geld reinkommt, kann man auch weitermachen.

Und von den 200 Abonnenten hat jeder etwa 30 Mark gezahlt?

So ungefähr. Die sind auf den Faktor 1 gekommen, ein paar haben auch noch etwas gespendet, aber das war leider weniger als erhofft. Die Herstellung einer Datenschleuder kostet ungefähr 1000 Mark pro Ausgabe.

Wie lange bekommt einer die DS für 30 Mark zugeschickt?

Ein Chaos-Jahr. Das ist effektiv ungefähr ein Jahr, mit ungefähr 10 Ausgaben. Da müßt Ihr unbedingt unsere Adresse angeben, sonst rennen sie Euch die Bude ein.

Wieviele feste Mitglieder sind jetzt dabei?

Zur Mitgliederstruktur: Das ist ziemlich offen und frei. Jeder, der Informationen für uns hat, der trägt sie einfach bei, ob er nun Abonnent oder nur Bezieher der Datenschleuder ist, oder ob er gar nichts von der Datenschleuder weiß. Es gibt Leute, die beschäftigen sich mit dem Modembauplan, wir stellen zum Beispiel Platinen her, vertreiben sie auch. Dann machen wir die Datenschleuder, und haben die Kommunikation über Computer. Das ist einfach eine offene Struktur, wo jeder, der Lust hat, mitmachen kann und es irgendwann bleiben läßt. Wir sind aber am Überlegen, ob wir das Ganze in Vereinsstrukturen einbinden sollen. Es gibt ein paar Stellen nach außen, wo wir einfach auf Probleme stoßen. Aber auf der anderen Seite gefällt uns einfach diese offene Struktur. Das ist ein Dilemma.

Eine ungefähre Zahlenangabe läßt sich doch machen, oder?

Wenn man das auf der Ebene der Abonnenten ansetzt, kommt man so auf über 200, davon etwa 30 in Hamburg. Das sind immer so fließende Grenzen. Soll ich jetzt einen Grafiker, der mal ein paar Bilder für die Datenschleuder malt als Mitglied einstufen oder nicht? Das sehen wir nicht so eng. Da kommt jemand dazu, findet das interessant, macht dann einfach mit. Das ist auch so bei den Treffen, die wir einmal in der Woche in einer Kneipe hier in Hamburg machen. Da kommen wechselweise immer andere vorbei, ein Stammtisch eben. Zum anderen treffen wir uns einmal im Monat allgemein zum Informationsaustausch.

Welche Leute machen mit?

Das geht vom Piloten über einen Schlosser, Leute mit einem eigenen Laden bis hin zu Arbeitslosen und Studenten. Sie sind zwischen 16 und 35 Jahre alt. Nicht älter.

Wie beurteilt Ihr die rechtliche Lage Eurer Aktivitäten?

Wir mögen es überhaupt nicht, wenn wir in irgendeine Ecke gedrängt werden. Jetzt wird gesagt, alles seien Kriminelle, die Datenbanken knacken und einen großen Unfug treiben. Wir erheben grundsätzlich nicht den Anspruch, daß wir uns an alle Gesetze und Regeln halten, zum Beispiel bezogen auf die Verwendung von nicht FTZ-geprüftem Gerät. Wirwollen die Bundespost davon überzeugen, daß das wie in England gehandhabt wird, also grob gesagt, die Nutzung von nicht FTZ-geprüftem Gerät zugelassen wird. Das ist eine klare Forderung von uns. Wir sind das Gegenteil von Computerkriminellen, die wegen des eigenen finanziellen Vorteils in Computersysteme eindringen und irgendwelche Sachen von dort verkaufen; genauso wie wir uns ganz klar von Leuten distanzieren, die Software kopieren und dann weiterverkaufen. Auf der anderen Seite ist das bei uns so wie beim Patentrecht: Wenn wir bestimmte Dinge ausschließlich für den privaten Gebrauch benutzen, kann es durchaus vorkommen, daß wir Geräte verwenden oder Sachen machen, die irgendwie nicht zugelassen sind.

Was sind die wichtigsten Ziele des CCC?

Eine ganz wichtige Zielsetzung ist das neue Menschenrecht auf weltweiten, freien Informationsaustausch. Ungehindert. Das ist eine Chance, die die elektronischen Medien einfach bieten. Es passiert in einigen extremen Fällen, sagen wir mal bei Telefonaten mit Israel, daß sich die Zensur einschaltet und die Verbindung abbricht. Und in die Sowjetunion gibt es überhaupt keinen Selbstwählverkehr. Sonst ist das Telefon ja ein Hilfsmittel, um mit Menschen in aller Welt Verbindung zu bekommen und unzensiert zu reden. Und das ist ein ungeheurer Fortschritt, wenn man 200 Jahre zurückdenkt. Und diese Entwicklung wollen wir in Richtung auf die neuen Medien weitertreiben; wir versuchen einfach, die internationale freie Diskussion zu fördern, also so etwas wie der »freedom of information act« in den USA erreichen, weltweit.

Versteht Ihr jetzt unter frei auch kostenlos?

Das wäre schön. Aber angesichts meiner Telefonrechnung würde ich sagen, daß das schon lange nicht mehr kostenlos ist. Das ist eine Wunschvorstellung, die sich so nicht verwirklichen läßt. Es ist aber viel billiger als zum Beispiel jetzt dauernd herumreisen zu müssen; es ist so möglich, daß zu relativ geringen Kosten internationale Konferenzen stattfinden. Und an dem Punkt stinken wir natürlich auch gegen eine restriktive Gebührenpolitik der Bundespost an. Es ist um den Faktor 4 billiger, von den USA nach hier zu telefonieren als von hier in die USA. In den USA sind Ortsgespräche zum Beispiel kostenlos. Die Bundespost hat ihr Monopol, und sie nutzt es aus. So ist es in den USA möglich, als Funkamateur das Funknetz mit dem Telefonnetz zu koppeln, was in der Bundesrepublik verboten ist. An solchen Stellen haben wir, einmal vorsichtig ausgedrückt, reformerische Vorstellungen.

Seht Ihr in dem Buch »Der Schockwellenreiter« von John Brunner irgendwelche Parallelen in Eurer Arbeit?

Das ist ein Buch, das eine Reihe von Leuten ziemlich beeindruckt hat. Das ist eine Aktualisierung von »Brave New World« oder »1984« auf elektronische Medien. Es schildert eine Reihe von Gefahren und Chancen, die zu wenig in der Diskussion sind. Da finde ich einfach, das ist ein richtiges Buch.

Wie, meint Ihr, wird sich das Ganze in den nächsten 10 Jahren weiterentwickeln?

Einrichtung von mehr Mailboxen. Die ganze Computerei wird das Miteinander der Menschen ganz schön beeinflussen. In viel stärkerem Maße als das Telefon. Als negatives Bild: Vor 10 Jahren gab es die ersten Videogruppen: »Neues Medium, kann man interessante Sachen damit machen, zum Beispiel eine Stadtteilvideo oder Betroffenenvideo.« Also ein Medium für Einfälle. Und was ist nach 10 Jahren herausgekommen? Ein absolutes Massending, mit Horror und Porno. Und in ähnlicher Weise sehe ich das im Negativen für die Computerei. Sie führt zu einer neuen Form von Orientierung auf die Maschine und Sprachlosigkeit. Ich sage nur »1926 Metropolis« als Stichwort. Wir wollen versuchen, die Leute von ihren Daddelspielen wegzuziehen und zu einem kreativeren Umgang mit dem Medium zu bewegen. Unsere Hoffnung ist, daß der Computer als neues Medium positiv zur Verständigung beiträgt.

Wie seht Ihr in diesem Zusammenhang die Zukunft für den CCC?

Wichtig ist, daß das gedruckte Medium nur eine Krücke und ein Übergangsmedium ist, womit alle angesprochen werden, die keinen Computer und kein Modem haben. Also für die, die nicht »online« sind. Auf Dauer wird eine gedruckte Sache an Bedeutung verlieren. Die Ecken in den Mailboxen, wo Neuigkeiten drinstehen, sind viel aktueller und interessanter. Was in der Datenschleuder steht, ist oft total veraltet, wenn sie rauskommt. Jene, die sich ein bißchen in Mailboxen herumtun, sind vom Informationsstand einfach vier Wochen weiter. Deshalb müßte sich der Informationsaustausch viel mehr auf die elektronischen Medien verlagern. Auch bei uns.

Was würdet Ihr jemandem raten, der sich für die Kommunikation als solche interessiert?

Online! Rein in die Dinger! Gucken und sehen, was ihm gefällt, ob er irgendwas findet, womit er etwas anfangen kann und was seinen Interessen entspricht. Und wenn er nichts findet, sollte er zusehen, daß er etwas aufbaut. Auf alle Fälle immer aktiv sein.
Wer da ein bißchen ernsthaft herangeht, wird relativ bald mit allem, was er sieht, unzufrieden sein. Er wird sagen: Verdammt noch mal, ich mache meine eigene Mailbox. Das ist ja das elektronische Äquivalent zu einer Zeitung. Die Medien per DFÜ ermöglichen so etwas für alle, die etwas sagen, etwas mitteilen wollen. Jede Mailbox hat ihre eigene Handschrift, ihre eigenen Informationsecken, wenn auch ziemlich viel soziales Geräusch wie beim CB-Funk dabei ist. 

Plant Ihr vielleicht eine Mailbox oder auch etwas ähnliches?

Wir sind dabei, eine elektronische Mitfahrerzentrale zu programmieren. Der Schwarzmarkt hier in Hamburg praktiziert seit acht Jahren eine Mitfahrerzentrale.
Wir wollen so etwas über DFÜ und Computer machen.

Kostenlos, oder?

Ja, wenn einer aber etwas spenden will, wird das natürlich gerne gesehen, aber grundsätzlich soll es nichts kosten.

Wie seht Ihr die Lage bei den Modems?

Die Situation bei den Modems sieht so aus: Die billigsten sind im Moment von Tandy, die aber im Moment nicht lieferbar sind. Es gibt noch ganz billige Selbstbaumodems, die aber nur 300 Baud schaffen. Wenn man sich länger damit beschäftigt, sind 300 Baud einfach zu langsam. Da kommt man auf so etwas wie den 7910/7911; deshalb haben wir den Bausatz mit Platine entwickelt, den wir zu Selbstkosten vertreiben.

Noch eine Frage: Ist BTX eine Konkurrenz für DFÜ?

BTX ist von der Gebührenpolitik so konzipiert, daß es einfach viel zu teuer ist. BTX wurde zu einem Zeitpunkt entworfen, als die ganzen Mikro- und Kleincomputer noch gar nicht absehbar waren. Noch einmal direkter gesagt: BTX und der Cept-Standard wurden am Schreibtisch konzipiert, und die meisten Bildschirmtextgeräte sind nun einmal reine BTX-Geräte und keine Computer, und zwingen den, der ein BTX-Gerät hat, sich zusätzlich noch einen Computer zu kaufen. So glaube ich einfach, daß ein Datennetz, das die grafischen Möglichkeiten eines C 64 ausnutzt, sich mehr verbreiten wird, als BTX von der Post, das staatlich unterstützt wird.

Also BTX wird längerfristig nicht überleben?

Nicht als breites Enduser-Ding. Für spezialisierte Sachen und bestimmte Firmen wird es wohl überleben, aber in sehr kleinem Rahmen. Guck Dir an wieviel hunderttausend C 64 es gibt und wieviel tausend BTX-Anwender. Trotzdem werden wir bis zum Ende des Jahres unseren BTX-Dienst ausbauen und erweitern, aber ab Einführung der erhöhten Gebühren werden wir unseren BTX ausschalten. Wir haben einen Antrag auf 100 Seiten laufen, um einen einigermaßen aktuellen Informationsdienst anzubieten. Wir wollen eben einige BTX-Anwender auf andere Gedanken bringen und sie auf andere Möglichkeiten hinweisen. Aber spätestens zur Gebührenerhöhungwerden wir aussteigen. Wir sind auf der Seite 19058 im Berliner Übergangsrechner, und auf der Seite 20305080 im neuen.

Ok, das war’s!

Der CCC ist auch noch im RMI-Net über Datex-P zu erreichen (NUA 44241040341) unter dem Namen Chaos-Computer-Club c/o Schwarzmarkt, Bundesstraße 9, 2000 Hamburg 13.

# Leserforum

## Steuercodes oder Interface?

Ich besitze die elektronische Schreibmaschine SILVER-REED EX 44 und das dazugehörige Interface mit der Bezeichnung SRI IF-UI84 SIGMA 8300 SP zum Commodore 64. Diesem Interface ist leider nur eine äußerst dürftige Beschreibung beigefügt, die in keiner Weise den Möglichkeiten entspricht. Einen Teil der Codes, die — entgegen Herstellerangaben — auch funktionieren, habe ich schon herausgefunden. Für mich sehr interessant wäre eine Umschaltmöglichkeit (elektronisch) der Zeilendichte (Pitch), um für Diagramme eine höhere Auflösung erzielen zu können. Daher meine Frage: Wer hat den Code dieses Interfaces geknackt und/oder kann mir helfen? Das Problem scheint die Belegung der ESC-Funktion mit 1/2-Space zu sein.

## Was steckt in der Demodiskette?

Als ich mir vor ein paar Monaten zu meinem Commodore 64 das Diskettenlaufwerk kaufte, lagen da zwei Disketten dabei. Die eine Diskette nennt sich »TEST/DEMO«, wo auch das DOS 5.1 drauf ist. Die andere Diskette, die sich »DEMODISKETTE« nennt, sind zahlreiche Demonstrationen drauf wie: Musikdemos, Grafikdemos, ein paar Anwendungen, Spiele und zu guter Letzt auch Werbung für den C 64. Auf dieser Diskette ist auch das Programm, wo ich Sie nun um eine Auskunft bitte. Das Programm besteht eigentlich aus zwei Programmen. Das erste Programm (der Lader), das sich »3000.EMU.BOOT« nennt, lädt, nach dem man es gestartet hat, das eigentliche Programm, das sich »EMULATOR« nennt. Das Programm »EMULATOR« wird vom Lader aus mit SYS 12*4096 gestartet. Man erhält dann folgenden Bildschirmaufbau:
PET EMULATOR V0.5/081382
WITH
DOSMANAGER V5.1/071382
BY BOB FAIRBAIRN
(C) 1982 COMMODORE BUSINESS MACHINES
PETMODE
EMULATOR ON
READY

Und nun meine Fragen zu diesem Programm: Was kann man mit diesem Programm alles anfangen? Wie kann man es sinnvoll anwenden? Das einzige, was ich bisher herausgefunden habe, ist folgendes:

1.	Das Programm »EMULATOR« liegt im Adressenbereich 49152-53247, also ist es zirka 4 KByte lang.

2.	Fragt man den freien Speicher ab, mit PRINT FRE(O), so erhält man die Antwort: 31741. Es gehen also zirka 7 KByte verloren. Was ist nun mit diesen 7 KByte passiert?

3.	Das einzige, das bei der Diskette beilag, ist folgender Text: »Hilfsprogramm, um Programme von CBM 3000 auf den C 64 zu verwenden«. Bezieht sich dieser Text nur auf Basic- oder auch auf Maschinenprogramme.

Ich bin sicher, daß ein großer Teil aller C 64-Besitzer, die sich eine Floppy zugelegt haben, dies interessiert, um die große Software-Vielfalt der CBMs für den C 64 auszunutzen.

Wolfgang Joachim

## Textverarbeitung mit Seikosha GP-700A?

Obwohl ich einige Textverarbeitungsprogramme in meiner Sammlung habe, ist es mir noch nicht gelungen, meinen Text durch Einfügen von Formatierungsbefehlen farbig zu gestalten. Der Drucker wird derzeit mit einer Centronics-Schnittstelle der Marke Wiesemann Typ 9200 angesteuert. Mit welchen Textprogrammen kann ich farbig ausdrucken und welche Centronics-Schnittstellen muß ich an den Drucker anschließen?

Conny Scharfenberg

## C 64 extern anhalten?

Wie kann man den C 64 über externe Beschaltung (nur Hardware) beliebig (über den DMA-Eingang vielleicht?) anhalten und wieder starten?

Ulrich Lang

## Vielsaitig für C 64?

Ich besitze ein Programmpaket für den VC 20 mit Namen »Vielsaitig«von Commodore. Es handelt sich dabei um ein Programm zur Lösung musiktheoretischer Probleme. Es kann insgesamt 25 internationale Tonskalen in Tabulatur und Klaviatur grafisch ausgeben, Gitarrengriffe bestimmen oder die richtigen finden und vieles mehr. Da ich nun auf den Commodore 64 umsteigen möchte würde mich interessieren, ob es ein Programm fürden C 64 gibt, das über die obengenannten Funktionen verfügt und eventuell mit besserer Grafik und besserem Eingabekomfort aufwarten kann?

Oliver Kreuzahler

## Der C 64 als Effektgerät?

Wer hat Programme für den C 64 zur Benutzung als Effektgerät über den Audioein- und -ausgang am User-Port (Pin 3/5)? Dabei denke ich an Anwendungen wie Echo/Phaser/Flanger/Chorus und Verzerrer oder auch Oktaver und Vocoder. Ferner würde mich interessieren, wie der Audioeingang intern verschaltet ist und ob er einen A-D-/D-A-Wandler besitzt?

Patrick Bandenberger

## Wo gibt es Testprogramme?

1)	Gibt es ein »Testprogramm«, das alle Funktionen des Computers testet? (zum Beispiel durch User-Port, Baud-Rate und so weiter).
2)	Wo kann man »Bauteile« für den C 64 kaufen (zum Beispiel 6526)?
3)	Exbasic Level II wurde auch schon angesprochen. Mit DUMP erhält man die Werte der Variablen (abernur die absoluten!). Wie kann man die Vorzeichen sichtbar machen? Ist es eine Macke vom Exbasic?
4)	Was ist mit den Unterschieden der einzelnen »C 64-Jahrgänge«?

Peter Strempel

## 3032-Monitor am C 64?

Ich möchte den Monitoreines CBM 3032 an den C 64 anschließen. Ist eine Schaltungbekannt, die die von diesem Monitor benötigten Signale (Video, horiz. sync., verf. sync.) aus dem F-BAS-Signal des C 64 erzeugt?

Wolfgang Stumm

## Simons Basic und DOS 5.1 gleichzeitig?

Die gleichzeitige Verwendung von Simons Basic und DOS 5.1 auf der Gerätekombination C 64 und VC 1541 funktioniert nicht. Obwohl Simons Basic einige Disk-Befehle anbietet, empfiehlt es sich, um jederzeit den Fehlerkanal abfragen zu können, das DOS 5.1 mit zu verwenden. Welche Abhilfe gibt es, um beides störungsfrei nebeneinander betreiben zu können? Wer bietet das Textverarbeitungsprogramm »VIZAWRITE64« an?

Detlev Preisler

## Textomat und Steuerzeichen?

Wer hat Erfahrung mit dem Programm »Textomat« und »Datamat« (neue Version) von Data Becker in Verbindung mit dem Görlitz-Interface? Ich wäre an einer Druckertabelle und den Steuerzeichen interessiert.

Axel Birtel

## Wollen Sie antworten?

Wir veröffentlichen auf dieser Seite auch Fragen, die sich nicht ohne weiteres anhand eines gutes Archivs oder aufgrund der Sachkunde eines Herstellers beziehungsweise Programmierers beantworten lassen. Das ist vor allem der Fall, wenn es um bestimmte Erfahrungen* geht oder um die Suche nach speziellen Programmen beziehungsweise Produkten. Wenn Sie eine Antwort auf eine hier veröffentlichte Frage wissen - oder eine andere. bessere Antwort als die hier gelesene - dann schreiben Sie uns doch. Die Antworten werden wir in einer der nächsten Ausgaben publizieren. Bei Bedarf stellen wir auch den Kontakt zwischen Lesern her.

## C 64-Platine kaufen?

Kann man bei Commodore oder woanders auch nur eine Platine des C 64 kaufen?

Eric Kratzin

## C 64-Tastatur kaufen?

Woher bekomme ich eine Tastatur für den C 64?

Oliver Varoß

## Hardcopy für Printer 4022?

Ich besitze einen C 64 mit IEEE 488-Interface und den Tractor-Printer 4022.

1) Ist ein Hardcopy möglich? (Hardcopy der IEEE 488 funktioniert nicht!)
2) Wie komme ich zur Sperrschrift (breiterer Ausdruck von Zeichen) beim 4022?
3) Wo liegt der Grafikspeicher der IEEE 448?

Gernot Zelzef

## Horizontales Scrolling?

Wie kann man beim C 64 ein horizontales Fine-Scrolling (Punkt für Punkt) auf der Textseite simulieren? Mit welcher Speicherzelle kann man die Textseite Punkt für Punkt verschieben?

Christoph Bergmann

Geldfrage?

1. Bei welchen Disketten ist das Preis-/Leistungsverhaltnis am günstigsten? (in bezug auf die Commodore-Floppy VC 1541).
2. Wie kann man Sprites drehen?
3. Bei welchen Geschäften/Versandhäusern bekommt man die billigste Hard-/Software?
4. Gibt es Möglichkeiten, mit dem Homecomputer Geld zu verdienen?

Hendrik Richter

## Fortran auf dem C 64?

Ich besitze einen Commodore 64. Gibt es für dieses Gerät einen Fortran-IV-Compiler oder eine andere Möglichkeit, auf dem C 64 mit Fortran IV zu arbeiten?

Hergen Eilers

Der C 64 an der Stereoanlage?

Ich habe folgende Fragen:
— Wie schließe ich meinen Computer(C 64) an eine Stereoanlage an (Mono-Umschalter nicht vorhanden)? Es soll kein Stereoton simuliert werden.
— Wie kann ich die Erweiterung »Turbo-Tape« von Maschinensprache aus nutzen? (Wo sind die Einsprünge; wie werden die Parameter übergeben?) Kann man mit »Turbo-Tape« absolut laden und von Maschinensprache aus speichern?
— Kann man Maschinenprogramme im Diskettenpuffer ablegen und dort laufen lassen? Wie kann man sie starten, wenn das oben genannte möglich ist?

Thomas Denner

## SM-Text 64 mit Umlauten?

Ist es möglich, mit SM-Text 64 mittels C 64 und Drucker MPS 801 auch Umlaute zu drucken? Wer kennt gegebenenfalls ein Hilfsprogramm ?

Ulrich Uphagen

## Aztec Tomb

Wer kann mir bei der Pflanze weiterhelfen?

Ausgabe: 8/84

Stefan Sache

So würden Sie nicht weiterkommen, denn die folgenden Schritte fehlen Ihnen noch:
— im Hausflur:
Eingabe: examine hallstand
Comp.: I can see empty jam jar
Eingabe: take jar
Comp: O.K.
— beim Teich:
Eingabe: examine pool
Comp: I can see fish-pool
Eingabe: catch fish
Comp: It’s now in jam jar
— Waste Ground:
Eingabe: examine fish
Comp: It’s magical it says: Plants need water and vanishes
Eingabe (2mal): fill jar — empty jar

Die Pflanze wächst und Sie gelangen mit »climb beanstork« in die nächste Abenteuerstufe.

Olaf Amblank

## Probleme mit Speichererweiterung

3-KByte-Spiele funktionieren nicht mit dem 16-KByte-Modul? Ausgabe: 7/84

Daniel Hüller

Meine Antwort haben Sie offenbar falsch verstanden. Um beim VC 20 eine 3-KByte-RAM-Erweiterung zu simulieren, benötigt man lediglich eine 8-KByte-Erweiterung (oder natürlich mehr). Eine 3-KByte-Erweiterung, die man dann zusammen mit der 16-KByte-Erweiterung in eine (wohl kaum vorhandene) Modul-Box stecken muß, ist völlig unnötig. Die von mir beschriebenen PO-KEs reichen aus, um Programme, die eigentlich eine 3-KByte-Erweiterung benötigen, nur mit einer 8-KByte-(oder mehr) Erweiterung lauffähig zu machen.

Oliver Eichhorn

## Wordpro 3+

Kann Wordpro 3+ auch mit Centronics-Druckern am Userport betrieben werden?

Ausgabe: 5/84

Heinz-Josef Erben

Die Redaktion weist in Ihrem Test in der Ausgabe 6/84, Seite 52 ff. darauf hin, daß das Programm nur mit Druckern betrieben werden kann, die am seriellen Bus angeschlossen sind.

Mir ist es nun gelungen, die nötige Treibersoftware für eine Centronicsschnittstelle in das Programm einzubinden. Darüber hinaus habe ich es auch um eine deutsche Tastaturbelegung und deutschen Zeichensatz erweitert. Wer also mit seinem Wordpro gerne »Deutsch« schreiben möchte oder einen Centronics-Drucker benutzt, kann sich gerne an mich wenden.

David Trobisch
Neckarhauserstr. 54
6800 Mannheim 71
Tel. 06 21/47 56 59

## Probleme mit Monitoren

Wie schließe ich einen Monitor an den VC 20 an?

Ausgabe: 8/84

Inge Märkle

Hier mein Tip, wie ich meinen Monitor angeschlossen habe. In einem Elektrogeschäft kauft man sich einen 5poligen Diodenstecker, einen Cinch-Stecker und ein abgeschirmtes Kabel (soviel wie man eben braucht). Das alles kostet nur wenige Mark. Das Kabel wird abisoliert. Der Innenleiter wird dann an Stift 5 des Diodensteckers gelötet, das Drahtgeflecht kommt an Stift 2. Auf der anderen Seite des Kabels kommt der Innenleiter an den Stift des Cinch-Steckers, das Drahtgeflecht an den noch freien Anschluß. Das ist schon alles. Der Diodenstecker wird anstelle des Modulators in die Video-Buchse des VC 20 gesteckt, der Cinch-Stecker kommt in den Monitor. Siehe auch Seite 151 im Handbuch.

Manchmal kann es vorkommen, daß das Monitorbild trotz voll aufgedrehtem Helligkeitsregler sehr dunkel ist. Abhilfe: VC 20 aufschrauben und das Video-IC suchen. (Großes schwarzes Bauteil mit 40 Beinchen, auf dem »Mos 656« steht. Manchmal ist dieses IC von einem silbrigen Metallkästchen umgeben: Deckel entfernen.) In der Nähe dieses ICs gibt es zwei blaue Regler. Monitor anschließen und Helligkeitsregler ganz aufdrehen. Nun einen der beiden Regler vorsichtig (!) verdrehen. Verändert sich die Bildhelligkeit, so muß der Regler so lange verdreht werden, bis das Bild hell genug ist. Wenn beim Verdrehen nichts passiert, den Regler wieder in die Stellung bringen, in der er war und das Experiment mit dem anderen Regler wiederholen. Wenn auch hier nichts passiert, muß das Videosignal verstärkt werden. Den Schaltplan für einen entsprechenden Verstärker kann man bei mir bekommen.

Bernd Eßlinger
Panoramastr. 32
7470 Albstadt 2

## Text und Grafik mischen

Wie kann ich in Simons Basic hochauflösende Grafik und Text gleichzeitig darstellen?

Ausgabe: 8/84

Frank Schager

Die Darstellung von Text und gleichzeitig Grafik im Grafikmodus des Simons Basic läßt sich durch den Simons Basic-Befehl »TEXT« bewerkstelligen. Dieser ist so anzuwenden:
TEXT x,y,"Text",m,gr,ab
x = X-Koordinate; y = Y-Koordinate;
m = Grafikmodus (m = 0 oder m = l oder m=2), wenn m = 0, 1 oder 2) wenn m = 0 dann aus;
gr = Größe des darzustellenden Buchstabens;
ab = Abstand zwischen den einzelnen Buchstaben.

Um einen gleichen Abstand und eine gleiche Größe der Buchstaben wie beim normalen Textmodus zu erreichen, wird für »gr« eine 1 und für »ab« eine 7 eingesetzt. Also:
TEXT x,y,"Text",m,1,7

Dennoch läßt sich eine Eingabe von Antworten im Grafikmodus des Simons Basic nicht sehr einfach realisieren, da bei der Eingabe, jedenfalls im Grafikmodus, weder Cursor noch Eingaben sichtbar sind. Vielleicht gibt es einen Ersatzbefehl für den herkömmlichen INPUT?

Stephan Hardy

## C 64 und Videorecorder

Wie kann ich mit dem Videorecorder die Signale vom Computer aufnehmen?

Ausgabe: 8/84

Eugen Anger

Die Lösung ist ganz einfach: Man nehme das Kabel, welches beim C 64 direkt vom Computer kommt, und steckt dieses in den Eingang des Videorecorders. Dann führt man das Kabel vom Ausgang, wie in der Betriebsanleitung angegeben, zum Fernsehgerät. Nun muß man das Gerät auf den Computer einstellen, und zwar so, als würde man einen Fernsehsender einstellen. Danach braucht man nur noch wie bei der normalen Aufnahme zu verfahren.

Stefan Wößner

## Hardcopy mit NEC 8023 B-N

Wer bietet Software an, um mit dem C 64 und dem Drucker NEC 8023 B-N hochauflösende Grafik und Hardcopys zu erstellen?

Ausgabe: 8/84

Wolfgang Jaworski

Unser neues Interface Typ 92000/NEC erlaubt, den NEC-Drucker 8023 oder Itoh 8510 an den C 64 anzuschließen. Der Drucker wird voll kompatibel zum CBM-Drucker 1515. Auf diese Weise können zum Beispiel mit Simons Basic problemlos Hardcopys erstellt werden. Das Interface ist für 298 Mark inklusive Mehrwertsteuer sofort lieferbar. Vorhandene Geräte Typ 9200 rüsten wir für 91,20 Mark inklusive Mehrwertsteuer in die neue Version um. Ihr Leser

Reinhard Wiesemann Mikrocomputertechnik, Wuppertal

## Rechengenauigkeit beim C64

Warum gibt der C 64 als Ergebnis der Aufgabe PRINT INT(3/0.03) nicht 100, sondern 99 an?

Ausgabe: 9/84

Oliver Treiber

Wie genau der C 64 in seiner Ausarbeitung ist, beweist Ihr Auftrag-Print INT(3/0.03). Von der Logik her ist diese Antwort als richtig einzustufen. Die INT-Funktion (Ganzzahl-Funktion) geht davon aus, daß im Endergebnis die kleinere, ganze Zahl ausgegeben wird. Das Ergebnis lautet natürlich 100; da aber die INT-Funktion die nächst kleinere Zahl anzugeben hat, wäre dies die Zahl 99.99, die der 100 am nächsten käme.

Nun hat aber die INT-Funktion auch die Aufgabe, aus einer Zahl mit Dezimalstellen eine ganze Zahl zu machen. Also werden die beiden Dezimalstellen geschluckt. Das INT-Ergebnis lautet daher 99. Nun kann man diese »Ungenauigkeit« in der INT-Funktion umgehen, in dem man das Originalergebnis mit einer Dezimalstelle versieht. PRINT INT(3/0.03 + 0.5). Das Ergebnis müßte jetzt 100.5 lauten. Aber die nächst kleinere, ganze Zahl lautet 100.

Im übrigen kann man mit der INT-Funktion auf- und abrunden sowie vorausbestimmen, auf wieviele Dezimalstellen das Endergebnis ausgedruckt werden soll. Im Prinzip kommt es darauf an, welche Aufgabe eine Funktion übernimmt. Eine solche Rechenoperation löst man einfacher mit Print 3/0.03. Besondere Vorsicht ist bei einer INT-Funktion mit einer negativen Zahl geboten.

Prüfen Sie die Aussage PRINT INT(-2.3) auf die Aussage der nächst kleineren, ganzen Zahl hin. Das Ergebnis lautet —3.

Rolf Voigt

## Programmunterbrechung bei Druckerausgabe

Bei Ausgabe über Drucker erfolgt nach unterschiedlich langer Druckerausgabe des öfteren die Fehlermeldung »Device not present error«. Handelt es sich um einen Hard- oder Softwarefehler?

Ausgabe 8/84

Rudolf Ott

Als Hersteller von Zusatzgeräten für den C 64 ist uns das geschilderte Problem bekannt. Der Fehler liegt im seriellen Bus des C 64. Er dürfte nicht mehr auftreten, wenn die Signalleitungen an der 6poligen Buchse mit 4,7 kOhm gegen Masse abgeschlossen sind.

Josef Wildgruber
Fotronic GmbH

## Autostart

Wie bringe ich meine Programme dazu, daß sie nach dem Laden von Diskette oder Kassette automatisch starten?

Ausgabe: 6/84

Carsten Bruch

Ich habe noch eine ergänzende Antwort. Um einen Autostart bei der Floppy hervorzurufen, genügt es, folgende Zeile einzugeben:
LOAD"NAME",8:(SHIFT) (RUN/STOP)

Dabei müssen die Tasten (SHIFT) und (RUN/STOP) gleichzeitig gedrückt werden. Das Programm »NAME« wird dann ohne Eingabe von (RETURN) automatisch geladen und gestartet.

Arndt Grothoff

## Bits hörbar machen

Ist es beim C 64 möglich, beim Laden von Datasette die Signale hörbar zu machen?

Ausgabe: 8/84

Werner Frings

Um die Signale, die von der Datasette kommen, hörbar zu machen, muß einfach mit POKE54296,15 die Lautstärke im SID auf 15 gesetzt werden. Nun sind die Signale beim Laden, Saven und Verifyen über den Lautsprecher des Monitors zu hören (auch bei Fast- und Turbo Tape).

Und nun ein Nachtrag zum Autostart: Es gibt auch eine einfachere Lösung als die von Ihnen beschriebene.

1. Programm einladen (Disk oder Tape)
2. PRINT PEEK(174),PEEK(175)
3. Beide Werte notieren
4. Als erste Anweisung im Programm
POKE174, < 1.Wert > :POKE175, <2.Wert> setzen
5. Programm abspeichern
6. NEW
7. Ein kleines Ladeprogramm entwerfen:
10 LOAD''Name>',8 (bei Disk oder
10 LOAD''Name>' (bei Kassette)
8. Dieses Miniprogramm abspeichern (bei Kassette vor dem Hauptprogramm)

Soll nun das Hauptprogramm mit Autostart geladen werden, muß das Ladeprogramm geladen und mit RUN gestartet werden. Der Computer sucht darauf das Hauptprogramm, lädt und startet es.

Nun zur Funktionsweise: Wenn in einem Programm eine LOAD-Anweisung erfolgt, lädt der Computer schon das angesprochene Programm und startet es. Probleme tauchen allerdings auf, wenn das zu ladende Programm länger ist als das Ladeprogramm. Der Computer lädt zwar die Programmdaten mit, »glaubt« sich aber immer noch im Ladeprogramm, da die Zeiger aufs Programmende sich in diesem Fall nicht dem neuen Programm anpassen. Die Adressen 174 und 175 enthalten die Zeiger aufs Programmende und können so mit den POKEs in der ersten Zeile angepaßt werden.

Dieses Verfahren läuft sowohl auf Diskette als auch auf Kassette, allerdings nicht mit Fast- oder Turbo Tape.

Stefan Gossens

## EPROM-Brenner: Disput

Mit Interesse las ich Ihren Testbericht über EPROM-Programmer in der 64’er, Ausgabe 8/84.

Doch schon bald wurde aus dem Interesse Unmut. Unmut über einen zu oberflächlichen Test, der wenig die Funktion der Geräte ausgeleuchtet hat. J
Als Hersteller der Geräte Mod. V64 und Mod. V128 (Fa. Jeschke tritt als Wiederverkäufer dieser Geräte auf), möchte ich hier ein wenig das Konzept erläutern: Die EPROM-Programmer sind für den Einsatz am User-Port vorgesehen. Das hat drei große Vorteile:

1. Ein Gerät läuft ohne Änderung an der Hardware auf zwei Computern (nämlich dem VC 20 und dem C 64)
2. bleibt der Expansionport frei für Steckmodule, 80-Zeichenkarten etc.
3. Ist es am User-Port möglich, über die herausgeführte Wechselspannung auf einfache Art und Weise die Programmierspannung zu erzeugen. Ein externes Netzteil ist somit nicht nötig, was zumindest ein lästiges Kabel erspart, letzten Endes aber für den Kunden Sicherheit darstellt, da er nicht mit der Netzspannung in Berührung kommen kann.

Da vor allem die Software unserer Geräte bemängelt wurde, auch hierzu eine Stellungnahme:

Es ist nicht sinnvoll, für die Treibersoftware Maßstäbe anzusetzen wie etwa für ein Telespiel.

Grafik, Farbe und Ton können zwar ganz reizvoll sein, sind aber für die Funktion der Software nicht notwendig und bei guter Dokumentation sogar überflüssig.

Auch die Hintergründe für bestimmte Befehle der Treibersoftware wurden im Test vernachlässigt:

Eine Transfer- (Verschiebe-) Funktion ist in unserer Software nicht eingebaut, da sie nicht notwendig ist. Anders als bei anderen Programmiergeräten können Sie den Speicherbereich, aus dem das Quellprogramm kopiert werden soll, frei wählen. Dabei ist es auch möglich, die Programmlänge beliebig festzusetzen, sowie die Startadresse im EPROM frei zu wählen. Unsere Treibersoftware gestattet Ihnen so das Programmieren eines »halben« EPROMs, oder sogar nur ein einzelnes Byte zu programmieren. Das Nicht-Vorhandensein von LOAD- und SAVE-Routinen hat folgende Gründe:
Aufgabe der Treibersoftware ist in erster Linie die Bedienung des Programmiergerätes. So ist zum Beispiel das Kopieren eines EPROMs mit der Treibersoftware kein Problem.

Für das umfassende Arbeiten mit Maschinenprogrammen benötigt der Anwender aber ein Monitorprogramm. Da ein Monitorprogramm normalerweise LOAD- und SAVE-Routinen enthält, brauchen sie in der Treibersoftware kein zweites Mal installiert zu sein.

Für solche Fälle kann ich nur unsere UNIMENT-Befehlserweiterung empfehlen, die neben zahlreichen neuen Basic-, Grafik-, Sprite- und Sound-Befehlen sowie einer parallelen Centronics-Schnittstelle einen kompletten Maschinenmonitor mit Assembler-, Lade-, Speicher-, Transfer-Routinen und so weiter enthält.

Auch die Treibersoftware für unsere EPROM-Programmer ist bereits implementiert, so daß beim UNIMENT-Steckmodul keinerlei Software geladen werden muß. Mit dem Einschalten des Computers stehen dem Benutzer die oben genannten Funktionen sofort zur Verfügung.

Hagen Völzke

Als Autor des EPROM-Vergleichstests in der Ausgabe 8/84 kann der oben abgedruckte Brief der Firma Völzke meinerseits nicht unbeantwortet bleiben.

Der erste Unmut stellte sich bei Herrn Völzke wegen eines angeblich zu oberflächlichen Tests ein. Dazu ist folgendes zu sagen:

1) Ich besitze persönlich seit über einem halben Jahr das Modell V128 und benutze es regelmäßig. Von einer Unkenntnis des Gerätes kann also sicher nicht die Rede sein.
2) Die meisten von H. Völzke bemängelten Punkte werden im Test angesprochen. Dazu im einzelnen: Die Anschlußmöglichkeit der EPROM-Brenner am User-Port ist aus der Vergleichstabelle auf Seite 37 Spalte 2 ersichtlich. Dort kann ebenfalls gelesen werden, daß die EPROMmer der Firma Völzke sowohl für den VC 20 als auch den C 64 eingesetzt werden können. Als wesentliches Entscheidungskriterium für die Testbewertung ist die Tauglichkeit für beide Computer aber sekundär, da nur sehr wenige Computeranwender einen VC 20 und einen C 64 besitzen. Die Anzahl derer, die dann noch EPROMs brennen, scheint mir verschwindend gering.

Der zweite Kritikpunkt bezieht sich auf das Freibleiben des Expansion-Ports bei den Völzke-Geräten. Nun, daß es auch bei einem EPROM-Brenner mit Anschluß am Expansion-Port zu keinem Verlust des Expansion-Ports kommen muß, zeigt das Gerät von Kalawski.

Der beste Beweis dafür, daß auch ich den Anschluß einer zusätzlichen Stromversorgung nicht für notwendig halte, ist in der Tatsache zu sehen, daß der Testsieger von Roßmöller ebenfalls ein User-Port Gerät ist.

Ein paar Worte sollten aber auch zur Software hinzugefügt werden:

1) Natürlich ist die Treibersoftware für ein EPROM-Programmiergerät nicht mit einem Telespiel zu vergleichen. Dennoch betrachte ich die optische und akustische Hilfen geführt für den Benutzer als sinnvoll. Bedenkt man den doch relativ hohen Preis für EPROMs, so ist die Zerstörung durch Fehlprogrammierung oder falsches Einsetzen für sicherlich fast jeden Anwender ein herber Verlust. Auch ist das wiederholte Löschen und Neuprogrammieren eines falsch »geschossenen« EPROMs mit dem Nachteil der verkürzten Lebensdauer des EPROMs verbunden.

Die Treibersoftware der Völzke-Geräte bietet in diesem Bereich keinerlei Sicherheit (ein Freund hat wegen einer falsch eingestellten Programmierspannung einen Verlust von über 600 Mark gehabt). Viel besser in Hinsicht auf die Sicherheit ist der Testsieger und das Gerät von Kalawski, wobei letzterer sogar den richtigen Einsetzpunkt des EPROMs optisch anzeigt.

2) Auch andere EPROM-Brenner verfügen über die Fähigkeit, den Speicherbereich, aus dem das Quellprogramm kopiert werden soll, frei zu wählen.

3. Die weiterhin von Herrn Völzke angesprochenen Punkte, wie die LOAD- und SAVE-Funktion oder der Einsatz eines Monitors für diese Zwecke sind zwar richtig, er vergißt aber, daß für ein solches Programm zusätzlich finanzielle Aufwendungen entstehen. Viel besser ist es doch, wenn diese Funktionen, wie bei unserem Testsieger, kostenlos mitgeliefert werden, da sie in der Treibersoftware implementiert sind.

4) Herr Völzke empfiehlt für oben genannte Zwecke den Einsatz seiner Befehlserweiterung UNIMENT. Dafür sind allerdings nochmals 99 Mark auf den Tisch zu legen: Der Vorteil dieses Konzeptes soll aber nicht verschwiegen werden. Sowohl die UNIMENT-Erweiterung als auch der Monitor (der aus einem riesigen Softwareangebot ausgewählt werden kann) sind auch ohne den EPROMmer einsetzbar. Rechnet man zum Preis der Völzke-Geräte den eines guten Monitors hinzu, so werden zirka 300 Mark fällig. Dafür bekommt man aber auch schon unseren Testsieger mit eingebautem Monitor und einem überlegenen Konzept, das beispielsweise die Programmierung der zukunftsträchtigen 27256-EPROMs ermöglicht.

(Arnd Wängler)

## Vielseitiges Supervoc<br>Ausgabe: 6/84

Alle Besitzer einer VC 1541, die Vokabeln mit dem Programm Supervoc lernen wollen, können sich glücklich schätzen. Das Programm muß, um auch mehrere Vokabelprogramme zu laden oder gleichzeitig zu schreiben, folgendermaßen geändert werden:
In Zeile 220 Diskette geschrieben, statt Kassette. In Zeile 230 muß der erste GOSUB-Befehl in GOSUB 1315 umgeändert werden.
1315 PRINT »Welches Programm soll geladen werden?«
1317 INPUT P$
1330 OPEN 1,8,0,P$
1340 INPUT #l,P$
1470 OPEN 1,8,1,N$
Außerdem: Wer kann mir einen Tip geben, wie man das Kopierprogramm (Disk Copy), aus der April-Ausgabe, zum Laufen bekommt? Gibt es ein Vokabel-Lernprogramm für französische Vokabeln?

Markus Bluhm
Gruberzeile 95
1000 Berlin 20

## Autostart geknackt<br>Ausgabe 8/84, Seite 98

Dirk Rother irrt sich, wenn er behauptet, Autostartprogramme könnte man nicht mehr stoppen und überarbeiten. Ein Autostartprogramm kann wie folgt geknackt werden:

Kassette in normalen Recorder einlegen und Autostartprogramm anhören, Kassette in Datasette einlegen, Counter auf Null stellen, Kassette auf Anfang des Autostartprogrammes zurückspulen, Autostartprogramm einladen, wenn Counter auf Null steht dann Stopp-Taste an Datasette drücken, andere Kassette mit dem vorher abgeSAVEten Kurzprogramm: 10PRINT'': END einlegen und Play-Taste drücken. Nach ein paar Sekunden erscheint auf dem Bildschirm READY. Das Autostartprogramm läßt sich listen, das nachfolgende Programm einladen, überarbeiten und kopieren. Das Autostartprogramm kann auch wieder abgespeichert werden.

Ich glaube mit an Sicherheit grenzender Wahrscheinlichkeit, daß Ihr es Euch nicht traut, den Leserbrief abzudrucken. Aber warum denn nicht? Ihr bringt so viele Listings wie man das und jenes kopieren kann und ein paar Seiten weiter:

»Wir wollen unsere Leser darauf aufmerksam machen, daß verkaufen, tauschen, etc.«. Das ist so wie: Hier hast du den Schlüssel zum Tresor, aber aufschließen darfst du ihn nicht. Überlegt doch mal selber oder versucht es zumindest einmal!

Ein Knackie

Lieber Knackie, Sie sehen, wir haben nachgedacht und uns getraut.

## Rettung, wenn ISM 64 abstürzt

Bei der Anwendung des Dateiverwalters ISM ist es mir bei einer damit verbundenen Druckerbenutzung auch passiert, daß der ISM abstürzte. Nach einigem Herumprobieren bin ich auch darauf gekommen, daß durch ein Initialisieren der Diskette der Betrieb fortgesetzt werden kann. Diese Lösung hat allerdings in keiner Weise befriedigt, und so wandte ich mich an den Hersteller, die SM-Software AG. Nach einer Woche bekam ich die erlösende und sehr einfache Antwort.

Nachdem der Druckerkanal geöffnet wurde, muß vor dem nächsten ISM-Befehl der Basic-Befehl POKE 186,GN eingegeben werden. GN ist dabei die Gerätenummer der Floppy, also meistens 8.

Frank Götze

# Mehr Übersicht am Bildschirm – Test 40/80-Zeichenkarte

> Mit 506 Zeichen auf dem Bildschirm sind die Grenzen recht eng gesetzt. VC 20-Besitzer konnten nur neidisch auf den C 64 mit 1000 Zeichen oder den CBM 8032 mit 2000 Zeichen schauen. Mit einer 40/80-Zeichenkarte kann es der VC 20 jedoch leicht auch mit diesen Computern aufnehmen.

Um 40 oder 80 Zeichen pro Zeile mit dem VC 20 zu realisieren, is auch Software-Lösung möglich. Sie ist jedoch sehr aufwendig, da neben dem Zeichensatz auch weite Teile des Betriebssystems geändert werden müssen. Außerdem ist diese Lösung sehr langsam und nicht für professionelle Anwendungen geeignet.

Eine Hardware-Lösung ist dagegen leichter zu handhaben (nur Karte einstecken) und bietet zusätzliche Leistungen. Wir haben die 40/80-Zeichenkarte MR 40/80 (Bild 1) von Roos-Elektronik getestet.

Wie bedient man nun diese 40/80-Zeichenkarte, und was kann sie?

Aus der sehr mageren Beschreibung kann man leider nur wenig entnehmen. Die MR 40/80 stellt jedenfalls keine Farben mehr am Bildschirm dar. Reverse Schrift ist jedoch weiterhin möglich. Im 40-Zeichenmodus sind sowohl die Schrift wie auch die Grafikzeichen am Fernseher noch einwandfrei lesbar (Bild 2). Bei 80 Zeichen je Zeile tut man sich jedoch am Fernseher recht schwer (Bild 3), deshalb ist ein Monitor unbedingt zu empfehlen.

Nach dem Einstecken der MR 40/80 in den Expansionport des VC 20 wird an der fünfpoligen DIN-Buchse der Karte ein Monitor oder der HF-Modulator für den Fernseher angeschlossen. Nach dem Einschalten meldet sich der VC 20 wie gewohnt, jedoch mit einer Bildschirmbreite von 40 Zeichen und ohne Farbe. Das Bildschirmformat kann durch Drücken bestimmter Tasten während des Einschaltens geändert werden: Eine der Tasten 0 bis 8 bestimmt die Anzahl der Punkte für den Zeilenabstand. Diese Funktion ist ähnlich dem CHR$(14) beim CBM 4001/8001, das den Zeilenabstand um zwei Punkte vergrößert. Betätigt man eine der Tasten 0 bis 8 in Verbindung mit der rechten SHIFT-Taste, dann wird der 80-Zeichenmodus aufgerufen.

Drücken der RETURN Taste während des Einschaltens verhindert, daß die MR 40/80 aktiviert wird. Die Bildschirmausgabe erfolgt dann über den bisherigen Video-Ausgang des VC 20, also bitte das Umstecken des Kabels nicht vergessen.

Um das Bildschirmformat bei eingeschaltetem Computer zu ändern, drückt man eine der oben beschriebenen Tastenfolgen zusammen mit der RESTORE Taste. Das Umschalten in den 80-Zeichenmodus ist aber etwas kompliziert: Man muß gleichzeitig die rechte SHIFI-Taste, die CTRL- und die RESTORE Taste drücken.

Zurück in den 40-Zeichenmodus kommt man durch Betätigen von CTRL und RESTORE. Das Programm bleibt beim Hin- und Herschalten natürlich erhalten.

## Sonderfunktionen auf den Funktionstasten

Alle acht Funktionstasten werden durch die MR 40/80 mit speziellen Sonderfunktionen für die Textverarbeitung belegt (Tabelle 1). Unter anderem sind ein Tabulator und zusätzliche Lösch- und Cursorsteuerfunktionen vorhanden. Alle diese Funktionen F1 bis F8 können natürlich auch vom Programm aus aufgerufen werden. Dies geschieht mit »PRINT CHR$(133 ... 140)«.

Zu beachten ist die Lage des Bildschirmspeichers. Die MR 40/80 enthält ein eigenes Video-RAM von 2 KByte Umfang, das ab Speicheradresse 43008 ($A800) liegt. Da der normale Video-Speicher nicht benötigt wird, stehen zusätzliche 512 Bytes RAM zur Verfügung. Mit SYS 43000 wird dieser Speicher dem Basic-RAM hinzugefügt.

Für viele Programme ist es durchaus sinnvoll, die oberste Zeile des Bildschirms zu schützen. Die Zeile bleibt dann unverändert stehen und scrollt auch nicht aus dem ..Bildschirm heraus. So bleiben Überschriften oder Bedienungshilfen ständig sichtbar.

Die MR 40/80-Karte ist recht übersichtlich aufgebaut und mit einem Video-Controller, einem 2 KByte-CMOS-RAM sowie mit zwei EPROMs (2716 und 2732) und diversen Logikbausteinen bestückt. Alle IC sind gesockelt (!) und können im Schadensfall leicht selbst ausgewechselt werden. Die Steuersoftware im 2716-EPROM belegt den Adreßbereich von $A000 bis $A7FF. Im 2732-EPROM befindet sich der

## Aufbau der Platine

Zeichengenerator, der natürlich auch leicht ausgewechselt werden kann. Für die Textverarbeitung wären beispielsweise deutsche Umlaute recht sinnvoll. Ein entsprechendes EPROM ist auf Anfrage beim Hersteller erhältlich.

Die Platine macht einen recht stabilen Eindruck. Leider hat es für ein Gehäuse bei dem immerhin 249 Mark teuren Gerät nicht mehr gereicht.

Fazit: Diese 40/80-Zeichenkarte ist für professionelle Anwendungen durchaus geeignet. Die 40 Zeichen pro Zeile sind am Fernseher gut lesbar, die 80 Zeichen Darstellung jedoch ist ohne Augenschäden auf Dauer nur mit einem Monitor möglich. Da die Farbe fehlt, ist die Karte für alle Arten von Spielen weniger geeignet.

(Christian Q. Spitzner/ev)

# X 100 — Farbig plotten und drucken

> Seitdem moderne Matrixdrucker voll grafikfähig sind, haben Plotter es schwer, sich durchzusetzen. Auch der relativ hohe Preis wirkte leicht abschreckend. Der X100 ist jedoch von der Leistung als auch vom Preis, für den C 64-Benutzer interessant.

Einen Plotter in Aktion zu sehen, ist ein aufregendes Erlebnis. Das beweisen die Menschentrauben, die zum Beispiel bei Messen und Fachausstellungen so einem Gerät bei der Arbeit fasziniert zuschauen. Man überlegt sich unwillkürlich, ob man sich nicht auch so einen Zeichenkünstler anschaffen sollte. Doch wenn dann Preise genannt werden, sinkt die Kauflust oft ganz erheblich. Aber ebenso wie die Matrixdrucker, brechen auch die Plotter in einen bisher ungesättigten Markt ein: Sie werden immer preiswerter, bieten aber trotzdem beachtliche Leistungen. Der Adcomp X100 ist solch ein Gerät (Preis: zirka 2 000 Mark).

Auf den ersten Blick verwechselt man ihn glatt mit einem üblichen Matrixdrucker. Ein ähnliches Gehäuse, ein Handrad an der Seite, Tractoreinheit und Gummiwalze. Doch schon ein etwas genauerer Blick unter die Gehäuseabdeckung zeigt den wichtigen Unterschied auf: Anstelle des Druckkopfes sieht man 4 Farbstifte, die in einem Revolvereinsatz stecken. Spätestens jetzt wird jedem klar, daß er einen Plotter vor sich stehen hat.

Der X100 wird mit einer deutschen Anleitung geliefert. Speziell für den C 64-Besitzer liegt noch eine zusätzliche Broschüre bei, die auf die speziellen Befehle des Plotters und auf die Programme der ebenfalls beiliegenden Demodiskette eingeht und sie beschreibt. Außerdem befindet sich auf der Diskette ein Druckertreiber-Programm, das die Centronics-Schnittstelle des Plotters ansteuert. Der Plotter wird mit einem Kabel über den User-Port des C 64 verbunden. Die Treibersoftware entspricht übrigens dem Programm aus Heft 7.

Aktiviert wird der X100 über die bekannten OPEN n,4-Befehle wie bei den Matrixdruckern. Damit ist es auch möglich, Texte zu plotten, also auch Listings. Allerdings können keine Commodore-Grafik- und -Steuerzeichen dargestellt werden. Kommen wir jedoch zu den Plottmöglichkeiten.

Es können selbstverständlich Linien in jeder Richtung gezeichnet werden. Dabei ist sowohl eine relative als eine absolute Bewegung möglich. Linien lassen sich durchgezogen, aber auch gestrichelt zeichnen. Der Abstand zwischen den Teilstrichen kann eingestellt werden. Text läßt sich an jeder beliebigen Stelle setzen. Auch die Schriftgröße und die Schreibrichtung sind definierbar, wobei jedes Zeichen zwischen 1 und 255 mm groß sein und in 4 Richtungen gedreht werden kann. Oft benötigte Routinen wie Achsen, Kreise und Histogramme (Rechtecke) sind auch implementiert; umständliche Unterprogramme können deswegen entfallen. Die Lage und Parameter der einzelnen Figuren sind frei wählbar. Selbstverständlich kann man zu jeder Zeit zu einer der anderen vier Farben wechseln. Die Farbstifte, mit Druckflüssigkeit gefüllte Kugelminen, sind ausreichend dünn. Sie besitzen laut Handbuch eine »Lebensdauer« von mehr als 800 Meter. Auch in der kleinsten Schriftart (1 mm) sind die Zeichen noch gut zu lesen (mit Lupe). Das bewirkt aber auch die Schrittweite von wahlweise 0,1 beziehungsweise 0,05 mm. Die Wiederholgenauigkeit beträgt 0,2 mm bei Positionierung über 50 mm und die Positionierungsgenauigkeit erreicht zirka 1% bei einer Positionierung über 100 mm. Die Plottgeschwindigkeit reicht von 120 mm/ sec, bei 0,1 mm Schrittweite, bis 60 mm/sec bei 0,05 mm Schrittweite. Der effektive Plottbereich liegt in beiden Hauptrichtungen (X- und Y-Achse) bei 20 cm.

## Bewertung

Der X100 ist ein Plotter nicht nur für den Hobby-Einsatz. Durch sein Papierformat, DIN A4, mit wahlweiser Verwendung von Einzelblatt oder Endlospapier wird er vielseitig einsetzbar. Seine technischen Daten genügen gehobenen Ansprüchen, auch wenn sie selbstverständlich nicht an die echte Profiklasse heranreichen. Ein kleiner Tip noch für VC 1520-Besitzer: Alle Befehle des VC 1520 werden auch vom X 100 verstanden. Lediglich einige Längenangaben müssen wegen dem unterschiedlichen Plottbereich etwas geändert werden.

(gk)

## Ein Drucker für alle Fälle: Epson FX 80

> Der FX 80 ist ein Matrixdrucker, der kaum noch Wünsche offen läßt. Zur Zeit seiner Einführung eine Sensation, gehört er aber auch heute noch immer zu den Besten seiner Klasse.

Jeder C 64-Besitzer wird sich irgendwann einmal einen Druckerwünschen, entweder, um seine selbst erstellten Programme auszudrucken, oder um Briefe, Listen und andere wichtige Dinge zu Papier zu bringen. Es stellt sich dann die Frage, was der Drucker leisten soll. Nicht zuletzt hat da das eigene Konto einen wichtigen Diskussionsbeitrag zu leisten.

Eines kann schon vorausgeschickt werden: Es wird schwer fallen, alle Möglichkeiten des FX 80 auszunutzen. Seine vielen Druckfunktionen dürften auch die meisten Textverarbeitungsprogramme überfordern. In der Praxis wird es jedoch so sein, daß man sich einige wichtige Schriftarten merkt und nur mit diesen arbeitet. So kann man mit einfachen Befehlen zum Beispiel Breitschrift, Schmalschrift, Elite, Fettdruck, Doppeldruck, Proportionaldruck und Kursivschrift wählen. Viele dieser Druckarten sind auch untereinander mischbar. Natürlich läßt sich auch der Zeilenabstand fast stufenlos verstellen und der Papiertransport durch einfache Steuersignale variieren. Tabulatoren lassen sich vertikal und horizontal einstellen, ebenso wie der linke und rechte Druckrand. Wem der Drucker zu schnell ist, der kann ihn durch einen Befehl auf halbe Geschwindigkeit drosseln. Die neun internationalen Zeichensätze ASCII, französisch, deutsch, englisch, amerikanisch, schwedisch, dänisch, japanisch und italienisch lassen sich ebenso einstellen wie die Papierlänge, die in Zeilen oder Zoll angegeben werden kann. Wem die internationalen Zeichensätze nicht reichen, der kann sich selbst welche entwickeln. Der frei ladbare Zeichengenerator ist 2 KByte groß und kann auch abgeschaltet werden. Falls kein eigener Zeichensatz geladen wird, dient der Speicher als Druckerpuffer. Dadurch kann man schon mit dem Computer weiterarbeiten, wenn der FX noch zu tun hat. Die Grafikfähigkeit des Epson braucht eigentlich nicht weiter betont zu werden. 64'er-Leser finden ab und zu einige Beispiele einer hochauflösenden Grafik, die der FX 80 gedruckt hat.

Innerhalb seines Gehäuses befinden sich zwei DIP-Schalter, mit denen sich einige Möglichkeiten fest einstellen lassen, so daß nach dem Einschalten der gewünschte Zustand anliegt. Folgende Schalter können gesetzt werden: Einstellung der Zahl der Druckspalten (80 und 132 Spalten pro Zeile), Form der Null (durchstrichen oder nicht), Papierendeerkennung an und aus, Sperren oder freigeben des Zeichengenerators, Fettdruck oder Normaldruck nach dem Einschalten sowie die Wahl des Internationalen Zeichensatzes (1 bis 9). Der zweite DIP-Schalter schaltet den Summer, den automatischen Seitenvorschub und den automatischen Zeilenvorschub an und aus. Außerdem kann ein Schalter gesetzt werden, der es erlaubt, den Drucker per Software anzusteuern oder abzuschalten. Leider sind diese Schalter nur nach dem Öffnen eines Gehäusedeckels erreichbar, jedoch hat man damit keine Schwierigkeiten.

Etwas, was uns sehr gefällt, aber auch manchmal die Tränen in die Augen schießen läßt, ist die Handhabung und Bedienung. Was uns sehr gefällt, ist die Papierabrißkante. Sie erweist sich in der Praxis als sehr vorteilhaft, weil lediglich zirka 2 cm über dem Druckkopf das Papier an einer Metallschiene abgerissen werden kann. Kein lästiges Vorwärtstransportieren um eine halbe Seite und damit Blattverlust und anschließendes Neujustieren der Perforationskante. Auch Zurückdrehen des Papiers ist ohne Probleme möglich. Nur das Einziehen von neuem gelochtem Endlospapier über den Tractor erfordert manchmal eine Engelsgeduld. Wenn es nicht auf Anhieb klappt und sich eventuell sogar Papierfetzen zwischen den schwer zugänglichen Tractoren verfangen, geht die Fummelei mit Pinzette oder anderen spitzen und dünnen Werkzeugen los. Um solchen Ärger nicht erst aufkommen zu lassen, muß man beim Papierabzug sehr vorsichtig und akkurat vorgehen. Dann klappt es allerdings sehr gut. Beim Einzelblatteinzug hingegen gibt es gar keine Probleme.

Der FX 80 ist ein Drucker, der es in sich hat. Bezogen auf seinen Preis (um 1500 Mark ohne Interface) und seine Nutzungsfähigkeiten ist er ein Matrixdrucker, der keine Konkurrenz zu scheuen braucht. Durch seine Verbreitung haben sich auch schon mehrere Fremdhersteller bemüht, entsprechende Schnittstellen zum C 64 zu entwickeln. Mit dem richtigen Interface können nicht nur die Fähigkeiten des FX voll ausgenutzt, sondern sogar noch erweitert werden.

(gk)

# Brother HR-5C: Fast nicht zu hören

> Der Brother HR-5C ist ein Thermodrucker, der aber auch mit normalem Papier arbeiten kann. Er ist zwar keine Schönheit, aber dafür klein und vor allem sehr leise.

Mit den Maßen 303(B)*174(H)*65(T) mm und einem Gewicht von 1,6 kg gehört er zu den ganz kleinen. Er paßt somit in die kleinste Ecke. Auch sonst wird der HR-5C keine großen Schwierigkeiten bereiten. Das fängt bei der Stromversorgung an: wahlweise über ein Netzteil oder über Batterien, die mitgeliefert werden. Falls diese durch häufige Benutzung verbraucht sein sollten, ertönt ein eingebauter Summer, der zum Batteriewechsel auffordert. Im Gegensatz zu den anderen »Brüdern« besitzt der HR-5C jedoch keine Tastatur. Damit ist die Wahlmöglichkeit Batterie oder Netzteil nicht mehr so interessant. Denn der Computer muß ja angeschlossen sein, um den Drucker arbeiten zu lassen. Und dieser Anschluß ist eine große Stärke der Brother Drucker. Sie besitzen eine Schnittstelle, die voll kompatibel ist mit dem Commodore-Zeichensatz. Das schließt sämtliche Grafikzeichen ein. Sie werden so gedruckt, wie sie auch auf dem Bildschirm zu sehen sind.

Da der HR-5C ein Thermodrucker ist, wird wärmeempfindliches Papier benötigt. Es sei denn, man legt eine mitgelieferte Farbbandkassette ein. Dann ist es auch möglich, auf normales Papier zu drucken. Allerdings sollte darauf geachtet werden, möglichst glattes Papier zu verwenden. Papier mit rauher Oberfläche (wie zum Beispiel teures Dekorationspapier mit Textilfasern) kann zu Problemen führen. Es kann Papier auf Rollen verwendet werden (eine volle Rolle wird mitgeliefert), aber auch Einzelblatteinzug ist möglich. Und der Papiereinzug ist denkbar einfach und problemlos. Auch wird ein akustisches Signal gegeben, wenn kein Papier anliegt, Papierende oder Farbbandende erreicht ist, außerdem leuchtet die Warnlampe dann noch auf. Der Summer läßt sich über leicht erreichbare DIP-Schalter abschalten. Eine sinnvolle Absicherung: Auch im abgeschalteten Zustand ertönt der Summer bei schwachen Batterien.

Mit einem weiteren DIP-Schalter läßt sich der Zeilenabstand von 1/6 auf 1/9 Zoll umstellen. Damit sind die hardwareseitigen Einstellmöglichkeiten aber schon vorbei. Alle Einstellungen, die das Schriftbild betreffen, müssen vom Computer übertragen werden.

Der Brother HR-5C wird vom Computer rnit den gewohnten OPEN-Befehlen unter der Geräteadresse 4 aktiviert. Dabei kann durch die Wahl der Sekundäradresse entweder der Großschrift/Grafikmodus oder der Klein-/Großschriftmodus eingestellt werden. Auch der reverse Ausdruck ist möglich (CHR$(18)). Mit CHR$(14) werden Zeichen mit doppelter Breite ausgegeben. Eine Besonderheit ist die Möglichkeit, sich ein eigenes Zeichen definieren zu können. Ein Zeichen wird mit 7 DATA-Werten beschrieben. Auf die gleiche Art und Weise funktioniert das übrigens mit den Commodore Druckern VC 1526 und MPS 802. Durch diese Einzelnadelansteuerung müßte es auch möglich sein, sich hochauflösende Grafiken ausdrucken zu lassen, auch wenn das recht mühsam und langsam sein würde. Apropos Geschwindigkeit: Bei 30 Zeichen pro Sekunde braucht man schon einige Geduld. Diese Zeit wird noch erhöht durch die geringe Geschwindigkeit des Thermokopfes beim Zurückfahren zum Zeilenanfang und durch das Weiterspulen des Farbbandes nach jeder Zeile. Denn das Farbband ist ein Wegwerf-Band, es kann nur einmal verwendet werden.

Der Brother HR-5C ist besonders dort zu empfehlen, wo der Geldbeutel nicht allzu dick ist (Preis zirka 500 Mark) und wo sehr großer Wert auf geringe Geräuschentwicklung gelegt wird. Ein weiteres Plus ist die vollständige Kompatibilität zum Commodore-Zeichensatz. Eine Einschränkung stellt die Druckgeschwindigkeit dar und die fehlende Möglichkeit, normales gelochtes Endlospapier zu verwenden. Seine Druckmöglichkeiten sind sehr einfach. Sie beschränken sich auf Reversdruck und Breitschrift. Zusammengefaßt: der HR-5C ist ein einfacher Thermodrucker für einfache Anwendungen.

(gk)

# Ein Star, der es in sich hat

> Drucker müssen schon einiges bieten, um konkurrenzfähig zu sein. Der Drucker Delta 10 von Star braucht sich dabei nicht zu verstecken.

Nach dem Auspacken des Druckers ist man zuerst einmal überrascht von der Anzahl der mitgelieferten Einzelteile. Das reichhaltige Zubehör findet man normalerweise nicht bei vergleichbaren Druckern. Abgesehen von den sonst auch üblichen Beigaben wie Farbband, Kunstoffdeckel und Handbuch erhält man auch noch zwei verschiedene, gleichzeitig verwendbare Papierführungen, einen Rollenhalter für Endlospapier auf Rolle und zusätzliche Reservesicherungen.

Im ersten Moment sieht das etwas verwirrend aus. Wohin mit den ganzen Teilen? Im Handbuch, wird man schnell fündig. Schon beim Durchblättern erkennt man an den Illustrationen, wie alles zusammengehört, die Beschreibungen sind fast unnötig, doch sehr exakt. Folgerichtig beginnt es bei der Montage der einzelnen Zubehörteile, beschreibt die Grundeinstellung des Gerätes, wie man sie ändert und erst danach die Möglichkeiten, das Druckbild zu verändern. Am Ende werden einige (der etwas klein geratenen) Tabellen erklärt und Beispiele zu den verschiedensten Druckbefehlen gegeben, so daß auch ein Unerfahrener auf diesem Gebiet nur selten Schwierigkeiten haben wird. Das Handbuch — es liegt in englisch und in deutsch vor — macht insgesamt einen guten Eindruck. Auch wenn es nicht mit einem Glanzumschlag und Ringbuchlochung aufwartet.

Der Delta 10 (Preis zirka 1750 Mark) kann gelochtes Endlospapier ebenso verarbeiten wie einzelne Blätter und Papier auf Rollen. Die zum Umstellen notwendigen Tätigkeiten sind problemlos, so etwa die Montage und Demontage der Tractoreinheit. Dieser Vorteil wird jedoch mit einem Nachteil erkauft: Eben weil die Tractoreinheit oben sitzt, also das Papier zieht und nicht schiebt, gibt es keine nützliche Papierabrißkante in der Nähe des Druckkopfes. Zum Abreißen eines Blattes muß es weitertransportiert werden bis zum Ende des Kunstoffdeckels. Daß ein Zurückdrehen des Papiers in Verbindung mit der Tractoreinheit nicht möglich ist, ist ärgerlich und kostet jedesmal ein unnötiges Blatt.

## Zwei Schnittstellen

Selten findet man bei Druckern standardmäßig zwei Schnittstellen. Die Star-Familie besitzt denn auch eine Centronics- und eine RS232-Schnittstelle. Über DIP- Schalter können sie umgeschaltet werden. Der Delta 10 besitzt 3 verschiedene DIP-Schalter. Leider ist davon nur einer von außen zugänglich, die anderen beiden erreicht man nach Demontage des Gehäusedeckels.

Der Delta 10 ist mit einem Standard-Zeichengenerator (ROM) und einem freiladbaren Zeichengenerator (RAM) ausgestattet. Mit Hilfe des ladbaren Zeichengenerators ist es möglich, sich bis zu 192 Zeichen nach eigenem Wunsch zu generieren. Außerdem lassen sich durch Ansteuern der einzelnen Nadeln hochauflösende Grafiken erzeugen (Bit-Image-Graphicmode). Es existieren vier verschiedene Modi, von einfacher Dichte mit 480 Punkten bis hin zu 1920 Punkten pro Zeile.

## Die Schriftarten

Der Drucker bringt je nach gewählter Schriftgröße 80,96,136 Zeichen und bei doppelter Breite 40,48 oder 68 Zeichen pro Zeile zu Papier. Als Schriftart kann man wählen zwischen dem normalen ASCII-Standard-Zeichensatz, Kursivschrift und 8 verschiedenen internationalen Zeichensätzen. Außerdem kann man Pica, Elite, komprimierte und gedehnte Schrift sowie Doppeldruck, uni- und bidirektionalen Druck einstellen. Auch ist es möglich, sämtliche Zeichen unterstrichen, hochgestellt (superscript) und tiefgestellt (subscript) darzustellen.

Es existieren einige Einstellmöglichkeiten zum vertikalen Zeilenvorschub. Der Zeilenabstand läßt sich bis zu einer Stufe von 1/144 Inch einstellen. Auch der Seitenvorschub läßt sich variieren. Man bestimmt die Länge des Papiers bis zur Perforation, kann einen Seitenvorschub kurz vor Ende des Blattes programmieren und die Position bestimmen, die die erste Zeile eines Blattes haben soll. Selbstverständlich lassen sich alle Einstellungen abschalten. Auch Tabulatoren lassen sich vertikal und horizontal einstellen, inklusive des linken und rechten Randes. Allein dafür gibt es zehn verschiedene Befehle, die keine Wünsche offen lassen. Mit diesen Kommandos läßt sich jede mögliche Art von Formularen ausfüllen.

Daß dieser Drucker voll grafikfähig ist, braucht eigentlich nicht besonders erwähnt zu werden. Das ist bei heutigen Matrixdruckern schon Standard. Der Ausdruck von Grafiken läßt sich mit einfachen Befehlen steuern. Sie erlauben den Ausdruck mit einfacher Dichte, doppelter Dichte, doppelter Dichte mit doppelter Geschwindigkeit und superhoher Dichte mit doppelter Geschwindigkeit.

## Prädikat: sehr gut

Der Delta 10 ist ein Drucker, der das Prädikat »sehr gut« verdient, bezogen auf seine Druckfähigkeiten. Auch die Druckgeschwindigkeit und die Möglichkeit sowohl gelochtes Endlospapier als auch Endlospapier auf Rollen und Einzelblätter zu verwenden werden positiv gewertet. Abstriche müssen bei der Handhabung und bei dem Bedienungskomfort gemacht werden. Negativ fiel dabei der umständliche Papiertransport bei Verwendung der Tractor-Einheit (zurück nicht möglich) auf.

(gk)

# Seikoshas Größter: Test GP-550A

> Die Seikosha-Drucker stehen seit den Zeiten des schon fast legendären GP-80, der als VC-1515 Drucker zum VC 20 bekannt wurde, im dem Ruf von »Billigdruckern«, zwar grafikfähig, aber ansonsten mit wenig Vorzügen ausgestattet.

Der GP-550A wird diesem Ruf jedoch nur zum Teil gerecht, nämlich hinsichtlich des günstigen Preises. Ansonsten verfügt er über eine Reihe von Eigenschaften, die ihn auf eine höhere Stufe als seine bekannten kleinen Brüder GP-80 und GP-100 stellen.

Da wäre zunächst einmal die Schrift. Der GP-550A kann über Steuerzeichen insgesamt 18 verschiedene Schriftarten anwählen, unter anderem auch Elite, Script und Kursiv. Die Standardeinstellung ist Pica. Außerdem ist Breit- und Schmalschrift einstellbar. Auch Proportionalschrift ist möglich, was bei einem Drucker dieser Preisklasse durchaus nicht selbstverständlich ist.

Der GP-550A verfügt über 8 Drucknadeln, die Zeichen normalerweise in einer 8 x 9-Matrix zu Papier bringen. Daneben ist aber auch ein Schönschreibmodus vorgesehen, in dem die Punkte innerhalb einer 16 x 9- oder 16 x 12-Matrix gesetzt werden. Der Druckkopf wird dabei um einen halben Punktabstand vertikal versetzt, so daß insgesamt 16 sich überlappende Punkte gedruckt werden können. Durch diesen »Correspondence« genannten Schönschreibmodus ergibt sich ein Schriftbild ähnlich einer Schreibmaschine, da die einzelnen Druckpunkte so ineinander übergehen, daß sie auf den ersten Blick nicht mehr als solche zu erkennen sind. Dabei ist es noch möglich, wiederum verschiedene Schriftarten zu verwenden. Durch den Schönschreibmodus reduziert sich allerdings die ohnehin nicht allzu hohe Druckgeschwindigkeit von normalerweise 50 Zeichen pro Sekunde auf die Hälfte.

Wie alle Seikosha-Drucker, verfügt auch der GP-550A über eine Einzelnadelansteuerung. Der Umgang damit ist recht einfach. Nach Empfang eines bestimmten Steuerzeichens interpretiert der Drucker die weiteren ankommenden Zeichen als Grafik-Daten zur Nadelsteuerung. Jedem Bit eines Zeichens ist dabei eine Drucknadel zugeordnet. Ist das betreffende Bit in dem Zeichen gesetzt, dann wird auch die zugehörige Nadel gesetzt und erzeugt einen Punkt. So lassen sich problemlos Sonderzeichen und Symbole erzeugen, aber auch hochauflösende Grafik über eine größere Fläche ist möglich. Dabei können Grafik und Text auch in der gleichen Zeile beliebig gemischt werden.

Neben dem 8-Bit-Grafikmodus gibt es noch einen erweiterten 16-Bit-Grafikmodus, in dem die zusätzlichen acht Grafikpunkte wieder »zwischen» die anderen gelegt werden (wie im Schönschreibmodus). Damit lassen sich wirklich durchgezogene Linien erzeugen, die Grafik wirkt kompakter.

Der Seikosha GP-550A verfügt normalerweise über eine Centronics-Schnittstelle, ist jedoch auch (wie unser Testgerät) mit eingebautem VC-Interface lieferbar. Damit gibt es dann natürlich keine Anschlußprobleme an den C 64 oder VC 20: Einfach das Druckerkabel in den seriellen Port des Computers einstecken, einschalten, und schon ist die Anlage druckfertig. Damit erspart man sich unter Umständen eine Menge Ärger mit Interfaces und Treibersoftware.

Beim ersten Versuch, ein Programm zu LISTen, wird man allerdings feststellen, daß der GP-550A hinsichtlich des Zeichensatzes leider nicht Commodore-kompatibel ist. Es werden nämlich keine Steueroder Grafikzeichen gedruckt. Dafür sind aber die deutschen Umlaute möglich. Der GP-550A läßt sich nämlich per DIP-Schalter zwischen acht verschiedenen nationalen Zeichensätzen umschalten. Für Textverarbeitung und ähnliche Anwendungen wird man dabei sinnvollerweise den deutschen Zeichensatz wählen. Verzichtet man in seinen Programmen auf Grafiksymbole und schreibt Steuerzeichen als CHR$-Anweisungen, dann erhält man mit dem amerikanischen Zeichensatz recht brauchbare Listings.

Die praktische Arbeit mit diesem Drucker gestaltet sich einigermaßen angenehm, sieht man einmal von der niedrigen Druckgeschwindigkeit ab. Die Geräuschentwicklung ist für einen Seikosha erstaunlich zivil. Vom »Kreissägeneffekt« seiner kleinen Brüder ist nicht viel zu merken, obschon er von der Lautstärke her doch etwas über dem Niveau zum Beispiel eines Epson FX-80 liegt.

Papiereinzug und Farbbandwechsel sind mit wenigen Handgriffen und völlig problemlos erledigt. An Bedienelementen ist neben den üblichen Tasten für Zeilen- und Seitenvorschub eine zusätzliche Taste mit der Bezeichnung »Stop/Reset« vorhanden. Mit dieser Taste kann ein Druckvorgang unterbrochen und der Drucker wieder in den Einschaltzustand versetzt werden. Dadurch spart man sich das lästige Aus- und Einschalten des Druckers nach einem Fehler.

Insgesamt gesehen hat der Seikosha GP-550A im Test einen durchaus positiven Eindruck gemacht. Neben seinem günstigen Preis (1098 Mark) besticht er vor allem durch seine Grafikfähigkeiten und durch die variablen Schriftarten. Nachteilig sind sicher seine vergleichsweise geringe Druckgeschwindigkeit und die fehlende Zeichensatz-Kompatibilität zum C 64. Den letzten Nachteil hat er aber mit den meisten Druckern seiner Leistungsklasse gemein.

(ev)

# Roland DXY-101 – ein Flachbettplotter im DIN-A3-Format

> Die Entscheidung, ob Trommelplotter oder Flachbettplotter hängt vom Anwendungsfall ab. Der DXY-101 ist ein Flachbettplotter und besitzt nicht nur zwei Schnittstellen, sondern auch einen großen Befehlsvorrat.

Erfaßt ein Computer physikalische Meßwerte, so fallen jedesmal eine Unmenge an Zahlen an.

Ein gewöhnlicher Drucker erstellt Zahlentabellen, die zumeist sehr unübersichtlich sind. Wesentlich besser erkennt man Zusammenhänge, wenn man sie optisch aufbereitet und in Kurven darstellt. Nun können auch Matrixdrucker Grafiken erstellen. Sie haben dabei jedoch einige gravierende Nachteile. Sie sind selten in der Lage, farbig zu drucken. Auch läßt sich das Papier nicht in beide Richtungen bewegen, eine Grafik kann dann nur von oben nach unten abgearbeitet werden. Ein dritter Punkt betrifft die Darstellung. Matrixdrucker setzen lediglich Punkte nebeneinander, während Plotter zusammenhängende Linien zeichnen. So gesehen, gibt es eine ganze Reihe von sinnvollen Anwendungsgebieten für Plotter.

Der Roland DXY-101 ist der kleinste Vertreter dieser Reihe im Roland-Programm. Außer dem Preis (zirka 2 000 Mark) sind auch einige Fähigkeiten interessant. Als erstes fallen die beiden Schnittstellen an der Rückseite des flachen Plotters auf, eine Centronics- und eine RS232-Schnittstelle. Somit können Sie als 64'er Leser auch die im Heft 7 abgedruckte Treibersoftware hervorragend einsetzen.

Der DXY-101 wird mit einem Handbuch geliefert, das zwar alle möglichen Befehle beschreibt und auch zu jedem Befehl ein Beispiel enthält, jedoch in Englisch. Die abgedruckten Listings der kleinen Demonstrationsprogramme sind nicht für den C 64 geschrieben, lassen sich jedoch leicht anpassen. Die ebenfalls mitgelieferte Diskette enthält ein Demonstrationsprogramm, mit dem man sich jeden Befehl des Plotters einzeln vorführen lassen kann.

Ein großer Vorteil des Plotters ist sein Format. Mit DIN A3 läßt sich schon mehr anfangen als mit dem oft nicht ausreichenden Format A4. Das Papier, das möglichst glatt sein sollte, wird an beiden Seiten von zwei flexiblen Magnetstreifen gehalten. Es gibt keine Probleme beim Einlegen und Wechseln. Das gilt ebenso für die Zeichenstifte, die in verschiedenen Farben erhältlich sind. Die gelieferten Filzstifte empfanden wir jedoch als etwas zu dick. Außerdem verursachten sie ein gut wahrnehmbares Schleifgeräusch beim Plotten. Aber es gibt andere, auch feinere Stifte, die sich mit den mitgelieferten Spezialhalterungen einfach installieren lassen.

Der Befehlsvorrat des DXY-101 ist, gemessen an der Preislage, ausreichend groß. Neben den üblichen Befehlen zum absoluten und relativen Zeichnen und Bewegen ohne Zeichnen sind auch unterbrochene Linien möglich; der Abstand zwischen den Strichen ist frei wählbar. Auch x- und y-Achsen (mit und ohne Teilung) lassen sich mit einem Befehl erzeugen. Selbstverständlich können auch Buchstaben und Zahlen geplottet werden. Alle Zeichen können 16 verschiedene Größen annehmen, wobei nicht nur der Abstand zwischen ihnen, sondern auch die Schreibrichtung variabel ist. Zusätzlich gibt es noch einige Sonderzeichen, die zur zusätzlichen Begrenzung von Zeichnungen und Kurven eingesetzt werden können. Eine ganze Reihe von Befehlen befassen sich mit dem Zeichnen von Kreisen und Kreisausschnitten. Allerdings gibt es kein Kommando um Ellipsen zu zeichnen. Ganz auf selbst gestrickte Routinen kann man also nicht verzichten, will man den Plotter voll ausnutzen. Jedoch kann man sich eine kniffelige Aufgabe sparen: die Schraffur von Rechtecken. Auch sie kann mit nur einem Befehl ausgeführt werden.

## Technische Daten

Der DXY-101 weist einen effektiven Plottbereich von 37 mal 26 cm auf, wobei der Stift sich mit einer Geschwindigkeit von bis zu 180 mm/sec bewegen kann. Seine Schrittweite beträgt 0,1 mm pro Schritt bei einer Wiederholgenauigkeit von 0,3 mm oder weniger. Die Positionierungsgenauigkeit liegt bei 1%.

Aufgrund seiner Größe ist der DXY-101 in der Lage, auch komplexere Zeichnungen aufs Papier zu bringen. Mit entsprechend feinen Stiften könnten allerdings feinere Linien gezogen werden. Die Filzstifte sind nicht so optimal. Die mechanische Stabilität der Führung ist für diese Preisklasse (um 2000 Mark) und Konstruktionsart durchaus ausreichend, auch wenn ab und zu leichte Resonanzen auftauchen können, die sich auf der Zeichnung durch leichtes Zittern bemerkbar machen. Sein Befehlsvorrat läßt nur wenig Wünsche offen und seine Schnittstellen lassen einen Anschluß an fast jeden Computer zu.

(gk)

# Schreibmaschine – anschlußfertig für den C 64

> Die Industrie merkt schon, wo der Hase hinläuft. Der C 64 mausert sich langsam zum Bürocomputer. Und für Bürocomputer, speziell für den Schriftverkehr im Büro, brauchen viele einen Drucker mit der Qualität einer Schreibmaschine.

Typenradschreibmaschinen sind in der Schriftqualität mit konventionellen Schreibmaschinen vergleichbar, weil auch sie für jedes Zeichen eine Type zur Verfügung halten. Diese Typen sind sternförmig auf dem Typenrad angeordnet, das sich leicht auswechseln läßt. Je nach Modell gibt es eine ganze Reihe von Typenrädern, für jede nur denkbare Schriftart ein anderes. Auch Räder mit Sonderzeichen (mathematische und andere Sonderzeichen, verschiedene Sprachen, etc.) gibt es. Typenraddrucker eignen sich auf Grund ihres guten Schriftbildes für Anwender, die optisch einwandfreie Schriftstücke verlangen.

Doch wir wollen in dieser Ausgabe nicht die Schreibmaschine als solche vorstellen, sondern den Anschluß der Schreibmaschine an den Computer, in diesem Fall der an den C 64.

Die Olympia Werke bieten die Compact 2 zwar als anschlußfertig für einen Computer an, jedoch nicht für den C 64 mit seiner seriellen Schnittstelle. Den Einbau einer seriellen Schnittstelle muß dann auch der Fachhandel vornehmen. In unserem Fall macht das für Olympia die Firma iti-Datentechnik in Leonberg. Sie baut eine Schnittstelle in das Gehäuse ein, so daß man lediglich das normale serielle Kabel, das auch zum Anschluß der Floppy VC 1541 dient, einstecken muß und schon ist die Verbindung hergestellt. Die Spannungsversorgung geschieht dabei über die Schreibmaschine. Intern hat die Compact 2 eine parallele Centronics-Schnittstelle, so daß auch bei einem eventuellen Systemwechsel eine andere Schnittstelle leicht eingebaut werden kann.

Das Interface ist, natürlich, Commodore-kompatibel. Das heißt, daß der Drucker über die Geräteadresse 4 angesprochen werden kann. Der C 64 sendet normalerweise kein Auto-Line-Feed Signal (das macht er nur, wenn man eine Primäradresse größer als 128 nimmt, also zum Beispiel OPEN 132,4). Um trotzdem mit »normalen» Primäradressen arbeiten zu können, muß nach dem Einschalten der Olympia die ON-LINE-Taste und die Halbzeilentaste gedrückt werden. Damit wird automatisch bei einem Wagenrücklauf ein Zeilenvorschub durchgeführt, solange der Drucker eingeschaltet ist.

Beim Einschalten des Gerätes kommt man in den GroB-/Kleinschrift-Modus, genauer gesagt den »Cursor-Down-Modus«. Durch Verwendung der Sekundäradresse 7 wird in den »Cursor-Up-Modus« geschaltet, das heißt Großbuchstaben werden als Kleinbuchstaben gedruckt und umgekehrt. Diese zwei Betriebsarten können ausgetauscht werden. Auch die Geräteadresse ist durch Trennen einer Brücke auf der Schnittstellenplatine auf 5 einstellbar.

Die Frage vor allem für uns Commodore-Besitzer ist natürlich, ob man sich auch Listings ausdrucken lassen kann. Vielleicht will sich dieser oder jener in seiner Freizeit Programme schreiben und möchte sich zum Ausdrucken nicht extra einen Matrixdrucker kaufen. Aber keine Sorge, das funktioniert ohne große Probleme. Man darf dabei aber nicht vergessen, daß ein Typenraddrucker nicht grafikfähig ist. Also Steuerzeichen können nicht dargestellt werden, wie man es gewohnt ist. Vergessen wurden sie jedoch auch nicht. Dieses Problem wurde so geregelt, daß vor jedem Steuerzeichen im Listing ein »I« vorangestellt wird, gefolgt von einem Buchstaben, der so auch im Listing am Bildschirm zu sehen ist, wenn man in den Groß-/Kleinschriftmodus schaltet. Das ist akzeptabel und eine gute Idee.

Viele Funktionen der Schreibmaschine können durch Einsatz von Steuersignalen auch vom Computer aus durchgeführt werden. Dazu gehören unter anderem der Hupton, die Zeilenschaltung, der Formularvorschub, der Wagenrücklauf, Ein- und Ausschalten der Sonderzeichenebene, mit der einige weitere Zeichen gedruckt werden können. Mit Sondersteuerzeichen (durch Senden verschiedener Escape-Signale) läßt sich die Schreibdichte (10,12,15 Zeichen/Zoll) umschalten, aber auch die Zeilenschaltung (1-,2-, 1½-zeilig) und die Halbzeile positiv und negativ (zum Hoch/Tiefstellen von Zeichen um eine halbe Zeile) einstellen.

Werden innerhalb von Strings Commodore-Steuerzeichen verwendet, so führen auch sie eine Funktion aus: CLR = Formfeed, HOME . = Löschen des Schnittstellenspeichers (Puffer), CURSOR links = Leerschritt, CURSOR rechts = Rückschritt, RVS ON/OFF = Sonderzeichenebene ein-/ausschalten.

Die Olympia Compact 2 ist eine professionelle Schreibmaschine, die man nicht nur an den C 64 anschließen, sondern auch als reine elektronische Schreibmaschine einsetzen kann. In Verbindung mit dem C 64 und einer Floppy erhält man ein System, das den Weg zur wirklich professionellen Büroarbeit ebnet. Die leichte Handhabung und Bedienbarkeit der Compact 2 und der Preis von zirka 1500 Mark lassen dann auch nur wenig Wünsche offen.

(gk)

Info: iti-Datentechnik, Telemannstraße 18, 7250 Leonberg, Tel.: 0 7152-63 05

# Marktübersicht: Drucker für C 64/VC 20

> Das Angebot an Druckern und Plottern für Homecomputer wird beinahe von Woche zu Woche umfangreicher. Diese Marktübersicht soll unseren Lesern helfen, sich einen Weg durch den »Druckerdschungel« zu bahnen.

Zwei Kategorien von Druckern und Plottern fehlen in dieser Übersicht. Das sind zum einen Geräte aus Preisklassen, die für den C 64-Anwender (und erst recht für den VC 20-Benutzer) nicht mehr interessant sind. Sie werden also nach Superdruckern für 5000 Mark ebenso vergeblich suchen wie nach DIN-A3-Plottern im fünfstelligen Preisbereich. Außerdem haben wir generell Drucker nicht berücksichtigt, die nur mit unvertretbar großem Aufwand an den C 64/VC 20 angeschlossen werden können.

Sie können also davon ausgehen, daß alle in dieser Marktübersicht vertetenen Drucker und Plotter sich ohne größere Probleme an den C 64/VC 20 anschließen lassen. Eine Reihe von Geräten ist sogar direkt über den seriellen Bus anschließbar. Bei diesen Geräten ist in der Rubrik »Interface« dann »C 64/VC 20« vermerkt.

Die Liste der direkt zum C 64/VC 20 kompatiblen Drucker ist wahrscheinlich nicht vollständig, da ständig neue Drucker mit bereits eingebautem VC-Interface auf den Markt kommen. An dieser Stelle sind daher auch die Anbieter entsprechend umgerüsteter Drucker aufgefordert, uns entsprechende Informationen zukommen zu lassen. Diese Marktübersicht soll in der nächsten Ausgabe noch um weitere, hier nicht berücksichtigte Geräte ergänzt werden.

Geräte mit Centronics-Schnittstelle setzen ein spezielles Interface und die entsprechende Treibersoftware voraus, um sie an den C 64/VC 20 anschließen zu können.

Entgegen einer unter Anfängern weit verbreiteten Meinung ist der serielle Port bei den Commodore-Computern nicht mit einer RS232C-Schnittstelle identisch. Allerdings sind im Betriebssystem schon die Routinen zur Verwaltung einer RS232C-Schnittstelle vorhanden, so daß ein solcher Anschluß (über den User-Port) nicht allzu schwer zu realisieren ist.

Ein wichtiger Punkt bei der Auswahl des Druckers ist der Zeichensatz. Nur Drucker, bei denen in der Rubrik »Zeichensatz« der Vermerk »Commodore« vorkommt, können tatsächlich ohne Schwierigkeiten den gesamten Commodore-Zeichensatz drucken. Geräte mit dem Vermerk »ASCII« können ebenso wie Typenraddrucker nur die Standard ASCII-Zeichen drucken, also keine Grafiksymbole oder Steuerzeichen. Ist der Drucker grafikfähig oder können Zeichen selbst definiert werden, dann lassen sich allerdings auch diese speziellen Zeichen per Software simulieren.

Zum Schluß sei noch gesagt, daß alle Preisangaben nur ungefähre Werte sind. Wer sich bei verschiedenen Anbietern informiert, kann unter Umständen günstiger einkaufen. (ev)

Anbieter-Liste Drucker & Plotter

Die hier aufgeführten Adressen sind vielfach keine direkten Bezugsquellen. Sie erhalten aber zumindest Datenblatt und Händlernachweis für den von Ihnen ins Auge gefaßten Drucker oder Plotter.

Adcomp Datensysteme, Olgastr. 15, 8000 München 19; Brother International GmbH, Im Rosengarten 14, 6368 Bad Vilbel; Canon Deutschland GmbH, Postfach 1209, 8033 München-Martinsried; Casio Computer, Kieler Str. 212, 2000 Hamburg 54; Citizen Vertrieb Deutschland, MVB, Brüder-Grimm-Str. 5, 6408 Ebersburg; CItoh Deutschland GmbH, Königsallee 21, 4000 Düsseldorf 1; Commodore Deutschland, Lyoner Str. 38, 6000 Frankfurt 71; Epson Deutschland GmbH, Am Seestern24,4000Düsseldorf 11; MannesmannTally GmbH, Postfach 2969, 7900 Ulm; Micro Enterprises, Prinzregentenstr. 78, 8000 München 80; Mirwald Elektronik, Fasanenstr. 8, 8025 Unterhaching; NEC Europa, Wiesenstr. 148, 4040 Neuss; Neumüller GmbH, Eschenstr. 2, 8028 Taufkirchen; OKI Electric, Emanuel-Leutze-Str. 8, 4000 Düsseldorf 11; Olympia International, Postfach 960, 2940 Wilhelmshafen; Quen-Data GmbH/WELCO, Paul-Ehrlich-Str. 8,6074 Rödermark; Robotron-Vertrieb, Unitronic GmbH, Münsterstr. 338; 4000 Düsseldorf 30; Seikosha-Vertrieb, Microscan GmbH, Postfach 601705; 2000 Hamburg 60; Star Europe GmbH, Frankfurter Allee 1-3, 6236 Eschborn; Synelec Datensysteme GmbH, Lindwurmstr. 117, 8000 München 2; Watanabe GmbH, Arzberger Str. 10, 8036 Hersching.

# So sieht der Output aus

> Auf dieser Seite werden die verschiedenen Schriftbilder der getesteten Matrixdrucker sowie zwei Zeichnungen der beiden Plotter gegenübergestellt. Es konnten nicht alle Möglichkeiten von jedem Drucker oder Plotter gezeigt werden. Doch können Sie sich vielleicht auch so schon einen kleinen Eindruck machen.

# The Blade of Blackpoole – die Lösung

> Im Gegensatz zu manchen Actionspielen, die schnell langweilig werden, sind Abenteuerspiele wie »The Blade of Blackpool« eine lohnende Anschaffung. Sie garantieren lang anhaftende Spielfreude, da die Aufgabe oft sehr schwierig ist. Für Computerbesitzer mit weniger Freizeit habe ich diese Lösung entworfen.

Die eigentliche Spannung eines Abenteuerspiels liegt natürlich darin, die Lösung selbst zu erarbeiten. Das dauert manchmal viele Monate, da einige der geforderten Lösungsschritte vollkommen unlogisch und nur durch reine Intuition (die Verwendung eines Monitors lehne ich ab) lösbar sind. So wird beispielsweise während der Suche nach dem Schwert Myraglym an einer Stelle verlangt, Bier in einen Fluß zu kippen. Wer dann keinen Maßkrug mit Bier aus einer Gaststätte bei sich hat, ist aufgeschmissen und muß von vorne beginnen.

Aus diesem Grund habe ich die Anleitung so gestaltet, daß im ersten Teil, der Hilfsliste, (Bild 1) nicht gleich alles verraten wird. Die Hilfsliste gibt lediglich Aufschluß darüber, wie ein spezielles Hindernis überwunden werden kann. Zum Auffinden der jeweiligen Position dient der zweite Teil, die Lagekarte (Bild 2). Jedes Feld ist mit einer Nummer und einem Buchstaben versehen. Sie geben einen Anhalt, unter welchem Punkt in der Hilfsliste nachgeschaut werden kann.

Der dritte Teil (Bild 3) besteht aus einer »Schritt-für-Schritt-Lösung«, mit der das Abenteuer innerhalb von zwei Stunden lösbar ist. Von der Verwendung dieses Teiles möchte ich dem ambitionierten Abenteurer eigentlich abraten, denn ist das Abenteuer erst gelöst, verliert das Spiel vollkommen seinen Reiz.

Vorab möchte ich allerdings noch einige allgemeine Hinweise zu »The Blade of Blackpool« geben: Die Aufgabe des Abenteurers besteht darin, das lange verschollene Schwert Myraglym zu finden und in eine Gaststätte nahe dem Ausgangspunkt zu bringen.

Erst dann ist das Abenteuer gelöst (500 von 500 möglichen Punkten). Dazu ist äußerst selten reine Gewalt notwendig (was mir sehr gut gefällt). Wenn Waffen gebraucht werden, dann findet man sie, beziehungsweise erhält sie durch einen magischen Spruch. Das Spiel ist eigentlich nur mit viel unkonventionellem und einfallsreichem Denken zu lösen. Der »dann hau ich mich eben durch«-Typ wird vom Programm meist mit höhnischen Bemerkungen wie »we are a little violent today? abgespeist. Auch sonst sind die Bemerkungen oft mit Spott gewürzt, zum Beispiel:»you might fall and hurt yourself« beim Versuch einen Baum zu erklimmen. Die meist gegebene Antwort ist aber »that had no effect« und das hat mich manchmal fast zum Wahnsinn getrieben.

Abschließend seien hier noch ein paar Tips vermerkt:

1. Es wird viel gelaufen, also keinen Rückweg scheuen, beziehungsweise einen Weg zweimal gehen, um alle Sachen zu transportieren.
2. Vorsichtig mit allen Zauberwörtern umgehen. Ab einer bestimmten Spielstufe hat das Wort »Regnilo« verheerende Wirkungen, denn es werden alle Besitztümer wieder an ihren ursprünglichen Ort gezaubert.
3. Das Spiel hat kein Eigenleben (im Gegensatz zu »The Hobbit«), Gegenstände können beliebig weggelegt und später wieder geholt werden. Es gibt keine Kobolde, die Gegenstände stehlen.
4.  Immer gelassen bleiben, denn es ist nur ein Spiel, wenn auch ein sehr schönes.

(Arnd Wängler/aa)

# House of Usher

> Wenn Sie gute Spiele für wenig Geld suchen — wir haben eins gefunden

Bei diesem Spiel aus dem Hause Kingsoft handelt es sich um ein Geschicklichkeitsspiel, bei dem der Titelheld die geheimnisvollen Rätsel des Hauses Usher lösen soll. Nach einem grafisch sehr schön gemachten Vorspann (Bild), in dem die Spielfigur das Haus betritt, kann er sich von der Empfangshalle aus eine der acht Türen (Nummer 2 bis 9) aussuchen. Hinter diesen Türen verbirgt sich jeweils ein Raum, in dem eine Aufgabe zu lösen ist.

Der letzte Raum vor der Schatzkammer (Nummer X) kann jedoch nur betreten werden, wenn vorher alle anderen Aufgaben gelöst wurden. Dabei muß der Titelheld sich vor Monstern retten, Abgründe und Falltüren überspringen, herabfallenden Felsen oder Kanonenkugeln ausweichen.

Bemerkenswert ist, daß nicht nur die Reaktionsschnelligkeit des Spielers, sondern auch Übersicht und Planung gefordert werden. Obwohl die Spielidee nicht ganz neu ist (Jumpman und Miner 2049er lassen grüßen), kann man sagen, daß »House of Usher« durch gute Grafik und Ton gefällt und lange Zeit interessant bleibt, da die verschiedenen Aufgaben nicht gerade einfach zu lösen sind. Das Spiel kostet nur 39 Mark auf Kassette oder Diskette.

(Manfred Kohlen/aa)

# Fire-Galaxy

> Man greife eine alte Idee auf, füge noch einige Schwierigkeitsgrade hinzu — fertig ist das neue Spiel. Es läuft auf dem VC 20 mit 16 KByte.

Bereits nach einigen Sekunden ist dem versierten Computerspieler klar, daß es sich um das altbekannte »Scramble« handelt. Allerdings wurde die Version Fire-Galaxy auf acht Spielstufen erweitert. Bei dem Spiel Scramble (Fire-Galaxy) dringt man möglichst tief in eine Höhle ein, in der die verschiedensten Feinde lauern. Diesen muß man ausweichen oder sie abschießen. Weiterhin ist zu beachten, daß man möglichst viele Treibstofftanks abschießt, um nicht infolge Treibstoffmangels abzustürzen. Dies wird natürlich immer schwieriger, je weiter man in die Höhle vordringt, denn man muß sich immer mehr darauf konzentrieren, den Angreifern auszuweichen.

Wer ein »Schlaftabletten-Reaktionsvermögen« besitzt, sollte sich entweder dieses Spiel nicht kaufen oder die F7-Taste mit einem Tesastreifen festkleben. Mit diesem Trick läßt sich das Spiel auf Zeitlupen-Tempo reduzieren. Wenn Sie schon beim Festkleben sind, dann können Sie auch den Feuerknopf am Joystick mit Tesafilm fixieren, denn diesen müssen Sie während der gesamten acht Spielstufen permanent drücken, was bereits nach kurzer Zeit schmerzhaft wird.

Auffallend an diesem Spiel ist nicht die Spielidee, sondern die wirklich ausgezeichnete Grafik und der gute Sound. Hier werden die grafischen und die musikalischen Fähigkeiten des VC 20 voll ausgeschöpft. Daß ein Spiel, das den VC 20 so gut nutzt und zudem ziemlich schnell ist, in Maschinensprache geschrieben wurde, versteht sich fast von selbst.

Fire-Galaxy von Kingsoft ist wirklich ein ausgezeichnetes Spiel, das sich jeder leisten kann. Denn es kostet (man glaubt es kaum!) nur 39 Mark.

(C. Q. Spitzner & B. Carti/ev)

# Druckfehlerteufelchen

## Adreß- und Telefonregister, 5/84. Seite 64

In Zeile 1840 sollte nicht GOTO 610, sondern GOTO 510 stehen. (Gert Marx)

## Abgerechnet wird mit dem C 64, 8/84, Seite 68

Mit Interesse habe ich den o.g. Artikel in Ihrer Zeitschrift gelesen. Da sich der Autor mit diesem Programm wegen der Thematik zwangsläufig an Gewerbetreibende wendet, fühle ich mich veranlaßt, einige Bemerkungen zu machen.

Im Text wird unter der Überschrift »Der feine Unterschied« auf die umsatzsteuerliche Behandlung von Portogebühren hingewiesen.

Die Deutsche Bundespost ist mit einem Teil ihrer Aufgaben (Postbeförderung) hoheitlich tätig und daher nicht Unternehmer im umsatzsteuerlichen Sinne, daher sind diese Umsätze der Post nicht steuerbar. Der gewerbliche Unternehmer ist - von Spezialfällen abgesehen - bei Weiterbelastung des Portos auch mit diesem Betrag umsatzsteuerpflichtig. Im Umsatzsteuerrecht wird die Portobelastung als Nebenleistung zur Hauptleistung (der Warenlieferung) gesehen und teilt deren Schicksal, das heißt der für die Lieferung geltende Steuersatz ist in der Regel auch für berechnete Portokosten zu erheben und an das Finanzamt abzuführen.

Im Interesse Ihrer gewerblichen Leser, für die eine Anwendung in Frage kommt, halte ich zur Vermeidung von leichtfertigen Steuerverkürzungen eine Richtigstellung für notwendig.

Zeile 60400 lautet:
...*10↑ur+.5))/10↑ur)

(Rainer Voß, Steuerberater)

## Kurvendiskussion in hires, 7/84, Seite 118

Ich möchte hiermit auf einen von mir lang gesuchten Druckfehler aufmerksam machen. Er befindet sich auf Seite 118, Zeile 114.
Original:
114 SYS49629.Y+.5.X/8.XAND255:SYS49744.2↑PEEK(16122)
Richtig:
114 SYS49629,Y+.5,X/8,XAND255:SYS49744,2↑РЕКК(16722)

(Thomas Lade)

## Alle Tasten-, Zeichen- und Steuercodes, Teil 2, 5/84, Seite 107

Unter »Wo steht was?« hat sich ein Fehler eingeschlichen. Unter Punkt (4) muß stehen:
60536 für 64632
Dasselbe gilt für Zeile 160.
64632 = $ FC78
60536 = $ EC78
Der Fehler ist also schon in der Programmerstellung entstanden, als sich für ein E ein F eingeschlichen hat.

(Willi Heusser)

## Pac-Boy, 8/84, Seite 89

Das Abspeichern des Datenblockes »DATA-PAC« auf Datasette hat sich leider als schwieriger herausgestellt, als angenommen. Ein Abspeichern ist aber dennoch folgendermaßen möglich:

Das Listing »DATA-PAC« wird wie folgt abgeändert...

<pre>310 poke 56,128:clr:rem speicherplatz fuer ma reservieren
500:
510:
520:
530:
540
550:
560 for t=0 to 5937:read a :rem ma in Speicher bringen
570 poke 32768+t,a :next</pre>

Diese Änderung bewirkt, daß der Datenblock nun im Speicherbereich 32768 aufwärts abgelegt wird und weiterbearbeitet werden kann.

Nachdem sich DATA-PAC selbst gelöscht hat, ist folgendes Listing einzugeben...

<pre>0 data 169,128,133,21,169,0,133, 20,169,48,133,88,169,0,133,87,162,23,160
1 data0,177,20,145,87,136,208, 249,230,21,230,88,202,16,240,169,0,133,251
2 data169,48,133,252,169,3,162,1,160,3,32,186,255,169,6,162,70,160,192,32
3 data189,255,169,251,162,0,160,72,32,216,255,96,77,65,45,80,65,67,0
4 for t= 0 to 76:reada:poke 49152 + t,a:next
5 sys 49152</pre>

Startet man dieses Programm mit RUN, so wird das Programm »MA-PAC« auf Kassette abgespeichert. Damit das gesamte Programm ablauffähig ist, muß außerdem noch die Zeile 40 im Listing »PAC-BOY« zu

<pre>40........:load "ma-pac",1,1</pre>

abgeändert werden. Abschließend sei noch gesagt, daß die Programme »PAC BOY« und »MA-PAC« auf der Kassette hintereinander abgespeichert werden sollten.

(H. Schlangmann)

## Spring Vogel, 9/84, Seite 82

Das beste Listing das mir in meiner Laufbahn als Computerfreak untergekommen ist, ist jenes aus der Ausgabe 9/84, Seite 82. Das Druckfehlerteufelchen hat jedoch auch bei diesem Listing zugeschlagen. Damit das Programm korrekt läuft sollte man folgendes ändern:

Die Zeilennummern 59999, 60199, 60299, 60399, 60499 umändern in 60000, 60200, 60300, 60400 60500.

Nach Zeile 60030 sollte man noch folgende Zeile einfüigen: 60100 REM BILD 2. Das Zeichen »_« in den Zeilen 146050, 48041, 49096 und 49160 bedeuted »←«.

Ansonsten stimmt alles beim »SPRING VOGEL«, und es wurde bei mir sofort zum Listing des Jahres gewählt!

(Lettner Gerhard)

## Merge für C 64,10/84, Seite 105

2. muß wohl richtig lauten:
POKE 43,(PEEK(45) + 256* PEEK(46)-2) AND 255 &lt;RETURN&gt;
POKE 44,(PEEK(45) + 256* PEEK(46)-2)/255 &lt;RETURN&gt;
dann funktioniert es.

(Klaus de Boor)

## Index-sequentielle Datei, 9/84, Seite 56

Folgende Zeilen müssen korrekt lauten: 3350 IF R$ = "L" THEN GOSUB 4000: GOTO 3220
3340 IF R$ = "A" THEN GOSUB 12000: GOTO 3240.

## Das macht den Kleinen größer, 9/84, Seite 112

Die beiden Bildunterschriften wurden vertauscht.

# Der Commodore 64 wird zum PC – mit Vizawrite 64

> Das Textverarbeitungsprogramm »Vizawrite 64« ist mit Leistungsmerkmalen ausgestattet, die sehr nahe an Wordstar herankommen. Dabei kosten Vizawrite und Computer zusammen weniger als ein vergleichbares Programm für einen Personal Computer.

Sie haben sich sicherlich schon gefragt, worin der Unterschied zwischen einem »Heimcomputer« wie dem C 64 und einem Personal Computer wie dem IBM-PC liegt. Das Computerlexikon definiert einen Heimcomputer als einen preislich zwar günstigen, aber wenig leistungsfähigen Computer für Heim- und Hobbyanwendungen. Ein Personal Computer ist in diesem Lexikon als ein hauptsächlich am Preis (5000 bis 15 000 Mark) und der fast unbegrenzten Erweiterungsfähigkeit erkennbarer Computer beschrieben.

Rein technisch gesehen ist der Unterschied gar nicht so frappierend. Ein Vergleich fällt in manchen Bereichen (Grafik, Farbe, Ton) nicht selten zugunsten des Heimcomputers aus. Derartige Zusatzfunktionen sind beim PC, wenn überhaupt, oft nur mit sehr viel Geld zu realisieren. Anders sieht es bei der Verfügbarkeit sehr leistungsfähiger Anwenderprogramme aus, hier haben die PCs die Nase vorn. Ob Datenbanken (dBase II), Textverarbeitung (Wordstar, Word) oder Tabellenkalkulation (Multiplan), jedes dieser Programme ist ein Spitzenprodukt. Mit »Vizawrite 64« wurde ein Programm geschrieben, das den Abstand zwischen einem »Heimcomputer« und den PCs weiter verringert. Der Preisvorteil der Heimcomputer ist geblieben.

»Vizawrite 64« ist mit der lange erwarteten deutschen Version in der Lage, den deutschen Zeichensatz auf dem Bildschirm darzustellen. Eine unabdingbare Forderung an ein Textverarbeitungsprogramm für den deutschen Markt wurde damit erfüllt. Die deutsche Version ist als Modul und auf Diskette erhältlich. Beide Versionen arbeiten mit einem oder zwei Laufwerken und sogar der Datasette zusammen. Das deutsche Handbuch (56 Seiten) macht insgesamt einen guten Eindruck und beschreibt ausführlich die enormen Fähigkeiten dieses Programms.

Diese Fähigkeiten wollen wir nun etwas genauer betrachten. Nach dem Laden (beziehungsweise Einschalten, bei der Modulversion) erscheint das Hauptmenü (Bild 1). Hier hat man die Auswahl zwischen dem Erstellen einer neuen Textdatei, dem Laden einer bestehenden Textdatei oder des Disketteninhalts und dem Senden von DOS-Befehlen (New, Scratch ...). Vom Hauptmenü aus wird auch, nach getaner Arbeit, das Programm verlassen. Zum Anwählen der einzelnen Aktivitäten dienen die Funktionstasten.

Zum Schreiben einer neuen Textdatei oder nach dem Laden eines bestehenden Dokuments wird in den Textverarbeitungsmodus geschaltet (Bild 2).

Das zur Verfügung stehende Arbeitsfeld ist 20 Zeilen hoch und hat eine variable Breite von bis zu 240 Spalten. Auf dem Bildschirm erscheinen aber immer nur 40 Zeichen. Ab dem 38. Zeichen wird der Text horizontal verschoben (scrolling). Besitzer eines PCs kontern hier: »Aber mein PC kann jederzeit 80 Zeichen pro Zeile darstellen.« Stimmt, aber wenn man bedenkt, daß selbst Wordstar in der Regel nur 65 Zeichen benutzt, ist dies nicht unbedingt ein Nachteil. Auch hat nicht jeder Computerbesitzer einen Monitor, der die notwendige Auflösung für 80 Zeichen bereitstellen kann, sondern einen ganz normalen Fernseher. Für diesen sind aber 40 Zeichen pro Zeile mit horizontalem Verschieben geradezu ideal. Daß der ganze Text trotzdem, ohne lästiges Hin- und Herfahren mit dem Cursor überschaubar ist, ermöglicht die »WIDTH = Bildschirmbreite«-Funktion. Auf Tastendruck (CBM+w) wird der gesamte Text auf 38 Zeichen umformatiert. Der Zeitbedarf für diese Umformung ist fast nicht meßbar.

Alle Informationen des Textverarbeitungsmodus stehen in den oberen drei und der untersten Zeile. Dort erscheinen Fehler-, Systemmeldungen, die Seiten-, Zeilen- und Spaltennummern sowie der Name des Dokuments. Die vierte Zeile ist die sogenannte Formatzeile. Sie bestimmt das Aussehen des Textes. Hier werden Textbreite, Tabulatoren und die später noch beschriebenen Kontroll-Marken festgelegt. Die Formatzeile ist an jede beliebige Stelle im Text kopierbar (CTRL + f). Sie gibt dem Text ab dort ein neues Aussehen.

»Vizawrite 64« ist ein bildschirmorientiertes Textverarbeitungsprogramm. Alle Texte werden formatiert eingegeben und erscheinen praktisch so auf dem Bildschirm, wie sie später auf dem Papier stehen. Im Gegensatz zu anderen Textverarbeitungsprogrammen wird kein Wort am Zeilenende abgeschnitten, sondern statt dessen in die nächste Zeile übernommen (word wrap). Jedes Dokument kann beliebig viele Seiten haben, die einer späteren Druckseite entsprechen. Bei einem freien Arbeitsspeicher von 34000 Zeichen finden so zehn »normal« beschriebene Schreibmaschinenseiten Platz. Das ist wesentlich mehr als bei anderen Programmen.

## Schnelles Arbeiten möglich

Vizawrite ist schnell. Wir haben den Test gemacht und den gesamten Speicher gefüllt. Dabei gab es keine Probleme mit der Geschwindigkeit. Selbst das letzte Zeichen wird ohne Verzögerung angenommen. Beachtlich gering ist auch der Zeitverbrauch beim Umformatieren. Von 40 auf 80 Zeichen haben wir nur eine Sekunde gemessen. Der IBM-PC braucht dafür, zusammen mit Wordstar, mehrere Minuten Qe nach Länge des Textes).

Die Befehle des Textverarbeitungsmodus bestehen im wesentlichen aus drei Hauptgruppen:

1.	Die Systembefehle wie Laden, Finden, Drucken und vieles mehr.
2.	Die Formatsymbole wie Tabulatoren und Befehle zur Druckersteuerung.
3.	Die Funktionstasten.

Alle Befehle und Funktionen von »Vizawrite 64« können zu jeder Zeit und an jeder Stelle des Textes aufgerufen werden. Dazu ist kein langwieriger Marsch durch verschiedene Menüs notwendig. Die Befehle sind einprägsam und logisch. So bedeutet beispielsweise CBM + s (s für SAVE), daß der Text abgespeichert wird. Obwohl die Befehle schnell erlernbar sind, kann man sich in der Anfangszeit mit einem Trick behelfen: Das mitgelieferte Programm »Hilfe« wird gemäß der Anleitung in die sogenannte »work page« oder Arbeitsseite geladen. Die Arbeitsseite ist ein separater Textspeicher, aus dem oder in den Texte kopiert werden. Alles, was der Anwender dann noch wissen muß, ist der Befehl CBM + g. Beantwortet er die Frage nach der anzuzeigenden Seite mit »w«, so befindet er sich auf der »work page«. Dort kann er sich dann über alle Befehle und Funktionen informieren.

Die Systembefehle sind die leistungsfähigsten Anweisungen von »Vizawrite 64«. Sie rufen wichtige Funktionen auf und beginnen immer mit der CBM-Taste. Daraufhin erscheint in der Kommandozeile die Frage nach der gewünschten Funktion.

Der Anwender hat nun die Auswahl zwischen 16 verschiedenen Funktionen:

1.	CBM + c: Text kopieren. Mit Hilfe der Cursortasten wird der Text, der kopiert werden soll, markiert. Dies geschieht durch einfaches Darüberfahren mit dem Cursor. Die markierten Textteile erscheinen farblich abgehoben. Durch Abwärtsbewegen des Cursors werden ganze Zeilen, durch Drücken der fl-Taste ganze Seiten und mit der f3-Taste eine Bildschirmseite markiert. Nach dem Markieren wird nur noch der Bestimmungsort des Textteils festgelegt und mit Return quittiert. Der Text befindet sich dann an der neuen und der alten Stelle im Dokument.
2.	CBM + m: Text verschieben. Hat die gleiche Funktion wie Text kopieren, mit dem Unterschied, daß der markierte Bereich an seiner ursprünglichen Position gelöscht wird.
3.	CBM + f. Finden eines bestimmten Ausdrucks. Die Länge des Ausdrucks ist dabei auf 25 Zeichen beschränkt.
4.	CBM + F: Finden eines Ausdrucks, ohne dabei auf Groß/Kleinschreibung zu achten.
5.	CBM + g: Zu einer bestimmten Seite springen. Mit dieser Funktion erscheint die angewählte Seite im Textfenster. Andererseitswerden so die separaten Seiten für Kopfzeile, Schlußzeile sowie die Arbeitsseite (work page) erreicht.
6.	CBM + d: DOS-Befehle senden. Dieser Befehl dient der Handhabung des Diskettenlaufwerks.
7.	CBM + M: Einfügen von Dokumenten. Eine sehr wichtige Funktion, mit der an einen Text im Speicher ein Textteil von Diskette nachgeladen wird. Der Merge-Befehl dient aber auch zum Einlesen verschiedener Dateiarten. Es können Dateien von anderen Textverarbeitungsprogrammen wie Wordpro 3 +, Easyscript, SM-Text und vielen anderen eingelesen werden. Im Rahmen des später beschriebenen Erstellens von Serienbriefen dient diese Funktion dem Einlesen der Adreßdateien von Vizastar oder anderen Datenbanken.
8.	CBM + n: Neubenennen eines Textes.
9.	CBM + p: Drucken. In dem dann erscheinenden Druckermenü (Bild 3) können alle wesentlichen Einstellungen, die auf das gesamte Schriftstück wirken sollen, definiert werden.
10.	CBM + q: Arbeit beenden. Mit dieser Funktion wird zum Hauptmenü (Bild 1) zurückgekehrt. Sollte der Text im Speicher mit der zuletzt geladenen Version nicht übereinstimmen, wird der Anwender gewarnt und zum Abspeichern aufgefordert.
11.	CBM + r: Ersetzen eines Ausdrucks. Der auszutauschende Text wird wie unter 1. beschrieben markiert und durch bis zu 28 neue Zeichen ersetzt.
12.	CBM + R: Globales Austauschen. Der Ausdruck wird nicht nur an einer bestimmten Stelle ersetzt, sondern im gesamten Text.
13.	CBM + s: Abspeichern des Textes. Vizawrite produziert PRG-Files, in denen alle Informationen des bestimmten Textes mit abgelegt sind. Sowohl die Farbgebung, alle Formatierungen als auch die gewählte Druckereinstellung werden zusammen mit dem Text abgespeichert. Bereits bestehende Dateien mit dem gleichen Namen werden allerdings überschrieben.
14.	CBM + t: Änderung der Farbgebung.
15.	CBM + w: Ändern der Dokumentbreite auf 38 Zeichen.
16.	CBM + x: Einstellen auf andere Gerätekonfigurationen. Bis zu zwei Diskettenlaufwerke sind ansprechbar, aber auch eine Einstellung auf die Datasette ist machbar. Wer seinen Drucker (oder mehrere Drucker) betreiben möchte, hat hier Gelegenheit, die Geräteadresse des Druckers auf 5 einzustellen. Wir haben es mit dem 1520 Printer/Plotter versucht und hatten Erfolg. Auch auf diesem Gerät wird jeder Text ausgedruckt (Bild 4). Die einzelnen Schriftarten des Plotters eignen sich besonders für Aufkleber und Beschriftungen.

Kein anderes mir bekanntes Textverarbeitungsprogramm hat eine ähnliche Fülle von Befehlen, die mit vergleichbarer Geschwindigkeit und Zuverlässigkeit funktionieren. Damit es auch bei der Texteingabe an keinem Komfort mangelt, haben einige Tasten Sonderfunktionen.

Die Funktionstasten dienen zum seitenweisen oder bildschirmweisen Vor- oder Zurückblättern sowie dem komfortablen Einfügen und Löschen. Ein Druck auf die f7-Taste genügt, um beliebig viele Zeilen in einen Text einfügen zu können. Ein zweiter Druck auf dieselbe Taste oder die Stop-Taste fügt den restlichen Text nahtlos wieder an. Die f8-Taste sorgt für das schnelle Löschen von Textteilen. Der Text wird, wie unter Punkt 1 der Befehlsfunktionen beschrieben, markiert und nach dem Quittieren mit der Return-Taste blitzschnell gelöscht. Nicht selten wird es bei der Texteingabe notwendig, große Sprünge durch den Text zu machen. Die Taste »HOME« bewirkt beim ersten Druck einen Sprung zum oberen Rand des Bildschirms und beim zweiten Druck den Sprung zum Anfang des Textes. Zurück geht es mit der »CLR«-Taste, die den Cursor an das Textende bewegt.

»Vizawrite 64« ist, wie schon gesagt, bildschirmorientiert. Deshalb ist es natürlich gut, schon bei der Eingabe auf die entsprechende Formatierung des Texteszuachten. Der Anwender wird dabei tatkräftig unterstützt. Seine Hilfsmittel sind Texttabulatoren, numerische Tabulatoren, Formatzeilen, Einrück- und Zentrierbefehle. Die f5- und f6-Tasten dienen dabei dem schnellen Sprung von einem Tabulator zum nächsten oder vom Anfang einer Zeile zum Ende. Auch die Kommandos zur Druckersteuerung bildet »Vizawrite 64« auf dem Bildschirm ab. Dabei sind eine Reihe von Kontrollbefehlen bereits »fest verdrahtet«. Fettschrift, Unterstreichen, Sub- und Superscript haben ihre festen Symbole, die mit vorangestellter CTRL-Taste in den Text eingefügt werden. Um aber optimale Flexibilität für die Fähigkeiten verschiedener Drucker bereitzustellen, kann jeder Anwender beliebig viele Befehle selbst definieren. Dies geschieht in der Formatzeile. Die Ziffern 0 bis 9 erhalten dort Werte, die, bei Wiederholung im Text, den Drucker steuern. Die bei manchen Druckern üblichen ESC-Sequenzen müssen dabei nicht explizit definiert werden. Es genügt, hinter der Zahl des Kontrollbefehls den Buchstaben der betreffenden Sequenz anzufügen.

## Optimale Druckersteuerung

Das Umschalten eines Epson-Druckers auf »Elite«-Schrift sieht in der Formatzeile beispielsweise so aus: 0 = M. Da aber beliebig viele Formatzeilen einfügbar sind, ist die Anzahl der Kontrollbefehle unbegrenzt.

Zu den Kontrollbefehlen gehört auch das »Merge«-Zeichen. Es ist bei der Erstellung von Serienbriefen unverzichtbar, denn immer dort, wo ein »Merge«-Zeichen steht, wird eine Information aus der Arbeitsseite (work page) eingefügt. Dort können, entweder von Hand eingegeben oder aus einer Datenbank Adressen eingeladen werden. Die Position »Global/Fill« im Druckermenü (Bild 3) sorgt dann dafür, daß der Brief entsprechend oft mit den eingefügten Daten ausgedruckt wird. Selbstverständlich können auch beliebig viele Dokumente aneinandergehängt werden. Die einzige Grenze, die dem pausenlosen Drucken gesetzt ist, ist die Speicherkapazität der Diskette.

Die wichtigste aller Funktionen eines Textverarbeitungsprogramms ist aber das Ausdrucken. Und hier trumpft »Vizawrite 64« erst richtig auf.

## Eingebaute Centronics-Schnittstelle

Vizawrite 64 hat ein eigenes, eingebautes Centronics-Soft-Interface, das den Anschluß eines Druckers mit dieser Schnittstelle problemlos macht. Die einzigen zusätzlich entstehenden Kosten bestehen in einem 50-Mark-Kabel. Für den Anschluß eines CBM-Druckers wird dieses Kabel natürlich nicht benötigt. Leider kann Vizawrite 64 auf diesen Druckern noch keine deutschen Umlaute erzeugen. Dafür arbeiten aber fast alle anderen Drucker und Schreibmaschinen mit Vizawrite ausgezeichnet zusammen. Dabei ist es fast ohne Belang, mit welchem Interface der Drucker angeschlossen ist. Der Centronics-Interface-Vergleich in Heft 7/84 zeigte, daß Vizawrite 64 als einziges Textverarbeitungsprogramm mit allen Schnittstellen einwandfrei funktionierte. Auch die Original-Epson-Schnittstelle ist geeignet.

Ganz besonders positiv sind die Handhabung und die Hilfen während des Ausdrucks. Zum einen kann der Ausdruck jederzeit gestoppt, fortgesetzt oder neu begonnen werden. Zum anderen helfen sinnvolle Hinweise beim Ausdrucken mit Einzelblatteinzug. Dabei steht vor dem Ausdrucken noch zur Wahl, ob in Blocksatz gedruckt oder welcher Zeilen- beziehungsweise Zeichenabstand gelten soll. Papierlänge, linker Rand, automatischer Seitenvorschub und Anfügen einer Kopfzeile auf jeder Seite sind weitere Funktionen, die einfach und schnell im Druckermenü bestimmbar sind.

Vizawrite 64 ist enorm zuverlässig. Außer mit brutaler Gewalt (Resetknopf) ist das Programm kaum zum Abstürzen zu bringen. Ein einziges Mal während des Tests dachten wir, Vizawrite hätte sich »aufgehängt«.

Dies war der Fall, als die »Shift«- und die »CBM«-Taste zu gleicher Zeit gedrückt wurden. Es war danach nur noch wirres Zeug auf dem Bildschirm. Ein erneuter Druck auf die gleichen Tasten stellte aber den Originalzustand wieder her (eine hervorragende Möglichkeit, Texte blitzschnell vor fremden Blicken zu schützen).

Bei so vielen positiven Eigenschaften sind auch ein paar negative Eigenheiten von Vizawrite 64 anzumerken: Es wurde keine vollständige DIN-Tastatur implementiert »Blindschreiber« müssen sich also etwas umgewöhnen. Die deutschen Umlaute gibt es nur auf Druckern von Fremdherstellern. Und letztlich ist es schade, daß ein so hervorragendes Produkt noch in englisch geschrieben ist. Ein Umstand, den der Hersteller möglichst bald ändern sollte.

Mit 320 Mark für die Diskettenversion und 360 Mark für die Modulversion ist Vizawrite 64 sicherlich nicht billig. Gemessen an den Leistungen ist dieser Preis aber mit Sicherheit mehr als gerechtfertigt.

## Auch für Unternehmer interessant

Vizawrite 64 ist nicht nur für den ambitionierten Privatanwender interessant, sondern auch für all jene Unternehmen, die mit möglichst wenig Investitionskosten ein leistungsfähiges Computersystem erwerben wollen. Der Commodore 64 zusammen mit Diskettenlaufwerk, einem Monitor und einem Epson FX 80 kostet zum Beispiel inklusive Vizawrite 64 weniger als 4000 Mark. Den Löwenanteil mit über 1500 Mark trägt dabei der Drucker. Für einen PC mit gleichem Drucker (und der bestimmt ja schließlich das Druckbild) ist mindestens das Doppelte bis Dreifache zu bezahlen. Das Endprodukt, der ausgedruckte Text, unterscheidet sich aber in keiner Weise von dem mit einem PC erstellten. Auch steht die Geschwindigkeit und der Komfort bei der Eingabe einem PC kaum nach.

In der nächsten Ausgabe werden wir ein weiteres Produkt dieser Reihe vorstellen: Vizastar, eine kombinierte Datenbank und Tabellenkalkulation. Der Commodore 64 ist ein preiswerter, aber vielseitiger PC — Sie dürfen gespannt sein.

(Arnd Wängler/aa)

Bezugsquelle: Microton, Postfach 40, CH-2542 Pieterlen

# Lohnsteuerjahresausgleich leichtgemacht

> Der Kampf mit den Formularen für den Lohnsteuerjahresausgleich ist mühsam und nervenaufreibend. Mit dem Programm HL-L0JA-64 soll das anders werden.

Die Autoren dieses Programms haben sich an ein heikles Thema herangewagt. Die mitgelieferte Beschreibung ist recht spärlich ausgefallen. Doch diesen Nachteil fängt das Programm mit einer einfachen Bedienbarkeit, leicht verständlichen Texten und einer sich stets wiederholenden Korrekturabfrage ab. Als Muster sind dem Handbuch eine Lohnsteuerkarte und ein Formular für den Lohnsteuerjahresausgleich (für das Jahr ’83) beigelegt.

## Das Programm

Nach dem Starten des Programms werden zuerst die persönlichen Daten, wie Geburtsdatum, Anzahl der Kinder und die Kirchenzugehörigkeit abgefragt. Dann werden die Eintragungen, die sich auf der Steuerkarte befinden, in das Programm übertragen. Auch hier kann man ständig Fehleingaben korrigieren.

Nachdem dieser Programmteil durchlaufen ist, wird mit Hilfe des nächsten Teiles die Anlage N des Formulares ausgefüllt. Das Programm fragt einzeln die steuerrelevanten Daten ab, und weist darauf hin, welche Einträge vorzunehmen sind.

Ist die Anlage N ganz ausgefüllt, wird der Hauptvordruck in Angriff genommen. Das Verfahren beim Ausfüllen ist das gleiche wie bei der Anlage N.

Nachdem das Ausfüllen mit der Unterschrift unter den Antrag abgeschlossen ist, berechnet das Programm die fälligen Steuern und den Betrag, den man nachzahlen muß oder erstattet bekommt.

## Fazit

Über die Zweckmäßigkeit dieses Programms kann man geteilter Meinung sein. Solange es nur als Hilfestellung zum Ausfüllen des Jahresausgleichs benutzt wird, ist der Preis von 98 Mark sicherlich nicht zu hoch (man kann auch diesen Kaufpreis unter »Steuerberatungskosten« absetzen). Erwartet man allerdings ein Programm, das den eventuell nötigen Gang zum Steuerberater ersetzt, wird man enttäuscht. Weder Handbuch noch Programm geben konkrete Hinweise über Absetzbarkeit mancher Kosten. Man sollte also möglichst genau wissen, was und wieviel man in dem Antrag an Kosten ansetzen muß. In diesen Fällen wird das Programm wirklich voll ausgenutzt. Allerdings können die Berliner damit recht wenig anfangen. Die Berlinvergünstigung ist nicht berücksichtigt. Vor Änderungen der Steuergesetzgebung braucht man keine Angst zu haben. Das Programm wird, wie der Hersteller mitteilt, bei Änderungen aktualisiert und bei Einsendung einer Originaldiskette ausgetauscht, (rg)

Bezugsquelle: HL Computer-Software GmbH, Hammstr. 8, 6842 Bürstadt, Tel. 0 62 06/8198

# Ex-DOS

> Jeder Programmierer möchte mit wachsender Erfahrung seinem Floppy-Laufwerk und seinen Disketten auch die letzten Geheimnisse entreißen. Mit Ex-DOS & Disk Doctor erhält er ein sehr leistungsfähiges Werkzeug dazu.

Bestellt man von Interface Age das Programm Ex-DOS & Disk Doctor (138 Mark), erhält man ein gutes, zirka 50 Seiten umfassendes deutsches Handbuch in Heftform, sowie eine gut verpackte Diskette. Gut verpackt heißt, daß in der Diskettenhülle eine Metallscheibe (5 y4-Zoll-Größe) direkt unter der Diskette liegt. So wird auf einfache Weise eine Beschädigung beim Versand verhindert. Genausogut wie die Verpackung ist auch das Programm. Allerdings muß dazu gesagt werden, daß dieses Programm nicht für Anfänger geeignet ist, die noch keine Ahnung vom Arbeiten mit der Floppystation haben. Vielmehr wird der Inhalt des Commodore-Floppy-Handbuchs zum Verständnis des Ex-DOS & Disk Doctors als bekannt vorausgesetzt. Hat man jedoch diese Kenntnisse, so kann man sie mit Hilfe von Ex-DOS & Disk Doctor voll ausnutzen.

## Was das Programm kann

Das Programm ist im großen und ganzen menügesteuert. Jede der vom Menü aus ansteuerbaren Möglichkeiten wird vom Hersteller Programm-Modul genannt. Ex-DOS besitzt folgende Module:
C Catalog
D Extended Directory
B BAM
S Sectors
T Tracks
X Buffers
M Disc-CPU-Memory

Das Catalog-Modul listet das Inhaltsverzeichnis der Diskette auf, wobei die Ausgabe mit der SPACE-Taste unterbrochen werden kann. Das »Extended Directory« bietet hier noch mehr: Man kann im Inhaltsverzeichnis alles, was das Herz begehrt, ansehen und beliebig ändern, und beispielsweise ohne Schwierigkeiten den Namen eines Files, den Filetyp (PRG, SEQ, USR, DEL, REL), die angezeigte Blockzahl sowie den Anfangstrack und -sektor eines Files manipulieren. Auf einen einfachen Tastendruck hin »locked« man Files, das heißt man schützt sie vor dem Löschen und Umbenennen. Ebenso einfach läßt sich der ganze Vorgang auch wieder umkehren. Sollten Sie Lust haben, die Programmnamen nach Directory-Reihenfolge durchzunumerieren, sie mit Leerstellen aufzufüllen oder zu sortieren, dann genügt ein Tastendruck. Genauso einfach entfernt man Lücken zwischen den Einträgen oder fügt Platz für weitere Namen im Directory ein. Beim Sortieren der Files ist es allerdings lästig, daß die REL-Files im Inhaltsverzeichnis an den Anfang gesetzt werden. Denn: Will ich mit LOAD »*«, 8 das erste Programm von einer Diskette laden, wird ein FILE NOT FOUND ERROR ausgegeben, weil das erste vorhandene File kein PRG-File ist. Hier wäre eine bessere Reihenfolge von Vorteil.

Das nächste Programm-Modul, der Zugriff auf die Block-Availability-Map, bietet folgende Möglichkeiten: Man kann nach freien und belegten Sektoren suchen, einzelne Blöcke belegen und wieder freimachen. Mit der Option »Extended BAM« läßt sich außerdem nach Blöcken suchen, die zwar Daten enthalten, jedoch nicht belegt sind. Diese Funktion hilft, Daten von Disketten zu retten, bevor sie versehentlich überschrieben werden.

Ganz radikalen »Disk-Murksern« gelingt es mit einer zusätzlichen Option, eine Disk durch das Freigeben aller Sektoren in der BAM völlig zu verunstalten.

Eines der wichtigsten Unterprogramme ist das Sectors-Modul. Hiermit kann man seine Disks endgültig ruinieren — oder auch reparieren. Der Inhalt des angewählten Blocks wird sowohl in Hex (per Tastendruck auch Umschaltung auf Dezimal möglich) als auch in ASCII-Darstellung (Text) angezeigt. Innerhalb dieses Blocks kann man beliebig mit dem Cursor herumfahren und die Werte ändern, sowie auf der Diskette vorwärts und rückwärts blättern. Dabei kann sowohl nach logischer als auch nach pysikalischer Reihenfolge vorgegangen werden. Logisch bedeutet, daß nicht nach der Durchnumerierung der Tracks und Sektoren geblättert wird, sondern der Computer nach der vorgegebenen Reihenfolge Track/Sektor Zeigerkette vorgeht. Das Suchen nach dem nächsten belegten Block sowie das Kopieren eines einzelnen Sektors ist ebenfalls möglich Qetzt können sich die Raubkopierer sogar noch an den bisher verschont gebliebenen Sektoren vergreifen).

Das Tracks-Modul bietet im großen und ganzen die gleichen Funktionen wie das Sectors-Modul. Auf dem Bildschirm werden immer die ersten sieben Bytes eines jeden Sektors eines Tracks angezeigt. In ihnen sind wichtige Informationen enthalten, wie zum Beispiel Startadressen, Blockverbindung, und so weiter. Insbesondere diese Tatsache hilft sehr beim Reparieren von Disketten, die aus Versehen gelöscht wurden (zum Beispiel durch Formatieren ohne ID).

Die Module »Buffers« und »DiskCPU-Memory« erlauben den direkten Zugriff auf jedes einzelne Byte des Disk-Controllers. Sie sind nur mit entsprechenden Kenntnissen oder Unterlagen (wie beispielsweise DOS-Listing) sinnvoll einzusetzen. Die falsche Benutzung kann zu einem Absturz der Floppy führen. Außerdem sollte darauf geachtet werden, daß man nicht den im FloppyRAM vorhandenen Teil des Ex-DOS & Disk Doctors überschreibt.

## Die Dokumentation

Doch nun genug aufgezählt, die Funktionen des Programms sind ja schließlich auch in einem sehr ausführlichen Handbuch erläutert, das nicht nur genau auf alle Fähigkeiten des Disk Doctors eingeht, sondern auch möglicherweise auftretende Fehler behandelt. Als ideale Mischung könnte man das Data-Becker-Floppybuch mit Ex-DOS & Disk Doctor bezeichnen.

Zusätzlich zu den Befehlserläuterungen gibt es noch einige Anhänge im Handbuch, von denen der interessanteste wohl der Leitfaden zur Diskettenreparatur ist. Es handelt sich hier um eine genaue Schritt-für-Schritt-Anleitung, die auch dem weniger versierten Programmierer eine Diskettenreparatur ermöglicht. Nach dieser Anleitung folgen einige Referenzseiten über Diskettenaufbau, Blockformate, sowie nähere Angaben zu den CBM 8050-, 8250-, 4040/4031-Floppylaufwerken — aber keine Angaben zum VC 1541!

Trotz aller Informationen, Erklärungen von Fachausdrücken etc. wird der unerfahrene Floppy-Anfänger also erst einmal stutzig. Das größte Manko am Ex-DOS & Disk Doctor besteht darin, daß die Anleitung hauptsächlich noch für die alten CBM-Computer geschrieben ist. Eine kleine Anpassung für die C 64-Version in Form eines kleinen Zusatzheftchens ist durchaus angebracht. Schließlich wird auch für die C 64-Version des Exbasic Level II ein Zusatzhandbuch mitgeliefert.

Dem routinierten Programmierer wird es jedoch kaum schwerfallen, das für die VC 1541 richtig umzusetzen. Es ist offensichtlich, daß der C 64 den Befehl DLOAD (Basic 4.0) nicht besitzt, und die Basic-Startadresse nicht durch die Werte 1 und 4, sondern durch 1 und 8 auf der Disk angegeben ist. Welche Angaben nur für die alten CBMs gelten, wird man schnell herausfinden.

## Eine empfehlenswerte Sache

Zusammen mit den beiden mitgelieferten Hilfsprogrammen 1541-Backup sowie der Anpassung der Bildschirm-Hardcopy-Option auf den Printer/Plotter 1520 ist Ex-DOS & Disk Doctor äls das beste Disk-Utilitie zu bezeichnen, das derzeit im Fachhandel erhältlich ist. Den kleinen Fehler im Handbuch wird Interface Age sicher bald verbessern.

(M. Kohlen/gk)

Info: Interface Age, Vohburger Str. 1, 8000 München 21

# Forth ohne Floppy

> Die virtuelle Speicherverwaltung der Forth-Systeme erfordert meistens ein Floppy-Laufwerk. Das Audiogenic-Forth benötigt dagegen nur eine Datasette.

Der Befehlsumfang des Audiogenic-Forth beschränkt sich im wesentlichen auf den FIG-Forth-Standard und ist in einem einzigen Vokabular zusammengefaßt. Dies bedeutet im Vergleich mit anderen Forth-Versionen eine gewisse Einschränkung. Mancher Benutzer wird spezielle Befehle zum Ansprechen eines Floppy-Laufwerkes vermissen. Dieses Manko erklärt sich aus der Zielgruppe, an die sich diese Forth-Version primär wendet: An jene Computerbesitzer, die ohne Floppy-Laufwerk auskommen müssen und sich lediglich einer Datasette bedienen. Dementsprechend wurden die Befehle für die Floppy einfach fortgelassen.

Doch wenden wir uns der Speicherverwaltung zu. Im Gegensatz zur sonst üblichen virtuellen Speicherverwaltung wurde bei dieser Forth-Version eine »screen compressing routine« implementiert. Diese Routine reduziert zum Beispiel einen leeren Screen auf eine Länge von nur 5 Bytes. So hat man alle 255 möglichen Screens ständig im Speicher, also im direkten Zugriff. Ein ständiges Laden und Speichern von und auf Diskette ist somit überflüssig.

Das Textfeld Nummer Null fungiert als Interpreterscreen. Hier werden alle Benutzereingaben sofort ausgewertet und gegebenenfalls compiliert. Beim interaktiven Arbeiten mit dem System stört es häufig, daß alle auf dem Bildschirm ausgegebenen Ergebnisse nach Betätigen einer Taste (für die nächste Eingabe) wieder verschwinden.

Ebenso wie Screen 0 werden auch die übrigen Textfelder mit einem zeilenorientierten Editor bearbeitet, der 16 Zeilen mit je 64 Spalten durch horizontales Scrollen auf der Mattscheibe darstellt. Dieser Editor kann zwar einen Full-Screen-Editor nicht ersetzen, aber aufgrund mehrerer Hilfsfunktionen und Editiermöglichkeiten, die zum Teil auch auf die Funktionstasten gelegt sind, wird ein insgesamt annehmbarer Bedienkomfort erreicht. Die Funktionstaste Fl ist übrigens frei belegbar.

Das Audiogenic-Forth verfügt über einige Befehle, die nicht zum FIG-Forth-Standard gehören. Sie unterstützen hauptsächlich die Hardwaremöglichkeiten des VC 20 beziehungsweise des C 64. Die VC 20-Version bietet dabei sogar etwas mehr, denn hier wird die Programmierung von Grafik und Musik durch die Befehle SOUND, VOLUME und COLOUR vereinfacht. Besondere Beachtung verdient die Behandlung der RESTORE-Taste. Durch den Befehl »RESTORE« wird wahlweise keine Reaktion, eine Rückkehr in den Interpreterscreen oder ein Kaltstart ausgelöst.

Das Handbuch, das in Umfang und Ausführlichkeit stark an die Commodore-Handbücher erinnert, ist leider in Englisch geschrieben und kann ein Forth-Lehrbuch nicht ersetzen. Es ist allerdings sehr gut gegliedert und zum schnellen Nachschlagen brauchbar. Neben einer sinnvoll geordneten und übersichtlichen Kurzbeschreibung aller Befehle sind die abgedruckten Beispielprogramme erwähnenswert. Viele davon dienen zur Darstellung bestimmter Programmiertechniken in Forth. Andere jedoch, wie zum Beispiel ein Screen-Lister für Druckerausgabe oder ein Programm zum Lesen einer Directory sind wirklich nützliche Utilities. Natürlich fehlt auch ein vollständig in Forth programmiertes Spiel nicht.

Das Audiogenic-Forth gibt es als Steckmodul in einer Ausführung für den C 64 und gleich in zwei Versionen für den VC 20, einmal mit und einmal ohne eingebaute 3 KByte Speichererweiterung. Die VC 20-Version ohne eingebaute Speichererweiterung ist jedoch auf der Grundversion nicht lauffähig und kann nur mit einem bereits erweiterten VC 20 benutzt werden.

Empfehlenswert ist das Audiogenic-Forth vor allem für Systeme ohne Floppy-Laufwerk, die bisher die mächtige Sprache Forth aufgrund der nötigen Zwischenspeicherung der Screens auf Diskette nicht benutzen konnten.

(Daniel Kobler/ev)

Audiogenic-Forth ist erhältlich über Kingsoft, Fritz Schäfer, Schnackebusch 4, 5106 Roetgen.
Preis 119 Mark (Steckmodul).

## Das Standard-Vokabular von Audiogenic-Forth

### Stackmanipulation

OVER DROP SWAP DUP ROT ?DUP SP@ SP! RP! > R R > R@ I J K STACK-BOTTOM

### Numerische Befehle

DIGIT + D+ MINUS DMINUS MIN MAX AND OR XOR U* U/ 1+ 2+ 1- 2- - HEX DECIMAL LITERAL NUMBER S- ->D + -D + - ABS DABS * 2* 2/ MOD /MOD M/MOD / M* */ */MOD 0 1 2 3 -1 DPL BASE 0= 0< = U< < > HOLD <# #> SIGN # #S

### Textfeld-Speicherung

TP SCR BLK EXP COM EXPAND SSAVE SLOAD DEVICE ?SCREENS DELETE COPY RESET CLR0 - -> ( LOAD SCREEN SCRSTART C/L CONTROL

### Speicherzugriff

FILL ERASE BLANKS CMOVE <CMOVE @ C@ ! C! TOGGLE + ! , C, COUNT

### Wörterbuch

FENCE SET-FORTH -FIND HERE ALLOT LATEST TRAVERSE LFA CFA NFA PFA FORGET '
+ ORIGIN PAD VOCABULARY DEFINITIONS DP CURRENT CONTEXT

### Compiler-Anweisungen

>IN EXECUTE ENCLOSE ERROR TERROR ?STACK ?COMP ?EXEC ?PAIRS ?CSP TLOADING COMPILE [COMPILE] [ ] WORD !CSP ;S QUIT ABORT INTERPRET IMMEDIATE STATE SMUDGE COLD LITERAL

### Ein-/Ausgabe

KEY 0KEY EMIT CR TYPE -TRAILING (.») .» EXPECT QUERRY SPACE SPACES DR D. .R U. . ? CLR ?TERMINAL TEXT # IN P HOME BL TIB OPEN CLOSE IN OUT OFF STATUS

### Definitions-Worte

: ; CREATE CONSTANT VARIABLE <BUILDS DOES> Kontrollstrukturen
BRANCH 0BRANCH (LOOP) (+ LOOP) (DO) LEAVE DO LOOP + LOOP BACK BEGIN UNTIL AGAIN IF ELSE THEN REPEAT WHILE DOBRAN IJ K R@

### VC 20 / C 64 - Funktionen

SOUND VOLUME NMI COLOUR SET RESTORE

# So macht man Basic-Programme schneller

> Basic-Programme können nach drei Gesichtspunkten optimiert werden: strukturiert und lesbar, schnell sowie speicherplatzsparend. Nach der Serie über strukturiertes Programmieren wird in diesem Beitrag der Aspekt der Laufgeschwindigkeit und ihrer Verbesserung behandelt. Alle Aussagen und Beispiele gelten sowohl für den VC 20 als auch den C 64.

Es gibt einige Dinge auf der Welt, die man sehr wohl einzeln, aber nicht alle gleichzeitig haben kann. Wirtschaftswachstum, keine Inflation und niedrige Arbeitslosigkeit lassen sich eben nicht unter einen Hut bringen.

Bei der Computerei, oder genauer gesagt beim Prorammieren, gibt es in einer höheren Sprache wie Basic ebenfalls so ein magisches Dreieck: strukturierte Programme, minimaler Speicherbedarf, kürzere Laufzeiten.

Gut lesbare und klar gegliederte Programme brauchen oft mehr Speicherplatz als es sich zum Beispiel Besitzer der VC 20-Grundversion leisten können. Deswegen soll mein heutiger Beitrag Sie zum Experimentieren anregen, mit welchen verschiedenen Methoden Basic-Programme schneller gemacht werden können.

## Basic ist nicht immer gleich Basic

Die Commodore-Handbücher sagen leider zu diesem Thema recht wenig. Ich bitte Sie an Ihrem Computer, VC 20 oder C 64, Platz zu nehmen.

Als erstes wollen wir uns einen einfachen aber typischen Programmablauf überlegen, welchen wir mit mehreren Basic-Möglichkeiten programmieren können. Übrigens: Wegen der guten Lesbarkeit schreiben Sie die nachfolgenden Basic-Zeilen mit Leerstellen zwischen den Befehlen.

Ich weiß, es geht auch kürzer, aber bei meinen Experimenten spielt Speicherplatz keine Rolle und außerdem habe ich noch einen Hintergedanken, den ich erst später erklären kann. Nicht zuletzt will ich dadurch auch erreichen, daß die Laufzeiten der Programme mit den Ihren übereinstimmen.

Schalten Sie bitte auch Programmierhilfen CToolkit, Simon’s Basic etc.) und Disk Operating-Programme (DOS 5.1) aus, denn sie verlangsamen den Programmablauf.

## Die interne Uhr mißt die Zeit

Beide Computer, VC 20 und C 64, haben eine interne Uhr, deren Zeit abgefragt, ausgedruckt und somit zur Zeitmessung verwendet werden kann. Im Befehlssatz der Commodore-Handbücher finden Sie dazu die beiden Funktionen TI und TI$. Mein Zeitmessungsprogramm besteht aus zwei Zeilen. Die »Stoppuhr« wird gestartet mit:
10 TI$ = "000000"
Sie wird am Ende des Testprogramms gestoppt mit:
1000 PRINT TI/60 "SEKUNDEN" :END

Zwischen diese beiden Zeilen stecken wir dann die Prüflinge, das heißt die Programme, deren Laufzeit wir messen wollen.

Zur Prüfung geben wir zuerst die Zeile 15 mit einer simplen Verzögerungsschleife ein.
15 FORT=1 TO 100:NEXTT

Das Programm dieser drei Zeilen hat die Laufzeit von 0,13 Sekunden mit dem VC 20 und 0,15 Sekunden mit dem C 64.

## Das erste Testprogramm

Löschen Sie bitte wieder die Zeile 15. Als' Programm, welches wir in mehreren Versionen programmieren wollen, habe ich mir einen Ablauf ausgesucht, der auch optisch verfolgbar ist. Auf dem Bildschirm soll nämlich der Buchstabe A gleich 374 mal nebeneinander gedruckt werden.

Die Zahl 374 hat nichts Magisches an sich. Es sind ganz einfach 17 Zeilen voller As auf dem Schirm des VC 20, der mit seiner begrenzten Spaltenzahl hier den Ton angibt. 17 Zeilen lassen uns genug Platz, um die gestoppte Zeit darunter gut lesbar anzuzeigen.

Ich bleibe für den C 64 bei derselben Zahl, damit wir beide Computer miteinander vergleichen können und damit die Programme möglichst identisch sind.

In der Version 1 des Programms verwenden wir POKE-Befehle, mit denen wir das A und die dazugehörige Farbe auf den Bildschirm, das heißt in den Bildschirmspeicher (Video-RAM) und den Farbspeicher (Color-RAM) bringen. Beim VC 20 (ohne Erweiterung) beginnt der Bildschirmspeicher ab Speicherzelle 7680, der Farbspeicher ab 38400. Beim C 64 sind es die Speicherzellen 1024 und 55296. Schauen Sie bitte in den Commodore-Handbüchern nach und vergewissern Sie sich, daß Sie dieses System des Zeichen-POKEns verstehen. Es ist dort gut beschrieben. Der Buchstabe A hat den Bildschirm-Codewert 1. Als Farbe wähle ich die »Normalfarben« der beiden Computer. Der Farbcode für das Blau des VC 20 ist 6, für das Hellblau des C 64 ist er 14.

Das Programm beginnt mit dem Löschen des Bildschirms (Zeile 20) und POKEt dann in Zeile 40 das erste A in den ersten Platz des Bildschirms.
20 PRINT CHR$ (147)
40 POKE 7680 + Z:POKE 38400 + Z,6
(40 POKE 1024 + Z:POKE 55296 + Z,14)

Die Zeile in Klammern gilt für den C 64. In Zeile 40 finden Sie zusätzlich eine Variable »Z«. Wie geplant, soll das A 374mal gePOKEt werden. Also müssen wie die Zahl der Speicherzelle laufendum 1 erhöhen. Dazu erfinden wir diese Variable Z, die zur Speicherzelle addiert wird.

Wir setzen Z am Anfang des Programms (in Zeile 30) auf Null und zählen es in Zeile 50 um 1 weiter.
30 Z = 0
50 Z = Z + l

Als nächstes müssen wir prüfen, ob Z den Schlußwert 374 erreicht hat. Wenn nicht, dann soll der nächste POKE-Befehl ausgeführt werden, das heißt wir springen auf Zeile 40 zurück. Dann kommt die Zeile 1000 zum Zug mit dem Stoppen und Ausdrucken der Laufzeit. Also:
60 IFZ = 374 THEN 1000
70 GOTO 40

Ich schlage vor, daß Sie das kleine Programm nochmal LISTen, damit wir es komplett sehen können.

Die Laufzeit wird nur davon beeinflußt, was zwischen den Zeilen 10 und 1000 steht. Sie können vor der Zeile 10 dem Programm hinzufügen, was Sie wollen.

Ein erster Probelauf mit RUN bringt das gewünschte Ergebnis, nur eins ist noch unschön: Der PRINT-Befehl in Zeile 1000 druckt uns die Zeit oben in die 2. Zeile, wo sie schlecht erkennbar ist. Wir könnten sie in einer anderen Farbe drucken, aber ich habe einen besseren Vorschlag.

## Ersatz für den Befehl »PRINT-AT«

Wir brauchen ein Kochrezept, um mit einem PRINT-Befehl an einen ganz bestimmten Platz auf dem Bildschirm drucken zu können. Einige Basic-Dialekte kennen den Befehl »PRINT-AT«. Welche Möglichkeiten bietet uns das Basic von Commodore?

1)	PRINT"[Cursor Down][Cursor Right]"
2)	PRINT TAB(X)
3)	PRINT SPC(X)

Um zum Beispiel an den 3. Platz in der 20. Zeile die Zeit zu drucken, müßten wir 18mal das inverse Q für Cursor Down und 1mal Cursor Right eingeben.

Mit TAB (X) geht es besser. Wir haben nur ein Problem, daß nämlich der höchste zulässige Wert für X nur 255 ist (X nennt man das »Argument«), Wir müssen deshalb zwei TAB-Befehle hintereinander setzen, um einen Abstand von 400 Leerstellen zu erzeugen.
1000 PRINT TAB (255) TAB (155) TI/60"SEKUNDEN":END

Für das Argument von SPC gilt dieselbe Begrenzung von 255. Eine doppelte Verwendung von SPC geht natürlich auch, allerdings zählt SPC nicht vom Anfang der Zeile, sondern ab der letzten Cursor-Stelle. Durch Rechnen oder einfach durch Probieren finden wir die Gesamtzahl von 397, das gibt:
1000 PRINT SPC (255) SPC (142) TI/60"SEKUNDEN":END

Es gibt noch eine dritte Methode, um PRINT-AT zu simulieren.

In die Speicherzelle 214 kann die Zahl einer Zeile hineingePOKEt werden, auf die mit einem nachfolgenden PRINT der Cursor gesetzt wird. Das gleiche gilt für einen Platz in einer Zeile mit der Speicherzelle 211. Versuchen Sie es mit der direkten Eingabe:
POKE 214,8:PRINT:POKE 211,4: PRINT"A"

## Drei Formen für »PRINT AT«

Das druckt den Buchstaben A in die 4. Spalte auf der 9. Zeile. Für unseren Anwendungsfall in Zeile 1000 müssen wir die Zahl 18 nach 214 PO-KEn, 211 können wir vernachlässigen.
1000 POKE 214,18:PRINT:PRINT TI/ 60 "SEKUNDEN":END

Alle drei Methoden sind gleichwertig, sowohl in Auswirkung als auch beim Speicherbedarf. Ich bleibe im folgenden bei der 214-Methode.

Zurück zur **Version 1** des Testprogramms. Das Programm unterscheidet sich für die beiden Computer nur in der Zeile 40, allerdings auch durch die Laufzeit. Nach RUN erhalten wir mit dem VC 20 8,25 Sekunden, mit dem C 64 10,48 Sekunden. Dieses Auffüllen des Bildschirms mit A geht halt recht langsam. Schon beim Zuschauen wird man ungeduldig. Der Teil in diesem Programm, welcher die Laufzeit am nachhaltigsten beeinflußt, ist die 374fache Wiederholung des POKE-Befehls. Bei einem POKE-Befehl ist die Umwandlung der Zahlen aus dem ASCII-Code sehr zeitaufwendig. Hoppla, was heißt denn das schon wieder, sagen Sie jetzt vielleicht.

Jede Zahl, wie zum Beispiel 7680 oder 1024, wird zuerst als vier einzelne ASCII-Codezahlen gespeichert. Wenn das Programm abläuft, werden diese ASCII-Zahlen zuerst in ganze Zahlen, dann in Fließkomma-Zahlen umgewandelt — das für den Fall, daß mit den Zahlen arithmetische Funktionen ausgeführt werden. Schließlich werden sie wieder in eine ganzzahlige POKE-Adresse umgewandelt, und das in unserem Fall 374mal!

Hier können wir einen ersten innerbetrieblichen Verbesserungsvorschlag einreichen. Wenn wir eine so häufig vorkommende Zahl wie die POKE-Adresse in Zeile 40 am Anfang des Programms einer Variablen zuweisen, dann erfolgt die oben genannte Umwandlungssequenz nur einmal, nämlich am Anfang des Programms. Das Programm muß dann 374 mal nur den Wert der Variablen im Speicher suchen und das geht viel schneller. Wollen Sie es sehen? Ändern Sie bitte für diese **Version 2** die Zeilen 30 und 40.

Die Anfangsadresse im Bildschirmspeicher definieren wir als Variable mit dem schönen und zutreffenden Namen »VIDEO«, die des Farbspeichers mit »FARBE«. In Zeile 30 erhalten sie dann die Werte
30 Z = 0:VIDEO = 7680:FARBE = 38400:REM VC 20
(30 Z = 0:VIDEO = 1024:FARBE = 55296:REM C 64)

Zeile 40 ergibt sich dann eigentlich zwangsläufig:
40 POKEVIDEO + Z, l:POKEFARBE + Z,6
(40 POKE VIDEO + Z,l:POKE FARBE + Z,14)

Alles andere bleibt gleich. Tippen Sie RUN ein. Ergebnis: der VC 20 braucht 5,78 Sekunden, der C 64 7,3 Sekunden. Wir haben also eine Verkürzung von zirka drei Sekunden erzielt, das sind 30 Prozent!

Sicher ist Ihnen aufgefallen, daß der VC 20 schon wieder schneller ist als der C 64.

In der Tat können die oft mitleidig behandelten VC 20-Besitzer mächtig stolz sein: Der VC 20 ist immer schneller als der C 64 und auch (fast immer) schneller als die »Neuen« C-116 und Plus/4 (und übrigens einer der schnellsten Heimcomputer überhaupt).

## Der VC 20 ist der schnellste

Eine Beschleunigung von 30 Prozent ist gut, aber noch nicht alles, was wir erreichen können. Da die Methode der vordefinierten Variablen so effektiv ist, wollen wir sie auf alle oft verwendeten Zahlen des Programms anwenden. Neben Z, VIDEO und FARBE gibt es noch die 1 für den Buchstaben A und die 6 (14) für die Farbe sowie den Schlußwert 374 der Schleife.

Sie wissen schon, wie das geht. Wir ändern folgende Zeilen:
30 Z = 0: SCHLUSSWERT = 374: VIDEO = 7680:FARBE = 38400:BUCH-STA=1:DRUCK = 6
(30 Z = 0: SCHLUSSWERT = 374: VIDEO = 1024:FARBE = 55296:BUCH STA=1:DRUCK=14)
40 POKE VIDEO + Z, BUCHSTA:PO-KEFARBE + Z,DRUCK
60 IF Z = SCHLUSSWERT THEN 1000

Das ist **Version 3** des Programms, mit Laufzeiten von 5,15 Sekunden (VC 20) beziehungsweise 6,15 Sekunden (C 64). Das ist eine Verbesserung von 3,10 (4,23) Sekunden gegenüber der ersten Version.

Bisher haben wir die Variablen im Sinn einer guten Lesbarkeit mit langen und verständlichen Namen versehen. Aber das kostet natürlich Speicherplatz und auch Geschwindigkeit. Der Grund ist immer derselbe: Bei der Variablen VIDEO sind fünf Zeichen 374 mal zu bearbeiten. Wenn wir sie nur VI nennen, ist das erheblich weniger.

In **Version 4** des Programms reduzieren wir also alle langen Variablennamen auf zwei Zeichen. Wir wollen mal schauen, was das bringt:
30 Z = 0: SC = 374: VI = 7680:FA = 38400:BU = 1:DR = 6
(30 Z = 0: SC = 374: VI = 1024:FA = 55296:BU = 1:DR = 14)
40 POKE VI + Z,BU:POKE FA + Z,DR 60 IFZ = SC THEN 1000

Ergebnis: VC 20: 4,71 Sekunden
C 64: 5,63 Sekunden

Gegenüber der Version 1 des Programms haben wir schon eine Verbesserung von 43% (46%) erreicht.

Sie wissen sicher, daß der Computer alle Variablennamen immer auf zwei Stellen reduziert, daß aber einstellige Variablen durchaus zugelassen sind. Damit müßte unser Programm eigentlich noch schneller werden. Die folgenden Änderungen für **Version 5** zielen genau darauf:
30 Z = 0: S = 374: V=7680:F=38400: B = l:D = 6
(30 S = 374: V=1024: F=55296:B = 1: D = 16)
40 POKE V+Z,B:POKE F+Z,D
60 IFZ = STHEN 1000

Die erzielte Verbesserung ist meßbar, aber nicht gerade überwältigend. Der VC 20 braucht nun 4,63 und der C 64 5,51 Sekunden. Mit dem bisher Gesagten läßt sich bereits eine erste generelle Regel für schnellere Basic-Programme aufstellen.

Regel 1
* Häufig vorkommende Zahlen, Adressen und Variable, besonders innerhalb von Schleifen, werden am Anfang des Programms vordefiniert.
* Variable, die sich im Lauf des Programms verändern, werden trotzdem vordefiniert, allerdings mit einem unschädlichen Anfangswert (dummy).
* Die Zahl, die am häufigsten vorkommt, wird als erste vordefiniert (damit sie schneller »gefunden« wird).
* Variablennamen sollen möglichst einstellig, aber höchstens zweistellig sein.

Halt! Löschen Sie das Programm noch nicht. Wir liegen noch unter 50 Prozent mit unseren Verbesserungen, und das reicht noch lange nicht. Was können wir am bisherigen Programm noch ändern? Denken Sie mal nach. Wie kann man Buchstaben auf den Bildschirm bringen? Natürlich, mit PRINT statt der POKEs.

In **Version 6** des Programms ersetzen wir die Buchstaben-POKE-Befehle durch eine PRINT-Anweisung, die prinzipiell noch den Vorteil hat, daß keine Farbanweisung nötig ist. Den Buchstaben A wollen wir in dieser Version zunächst einmal mit seiner ASCII-Codezahl 65 angeben, ein Semikolon setzt alle A hintereinander.
40 PRINT CHR$(65);

Für die Schleife brauchen wir nur die beiden Variablen Z und S:
30 Z = 0:S = 374

Alle anderen Zeilen bleiben unverändert.
Nach RUN sehen wir als Ergebnis: VC 20: 3,4 Sekunden
C 64: 4,05 Sekunden

Das ergibt eine weitere Verbesserung von 1,2 (1,5) Sekunden. Unser Programmbeispiel wird also durch die Verwendung von PRINT statt POKE stark beschleunigt. Das geht natürlich deswegen besonders gut, weil alle Buchstaben automatisch hintereinander gesetzt werden. Wenn wir jedesmal den Platz mit angeben müßten, wohin gePRINTet werden soll, wäre der Vorteil rasch verspielt.

Die Anweisung PRINT CHR$(65) ist zwar gut lesbar, aber wir haben ja vorher gelernt, daß Vordefinieren von Variablen schneller ist. In **Version 7** machen wir das auch mit der PRINT-Variablen.
30 Z = 0: S = 374: A$ = CHR$(65)
40 PRINT A$

Das Resultat ist wieder beeindruckend: 2,58 Sekunden beim VC 20, 3,10 Sekunden beim C 64. Das sind schon 69 Prozent Verbesserung gegenüber der 1. Version.

Aber selbst — oder gerade — jedem Anfänger ist die direkte PRINT-Anweisung mit Gänsefüßen am geläufigsten. Sie braucht auch weniger Speicherplatz und macht sogar ein Vordefinieren unnötig. Wir wollen schauen, ob sie auch schneller ist.

Ändern Sie für **Version 8** die Zeilen 30 und 40:
30Z = 0:S = 374 40 PRINT 'A";

Erstaunlicherweise bringt das fast gar nichts, beim VC 20 nur 0,05 Sekunden Verbesserung, beim C 64 0,07 Sekunden. Die Erklärung liegt darin, daß beide Darstellungen, CHR$(65) und ’A” ASCII-Code-Verwender sind. Damit ist der einzige Unterschied zwischen Version 7 und 8 die Anzahl der Zeichen im Programm.

Fassen wir zusammen:

Regel 2
* In Schleifen mit aneinandergereihten Druckanweisungen ist PRINT viel schneller als POKE.
* Die PRINT-Variablen sollen entweder vordefiniert oder im Gänsefuß-Modus eingesetzt werden.

In der PRINT-Schleife (Zeile 40) und nachfolgender IF-Abfrage (Zeile 60) gibt es noch zwei Feinheiten. Basic erlaubt uns bei bedingten Sprüngen statt IF .. THEN GOTO .. nur IF .. THEN .. zu schreiben und das haben wir bisher auch brav gemacht.

Man kann aber auch IF .. GOTO verwenden. Eigentlich ist nicht zu erwarten, daß zwischen den beiden Schreibarten ein Zeitunterschied besteht. Der Fall ist tatsächlich fast akademisch, wie **Version 9** beweist:
60 IFZ = SGOTO 1000

Laufzeit des VC 20:2,51 Sekunden, die des C 64: 3,0 Sekunden.

Eine andere Änderung bringt auch nur ganz wenig in der Geschwindigkeit, aber sie spart uns eine ganze Zeile und damit Speicherplatz:
60 IFZ<>SGOTO 40
70 entfällt

Diese **Version 10** gewinnt nur 0,01 (0,02) Sekunden.

Regel 3
* Bei Schleifen mit Sprunganweisungen ist IF .. GOTO schneller als IF..THEN
* Prüfung auf Ungleichheit (< >) bietet Vorteile, wenn sie eine Zeile erspart.

Für die etwas weiter Fortgeschrittenen unter Ihnen gebe ich hier noch eine weitere Anregung, die wir mit unserem Prüfprogramm nicht testen können.

Die Prüfung mit IF..THEN hängt oft von mehr als einer Bedingung ab. Zum Beispiel kann sie so lauten:
100 IF (A = 1 AND B = 2 AND C = 3) THEN 999
110 GOTO 50

Zeile 100 prüft jedesmal, ob alle drei Bedingungen erfüllt sind, erst nach dem THEN wird entschieden, ob das Programm auf Zeile 999 springt oder auf 110 weiterläuft. Nehmen wir an, A ist im 20. Durchlauf erfüllt, B im 50. Durchlauf, C aber erst im 300. Durchlauf. Das Programm muß also 300mal alle drei Bedingungen nachprüfen. Wenn wir die Zeile 100 so schreiben:
100 IF C = 3 THEN IF B = 2THEN IF A = 1 THEN 999
dann bricht das Programm 300mal die Prüfung nach dem C sofort ab und geht in 110 weiter. B und A werden erst dann zur Prüfung herangezogen, wenn C = 3 ist. Es ist wohl klar und einzusehen, daß die zweite Schreibweise schneller ist.

Regel 4
Bei IF..THEN-Prüfungen mit mehreren Bedingungen sollen diese Bedingungen in einzelnen IF..THEN-Prüfungen hintereinander gesetzt werden. Dabei wird die Bedingung an die erste Stelle gesetzt, welche als erste nicht erfüllt ist.

Ich habe mit Absicht bis hierher die 374malige Wiederholung der Schleife mit der Zählvariablen Z hochgezählt und mit IF..THEN beziehungsweise IF..GOTO den Schlußwert abgefragt. Das gab mir die Gelegenheit, die Schnelligkeit dieser Methode ganz auszureizen. Und wir haben auch die ursprüngliche Laufzeit von 8,25 (10,48) Sekunden auf 2,50 (2,88) Sekunden reduziert!

Jetzt wollen wir noch eine andere Basic-Möglichkeit austesten, die Sie ja alle kennen, nämlich die Schleife mit FOR..TO..NEXT zu programmmieren.

Wir wollen in **Version 11** des immer noch gleichen Programms dazu die Zeilen 30, 50 und 60 ändern:
30 FORZ = 1 TO 374
50 NEXT Z
60 entfällt

Lassen Sie's laufen. Huiiih! Das pfeift runter! Der VC 20 meldet 0,91 Sekunden, der C 64 1,08 Sekunden. Das bringt gegenüber der IF. .THEN-Schleife der Version 10 eine ganze Menge, nämlich ungefähr 2 Sekunden, oder, auf die Zeit der Version 1 bezogen, 89 Prozent.

Das einzige, was wir in der FOR..NEXT-Schleife noch verbessern können, ist die vielgeübte Praxis des Weglassens der Schleifenvariable Z nach dem NEXT-Befehl.
50 NEXT

Der Geschwindigkeitsgewinn dieser **Version 12** ist nicht sehr groß, nämlich nur etwa 0,1 Sekunden, aber wir wollen die Methode doch in die nächste Regel mit aufnehmen.

Regel 5
Schleifen sollen nicht mit IF..THEN, sondern mit FOR..TO..NEXT gebildet werden. Die Schleifenvarible nach NEXT soll dann weggelassen werden, wenn es nicht zu Verwechslungen mit anderen Schleifen führen kann.

Ich bin fast am Ende meines Beschleunigungslateins. Nur eines bleibt noch, nämlich die bisher hochgehaltene Lesbarkeit des Programms zu opfern. Ich hoffe nämlich, Sie haben bisher meiner Eingangsforderung Folge geleistet und alles schön mit Leerzeichen geschrieben. Das behalten wir zunächst noch bei, im Gegenteil, wir wollen zunächst die Lesbarkeit noch erhöhen und REM-Erläuterungen einfügen. Ich schlage vor, die **Version 13** so auszuschmücken:
10 TI$ = ”OOOOOO”:REM UHR AUF NULL
12 REM************************
13 REM*
14 REM*TEST-PROGRAMM*
15 REM*
16 REM************************
20 PRINT CHR$(147);:REM ALLES LOESCHEN
30 FOR Z=1 TO 374:REM 374 ZEICHEN
40 PRINT’A”:
50 NEXT
999 REM ZEIT AUSDRUCKEN
1000 POKE 214,18:PRINT TI/60 "SEKUN-DEN":END

Sieht gut aus, nicht wahr?

Aber leider, REM-Erläuterungen kosten Zeit. Wir sind um 0,15 (0,2) Sekunden langsamer geworden.

Wir schmeißen deshalb alle REMs wieder raus und haben damit wieder Version 12. Jetzt aber gehen wir einen Schritt in der anderen Richtung weiter und entfernen alle Leerstellen und Abstände. Mit dieser **Version 14** will ich Ihnen zeigen, daß das auch einen Einfluß auf die Laufgeschwindigkeit hat.
10 TI$=”000000”
20 PRINTCHR$(147);
30 FORZ=1TO374
40 PRINT"A";
50 NEXT
1000 POKE214,18:PRINT:PRINTTI/60”SEKUNDEN”:END

Das Ergebnis ist für den VC 20 0,81 Sekunden, für den C 64 0,98 Sekunden.

In Version 15 treiben wir die Schrumpfung ins Extrem, indem wir das Programm im Prinzip unverändert aber mit einem Minimum an Zeilen schreiben, also möglichst viele Befehle in eine Zeile packen.

Sie wissen, die maximale Zeilenlänge beträgt 88 Zeichen beim VC 20, 80 Zeichen beim C 64. Unser Programm können wir sogar in einer einzigen Zeile unterbringen — fast unglaublich, aber es geht. Sie müssen allerdings alle Abkürzungsmöglichkeiten ausschöpfen, die das Commodore-System bietet. Im Anhang der Commodore-Handbücher finden Sie die Liste aller Abkürzungen beim Eintippen: C und geSHIF-TEtes H für CHR$, ? für PRINT und so weiter. Im nachfolgenden Ausdruck ist das natürlich nicht zu sehen, weil der Befehl LIST die Abkürzungen nicht berücksichtigt. So kommen auch mehr als 88 (80) Zeichen in eine Zeile des Listings, woran Sie sich nicht stören dürfen.
10 TI$ = ”000000”:PRINTCHR$(147); :FORZ = 1TO374:PRINT’A”;:NEXT :POKE214,18:PRINT:PRINT TI/60 ”SEKUNDEN”:END

Und siehe da, diese »Kurzform« des Programms ist auch die allerschnellste Version. Der VC 20 braucht 0,78 Sekunden, der C 64 0,93 Sekunden. Diese letzte Beschleunigung wird dadurch erreicht, daß das Betriebssystem des Computers nur einmal einen Zeilenanfang und Zeilenende suchen und erkennen muß, statt sechsmal in der Version 14.

Das Ausnützen der vollen Kapazität einer Zeile bringt also nicht nur den Vorteil eines kleineren Speicherbedarfs, sondern auch Zeitgewinn.

Regel 6
* Programme ohne REM-Erläuterungen und ohne Leerstellen zwischen den Zeichen laufen schneller.
* Zur Reduzierung der Zeilenzahl sollen möglichst viele Befehle in eine Zeile geschrieben werden.

»Einzeiler« können auch Spaß und Herausforderung zugleich sein. Man sollte eigentlich annehmen, daß mit einer Zeile nicht viel anzufangen sei.
Weit gefehlt!

## Einzeilige Programme

Eine englische Zeitschrift hat darüber sogar einige Male einen Wettbewerb ausgeschrieben (die 64'er ist unabhängig davon auch auf diese Idee gekommen, siehe Ausgabe 8; d. Red.). Ich schreibe die Einzeiler unten lesbar, das heißt mit Leerstellen. Sie müssen die Programme aber wieder mit allen Abkürzungstricks schreiben, sonst geht’s schief. □Von A. Boyd (Manchester) stammt ein Primzahlen-Erzeuger, der für die obere Grenze von 65000 viele Stunden braucht.
1 FORN = 1 T0 65000:F = OFORJ = 2 TO N-1:F=F + ((N-J*INT(N/J)) = 0) :NEXT:X = -(F = 0):PRINT RIGHT$(STR$(X*N),6*X):NEXT

□ Ein anderer Einzeiler wurde von I A.M. Simmelt (Sheffield) geschrieben zur Konvertierung von Dezimalzahlen in Dualzahlen.
1 INPUT A:FOR I = 14 TO 0 STEP-1 :Z = A AND 2↑I:A = A-Z:Z = Z/2↑I:Z$ = RIGHT$(STR$(Z),1):PRINT Z$;: NEXT:GOTO1

□Zuletzt noch ein Juwel, nur für den I VC 20 geeignet, von M. Dooling (Dewsbury). Hochauflösende Grafik und Scrolling in einer Zeile — wer hält's für möglich?
1 POKE 36869,255: PRINT"[SHIFT CLR/HOME]@@@@@@@@@@@@":FOR X = 7168 TO 7175:POKE X, PEEK(X + 1):NEXT:POKE7176, PEEK(A + 8↑5):A = A + 1:GOTO 1

Lassen wir’s gut sein mit diesem Programmsport und kehren wir zurück zu einer abschließenden Betrachtung der Zeitgewinne.

Wir haben in Version 1 mit 8,25 (10,48) Sekunden begonnen. Diese Laufzeit wurde ohne Änderung des Programmresultats stetig verkürzt, bis wir schließlich in Version 15 bei 0,78 (0,93) Sekunden gelandet sind.

Ich nenne diese Beschleunigung um 90 Prozent schlicht und einfach spektakulär.

Mehr allerdings kann ich nicht herausholen, es sei denn — naja, eigentlich habe ich am Anfang ganz laut »Basic« gesagt.

Aber ich kann doch nicht widerstehen und Sie scharf machen auf ultima velocitas — zu deutsch Maschinensprache. Dazu aber in der nächsten Ausgabe.

(Dr. Helmuth Hauck/aa)

# Datex-P und ausländische Netzwerke

> Datex-P ist ein Daten-Vermittlungssystem der Deutschen Bundespost. In diesem Netz wird die Vermittlung der Daten in Form von sogenannten Paketen (daher auch das ’P’ in Datex-P) vorgenommen.

Das Datex-P-Netz ist ein flächendeckendes, öffentliches Datenübertragungsnetz, welches auf der Technologie der Paketvermittlung basiert. Bei dieser Technik werden die zu übertragenden Daten an einen Netzknoten übermittelt, dort kurzzeitig zwischengespeichert und dann — eventuell über andere Knoten — an die Zieladresse weitergeleitet. Paketvermittlung ist dadurch charakterisiert, daß die zu sendenden Daten in Pakete maximaler Länge zerlegt werden, die mit zusätzlichen Verwaltungsinformationen versehen dem Netz zur Weitervermittlung zugeführt und schließlich vom empfangenden Teilnehmer wieder zusammengesetzt werden. Die Vermittlungsknoten sind durch digitale Leitungen hoher Geschwindigkeit miteinander verbunden. Die Beibehaltung der Reihenfolge gesendeter Pakete wird vom Paketvermittlungsnetz garantiert. Der Datenaustausch zwischen der sendenden und der empfangenden Endeinrichtung wird über eine logische Verbindung abgewickelt, bei der aber (im Gegensatz zur Leitungsvermittlung) die Übertragungsleitungen nicht exklusiv reserviert, sondern mehrfach genutzt werden, da sie nur zur tatsächlichen Transportzeit in Anspruch genommen werden. Man spricht in diesem Zusammenhang von einer virtuellen Verbindung.«

So lautet die offizielle Definition im Datex-P-Handbuch der Post.

»Leitungsvermittlung« verwendet zum Beispiel der Datei-Dienst Datex-L der Post, aber auch das normale Telefon. Man kann sich also das Ganze als ein Netz von einzelnen Computern vorstellen, die nichts anderes zu tun haben, als ankommende Daten (Pakete) an den richtigen Computer weiterzuleiten (Bild 1). Die »Adresse« des Zielcomputers entnehmen sie dabei der Kopfinformation des jeweiligen Pakets, das heißt am Anfang eines Datenpakets steht der »Empfänger« des Datenpakets. Beim Aufbau des ganzen Netzes liegt der Vergleich zum Telefonnetz nahe, auch hier besteht das Netz aus Vermittlungsstellen, deren Funktion mit der der »Vermittlungscomputer« des Datex-P-Netzes äquivalent ist.

Der Vorteil eines Netzwerkes liegt auf der Hand: Die Anzahl der Leitungen, die nötig sind, um eine Verbindung zwischen zwei beliebigen Datenendeinrichtungen möglich zu machen, ist erheblich geringer, als wenn jede Datenendeinrichtung mit jeder verbunden wäre.

## Zugang zum Datex-P-Netz mit Heimcomputer oder Terminal

Man braucht für den Datex-P-Zugang generell drei verschiedene Dinge: Eine Tastatur, einen Bildschirm oder eine andere Anzeige, um die empfangenen Daten anzuzeigen und ein Modem (MODulator-DEModulator), der die Daten entsprechend umwandelt, damit sie über das Telefon übertragen werden können (Bild 2). Zum Begriff MODEM: Alle Vorrichtungen, die »Daten modulieren« sind der Definition nach Modems. Akustikkoppler sind dabei eine Untergruppe, welche die Information nicht durch direkte Verbindung mit dem Telefonnetz übertragen, sondern mit Lautsprecher und Mikrofon eine »akustische Koppelung« erreichen. Als normaler Benutzer des Datex-P-Netzes braucht man sich um die Paketübertragung nicht zu kümmern, da die Umwandlung der Daten der angewählte PAD (Packet Assembly Disassembly Facility), auch wieder ein Computer, übernimmt. Dabei kommen die Daten in Form von einzelnen Zeichen an, werden vom PAD in Datenpakete umgewandelt und an die richtige Adresse weitergeleitet. Genauso werden empfangene Datenpakete vom PAD in einzelne Zeichen umgewandelt. Bei Datex-P-Betrieb mit Terminal ist in der Regel außer einem Modem und einem Telefon nichts weiter erforderlich. Bei einem Heimcomputer braucht man, damit er eine Terminalfunktion übernimmt, ein Terminalprogramm (wie zum Beispiel das Teleterm für den C 64) und, wenn er die erforderliche Schnittstelle zum Modem nicht bietet, noch ein Interface, das die nötige Umwandlung der Daten übernimmt. Dann kannes losgehen, man wählt, je nach Übertragungsrate des Modems (in der Regel hat man ein 300-Baud-Modem) die entsprechende Nummer des nächsten PADs an.

Tabelle 1 gibt eine Übersicht der in Deutschland anwählbaren PADs.

Jeder Commodore 64-Benutzer, der in der Lage ist, Mailboxen wie Decates oder Tedas anzuwählen, ist mit der selben technischen Einrichtung auch in der Lage, die PADs anzuwählen, um am Datex-P-Netz teilzunehmen (300-Baud-Nummern!).

Es besteht auch die Möglichkeit, einen Datex-P-Hauptanschluß zu beantragen. Dann erhält man eine Extra-Leitung, über die die Daten im Datex-P-Paketformat ankommen. Die billigste Version kostet 300 Mark im Monat und dürfte für keinen, der einen Homecomputer besitzt, in Frage kommen. Die Computer, die an einem solchen Hauptanschluß hängen, sind dann die, die »angerufen« werden können.

## So wird eine Verbindung hergesteltt

Die Nummer des PADs wird gewählt, das Telefon mit dem Akustikkoppler verbunden, wenn das Piepsen des PAD-Modems hörbar ist (bei 300 Baud wird das Modem des Anrufers wie beim Anrufen von Decates auf ORIGINATE gestellt).

Dann tippt man ».«(Punkt) und RETURN gegebenenfalls so lange, bis sich der PAD mit »Datex-P« und der Nummer seines Anschlusses meldet. Jetzt kann sich der Benutzer durch Eingabe seiner Benutzerkennung (NUI) identifizieren und/oder eine sogenannte NUA (Network User Adress) eingeben. Das ist nichts anderes als eine Art »Telefonnummer« innerhalb des Datex-P-Netzes). Nach Eingabe der NUA meldet Datex-P, ob der angerufene Anschluß frei ist (»Verbindung hergestellt«), besetzt ist (»Gegenstelle belegt«) oder nicht antwortet (»Gegenstelle antwortet nicht«). Wie beim Telefon gibt es eine Meldung »kein Anschluß unter dieser Nummer«.

Beim Datex-P-Netz gibt es natürlich auch eine Gebührenabrechnung. Sie richtet sich dabei nicht nach Entfernung der Verbindungspunkte, sondern hauptsächlich nach der Menge der übertragenen Daten.

## Was ist eine NUI?

Das Abrechnungssystem des Datex-P-Netzes basiert auf sogenannten NUIs (Network-User-Identifications), die den Teilnehmer identifizieren, der für die Verbindung zu zahlen hat. Dieses Abrechnungssystem hat den Vorteil, daß der Datex-P-Benutzer von jedem Telefon aus in das Netz gelangen kann. Die NUI besteht insgesamt aus zwei Teilen, Teil A und B. Bei der Beantragung der NUI sucht sich der Teilnehmer den Teil A der NUI selbst aus, den Teil B der NUI, das Passwort, bekommt er dann von der Post schriftlich mitgeteilt. Dieser Teil B wird mittels eines bestimmten Algorithmus’ aus dem Teil A der Teilnehmererkennung errechnet.

Ohne eine NUI erreicht man nur Teilnehmer, deren Anschluß die Gebühren übernimmt, und das auch nur innerhalb Deutschlands. Bei der Anfrage auf Gebührenübernahme muß vor der NUA die Zeichenfolge »R« und »«(Leerzeichen) stehen. Übernimmt der angewählte Anschluß die Gebühren nicht, so meldet der Datex-P-Computer (PAD) »Gebührenübernahme verweigert«. Nun eine Liste von Computern, die ein Benutzer ohne Eingabe einer Benutzerkennung über Datex-P erreichen kann (jede einzelne Nummer ist getestet):

TODO

Kurz zusammengefaßt: Im normalen Zustand des PADs, wenn er also eine Eingabe verlangt, kann man immer eine Nummer »wählen«, also eingeben. Hat man sich durch Eingabe seiner NUI identifiziert, ist die Eingabe jeder Nummer möglich, hat man sich nicht identifiziert, kann man nur die »reverse Charging«-Nummern, also die, die die anfallenden Gebühren übernehmen, anwählen. Die Anfrage auf Gebührenübernahme durch die Gegenstelle geschieht dadurch, daß die Zeichen »R« und » « (Leerzeichen) vor der Nummer zu stehen haben. Sonst sind folgende Befehle wichtig:

Hat der PAD eine Verbindung zu einem anderen Computer hergestellt, und möchte dem PAD einen Befehl übermitteln, drückt man generell CTRL-P. Dann wird der Befehl eingegeben, und dieser mit RETURN abgeschlossen. Hat der PAD keine Verbindung aufgebaut, ist die Eingabe von CTRL-P nicht erforderlich.
CLEAR

Dieser Befehl bricht die bestehende Verbindung ab. In der Praxis wird er dann angewandt, wenn man nicht weiß, wie man den Computer normal verlassen kann. Dieser Befehl hat also nur dann einen Sinn, wenn Datex-P eine Verbindung aufgebaut hat.
NUI Dxxxxxxxxx

Der Benutzer muß sich identifizieren, das heißt er gibt seine Kennung ein (Teil A). Der PAD fragt danach den Teil B der NUI (das Passwort) ab. (die »x« stehen hier für bei der Beantragung der NUI frei wählbare Zeichen).
SET 3:126, 5:1, 12:1

Diese Befehlsfolge setzt im PAD einige Parameter auf bestimmte Werte. Damit kann das Terminalprogramm mit dem sogenannten X-ON/X-OFF-Protokoll fahren, das heißt der PAD stoppt die Ausgabe der Daten, wenn er ein CTRL-S empfängt und fährt wieder damit fort, wenn er ein CTRL-Q erhält. Teleterm arbeitet zum Beispiel mit dieser Sequenz, um Daten auf Diskette abzuspeichern.
NUI OFF

Hiermit wird die korrekt eingegebene NUI gelöscht, das heißt jetzt kann eine andere eingegeben werden. Die Post empfiehlt diesen Befehl vor Auflegen des Telefons. Damit ist sichergestellt, daß die NUI nicht im PAD gültig bleibt, und von anderen mißbraucht werden kann.

## Wie beantragt man eine NUI, was kostet sie?

Der beste Weg zu einer eigenen NUI: Man ruft das örtliche Fernmeldeamt der Post an und läßt sich die Nummer der für Datex-P zuständigen Stelle geben. Dort sagt man einfach, man möchte eine NUI beantragen, und sie sollen ein Antragsformular zuschicken (auch nach einem Freiumschlag fragen, dann braucht man kein Porto zu zahlen). Auf dem Antragsformular steht dann alles weitere. Dieses Antragsformular steckt man ausgefüllt in den Umschlag, und nach ungefähr einer Woche bekommt man von der Post Nachricht, daß man den Teil B der NUI, das Passwort, beim nächsten Postamt mit seinem Ausweis abholen kann. Bis hierher entstehen einem keinerlei Kosten. Ab da kostet die NUI monatlich 15 Mark, ohne daß sie benutzt werden muß (ähnlich der Grundgebühr beim Telefonanschluß). Die Verbindungskosten berechnen sich hauptsächlich nach der Menge der übertragenen Daten. Eine angewählte Verbindung zum PAD (300 Baud) kostet:

Der PAD-Zugang 4 Pfennig pro Minute;

jede bereitgestellte Verbindung 5 Pfennig;

Der Datex-P Gebrauch 1 Pfennig pro Minute.

Die Übertragung von 64 Bytes kostet zusätzlich:
von 8 bis 18 Uhr 0,33 Pfennig
von 6-8 und 18-22 Uhr 0,22 Pfennig
von 22-6 Uhr 0,11 Pfennig

Diese Preise senken sich mit der übertragenen Anzahl von 64-Byte-Gruppen; es gibt also eine Art Mengenrabatt. Bei Verbindungen mit dem Ausland wird noch eine zusätzliche Zeitgebühr berechnet, die zum Beispiel für die USA 0,20 Pfennig pro Minute beträgt.

## Lohnt sich eine NUI?

Diese Frage muß jeder für sich selbst beantworten, vor allem dann, wenn er sie nicht geschäftlich, sondern privat nutzen will. Der wesentliche Vorteil von Datex-P ist: Eine Verbindung über den Bereich des örtlichen Telefonnetzes hinaus kommt über Datex-P immer billiger, als wenn man direkt dort anrufen würde. Natürlich hängt es von den finanziellen Verhältnissen ab. Viele jugendliche C64-Besitzer sind kaum in der Lage, eine NUI von ihrem Taschengeld zu finanzieren. Auch wird die Unterschrift des Anschlußinhabers verlangt, das heißt die Unterschrift der Eltern, die sie aus Angst vor den Kosten verweigern werden. Ich persönlich rate jedoch jedem, der es sich leisten kann, eine NUI zu beantragen. Mit einer NUI kann man zum Beispiel ein CBBS, ein Computer Bulletin Board Service in Aachen erreichen (NUA 44241040341), das sogenannte RMI-Net. Für die Benutzung dieses Services werden keinerlei weitere Gebühren verlangt, auch nicht (im Gegensatz zu Decates) wenn man eingetragener Benutzer werden will. Ich habe den Betreibern des RMI-Net einige Fragen gestellt, die der SYSOP (Systemoperator) des RMI-Net, Rupert Mohr, wieder mit einer Message beantwortete. Mich interessierten die Beziehungen zwischen dem RMI-Net und dem Chaos-Computer-Club, ob sich seiner Meinung nach eine NUI für einen Privatmann lohnt, warum sie nicht mehr ohne NUI erreichbar sind, und ob es etwas ähnliches wie RMI noch einmal gibt. So sehen die Nachrichten im Originaltext am Bildschirm aus:

Msg # *840 Dated 07-10-84 11:13:58
From: SYSOP
To: THOMAS OBERMAIR
Re: (R)Fragen-2
1. Zwischen mir und dem CCC bestehen keine Beziehungen.
2. Ich kann nicht beurteilen, ob sich für einen Privatmann eine NUI lohnt. Im Raum Aachen lohnt sich aber unter Umständen schon ein Hauptanschluß für einen Privatmann.
3. Reverse Charge kostet Geld, unser Geld.
4. Das kommt auf die Definition von ähnlich an. Wenn Du gebührenfrei meinst, dann: NEIN.
Weiter (J), N, NS, RE, K? k
Msg # 840 Killed.
Msg # (577 to 842, ★, <H>elp)?

RMI ist ein Unternehmen, das Software für den IBM-PC herstellt. Das CBBS läuft ebenfalls auf einem IBM-PC mit Harddisk. RMI hat Zugang zu verschiedenen Datenbanken (wie Compuserve, The Source) und sammelt dort Informationen, die in ihrem CBBS öffentlich zugänglich gemacht werden. Sie bietet RMI eine umfangreiche Programmbibliothek an. Wenn genügend C 64-Anwender RMI benutzen würden, könnte man eine spezielle Rubrik für C 64-Programme einrichten lassen.

## Der Zugang zu ausländischen Netzwerken

Da verschiedene Länder Datenvermittlungsnetze auf Paketbasis anbieten, liegt der Zugang von einem Netz zum anderen nahe. Dies geschieht durch sogenannte Auslandsvermittlungsstellen, die die eventuell verschiedenen Protokollformate untereinander anpassen (siehe Bild 3). Ferner übernehmen sie dieselben Aufgaben, wie die Vermittlungscomputer des Datex-P-Netzes. In der Praxis sieht das so aus: Jedes Netz hat eine eigene »Vorwahl«, die, wie beim Telefon, vor der eigentlichen Teilnehmer-Nummer eingegeben wird. Datex-P verlangt vor jeder Auslandsnummer die Ziffer 0 (Null) als Kennzeichen für einen Verbindungswunsch mit dem Ausland. In Tabelle 3 sehen Sie eine nicht vollständige Aufstellung erreichbarer Netze mit ihren »Vorwahlen« (sogenannte Netzkennzahlen). Das »in ausländische Netze eindringen« ist also meistens nichts anderes, als das Wählen einer vorher bekannten NUA im Ausland. Mit folgender Ausnahme: Es gibt Computer, die einen Anrufer weitervermitteln und einen recht komfortablen Dialog bieten. Generell gilt: Für Verbindungen mit dem Ausland braucht man eine NUI. Auslandsnummern findet man in größeren Mailboxen, wie in Decates oder im RMI-Net (über Datex-P). Soweit man die Datenbanken nicht bezahlen will oder kann, muß man Hacken, das heißt die verlangten Passwörter herausfinden. Wertvolle Kontaktadresse hierzu: Der Chaos Computer Club, ein Club von Computerfreaks, die es sich zur Philosophie gemacht haben, möglichst auf alles kostenlosen Zugriff zu haben. Erreichbar sind sie unter der RMI-Net-Mailbox mit dem Empfängernamen CHAOS TEAM, oder über normalen Postweg an folgende Adresse: Chaos Computer Club c/o Schwarzmarkt Bundesstr. 9 D 2000 Hamburg 13. Es lohnt sich, das Informationsblatt »Die Datenschleuder«, die unregelmäßig erscheint, im Abonnement kommen zu lassen. Das kostet etwa 30 Mark für ein Jahr. Mittlerweile sind bereits drei Ausgaben erschienen.

Zum EURONET: Vor einigen Jahren haben die Mitgliedstaaten der EG beschlossen, ein gemeinsames Netz von Paketvermittlungsdiensten aufzubauen. Ein einziger Großrechner übernimmt für alle Länder der EG die Vermittlungsaufgaben. Diesen Computer soll es in einem Jahr nicht mehr geben; das heißt die Vermittlung der Datenpakete wird, wie jetzt schon teilweise realisiert, über »normale« Auslandsvermittlungsstellen durchgeführt.

## Was bringt die Zukunft?

Die Post plant für die nähere Zukunft ein »einheitliches digitales Übertragungsnetz« (ISDN). Dieses Netzwerk vereinheitlicht alle Dienste der Post in einem Übertragungsnetz, das heißt sowohl Sprache als auch Datenübertragung jeder Art (Daten, Texte, digitalisierte Bilder etc.) werden über ein Netz vermittelt. Dieses Netz soll bereits 1987 verfügbar sein. Dann soll vom ISDN zum IBFN (integriertes breitbandiges Fernmelde-Netz) allmählich übergegangen werden. Das IBFN unterscheidet sich vom ISDN im Prinzip nur durch die Übertragungsmedien. Daten werden dann über Glasfaser und Satelliten übertragen. Ein Anschluß zu einem Netzwerk wird so alltäglich, wie das heutige Telefonnetz. Das 64'er-Magazin wird Sie mit der Serie »Aktuelles aus der Datenfernübertragung« stets auf dem Laufenden halten.

Es ist mir leider nicht gelungen, Adressen von C 64-User-Clubs zu bekommen, die sich hauptsächlich mit Datenfernübertragung beschäftigen. Es existieren nur vereinzelt ein paar »Hacker«, die den C 64 fleißig beanspruchen. Wer Lust hat, einen solchen zu gründen, kann mir schreiben, oder mir eine Nachricht im RMI-Net hinterlassen. Ich werde dann ein solches Vorhaben nach meinen Kräften unterstützen.

(Thomas Obermair/aa)

### Literaturliste zum Thema

MC-Modem-Sonderheft Franzis Verlag, Preis 16 Mark.

Dieses Sonderheft enthält alles Wissenswerte über Modems, Schnittstellen etc. Etwas zu teuer, aber es gibt nichts Vergleichbares, was billiger ist.

Elektronik-Sonderheft »Datenkommunikation« Franzis Verlag, 18 Mark.

Ein vom Informationsgehalt sehr hochwertiges Heft mit Fachbeiträgen von kompetenten Autoren. Fast zu kompliziert für den Laien, viel Theorie.

# Bücher

## Data-Becker Bücher zum Commodore 64

Es sollen hier drei Bücher aus der Data-Becker Sachbuchreihe zum C 64, die mittlerweile auf 19 Titel angeschwollen ist, besprochen werden.

Zunächst zum »64 intern«, dem teuersten der vorgestellten Bücher. Die größte Leistung dieses Buches ist das ausreichend kommentierte ROM-Listing, das folgerichtig auch den meisten Raum in Anspruch nimmt. Außerdem enthält das Buch noch Kapitel über den technischen Aufbau des C 64, sowie über Grafik- und Musikprogrammierung, die beiden letzteren sind allerdings arg dürftig ausgefallen. Dafür gibt es dann eigene Bücher.

»64 intern« soll das Arbeiten mit dem C 64 erleichtern. Dieses Ziel wird jedoch nur dann erreicht, wenn der Leser schon einige Grundkenntnisse der Maschinenprogrammierung besitzt, und weiß, was er mit den gebotenen Informationen anfangen kann. Wer mehr über die Programmierung von Basic aus wissen will, ist mit anderen Büchern mit Sicherheit besser bedient.

In Verbindung mit anderen Büchern ist »64 intern« mit Sicherheit eine wertvolle Hilfe für erfahrenere C 64-Benutzer.

»Das Trainingsbuch zum Simons Basic« ist mit fast 400 Seiten das umfangreichste der Reihe. Sinnvoll angewendet werden kann es logischerweise nur von Besitzern dieser Basic-Erweiterung. Alle Besitzer von Simons Basic jedoch haben Grund zur Freude. Das Buch geht weit über das hinaus, was das eher spartanisch knappe Originalhandbuch an Informationen und Arbeitshinweisen gibt. Die Beispiele demonstrieren recht eindrucksvoll die Möglichkeiten dieser Basic-Erweiterung, aber auch ihr Unvermögen, bestimmte Dinge zu tun. Ein recht neutrales Sachbuch, das für den Besitzer von Simons Basic eine gute Hilfe beim Programmieren ist.

»Der C 64 und der Rest der Welt«. Dieses Buch gehört, wie auch »Das Grafikbuch zum C 64«, zur neuen Generation der Data-Becker Bücher. Ein Teilaspekt des Computers wird herausgegriffen und zum Thema eines Buches gemacht. Bei der Vielfalt der Möglichkeiten des C 64 erscheint dieses Vorgehen auch sinnvoll, die Frage ist nur, ob das einzelne Buch dann auch alle Ansprüche erfüllt.

Im vorliegenden Buch wird eine ganze Reihe von Zusatzschaltungen für den C 64 vorgestellt, die mit relativ wenig Aufwand selbst hergestellt werden können. Die Palette reicht von der einfachen Leuchtdiodenansteuerung, über ein EPROM-Programmiergerät, bis hin zu einer einfachen Sprachein- und -ausgabe.

Die vorgestellten Schaltungen stellen zwar nicht immer die beste Lösung des Problems dar, lassen aber dafür einigen Spielraum für eigene Ideen. Zu jeder Hardware-Erweiterung gehört natürlich auch die Treibersoftware. Hier zeigt das Buch deutliche Schwächen, denn die Erklärungen zur Ein/Ausgabesteuerung sind eher dürftig, so daß es dem weniger versierten Benutzer manchmal recht schwer fallen dürfte, das Behandelte nachzuvollziehen. Es sei auch dahingestellt, ob es sinnvoll ist, den C 64 in ein Digitalthermometer umzubauen; für diese und ähnliche Anwendungen scheint er mir doch zwei Nummern zu groß zu sein.

Es braucht wohl nicht darauf hingewiesen werden, daß das Buch nur für den sinnvoll ist, der weiß, an welchem Ende ein Lötkolben heiß wird...

(Reinhard Schrutzki)

Info: 1. Angerhausen/Brückmann/Englisch/Gerits, 64 Intern, Data Becker 1983, 320 Seiten, ISBN 3-89011-000-2, 69 Mark.
2. Plenge/Szczepanowski, Das Trainingsbuch zum Simons Basic, Data Becker 1983, 380 Seiten, ISBN 3-89011-009-6, 49 Mark.
3. Brückmann, Der Commodore 64 und der Rest der Welt, Data Becker 1984, 230 Seiten, ISBN 3-89011-015-0, 49 Mark.

## Programmierung des 6502

Dieses Buch von Rodney Zaks, welches man bereits zu den Klassikern der Bücher zum 6502-Mikroprozessor zählen kann, nimmt für sich in Anspruch, ein »vollständiger und in sich abgeschlossener Text zum Erlernen des Programmierens mit dem 6502-Prozessor« zu sein. Dieser Prozessor befindet sich im LV 20 und, in einer kompatiblen Form (dem 6510), im C 64.

Um das Ergebnis der Prüfung vorwegzunehmen: Ein Lehrbuch zum Erlernen der Programmierung dieses Mikroprozessors ist das Buch meiner Meinung nach nicht. Schon gar nicht,wenn man über keine Programmierkenntnisse verfügt, was im Vorwort als möglich bezeichnet wird.

Doch bevor ich schreibe, was mir nicht gefallen hat, möchte ich zuerst einmal die Vorzüge des Buches aus meiner Sicht schildern. Der größte Pluspunkt des Buches ist für mich das 4. Kapitel, in welchem auf etwa 80 Seiten der gesamte 6502-Befehlssatz erläutert wird. Dabei ist jedem Befehl knapp eine Seite gewidmet worden, auf welcher sich die jeweilige Funktion, das Format und eine Beschreibung des Befehles findet. Darüber hinaus werden grafisch die Datenwege, die möglichen Adressierungsarten und die Beeinflussung der verschiedenen Flaggen dargestellt. Dieses und drei benachbarte Kapitel (grundlegende

Programmiertechniken; Adressierungsarten und Anwendungsbeispiele) machen das Buch zu dem, was es für mich geworden ist, nämlich zu einem wertvollen Nachschlagewerk bei der Programmierung in der Assemblersprache.

Dem Anspruch, ein Lehrbuch zu sein, wird das Buch jedoch leider weder durch eine einführende, erklärende Sprache, noch durch einen besonderen didaktischen Aufbau gerecht. Nur die eingestreuten Übungsaufgaben (deren Lösungen ich im Anhang vergeblich suchte), deuten darauf hin, daß das Buch zum Erlernen eines Sachverhaltes geeignet sein soll. Auch im Buch vorhandene, aber für den Anfänger unwichtige, ja abschreckende Kapitel (Hardware-Organisation des 6502; Ein- und Ausgabetechniken; I/O-Bausteine) machen dieses Werk als Lehrbuch für mich ungeeignet.

Zusammenfassend möchte ich sagen, daß dieses Buch aufgrund der oben erwähnten Vorteile, der schönen, übersichtlichen Darstellung der vorhandenen Informationen, des ausführlichen Registers und nicht zuletzt auch wegen seines sauberen Druckes und der guten Verarbeitung ein wichtiges Arbeitsbuch für den fortgeschrittenen Assemblerprogrammierer sein kann. Dafür erscheint der Preis, unter Berücksichtigung der Preise vergleichbarer Bücher angemessen. Als Lehrbuch zum Einarbeiten in die Assemblersprache, insbesondere für Anfänger ohne

Programmierkenntnisse, kann ich dieses Buch allerdings nicht uneingeschränkt weiterempfehlen.

(Wolfgang Willing)

Info: Rodney Zaks, Programmierung des 6502, Sybex-Verlag, 400 Seiten, ISBN 3-88745-011-6, 44 Mark

# HYPRA-LOAD: Schnelles Laden von Diskette

> Spontane Begeisterung und Zustimmung erhielten die beiden Autoren des folgenden Programms. Ein bis zu sechsmal schnelleres Laden von Programmen von der VC 1541 hatte uns bisher noch niemand angeboten.  Wir meinen, ein echter Knüller, der es ganz bestimmt verdient, Listing des Monats zu werden.

Bisherige Versuche, die VC 1541 schneller zu machen, scheiterten fast alle. C 64-Besitzer hatten lediglich die Möglichkeit, mittels einer zusätzlichen IEEE-Schnittstelle eine der größeren Floppys (4040, 8250, etc.) anzuschließen. Viele waren der Meinung, daß die serielle Datenübertragung vom C 64 an die VC 1541 schuld an deren Trägheit hatte. Was natürlich nicht ganz stimmen kann. Denn es gibt serielle Schnittstellen, die mehr als 12000 Baud ( = Bit pro Sekunde) übertragen. Somit war klar, daß nicht die serielle Übertragung, sondern eher das DOS (Disk Operating System), die interne Software der Floppy, der große Hemmschuh sein mußte. Und in der Tat, wenn Sie in der Ausgabe 9/84 des 64'er-Magazins auf Seite 10 die Aktuell-Meldung über eine neue Alternativ-Floppy gelesen haben, konnten Sie erfahren, daß lediglich das kompatible DOS die mögliche Geschwindigkeit des TEAC-Laufwerkes stark einschränkte. Und hier setzten die beiden Autoren mit ihrer Arbeit an.

(gk)

## Zusammenarbeit und Ehrgeiz werden mit 2000 Mark belohnt

Ich, Boris Schneider, wurde am 5.7.66 in Grevenbroich (zirka 20 km südwestlich von Düsseldorf) geboren.

Genau 10 Jahre später erhielt ich meinen ersten Taschenrechner. Um 1978/79 hatte ich meine ersten Kontakte mit einem »richtigen« Computer: einem PET 2001, den mein Vater manchmal mit nach Hause brachte.

1980 erfolgte dann der Umzug nach Bayern; hier besuche ich das Gymnasium Vaterstetten, wo ich unter anderem auch Karsten Schramm kennenlernte, der sich nun ebenfalls kurz vorstellt:

Meine Geschichte begann am 1.3.66 in München.

Ich besuche zur Zeit ebenfalls das Gymnasium Vaterstetten, wo Boris und ich nächstesJahr das Abitur machen wollen.

Mit 14 Jahren kam ich das erste Mal mit Computern in Kontakt, wobei ich prompt vom »Fieber« angesteckt wurde, so daß meine Eltern ernstlich um meine Zurechnungsfähigkeit besorgt sein mußten.

Meine Krankheit klang zum Glück schon nach einem Jahr ab, doch das Hobby blieb, und so besitze ich seit einem halben Jahr einen C 64, nachdem ich zuvor in der Schule auf CBM-Computern gearbeitet hatte.

Wir (Boris und ich) teilen uns die Leidenschaft, in Maschinensprache zu programmieren und dem Computer die letzten Geheimnisse zu entlocken!

Boris Oliver Schneider, Sudetenstraße 46, 8018 Grafing, Tel. 08092/6872.
Karsten Oliver Schramm, Herzog-Stephan-Weg 33, 8011 Zorneding, Tel. 08106/20252

---
## Warum Zeit verschwenden? Laden Sie lhre Programme in Zukunft fünfmal schneller.

Schon ganze Scharen von Computerbesitzern werden hilflos gestöhnt haben, als sie wieder einmal eine Kaffeepause einlegen mußten, um das Laden des nächsten Programms von Diskette abzuwarten. War das Programm dann auch noch länger als 150 Blocks, so konnte diese »Zwangssendepause« durchaus länger als 2,5 Minuten werden.

Auch Hardware-Hersteller haben diesen Mangel erkannt und bieten neuerdings immer mehr schnelle Laufwerke als Ersatz für die VC 1541 an.

Halt! Jetzt aber Schluß mit dem dauernden Herziehen über die VC 1541, die nämlich eigentlich gar keine Schuld an den langen Wartezeiten hat; vielmehr kann sie es, was die Geschwindigkeit betrifft, ohne weiteres mit den großen CBM-Floppys aufnehmen, oder anders formuliert, die VC 1541 ist genauso schnell wie zum Beispiel die CBM 2031.

Aber wo liegt denn dann nun der Haken? Das Stichwort lautet: Der serielle Bus, also die Schnittstelle zwischen Floppy und Computer. Diese Verbindung erfordert zwar weniger Materialaufwand als der üblicherweise bei Commodore benutzte IEEE-488-Bus, (der 8-Bit-parallel arbeitet). Der serielle Bus hat aber den Nachteil, daß die Geschwindigkeit bei der Übertragung im Normalbetrieb zirka 5 bis 6mal langsamer ist als beim IEC-Bus, was sich dann auch auf die Ladezeit auswirkt.

Die Hardwarelösung habe ich ja schon erwähnt: Sie erfordert außer einer neuen Floppy, auch noch das IEEE-Bus-Modul, da der C 64 in der Grundversion keine derartige Schnittstelle zu bieten hat. Mitunter ist also diese Lösung sehr teuer und übersteigt die Kaufkraft vieler C 64-Anwender.

Aber zum Glück gibt es noch eine Softwaremöglichkeit, hier effektiv einzugreifen. Das Prinzip ist denkbar einfach. Es beruht auf der Möglichkeit, in die Floppy Maschinenprogramme einzuspeichern und diese dann dort auszuführen.

In unserem Fall werden also modifizierte Busroutinen in der Floppy und im Computer abgelegt, die dann die sonst so langsame Übertragung auf ein Vielfaches steigern.

In Zahlen: Der serielle Bus wird durch diese Routinen weit über 10mal so schnell und das Laden geschieht nun mit der maximalen Floppygeschwindigkeit, die etwa 5 bis 6mal höher ist.

Nun aber zum Programm, damit Sie so schnell wie möglich in den Genuß von HYPRA-LOAD kommen: Wenn Sie den Basic-Lader eintippen, achten Sie bitte besonders sorgfältig auf richtiges Eingeben der Checksummen, da diese zur Fehlerkontrolle bei der Eingabe der DATAs dienen!

Vor dem ersten Startversuch das Programm bitte unbedingt auf Diskette speichern, da es sich bei der Ausführung automatisch überschreibt. Anschließend starten Sie mit RUN. Wurde alles korrekt eingegeben, wird am Basic-Anfang ein Maschinenprogramm generiert und das Basic-Programm gelöscht.

Dieses Maschinenprogramm ist das eigentliche HYPRA-LOAD und kann nun mit »SAVE« abgespeichert werden.

Um den Geschwindigkeitsvorteil auch wirklich nutzen zu können, wird empfohlen, HYPRA-LOAD möglichst auf alle Programmdisketten zu überspielen. Es wurde dazu extra sehr kurz (6 Blocks) gehalten. Müßten Sie nämlich nach jedem Laden zuerst die Diskette wechseln, so wäre die Effektivität von HYPRA-LOAD erheblich vermindert.

Übrigens: Die Einschaltmeldung von HYPRA-LOAD umfaßt auch eine Bytes-free-Meldung, welche jedoch ignoriert werden sollte, da die Zahlenangabe aus programmtechnischen Gründen falsch ist. Dies hat jedoch keinen Einfluß auf die einwandfreie Funktion des Computers!!!

Nun aber zu den besonderen Eigenschaften — HYPRA-LOAD kopiert nach dem Kaltstart das gesamte Betriebssystem vom ROM ins darunterliegende RAM, jedoch ohne dabei Basic-Speicherplatz zu verbrauchen. Danach werden die einzelnen Programmteile im Betriebssystem verteilt und das Betriebssystem im RAM gestartet.

— Abzulesen ist die Aktivierung von HYPRA-LOAD an der Speicherstelle 1 der Zeropage. Diese enthält normalerweise den Wert 55, was besagt, daß ab $A000 ROM aktiviert ist, welches Basic und das Betriebssystem enthält.

HYPRA-LOAD schaltet den Wert auf 53 um und aktiviert dadurch anstelle von ROM-Bausteinen freien RAM Bereich, in dem nun das Betriebssystem und Basic stehen.

Man kann also ganz einfach HYPRA-LOAD abschalten, durch POKE 1,55 und, sofern nicht zerstört, mit POKE 1,53 wieder einschalten.

— Da HYPRA-LOAD im RAM steht, ergeben sich natürlich einige Probleme. So gibt es viele Programme, die beim Laden den Bereich ab $A000 überschreiben. Würde nach der Rückkehr aus der Laderoutine nun ins RAM ab $A000 gesprungen, so wäre ein »Aufhängen« des Computers fast unvermeidlich.

Gegen solche Programme ist HYPRA-LOAD abgesichert, und es wird nach dem Ladevorgang automatisch ins ROM-Basic zurückgesprungen. Bei mehrteiligen Programmen erkennt man dies daran, daß plötzlich wieder »normal« geladen wird.

Überschreiben Programme jedoch den Bereich ab $E000, so treffen sie früher oder später auf die Laderoutinen und der Computer »stürzt ab«. Bei solchen Programmen hilft nur das vorherige Ausprobieren. Es muß an dieser Stelle erwähnt werden, daß es auch Programme gibt, die ein Abschalten von HYPRA-LOAD erfordern, aber erst nachdem der Ladevorgang abgeschlossen ist. Auch hier hilft zum Erkennen solcher Programme nur das Ausprobieren.

Am besten arbeitet HYPRA-LOAD mit einteiligen Programmen, da es hier nicht vorkommt, daß der Bereich ab $EOOO überschrieben wird (solche Programme müßten nämlich den davorliegenden I/O-Bereich überschreiben) und so das gesamte Programm schnell geladen werden kann!

— Es sollte vielleicht noch einmal erwähnt werden, daß sich HYPRA-LOAD nur auf den LOAD-Befehl beschränkt, andere Diskettenoperationen bleiben davon unberührt.
— Da HYPRA-LOAD im Betriebssystem steht, vernichtet es zwangsläufig andere Routinen, das heißt, vor Kassetten- und RS232-Betrieb muß HYPRA-LOAD abgeschaltet werden.
— SYS 64738 als Reset reaktiviert auch HYPRA-LOAD, sofern es noch nicht zerstört oder ausgeschaltet ist.
— Nach einem Reset durch einen Taster kann HYPRA-LOAD, sofern noch nicht überschrieben, durch
POKE 1,53
wieder eingeschaltet werden. Wird danach jedoch langsam geladen, so ist im Basic-Teil etwas verändert worden, so daß HYPRA-LOAD auf das ROM umgeschaltet hat.
— Ein Test hat ergeben, daß HYPRA-LOAD auf dem SX 64 trotz dessen angeblicher »Vollkompatibilität« nicht lauffähig ist. — Da zusätzliche Peripheriegeräte und auch der Bildschirm den schnellen Busbetrieb stören, müssen diese entfernt, beziehungsweise abgestellt und der Bildschirm ausgeschaltet werden. Ist dies nicht geschehen, so macht HYPRA-LOAD darauf aufmerksam und wartet auf das Nachholen des Versäumten. Anschließend kann durch Drücken der RUN/STOP-Taste mit dem Laden begonnen werden. Es erfolgt keine weitere Kontrolle mehr!
— Betreiben Sie ein Floppy-Laufwerk zum Beispiel unter der Geräteadresse 9, so müssen folgende Änderungen durchgeführt werden:

Die DATAs in den Zeilen 104, 114 und 239; dort müssen die entsprechenden Zahlen (008) auf die neue Geräteadresse umgestellt werden. Natürlich ist auch ein Angleichen der Checksummen erforderlich. Es sind dies die 1., die 2. und die 12. Checksumme.

Übrigens: Für eventuelle Berichte über die Erfahrungen mit HYPRA-LOAD sowie Verbesserungsvorschläge wäre ich sehr dankbar.

Und nun viel Spaß mit einer 5 bis 6mal so schnellen VC 1541.

(K. Schramm/B. Schneider/gk)

# Menügesteuerte Finanzmathematik

> Zwei herausragende Eigenschaften machen dieses Programm für alle C 64-Besitzer interessant: Die sehr gute Menütechnik und der modulare Bildschirmmaskenaufbau.

Wer wünscht sich nicht, daß Programme von Diskette auf Tastendruck geladen, beziehungsweise nachgeladen werden? Wenn Sie das Menüprogramm dieses Listings übernehmen und für Ihren Bedarf abändern, ist das Laden von Programmen kein Problem mehr.

Das Programm wird geladen mit dem Befehl:
LOAD "Menü" ,8
Gestartet wird dann mit dem Befehl: RUN

Wählen Sie nun mit den Funktionstasten F3 und F5 die Nummer des Programmes, mit welchem Sie als nächstes arbeiten wollen. Sie erkennen Ihre augenblickliche Position an der blinkenden Zahl.

Nach beendeter Wahl drücken Sie »RETURN«. Dann wird das Programm geladen, dessen Zahl gerade blinkt und an der sich nach »RETURN« ein ← (Pfeil links) befindet.

** Bedienungsanleitung für das Programm:**
** Erstellen eines Tilgungsplanes.**

Nach erfolgter Auswahl im Hauptmenü wird das Programm automatisch gestartet.

Durch entsprechende Informationen in der Fußzeile erklärt sich das Programm im wesentlichen selbst. Allerdings mußte manchmal wegen Platzmangel darauf verzichtet werden.
Grundsätzlich gilt:

— Bis auf die Funktionstasten erfolgt bei jeder Eingabe und Auswahl ein Abschluß mit »RETURN«.
— Bei der Auswahl im Programm, wird immer mit den Tasten F3 und F5 gewählt, nach Drücken von »RETURN« wird immer das als nächstes ausgeführt, was zuletzt geblinkt hat.
— Zum Abschluß der Dateneingabe gilt für die Abfrage, ob die Eingabe korrekt ist, folgendes:
a)	Zugelassen sind die Buchstaben j Qa) und n (nein).
b)	Die Antwort kann bis zum Abschluß mit »RETURN« durch die Taste »DEL« korrigiert werden.
— Während der Dateneingabe, kann man durch Drücken der Taste Fl zum ersten Auswahlmenü zurückkehren.
— Wird die Tabelle auf dem Bildschirm ausgedruckt, kann man den Bildschirmausschnitt, innerhalb der festgesetzten Grenzen verändern.
Mit F1 kehrt man zur alten Bildschirmmaske zurück.
Das Ausgabefeld »Resultat« enthält folgende Informationen:
— Zinsaufwand (gesamt): Dieser Summe entsprechen sämtliche in den einzelnen Jahren zu zahlende Zinsen.
— Annuität (gesamt): Dies ist die Summe, die man insgesamt zurückzahlen muß (Zins- und Tilgungsanteil zusammen),
Im linken unteren Feld wird noch einmal angegeben, wie hoch der Zinsanteil von der Annuität in Prozent ist. Dieses Programm stellt Tilgungspläne bis zu einer Laufzeit von 50 Jahren auf. Falls dies nicht ausreicht, braucht in Zeile neun nur die Dimensionierung der Variablen e und e$ erhöht werden.

(Klaus Klöker/rg)

## Lebenslauf

Ich bin 20 Jahre alt, habe im Frühjahr dieses Jahres mein Abitur bestanden und im August eine Ausbildung als Bankkaufmann begonnen.

In meiner Freizeit beschäftige ich mich gerne mit Geschichte und der Computerprogrammierung.

## Entstehungsgeschichte und Anwendung

Entstanden ist das Programm aufgrund eines Kurses über Finanzmathematik.

Es schien mir damals zweckmäßig, Tilgungspläne mit dem Computer aufzustellen. Dieser absolviert seine Arbeit sekundenschnell und fehlerfrei. Wer selbst einmal Tilgung »zu Fuß« geplant hat, weiß, daß gerade letzteres keine Selbstverständlichkeit ist (bei 20 Jahren Laufzeit und 6 Beträgen pro Jahr, müssen immerhin 120 Beträge einzeln berechnet werden).

Einen großen Teil der Programmierzeit beanspruchte der Aufbau der Bildschirmmasken und die Menüsteuerung. Ich hielt diesen Aufwand für angebracht, weil die Anwendung bequemer ist und außerdem mehr Spaß macht. Wer sich das Programm »Tilgungspläne« genauer anschaut, wird feststellen, daß man durch einfaches Austauschen der Formeln verschiedene Tabellen aufstellen kann, obwohl nur eine begrenzte Zahl von Eingabekriterien notwendigist.

(Klaus Klöker)

# Video-Vorspann mit dem VC 20

> Einen professionellen Vorspann wie aus einem richtigen Filmstudio produziert dieses Programm.

Erzeugt wird ein technischer Vorspann, ähnlich wie ihn auch Fernsehstudios verwenden. Dieser Vorspann dient einerseits der Kontrolle der richtigen Einstellungen, andererseits der Dokumentation der einzelnen Szenen. Darüber hinaus wird die Synchronisation einer eventuellen Nachvertonung erleichtert.

Der Vorspann besteht im einzelnen aus
— einem farbfolgerichtigen Farbbalken zur Einstellkontrolle; dazu wird ein Meßton von 1000 Hz erzeugt,
— einem »Etikett« (anstatt der Klappe beim Film) mit Angaben über Datum, Bandnummer, Geschwindigkeit, Aufnahmegerät, Quelle, Serienname und Titel,
— schließlich einem Countdown von neun bis zwei im Sekundentakt, dazu wieder ein Meßton von 1000 Hz.

Unter dem Farbbalken und über den Zahlen des Countdowns erscheint Ihr Name beziehungsweise die Studiobezeichnung. Ersetzen Sie daher in den Zeilen 440 und 1330 »Schulz Video« durch die von Ihnen gewünschte Bezeichnung.

Nach dem Starten des Programms muß als erstes die Eingabe der Etikett-Daten erfolgen. Folgende Angaben sind notwendig:
— Bandnummer (bis 9 Stellen)
— Geschwindigkeit (SP oder LP)
— Datum (beliebiges Format)
— Aufnahmegerät (bis 13 Stellen)
— Quelle (bis 13 Stellen)
— Serienname (bis 19 Stellen)
— Titel (bis 19 Stellen)

Jede Antwort wird mit RETURN abgeschlossen. Die Fortschaltung der Sequenzen Farbbalken/Etikett/Countdown geschieht mit der F7-Taste. Zwischen den einzelnen Sequenzen erscheint immer — bis zum erneuten Drücken von F7 — eine Schwarzblende

Nach dem Countdown bewirkt die F7-Taste wiederum das Erscheinen der Farbbalken, und die einzelnen Sequenzen werden erneut durchlaufen. Für eine neue Beschriftung des Etiketts ist STOP/RESTORE und ein erneuter Programmstart notwendig.

(Wolfgang Schulz/ev)

# Hardcopy MPS 801/VC 1515

Mit dem Programm kann in knapp drei Minuten der Grafikbildschirm des C 64 ausgedruckt werden. Dabei wird Bit für Bit der Inhalt des Grafikspeichers auf die Druckernadel übertragen. Es arbeitet mit dem MPS801 und läuft auch mit dem VC 1515. Allerdings muß dann der Bildschirm während des Druckens abgeschaltet werden.

Der Basic-Lader kann auch in eigenen Grafik-Programmen verwendet werden. Sie können den Bereich 8192 bis 49151 als Grafikspeicher benutzen.

Um passende Bits für jede Druckernadel im Grafikspeicher zu finden, habe ich den Ausdruck BYTEADRESSE = 8192 + 8 * X + Y + INT(Y/8) * 312 verwendet. Er läßt sich aus den Angaben im »Commodore 64-Programmers Reference Guide« (Seiten 124 bis 12 6) ableiten. X und Y sind dabei die Koordinaten eines Grafikpunktes (gezählt von der oberen, linken Ecke des Bildschirms). Die Gleichung gibt zu jedem Bildpunkt die Adresse des Bytes, in dem das entsprechende Bit gesetzt (Bildpunkt an) oder gelöscht (Bildpunkt aus) ist.

Diese Adressen müssen für den MPS 801-Drucker in Siebener-Blöcke sortiert werden, da der Druckkopf nur über sieben Nadeln verfügt. Jeder Siebener-Block steuert dann achtmal (einmal fürjedes Bit) die sieben Druckernadeln.

Insgesamt ist der Grafikbildschirm 320 Punkte entsprechend – 320 : 8 = 40 Bytes – breit. Eine Druckzeile enthält also 40 * 7 = 280 Bytes. Das Programm sortiert jeweils 280 Bytes (1 Druckzeile) in Siebener-Blöcke und speichert sie im Bereich 49920 bis 50199. Von dort werden die Bitmuster auf den Druckkopf übertragen.

Das Sortieren erfolgt mit der Formel POKE(49920+7 *X+Y-INT(Y/7) * 7),PEEK(BYTEADRESSE).

Mit Hilfe der Additions-, Multiplikations- und Divisionsroutinen aus R. Zaks »Programmierung des 6502« und LA. Leventhal :»6502 Programmieren in Assembler« habe ich diesen Ausdruck in Maschinensprache übersetzt.

## Benutzung des Programms

CHR$(8) schaltet den Grafik-Modus des Druckers ein.
Die drei folgenden CHR$(13) bewirken einen Papiervorschub. Er sorgt für ein sauberes Drucken der ersten Grafik-Zeilen (Zeile 450). Aufgerufen wird die Druckroutine mit SYS 49525,LF (Zeile 460). Dabei ist LF die logische Filenummer des geöffneten Drucker-Files (Zeile 450). Mit CHR$(15) wird der Drucker wieder auf den Normal-Modus eingestellt (Zeile 470).

In den Zeilen 410 bis 430 wird die Anfangsadresse des Grafikspeichers ermittelt und in Zeile 440 der Hardcopy-Routine mitgeteilt. Dadurch läßt sich zum Beispiel auch der RAM-Bereich unter dem Basic-Interpreter als Grafikspeicher nutzen. Der ganze Basic-Bereich (2048 bis 40959) ist dann für Programme frei.

Nicht benutzt werden darf das RAM unter dem Betriebssystem, da es zur Ausgabe der Zeichen auf den Drucker gebraucht wird (BSOUT=$FFD2). Ebenfalls nicht benutzbar als Grafikspeicher ist der Bereich 49152 bis 57343, da sonst das Programm von der Grafik überschrieben wird.

Die Zeilen 410 bis 440 können weggelassen werden, wenn der Grafikspeicher bei 8192 bis 16191 liegt.

(Rainer Kracht/rg)

# Der VC 1526/MPS 802 als Grafikdrucker

Aufgabe des Programms ist es, die Punkte aus dem Bildspeicher (nachfolgend als HRBM — Hires-Bit-Map — bezeichnet) zu lesen und dem Drucker in geeigneter Form zu übergeben. Die gestellte Aufgabe läßt sich in die folgenden Abschnitte unterteilen: Initialisierung; Lesen des HRBM; Umformen der gelesenen Daten; Übergabe der Daten an den Drucker; Ende.

Betrachten wir das Ganze aus der Bit-Sicht. Das HRBM besteht aus 8 000 Bytes. Diese lassen sich als 8 x 8 Bit-Zeichen zusammenfassen. Man erhält dann also 25 Zeilen zu je 40 Spalten aus 8 x 8 Bit-Zeichen = 1000 solche Zeichen. Das Programm liest also ein solches Zeichen aus der HRBM und definiert nach diesem Muster einen neuen Character für den 1526. Im HRBM sind aber die Bytes horizontal orientiert, während sie der Drucker vertikal orientiert erwartet (siehe Skizze 1). Das Umformungsprogramm hat deshalb die Aufgabe, die Bits um die Diagonale zu spiegeln. Damit wären alle Teilprobleme gelöst.

Das Assemblerprogramm bietet noch folgende Vorzüge: — Befehlssyntax: SYS 6 * 4096, T, P
T = Tabulator (0 <= T <= 40)
P*4096 = Anfangsadresse des HRBM (0 <= P <= 15) — das HR-Bild kann auf dem Drucker in der Horizontalen verschoben werden (Tab)
— durch einen speziellen Parameter wird das HRBM gewählt (auch das »versteckte« RAM unter dem Interpreter und dem Betriebssystem)
— durch RUN/STOP unterbrechbar (Files werden korrekt geschlossen)
— kein Zeilenvorschub, das heißt zwei nacheinander ausgedruckte Bilder fügen sich nahtlos aneinander
— das Programm liegt von $6 000 bis $613b in einem günstigen Bereich und kann somit mit vorhandenen Basic-Erweiterungen verwendet werden
— hohe Geschwindigkeit durch reine Maschinensprache.

Wenn Sie das Hardcopy-Programm in Verbindung mit einer Basic-Erweiterung verwenden, beachten Sie bitte folgende Reihenfolge:
1.	Basic-Erweiterung laden und starten.
2.	Basic-Lader des Hardcopy-Programms laden und starten. Das Maschinenprogramm schützt sich selbst vor dem Überschreiben.

Es kann sein, daß Sie vor dem Starten des Programms den Zeilenvorschub des VC 1526/MPS 802 verkleinern müssen:
OPEN 4,4: OPEN 6, 4, 6: PRINT#6, CHR$(18): PRINT#4: CLOSE 4: CLOSE 6

(Lucas Kalt/rg)

# Der besondere Leckerbissen — die mehrfarbige Hardcopy

> Mit Ihrem Commodore 64 und einem VC 1520-Plotter können Sie farbige Hardcopys produzieren.

Das Programm arbeitet als Basic-Lader mit Maschinencodeteil in Form von DATA-Zeilen. Der Maschinenspracheteil operiert im Bereich ab $ 6000, der meines Wissens bei allen gängigen Basic-Versionen zur Verfügung steht. Das bedeutet, daß das Programm mit ihnen lauffähig ist und Hardcopys ihrer Grafikseiten machen kann, selbst wenn diese, wie bei Simons Basic, unter dem ROM liegen. Man braucht nur die Startadresse der Grafikseite einzugeben, und schon setzt sich der Plotter in Bewegung. Die Kopierdauer liegt bei zirka 12 bis 13 Minuten für eine einfarbige Kopie und bei einer halben bis dreiviertel Stunde für eine mehrfarbige Kopie. Dabei gilt: je geringer die Bildgröße, desto schneller die Kopie. Aber auch eine große Grafik wird dann schnell ausgedruckt, wenn sie wenig unterbrochene Linien enthält. (Klaus Schneider/rg)

# Hardcopy Gemini-10X

Das Programm erlaubt, in der Kombination des von C 64 mit dem Matrix-Drucker Gemini-10X von Star eine Hardcopy der hochauflösenden Grafik zu erstellen.

Es werden die Grafikpunkte in 25 Zeilen zusammengefaßt und nacheinander ausgedruckt.

Der Druckvorgang dauert rund 45 Sekunden.
Das Programm wird in den Kassettenspeicher eingelesen und von dort mit folgendem Befehl aufgerufen:
xxx OPENX,4,5
xxx SYS828,X
xxx PRINT#X:CLOSEX

Das X bei den einzelnen Befehlen steht für die freidefinierbare Filenummer.

Nach dem CLOSE-Befehl springt das Programm automatisch wieder in das Basic-Programm.

(Gunnar E. Krüger/rg)

# Olympia Compact 2: ein Interface

> Das hier beschriebene Interface ermöglicht den Anschluß einer Olympia Compact 2 an den Commodore 64. Es gleicht einerseits die Zeichensätze der beiden Geräte an die ASCII-Norm an, andererseits gestattet es den Ausdruck der Steuerzeichen des C 64.

Die Steuerzeichen werden in einer Form dargestellt, anhand derer man sie bequem identifizieren und wieder eingeben kann. Außerdem simuliert das Programm eine Rücktaste und führt einen Cursor für den Drucker.

Für die Verbindung des Userports mit der Centronics-Schnittstelle ist ein Kabel erforderlich, das folgende Pins verbindet:
Userport 8 C D E F H J K L B A und N
Amphenol 1 2 3 4 5 6 7 8 9 11 19 — 29

PC2 des C 64 liefert also das Strobe-Signal, das der Schreibmaschine das Vorhandensein gültiger Daten mitteilt, und an FLAG2 wird das BUSY-Signal des Druckers auf Bereitschaft zur Entgegennahme neuer Zeichen abgefragt.

Das Programm können Sie natürlich auch ohne die REMs abtippen, die hier wiedergegebene Pseudo-Assembler-Fassung hat den Sinn, einen gewissen Durchblickzu ermöglichen und Änderungen zu vereinfachen.

Die Schnittstelle hat die Sekundäradresse 4. Wird eine andere Geräteadresse gewünscht, etwa, weil schon ein Matrixdrucker mit dieser Adresse existiert, so sind die Zeilen 127 und 137 des Programms entsprechend zu ändern.

Das Maschinenprogramm belegt in der vorliegenden Fassung die Speicherplätze von 32000 bis 32511. So ist eine Zusammenarbeit mit Simons Basic und Exbasic II gewährleistet. Wer das Programm in einen anderen Bereich, zum Beispiel in die 4 KByte RAM ab 49152, legen will, muß dazu die Zeilen 79,111,114,116,142,144,218,224,233,237 und256, die durch ein Sternchen gekennzeichnet sind, ändern. In 111 ist das MSB der Anfangsadresse einzusetzen (bei Anfang 50000 ist dies 195), in 114 das LSB der Anfangsadresse des CHROUT-Teils (Anfang + 55, im Beispiel 135), in 116 die Anfangsadresse des CHKOUTTeils (Anfang + 30, im Beispiel 110). In 142 und 144 stehen jeweils als zweites Byte LSB und MSB vom Anfang des Umsetzungskatalogs. Sie wären bei Umlegung der Schnittstelle nach 50000 auf 73 (Zeile 144) und 196 (Zeile 140) zu ändern.

Das Programm verwendet die Adresse »Anfang« (32000) als Druckercursor, der für formatierten Druck abgefragt werden kann (zum Beispiel mit PRINT#4 TAB(31-PEEK (32000)),...). Im Programm dient er dazu, durch (von der Compact 2 nicht tatsächlich ausgeführten, sondern druckwegoptimierten) Wagenrücklauf und Wiedervorrücken eine Rücktaste zu simulieren. Dieser Cursor wird in den Zeilen 218, 224, 233, 237 und 256 des Programms verwendet und müßte bei Verlegung des Programms geändert werden (für Anfang 50000 ist jeweils das LSB 80 statt 0 und das MSB 195 statt 125);

Zum Aufbau des Programms: Der Initialisierungsteil verbiegt die KERNAL-Vektoren CHKOUT und CHROUT in die Schnittstellensoftware. Da diese Vektoren durch RUNSTOP/RESTORE wieder zurückgestellt werden, muß die Initialisierungsroutine nicht nur nach dem Laden, sondern nach jedem RUNSTOP/ RESTORE mit SYS 32001 aufgerufen werden. Die neu eingebauten Teile CHKOUT und CHROUT prüfen nun bei jeder Zeichenausgabe, ob das Zeichen für die Schreibmaschinenschnittstelle bestimmt ist.

Der CHROUT-Teil sucht ein auszugebendes Zeichen zunächst im Sonderzeichenkatalog. Hier wird ein Zeichen des C 64 in bis zu drei Codes an die Schreibmaschine umgesetzt. (Man beachte das zusammengestoppelte Potenzzeichen oder das elegante Pi). Dabei werden die Steuerzeichen für die Schreibmaschine im Druckmodus anders behandelt als im Listmodus. Ist das auszugebende Zeichen nicht im Sonderzeichenkatalog zu finden, so wird es je nach Zeichensatz auf ASCII-Wert umgesetzt. Anstelle von unbekannten Zeichen druckt die Schreibmaschine als Joker einen accent aigu »´«.

In den folgenden drei Abschnitten des Programms werden die angesammelten Schreibmaschinencodes der Reihe nach ausgegeben und der Cursor aktualisiert.

Zum Katalog der Sonderzeichen: Hier steht an erster Stelle der Wagenrücklauf, der beim C 64 anders als bei der Schreibmaschine gehandhabt wird. Jeder Wagenrücklauf (CR, CHR$(13)), den der C 64 sendet, muß durch eine Zeilenschaltung (LF, CHR$(10)) ergänzt werden. Das zu ersetzende Zeichen (hier 13) steht immer in der vierten Spalte des Kataloges, die Ersatzzeichen (hier 13,10,0) in den ersten drei Spalten. Das Zeichen 0 wird nur deswegen gesendet, weil jedes umzusetzende C64 Sonderzeichen prinzipiell durch drei Compact 2-Zeichen ersetzt wird.

Das folgende Sonderzeichen ermöglicht es, bei Bedarf auch nur den Wagenrücklauf zu senden. Der neue Code hierfür ist 11 (Befehl PRINT CHR$(11) oder in Strings PRINT »<Control>K«. Die dritte Umsetzung ist erforderlich, damit die Compact 2 auch ein geshiftetes Space als solches serviert bekommt.

Danach folgen 8 Steuerzeichen der Schreibmaschine, die mit PRINT CHR$(1, 2, 3, 21, 22, 23, 25 oder 26) oder in einen String auch mit PRINT >><Control>A, B, C, U, V, W, Y oder Z« gesendet werden können. Dies ist auch mit PRINT CHR$(12) beziehungsweise PRINT »<Control>L« möglich, was einen Seitenvorschub bewirkt. Die Control-Methode führt jedoch bei A,B,C und L zu Problemen, da sie nicht gelistet, sondern auch im Listmodus ausgeführt werden.

Im Katalog folgen nun die Umlaute und Sonderzeichen der Schreibmaschine, die den folgenden Tasten des C 64 zugeordnet wurden:
Comm + : ä
Shift + : Ä
Comm — : ö
Shift — : Ö
Pfund : ß
Comm Pfund : ü
Shift Pfund : Ü
j Comm Alphak : §
Shift Alphak: |
Comm * : ´
Shift * : Unterstreichen des nächsten Zeichens
eckige Klammer auf: <sup>2</sup>
eckige Klammer zu : <sup>3</sup>

Der Akzent »´« wird über das nachfolgende Zeichen gedruckt, UNT+RT unterstreicht das nachfolgende Zeichen. Auf den Einbau von Promille und My wurde verzichtet. Wem diese Zeichen lieb und wert sind, der möge eine der Zeilen 298 bis 303 ändern, indem er die ersten drei DATA durch 60,0,0 für My und durch 14,46,15 für Promille ändert. (Die vierte DATA-Zahl ist, wie erwähnt, der Code des C 64-Zeichens, das ersetzt wird). In TEXT 64, das das Pfundzeichen als Steuerzeichen benutzt könnte man sich das »ß« erhalten, indem man die 64 und die 92 in den Zeilen 288 und 294 vertauscht und so das »ß« auf die Alphakringel-Taste legt. Ich selbst habe stattdessen die Zeilen 3160, 7110, 540, 1200, 7200, 8220 und 7140 von TEXT 64 geändert.

Bei den nun anstehenden Listcodes herrscht folgende Systematik: Die Kleinbuchstabencodes gehören zu den direkt . ansprechbaren Funktionen CLR, HOME und den Cursortasten. »g« bedeutet CHR$(142), Umschalten auf Großschrift, was nur mit Tricks eingegeben werden kann, aber in manchen Listings auftaucht.

Die Zeichen ”!,”, #, $, %, &, ’ und (” stehen für die acht Farben, die zusammen mit der Commodore-Taste eingegeben werden.

Ziffern und Großbuchstaben werden zusammen mit < Control > eingegeben. Es sind dies die ersten acht Farben, 9 und 0 für RVS und RVS OFF, die Umschaltung auf den zweiten Zeichensatz durch <Control>N, Blockieren und Freigabe der Umschaltung durch <Control>H beziehungsweise <Control>I sowie die oben schon erwähnten Steuercodes <Control>F, K,U,V,W,Y,Z für die Schreibmaschine. Die angegebenen Control-Codes gehören natürlich in einen String nach PRINT.

Nicht in Print-Statements, sondern nur in Abfragen tauchen mitunter auch die Listcodes der Funktionstasten auf, die aber aus Platzgründen hier ausgelassen werden mußten und von der Schreibmaschine wie alle unbekannten Zeichen als Joker »'«ausgegeben werden.

Damit nicht jedesmal das ganze, lange Programm eingelesen werden muß, habe ich am Anfang des Programms eine Möglichkeit beschrieben, eine reine Maschinencodefassung abzuspeichern und direkt oder unter Programmkontrolle wieder einzulesen.

(Reinhard Atzbach/rg)

# Hardcopy Epson FX-80

Ich bin ein Freund der guten Hires-Darstellungen. Mein Basic-Programm ermöglicht es, den Epson voll in seiner Fähigkeit des Plottens auszunutzen und das Bild zu verändern, das heißt:
1.	Veränderung der Punktdichte
2.	Veränderung der Darstellung

Für jede Veränderung müssen nur eine beziehungsweise mehrere Variablen geändert werden. Das Programm eignet sich natürlich auch für mathematische Funktionen oder ähnliches. Das Programm arbeitet problemlos mit dem Centronics-Interface von Data Becker.

(Mark Zimmermann/rg)

# Tips & Tricks

## Listschutz

Möchte man ein Programm mit einem einfachen Listschutz versehen, so verfährt man folgendermaßen:
1.	Man ergänzt die Zeile, ab der der Listschutz wirksam werde nsoll, mit »:REM””«.
2.	Man fährt mit dem Cursor auf das zweite Anführungszeichen und drückt fünfmal die Taste INST
3.	Nun wird ebenfalls fünfmal die Taste DEL gedrückt, so daß zwischen den Anführungszeichen fünf reverse T stehen.
4.	Zuletzt bewegt man den Cursor hinter das zweite Anführungszeichen und drückt die Tastenkombination SHIFT und L Anschließend RETURN nicht vergessen.

Wenn nun versucht wird, das Programm zu listen, gelangt der Computer nur bis zu der Zeile, in der der Listschutz steht und bricht dann den Vorgang mit »Syntax Error« ab.

(Thomas Lopatic)

## C 64 beschleunigt

Für alle diejenigen C 64 - Besitzer, denen die Bewegung des Cursors bisher zu langsam war, gibt es einen speziellen POKE.

Mit POKE 56325,5 wird der Cursor rasend schnell und flitzt bei Betätigung der Cursortasten nur noch so über den Bildschirm. Wer’s lieber gemütlicher mag, der sollte es statt dessen einmal mit POKE 56325,255 probieren.

(Oliver Bausch)

## Text und Grafik mischen

Im Leserforum des 64’er Magazins, Ausgabe 8/84, fragte Frank Schager nach einer Möglichkeit, mit Simons Basic ein Textfenster in der hochauflösenden Grafik zu erzeugen.

Mit dem folgenden kleinen Programm wird die normale Tastaturabfrage mit dem Simons Basic-Befehl »TEXT« verbunden:
10 X = 2 : Y = 2 : REM Text-Anfang
20 HIRES 15,11 : REM Grafik ein
30 GETA$
40 IF A$ <> ""THEN GOSUB 100
50 GOTO 30
60 REM
100 X = X + 8 : REM X-Koordinate erhöhen
110 IFX > 38 * 8THEN X = 2: Y = Y + 8: REM Zeilenende ? Dann neue Zeile
120 TEXTX,Y,A$,1,1,8 : REM Zeichen drucken
130 AA$ = AA$ + A$ : REM Wort erzeugen
140 IF AA$ = ”GEHE” THEN 1000 : REM Zum Beispiel
150 RETURN

Natürlich kann man die Anfangskoordinaten so verändern, daß sie zum Spiel passen. Veränderbar ist auch der Faktor 38 in Zeile 110, je nachdem, welche Zeilenlänge gewünscht wird. Ebenso besteht die Möglichkeit, zwischen den Zeilen 130 und 150 weitere IF-Abfragen einzubauen. Empfehlenswert ist die besondere Abfrage der Tasten SPACE und RETURN.

(Jörg Prante)

## Textomat-Tip

Bei Ihrem Software-Test des Textomat von Data-Becker (Ausgabe 9/84) wurde als gravierender Nachteil angeführt, daß bei einmal gestartetem Ausdruck keine Unterbrechung mehr möglich ist. Ich arbeite in Zusammenhang mit Textomat mit einem Epson-Drucker RX 80 FT. Um den begonnenen Ausdruck zu unterbrechen, kann man einfach den ON-LINE-Schalter betätigen und den Drucker anschließend ausschalten. Sekunden später meldet sich der Textomat am Bildschirm mit dem zu druckenden Text zurück.

(H. Rendelmann)

## Basic-Programme verbinden

So manch einen C 64-Besitzer wird es schon geärgert haben, daß sein Computer keinen MERGE-Befehl besitzt. Mit wenig Aufwand ist es aber dennoch möglich, Basic-Programme aneinanderzuhängen:

1.	Im Direktmodus »PRINT PEEK(43); PEEK(44)« eingeben und sich die Ergebnisse merken.
2.	Das erste Programm normal laden.
3.	Erscheint jetzt nach »PRINT PEEK(45)« eine Null oder eine Eins, dann geben Sie »POKE 43, 256 + PEEK(45) - 2 : POKE 44, PEEK(46) -1 : NEW« ein. Im anderen Fall wird »POKE 43, PEEK(45) - 2 : POKE 44, PEEK(46): NEW« eingegeben.
4.	Nun wird das anzuhängende Programm geladen (Achtung! Das anzuhängende Programm muß die höheren Zeilennummern haben).
5.	Jetzt POKEn Sie in die Speicherstellen 43 und 44 die zu Anfang gemerkten Werte

Beide Programme sind nun verbunden und können ganz normal gehandhabt werden. Wichtig bei der ganzen Prozedur ist, daß keine Variablen definiert werden, da das MERGEn sonst nicht richtig funktioniert.

(Thomas Lopatic)

## POKEs für den C 64

Mit POKE 775,1 ist ein (fast) perfekter Listschutz aktiviert. Auch ein SAVE-Schutz ist mit wenig Aufwand möglich: POKE 801,0 : POKE 802,0 : POKE 818,165. Nach diesen drei POKE-Befehlen kann das Programm weder auf Kassette noch auf Diskette kopiert werden. Schließlich gibt es noch eine Möglichkeit, die RUN/STOPTaste abzuschalten, und zwar mit POKE 808,225. Wiedereinschalten ist mit POKE 808,237 möglich.

(Thomas Lopatic)

## GOTO X für VC 20

Viele schätzen es, viele wünschen es sich: Einen berechneten GOTO-Befehl auf einen variablen Ausdruck anstelle einer Zeilennummer. Hier ist eine schnelle und sichere Methode, die nur 17 Bytes Speicherplatz benötigt.

Schreiben Sie als erste Programmzeile »1 REM "*********"« (mindestens neun Sternchen). Anschließend geben Sie im Direktmodus ein:

»PRINT PEEK(43) + PEEK(44) * 256 + 6« (RETURN). Die daraufhin angezeigte Adresse notieren Sie sich bitte Ohne Erweiterung müßten Sie den Wert 4103 erhalten haben, mit 3 KByte Erweiterung 1031 und ab 8 KByte Erweiterung 4615.

Jetzt POKEn Sie ab der notierten Adresse bitte folgende Werte ein: 32, 138, 205, 32, 247, 215, 76, 163, 200.

Wenn Sie nun die erste Zeile (mit dem REM) aufLISTen, sehen Sie einige Grafikzeichen. Diese stellen ein kurzes Maschinenspracheprogramm dar, das einen mathematischen Ausdruck in einen ganzzahligen Wert umrechnet. Diese Zeile muß immer die erste Programmzeile sein und darf auch nicht mehr geändert werden. Das übrige Programm kann natürlich wie gewohnt editiert werden.

Sie haben jetzt im Programm einen simulierten GOTO X - Befehl zur Verfügung, der mit SYS (Adresse) X aufgerufen wird. Für Adresse müssen Sie die anfangs notierte Adresse einsetzen (Klammern nicht vergessen). Für X kann ein beliebiger arithmetischer Ausdruck stehen wie zum Beispiel 5, A, A+2, C+D/SQR(9) oder PEEK(5).

Der neue Befehl hat im übrigen die gleichen Auswirkungen wie der normale GOTO-Befehl. Ist eine Zeilennummer nicht vorhanden, gibt es daher ebenfalls einen »UNDEF’D STATEMENT ERROR«.

(Thomas Maul)

# Der große Überblick

> Man braucht sehr viel Geduld, um bei einem langen Listing die Übersicht zu behalten. Ein formatiertes Listing schafft Ordnung und erleichtert somit die Fehlersuche.

Das Programm FLIST belegt 134 Bytes im Kassettenpuffer des C 64. Es wird mit LOAD”FLIST.DATA”, 8 geladen und mit RUN gestartet. Dabei wird das, in DATA-Zeilen stehende Programm im Speicher ab 828 abgelegt und mit SYS gestartet. Die Zeile 10, die diese Dinge erledigt, dient später als Demonstrationszeile. Nun zur Funktion:
Das Programm erweitert das Basic um den Befehl FLIST. Dieser Befehl erzeugt ein formatiertes Listing auf dem Bildschirm, indem vor der Ausgabe eines Zeichens geprüft wird, ob dieses Zeichen ein »:«ist. Trifft dies nicht zu, so wird das ’LISTen’ fortgesetzt. Andernfalls erzeugt das Programm ein »CR« (Carriadge Return) und fügt eine, von der Länge der Zeilennummer abhängige Anzahl von Leerzeichen ein. Dadurch stehen alle in einer Zeile vorhandenen Doppelpunkte untereinander und unter dem Leerzeichen nach der Zeilennummer. Jeder Befehl, vor dem ein Doppelpunkt steht, erscheint so in einer neuen Zeile. Die Angabe der Zeilennummer(n) erfolgt bei FLIST wie beim normalen LIST-Befehl (zum Beispiel FLIST-100). Zum Editieren einer Zeile steht dem Benutzer weiterhin der normale LIST-Befehl zur Verfügung. Versuchen Sie mal FLIST10! Benutzer eines Druckers könnten ja mal OPEN1,4:FLIST:close1 ausprobieren.

(Michael Weidlich/rg)

# Kudiplo auch für den C 64

> In der Ausgabe 8 des 64’er Magazins war das Programm »Kudiplo« für den VC 20 abgedruckt, das mit dem 1520-Printer-Plotter eine komplette Kurvendiskussion ausgibt. Hier sind die erforderlichen Änderungen, um dieses nützliche Programm auch auf dem C 64 laufen zu lassen.

Nach der Veröffentlichung meines Programms Kudiplo für den VC 20, erreichten mich viele Leserbriefe mit der Bitte um nähere Auskunft dazu, wie das Programm für den C 64 abzuändern ist. Probleme gab es dabei mit der Routine in den Zeilen 185, 190 und 230.

Die genannten Zeilen bewirken in der veröffentlichten Version für den VC 20 ein »Verbiegen« des Vektors für die Fehlerbehandlungsroutine. Der in den Speicherstellen $0300 und $0301 stehende Zeiger wird so verändert, daß er nicht mehr zu der im Basic-ROM stehenden Routine zur Ausgabe von Fehlermeldungen zeigt. Statt dessen zeigt er nun auf einen Sprungbefehl, der mit Hilfe der Zeile 185 in den Kassettenpuffer geschrieben wurde. Dieser Sprungbefehl führt zurück ins Basic-Programm, dessen nächste Zeile gesucht und so abgearbeitet wird, als sei kein Fehler aufgetreten.

Die Ähnlichkeit des VC 20 mit seinem großen Bruder ist oft zitiert. Auch bei ihm läßt sich eine solche Fehlerblockade einrichten. Allerdings ist beim großen Bruder zu diesem Zweck ein kleines Maschinenprogramm in den Kassettenpuffer zu schreiben, in welchem abgefragt wird, ob ein Fehler vorgekommen ist und das dann abhängig vom Ergebnis entweder zum nächsten Statement oder zur nächsten Zeile verzweigt.

Für den C 64 müssen darum die Zeilen 185 und 230 wie folgt geändert werden:
185 DATA 138,48,3, 76,59,169, 76,116,164: FOR I=823 TO 840 : READ A : POKE I, A : NEXT
230 NEXT : POKE 768, 139 : POKE 769, 227

Mit diesen Änderungen läuft Kudiplo dann endlich auch auf dem »großen Bruder«.

(Jürgen Curdt/ev)

# POKE mal wieder

> Viele C 64-Benutzer haben sich sicher schon mit dem Basic des C 64 herumgeärgert: Egal, was man machen will, fast alles läuft über PEEK und POKE. Doch gerade diese POKEs helfen manchmal erheblich, wenn es um Probleme geht, die mit einfachen Basic-Befehlen nicht zu lösen sind.

TODO Table

# User-Port-Tastatur

> Mit Hilfe dieses Programmes ist es möglich, eine beliebige Tastatur mit bis zu 4 x 5 Matrix an den User-Port anzuschließen und die Funktionstasten mit Strings bis 9 Byte Länge zu belegen.

Bei der Auswahl einer geeigneten Tastatur gibt es eigentlich nur eine Bedingung: Sie darf höchstens 4 x 5 Anschlüsse haben und die Tasten müssen auf den Kreuzungspunkten der 4 x 5 Anschlüsse liegen. Ansonsten gibt es keine Beschränkungen, da jede Taste frei programmierbar ist. Um die Tastatur zu programmieren, muß man über ihren Aufbau nichts wissen. Man schließt sie einfach am User-Port an den Leitungen PbO bis Pb7 und Pa2 an. Die Anschlüsse PbO bis Pb3sind die Zeilen der Tastatur. Es sind am User-Port die Anschlüsse PbO=c, Pb1=d, Pb2=e, Pb3=f. Für die Spalten gelten die Anschlüsse Pb4=h, Pb5=j, Pb6=k, Pb7=l, Pa2=m.

Die Programmierung geschieht mit Hilfe des Basic-Ladeprogramms. Man wird gebeten, die zu programmierende Taste zu drücken. Die momentane Belegung wird ausgegeben, und man wird gefragt, welchen ASCII-Wert man der Tastatur zuweisen möchte. Danach gibt man den entsprechenden ASCII-Wert ein. Danach wird man erneut gebeten, eine Taste zu drücken. Es ist also nicht notwendig, die Matrix zu kennen. Fertig programmierte Tastaturen können dann als Maschinenprogramm auf Diskette abgespeichert werden, welches nur zwei Blöcke belegt. Es kann dann von Diskette mit LOAD »name«,8,1 geladen und mit SYS12*4096 gestartet werden. Im Zusammenhang mit der Funktionstastenbelegung können auf die Tastatur auch ganze Strings gelegt werden, indem man nur den entsprechenden ASCII-Code der Funktionstasten (133-139) auf die Zusatztastatur programmiert. Auf diese Weise ist es möglich, komplette DATA-Listings mit einer kleinen Tastatur mit Zehnerblock bequem und schnell abzutippen, da man auch die Returntaste und alle Sonderzeichen auf die Tastatur umlegen kann. Auch eine komplette Hex-Tastatur mit den Zeichen 0-9 und a-f und vier Sonderzeichen, zum Beispiel Return, Delete, Komma, Punkt (Grundausstattung), kann programmiert werden. Dadurch wird das Abtippen von Hexdumps zum Kinderspiel. Bewährt hat sich eine alte Rechenmaschinentastatur, mit der ich auch schon Spiele gespielt habe.

Die Belegung der Funktionstasten geschieht ebenfalls durch das Ladeprogramm. Zunächst wird gezeigt, wie die Tasten belegt sind und gefragt, ob man die Belegung ändern will. Man gibt dann nur den entsprechenden String ein und drückt Return. Zum Schluß wird man noch gefragt, ob man mit seiner Wahl zufrieden ist.

(Martin Kloss/aa)

# Diskette intern

Der genaue Inhalt einer Diskette ist den meisten Floppy-Besitzern wohl bisher unbekannt geblieben. Das Programm Disk-Dump schafft den Einblick.

Dieses Programm ermöglicht den Inhalt einzelner Disketten-Blocks auf dem Bildschirm anzusehen, sie auszudrucken und zu ändern!

Nach dem Start des Programms wird Track 18 — Sektor 0 in den Speicher geladen und — in zwei Stufen — auf den Bildschirm ausgegeben. Zwei Stufen sind notwendig, um den Inhalt gut auf dem Bildschirm darzustellen. In der ersten Stufe werden die ersten 128 Byte angezeigt, je 8 Byte in einer Zeile. Am Anfang der Zelle steht noch die Hexnummer des ersten Bytes der jeweiligen Zeile, hinter dem Inhalt werden die 8 Byte noch als Character-String ausgegeben. Hierbei werden Steuerzeichen als Blank ausgegeben. Dieser Bildschirminhalt bleibt nun bestehen, bis eine Taste gedrückt wird und somit die zweiten 128 Byte in gleicher Weise angezeigt werden.

Im Anschluß daran erscheint, zusammen mit den letzten 128 Byte, ein Menü, das sämtliche Funktionen umfaßt. Hier kann man den Drucker ein- und ausschalten, den nächsten oder vorigen Block laden, einen beliebigen anderen Block laden, denselben Block nochmal anzeigen und den Inhalt des Blocks im Speicher ändern.

Zum Ändern muß man zuerst die Bytenummer (in Hex) eingeben und dann den neuen Inhalt (ebenfalls in Hex). Gibt man als Adresse »X« ein, so wird das Ändern abgeschlossen, der geänderte Block wird ausgegeben und man kann entscheiden, ob der Block nun auf Diskette geschrieben werden soll.

Um einen beliebigen Block zu laden, muß man die Track- und Sektornummer (Dezimal) eingeben.

Der physikalische Aufbau der Blocks ist aus dem Manual des Laufwerks zu entnehmen. Man muß jedoch beachten, daß der Inhalt in Hex angezeigt und geändert wird und die Angabe der Block- und Sektorennummern dezimal erfolgt.

Die Bedienung des Programms erklärt sich durch die Menü-Steuerung von selbst.

(Horst Wibbing/rg)

# Disketten-Organisation

> Dieses Programm ermöglicht es, alle wichtigen Diskettenoperationen komfortabel und schnell durchzuführen.

Das Programm (Listing 1) ist für den VC 20 geschrieben, mit kleinen Änderungen jedoch auch auf dem C 64 lauffähig. Die für den C 64 notwendigen Änderungen beschränken sich im Wesentlichen auf die Anpassung des Bildschirmlayouts. Die im Listing vorkommenden Adressen 828 und 36879sind für den C 64 durch 49152 und 53280/81 zu ersetzen.

Nach dem Starten erscheint sofort das Menü (Bild 1)auf dem Bildschirm. Durch Drücken der Tasten »+« oder »—« kann nun die Gerätenummer, unter der das Floppy-Laufwerk angesprochen wird, geändert werden. Diese Funktion ist sinnvoll, wenn mit zwei oder mehr Disketten-Stationen gearbeitet wird.

Über das Menü sind unter anderem alle Diskettenbefehle ausführbar, die sonst umständlich über den Kommandokanal gesendet werden müssen. Diese Befehle sind im Handbuch zur 1541-Floppy ausführlich erklärt, so daß an dieser Stelle nicht näher darauf eingegangen werden muß. Einige der Floppy-Kommandos stehen in erweiterter Form zurVerfügung. So kann zum Beispiel die Directory-Ausgabe wahlweise auf den Bildschirm oder über den Drucker erfolgen. Im letzteren Fall wird das Directory alphabetisch sortiert (Bild 2). Wird dies nicht gewünscht, dann muß in Zeile 1370 das »GOTO 1490« durch »RETURN« ersetzt werden.

Zusätzlich zu den über OPEN 1,8,15,... ansprechbaren Disketten-Befehlen können über das Menü noch einige weitere nützliche Funktionen aufgerufen werden. Unteranderem ist es möglich, Namen und ID einer Diskette oder die Gerätenummer der Floppy-Station zu ändern.

Außerdem sind Routinen zum Regenerieren und Überprüfen einer Diskette vorhanden. Weiterhin gibt es die Möglichkeit, die BAM einer Diskette alphabetisch zu sortieren. Diese Funktion erzeugt zwar ein übersichtliches, sortiertes Directory, sollte aber nur mit Vorsicht verwendet werden. Falls die BAM noch Einträge gelöschter Files enthält, kann es nach Abschluß des Sortiervorganges zu »Disk-Salat« kommen, da die Sortierroutine gelöschte Files nicht erkennt. Vor dem Einsatz dieser Funktion sollte die Diskette daher unbedingt mit dem Menüpunkt »Regenerieren« auf gelöschte Files überprüft werden.

Das Programm erklärt sich im übrigen weitgehend von selbst und stellt infolge der leichten und übersichtlichen Bedienbarkeit eine wirkliche Hilfe für den geplagten Disketten-Benutzer dar.

(Wilhelm Boosz/ev)

# Programmiertes LISTing: LISTX-Y

Bei Hilfsprogrammen, die viele Benutzeranleitungen enthalten, gibt man diese Anleitungen normalerweise über PRINT-Anweisungen auf dem Bildschirm aus. An sich würde es bei geschickter Formulierung jedoch reichen, die sowieso vorhandenen REM-Erläuterungen als Anleitungen für den Benutzer mitzuverwenden.

Nur, wie bringt man diese auf den Bildschirm? Mit LIST wird das Basic-Programm jedesmal zum Direktmodus hin verlassen und, was noch schwerer wiegt, die Anfangs- und Endzeilennummern können nur als direkte Zahlen, nicht über Variablen, angegeben werden. Unser Programmvorschlag (Listing 1) simuliert den im VC 20-Basic nicht vorhandenen Befehl LISTX-Y (X=Variable, die die Anfangszeilennummer des zu listenden Programms übergibt, Y = Endzeilennummer).

Man könnte sich ein solches Hilfsprogramm durch Beschreiben des Tastaturpuffers konstruieren. Dann würden sich aber die in den Puffer geschriebenen LIST-Anweisungen auf dem Bildschirm störend bemerkbar machen. Andererseits kommt aus Geschwindigkeitsgründen nur ein Maschinenprogramm in Frage. Will man ein solches Maschinenprogramm per DATA-Zeilen einlesbar gestalten, wäre der Aufwand recht hoch. Außerdem gäbe es Schwierigkeiten mit dem nur immer auf den Datenanfang zurückstellbaren DATA-Zeiger (kein RESTORE X vorhanden). Einlesen per POKE wäre noch aufwendiger. Umgekehrt muß aber ein solches Maschinenprogramm zur Simulation von LIST Y notwendigerweise viele Teile enthalten, die bereits im Betriebssystem vorkommen. Wir lösen das Problem, indem wir mit zwei einfachen FOR-NEXT-Schleifen geeignete Teile des Betriebssystems in den Kassettenpuffer kopieren und diese Kopien dann durch sechs POKE-Anweisungen so abändern, daß sie unseren Ansprüchen genügen. Listing 1 zeigt das entsprechende Unterprogramm, das beim ersten Aufruf mit »GOSUB 63000« die Maschinenroutine erzeugt. Alle weiteren Aufrufe können mit »GOSUB 6350« erfolgen, wodurch, einiges an Zeit gespart wird. In der Variablen X wird die Anfangszeile, in Y die Endzeile übergeben. Listing 3 zeigt ein Demo-Programm. In Listing 2 gebe wir ein Anwendungsbeispiel an: In einem längeren Programm mögen alle REM-Erläuterungen in den Zeilen 100*a bis 100*a+4 untergebracht sein, also in den ersten fünf Zeilen ab jeder vollen Hunderternummer. Das Beispielprogramm nach Listing 2 wird per GOSUB63100 angesprungen und listet per Cursor-Down-Taste alle oben genannten REM-Zeilen (und nur diese, eventuelle weitere REM-Zeilen werden nicht berücksichtigt). Und zwar geschieht dies in Endlosform, das heißt nach Durchgang durch die letzte zu listende REM-Erläuterung erscheint wieder die erste und so fort. Durch Drücken der Return-Taste gelangt man wieder ins Hauptprogramm.

(Fred Behringer/ev)

# Kopieren mit Komfort: Super Copy

> Bereits im ersten 64’er wurde Ihnen mit »Disk Copy« ein Kopierprogramm für Disketten vorgestellt. Wir möchten Ihnen heute eine völlig revidierte Fassung vorstellen, die erheblich leistungsfähiger und komfortabler ist.

Was soll ein gutes Kopierprogramm leisten? Nun, zunächst einmal soll es kopieren. Dazu muß man auswählen können, was kopiert werden soll. Dieser Vorgang dauert beim »Disk Copy« sehr lange, vor allem, wenn auf der Quelldiskette viele Programme sind. Bei »Super Copy« geht es genauso schnell wie das Einlesen eines Directory. Fehler beim Kopieren sollen möglichst ohne Programmabsturz und völligen Neubeginn behebbar sein. Gerade hier liegt eine Stärke von »Super Copy«. Alle Funktionen, die man sonst noch beim Kopieren braucht (Formatieren, Gültigkeitskontrolle (Vality check) etc.), sollen integriert sein. Dazu gehört auch eine komfortable Löschmöglichkeit, um Disketten »aufzuräumen«. Schließlich soll das Programm möglichst wenig Speicherplatz belegen, damit zum Kopieren genug zur Verfügung steht.

Aus all dem ergibt sich eine Konsequenz: Ein solches Programm läßt sich nur in Maschinensprache schreiben, da Basic einfach zu langsam ist und zuviel Speicherplatz belegt. Trotzdem habe ich einige Einschränkungen gemacht:

Relative Files können nicht kopiert werden. Dies verlangt eine zu aufwendige Verwaltung und kommt auch zu selten vor, um es ins Programm zu integrieren. In einem Programmdurchlauf können höchstens 32 Files kopiert werden. Mehr Filenamen kann das Programm nicht speichern.

Ansonsten aber läßt »Super Copy<<kaum noch Wünsche offen, höchstens den nach einem schnelleren Laufwerk.Aber auch da läßt sich wohl noch etwas machen.

### Wie arbeitet »Super Copy«?

Nach dem Programmstart meldet sich das Programm mit einem Menü:
1.	Directory
2.	Kopieren
3.	Formatieren
4.	Scratchen
5.	Validieren
6.	Ende
Durch Druck auf eine Ziffer wählen Sie die entsprechende Funktion aus. Übrigens können Sie im Programm immer dann, wenn Sie irgendeine Taste drücken müssen, mit »^«in dieses Menü zurückkehren. Gehen wir nun die einzelnen Funktionen einmal durch.

Zur Funktion »Directory« ist nicht viel zu sagen. Es erscheint das Verzeichnis aller Files auf der Diskette.

Beim »Formatieren« müssen Sie den Diskettennamen und die ID — wie üblich durch ein Komma getrennt — angeben. Eine ID ist nur bei einer neuen Diskette wichtig. Verzichten Sie darauf, werden zwar alle Einträge im Directory gelöscht, aber es entfällt das Neuformatieren der einzelnen Spuren. »Validieren« (Gültigkeitskontrolle) entspricht dem Basic-Befehl OPEN 1,8,15,”V”:CLOSE 1.

Entscheiden Sie sich für»Kopieren«, werden Sie aufgefordert, die Quelldiskette einzulegen. Nach Tastendruck erscheinen nun die Namen der Programme. Files, die kopiert werden sollen, kennzeichnen Sie mit der »J«-Taste, die anderen mit »N«. Relative Files können nicht kopiert werden, daher erscheint eine Fehlermeldung, wenn Sie versuchen, solche Files mit »J« zu markieren. Das Programm kann maximal 32 Namen speichern. Wenn Sie mehr als 32 Files kopieren wollen, erscheint die Fehlermeldung »Kopierliste voll«. Sie können nun die bisher markierten Programme kopieren und nach Abschluß einen neuen Programmdurchlauf starten. Haben Sie Ihre Auswahl beendet, gibt das Programm an, wieviele Blöcke insgesamt zu kopieren sind, damit Sie genügend Platz auf der Zieldiskette bereitstellen können. Ein neues Menü erscheint:
1. Directory
2. Formatieren
3. Validieren
*** Space ***
für weiter

Sie können nun in aller Ruhe eine Zieldiskette aussuchen, eventuell noch formatieren etc. Sie kommen in jedem Fall in dieses Menü zurück. Sind alle Vorbereitungen abgeschlossen, drücken Sie »Space«, um mit dem Kopieren fortzufahren. Das Programm fordert nun auf, die Quelldiskette einzulegen, und liest die vorher markierten Programme ein. Sollte dabei ein Fehler auftreten, weil Sie zum Beispiel aus Versehen die falsche Diskette eingelegt haben, wird eine entsprechende Meldung ausgegeben und gefragt, ob dieses File übersprungen oder ein neuer Versuch unternommen werden soll. Auch Lesefehler des Laufwerks werden in dieser Weise gehandhabt. In einem Durchgang können maximal 234 Blöcke eingelesen werden. Ist noch mehr zu kopieren wird das Einlesen abgebrochen.

Jetzt müssen Sie angeben, ob Sie fortlaufend oder einzeln kopieren möchten. Fortlaufend bedeutet, daß die Files der Reihe nach auf dieselbe Diskette geschrieben werden. Beim Einzelkopieren dagegen springt das Programm nach jedem Schreibvorgang wieder in ein Menü, und Sie haben die Möglichkeit, die Diskette zu wechseln, ein Directory anzusehen, zu formatieren oder zu validieren. Außerdem können Sie auch das zuletzt kopierte Programm noch einmal auf eine andere Diskette kopieren. Das jeweils nächste File wird vor dem Schreiben angezeigt, damit Sie die richtige Zieldiskette einlegen können.

Haben Sie Ihre Wahl getroffen, läuft der Schreibvorgang in der oben beschriebenen Art und Weise ab. Schreibfehler werden wie Lesefehler behandelt, das heißt es wird gefragt, ob ein neuer Versuch gestartet oder das File übersprungen werden soll.

Sind alle Programme kopiert, erscheint die Meldung »KOPIE FERTIG«. Sind aber nach dem ersten Lese/Schreib-Durchgang noch weitere Programme zu kopieren, fährt das Programm mit der Aufforderung zum Einlegen der Quelldiskette fort.

»Scratchen«, also das Löschen von Programmen, gehört zu den angenehmsten Funktionen, die »Super Copy« zu bieten hat. Seien Sie aber vorsichtig, sonst haben Sie bald überhaupt keine Programme mehr. Der Ablauf ist ähnlich wie beim Kopieren. Doch anstatt die Files zum Kopieren zu kennzeichnen, werden sie nun zum Löschen markiert. Sollten Sie einen Fehler gemacht haben, ist allerdings noch nichts verloren, denn am Ende des Markiervorgangs müssen Sie noch einmal ausdrücklich durch Drücken der »Space«-Taste bestätigen, daß es Ihnen ernst ist.

### Zum Programmaufbau:

Ausführliche Erläuterungen des Assemblerquelltextes möchte ich Ihnen und mir ersparen. Nur soviel: Das Programm ist im wesentlichen modular aufgebaut, das heißt es besteht aus einzelnen Blöcken, die von den verschiedenen Menüs aus angesprungen werden. Daher ist es nicht nötig, häufig vorkommende Programmteile wie Tasten- oder Fehlerabfragen ständig neu zu schreiben. Auch der Teil zum Markieren der Programme ist beim »Scratchen« und beim Kopieren identisch. Ein Flag, also eine Speicherstelle, deren Inhalt etwas »signalisieren« soll, entscheidet darüber, welche Texte ausgegeben und wohin zurückgesprungen werden soll.

Eine solche Programmiertechnik trägt dazu bei, die Programme ebenso kurz wie übersichtlich zu halten.

### Hinweise zum Abtippen:

Bevor Sie sich ans Eintippen des Ladeprogramms machen, müssen Sie unbedingt folgende Befehle im Direktmodus eingeben:

POKE 43,1: POKE 44,32: POKE 8192,0: NEW (RETURN)

Damit wird der Start des Basic-Speichers nach oben verlegt. Tun Sie das nicht, steht Ihr Basic-Ladeprogramm dort, wo nachher das fertige Kopierprogramm hingePOKEf wird.

Ich weiß, daß es eine Zumutung ist, eine derartige Menge von Zahlen abzutippen, und kein Mensch wird dies auf Anhieb fehlerfrei bewerkstelligen können. Um Ihnen aber die Fehlersuche so leicht wie möglich zu machen, habe ich den ’DATA-Zeilenberg’ in 11 Blöcke eingeteilt. Zujedem dieser Blöcke gehört eine Prüfsumme. Stimmt etwas nicht, gibt das Ladeprogramm an, in welchem Block der Fehler steckt. Achten Sie aber vor allem darauf, daß Sie am Zeilenende kein Komma mehr schreiben, denn das interpretiert der Computer als Null!

Nach dem Abtippen sollten Sie vor dem ersten Programmlauf dieses unbedingt abspeichern, denn sonst könnte es passieren, daß sich das Programm durch eine fehlerhafte Eingabe selbst löscht, und die ganze Mühe war umsonst. Vor dem Laden des Programms müssen Sie die obengenannte Zeile eintippen, um die Basic-Startadresse wieder hochzulegen.

Starten Sie dann das Programm mit »RUN«. Erscheint während des Programmablaufs die Fehlermeldung »TYPE MISMATCH ERROR«, dann haben Sie bestimmt ein »I« statt einer »1« eingetippt oder ein »O« statt einer »0«. Ansonsten müssen Sie alle Fehler in den DATA-Blöcken korrigieren. Wenn alles richtig ist, meldet sich das Ladeprogramm nach einiger Zeit mit »READY«. Nun steht das Programm fertig im Speicher. Um es auf Diskette abzuspeichern, müssen jetzt folgende Befehle eingetippt werden:

SYS64738(RETURN)
Keine Angst! Das ist zwar ein Befehl, der den Computer in den Zustand direkt nach dem Einschalten zurückversetzt, aber unser Programm ist nach wie vor im Speicher vorhanden. Nun noch folgende Zeilen:

10 SYS 2064 (RETURN)
Das ist der Startbefehl für »Super Copy«

POKE 45, 251 : POKE 46, 18
Damit wird das Basic-Ende auf das Programmende gesetzt. Jetzt können Sie mit

SAVE »Super Copy«, 8
das fertige Programm auf Diskette abspeichern.

(Dietrich Weineck/gk)

# Apocalypse Now

> Im Universum versteckt sich die interplanetarische Spinne Plexar. Sie können die Katastrophe abwenden, wenn Sie das All von dem Ungeheuer befreien.

Bevor Sie mit dem apokalyptischen Kampf gegen die interplanetarische Spinne beginnen, müssen Sie zuerst auftanken. Doch nach 30 Energieeinheiten beginnt ein feindlicher Hubschrauber auf Sie zu schießen. Ist dieses Hindernis hinter Ihnen, geht es links weiter. Im oberen Eck erscheint ein Tunnel, den Sie durchfliegen. Dabei müssen Sie eine Lasersperre überwinden oder einen Mann retten. Dieser sollte bei der Aktion möglichst weit links stehen. Haben Sie diese Hürde überwunden, schließt sich hinter Ihnen eine Mauer. Durch diese müssen Sie sich links unten durchschießen. Auf dem nächsten Bild gilt es eine Barrikade zu durchschießen, die aber mit Vorsicht zu genießen ist. Die nachfolgenden Panzer können Sie nur abschießen, wenn Sie beide zugleich treffen.

Dann kommen Sie zu der Spinne Plexar. Achten Sie vor allem auf die Lasersperren. Wenn Sie nun die Spinne vernichtet haben, fliegen Sie zurück, aber achten Sie darauf, daß Sie möglichst hoch in den nächsten Bildschirm fliegen.

Zum guten Schluß können Sie auf dem Energielager landen .und sich von den Strapazen erholen oder Sie spielen weiter. Das hat aber nur Sinn, wenn Sie noch zwei Leben haben.

(Helmut Burgemeister/Helmut Bölcskei/rg)

# Epedemic

> Man schreibt das Jahr 1989. Ein Meteoritenschwarm droht mit der Erde zu kollidieren und eine weltweite Katastrophe auszulösen. Auf den Meteoriten befinden sich Viren, die eine tödliche Seuche verursachen. Es liegt an Ihnen, das Spiel mit möglichst wenig Verlusten an Menschenleben und einer unverseuchten Erde zu beenden.

Nach dem Laden und Starten des Programms erscheint zunächst die Frage, wieviele Verluste Sie sich zugestehen. Diese Zahl darf maximal vierstellig eingegeben werden. Danach erscheint die erste Bildschirmanzeige mit der Angabe des Tages (jede Spielrunde entspricht einem Spieltag), der Anzahl der anfliegenden Meteoriten und deren augenblickliche Entfernung von der Erde. Außerdem wird die Gesamtbevölkerung sowie die Verlustquote angezeigt.

Durch Betätigen der Funktionstaste F1 wechseln wir ins zweite Bild. Hier erhält man einen Überblick über den Stand der Dinge in den acht Regionen des Aktionsfeldes (Tabelle 1). Angezeigt wird für jede Region die Bevölkerungszahl sowie etwaige Verluste.

Durch nochmaliges Drücken von F1 gelangt man nun endlich ins Aktionsbild. Hier gibt es vier Aktionsmöglichkeiten, von denen jedoch nur eine pro Spieltag erlaubt ist.

Haben Sie sich für die medizinische Versorgung einer Region entschieden und den entsprechenden Menüpunkt ausgewählt, dann erscheint auf dem Bildschirm eine Übersicht über die verseuchten Regionen mit Schlüsselnummer und Level. Der Level ist die prozentuale Verlustquote der Bevölkerung. Dazu wird der Medikamentenvorrat angezeigt, und es erscheint die Frage nach der Region. Geben Sie an dieser Stelle die Schlüsselziffer der gewählten Region ein.

Es erscheint eine Angabe über die benötigte Menge an Medikamenten für die Versorgung dieser Region. Diese Menge wird von dem Gesamtvorrat an Medikamenten abgezogen und Sie kehren automatisch ins Hauptmenü zurück.

Sie können versuchen, einige der anfliegenden Meteore präventiv mit Raketen abzuschießen. Haben Sie sich hierfür entschieden, dann werden zunächst alle in Frage kommenden Meteore aufgelistet.

Achtung ! Der Wirkungsradius der Raketen beträgt zwischen 15000 und 50000 Kilometer. Meteore außerhalb dieses Entfernungsbereiches können nicht mit Raketen bekämpft werden.

Sie brauchen sich jetzt nur zu entscheiden, welchen Meteor Sie angreifen wollen. Der Raketenstart erfolgt vollautomatisch; allerdings trifft nicht jede Rakete ihr Ziel.

Falls eine der Regionen so hochgradig verseucht ist, daß selbst massiver Medikamenteneinsatz keine Aussicht auf Erfolg mehr verspricht, bleibt als letzte Lösung nur noch die nukleare Vernichtung der gesamten Region, um ein Übergreifen der Seuche auf andere Regionen zu verhindern. Wenn Sie sich dafür entschieden haben, erhalten Sie zunächst eine Übersicht über alle verseuchten Regionen, deren Bevölkerungszahl schon auf weniger als die Hälfte der ursprünglichen Anzahl gesunken ist.

Geben Sie jetzt die Schlüsselzahl der entsprechenden Region ein. Wenn Sie es sich in der Zwischenzeit doch anders überlegt haben, tippen Sie an dieser Stelle nur eine Null ein.

Die Produktion von Medikamenten ist die letzte der vier Aktionsmöglichkeiten. Auf dem Bildschirm erscheint eine Auflistung der unverseuchten Regionen und die dort jeweils produzierte Menge an Medikamenten. Diese Menge richtet sich nach der jeweiligen Bevölkerungsanzahl. Die Region mit der größten Bevölkerung hat auch den größten Ausstoß an Medikamenten. Beachten Sie, daß nur in völlig unverseuchten Regionen produziert wird.

Als reines Informationsbild gibt es die Weltgrafik. Auf dem Bildschirm wird eine Karte dargestellt, in die der Grad der Verseuchung in den einzelnen Regionen eingetragen ist. Die Verseuchung wird dabei in fünf Stufen angezeigt, nämlich unverseucht, bis 25, 50, 75 oder 100 Prozent verseucht. Da diese Weltgrafik nur zur Übersicht dient und Sie hier keine Entscheidung treffen können, gelangen Sie nach Betätigen einer Taste wieder zurück ins Menü, von wo aus Sie wieder alle vier Entscheidungsmöglichkeiten haben.

Die Meteore haben eine Geschwindigkeit von ungefähr 9000 Kilometern pro Tag. Hat man die erste Meteorwelle erfolgreich bekämpft, folgen weitere Meteore nach. Erst nach 30 Tagen Aktionszeit stürzen keine weiteren Meteore mehr auf die Erde ein, und das Spiel kann ausklingen. Nach 60 Tagen schließlich ist das Spiel auf jeden Fall beendet.

Ein Meteoraufschlag fordert zwei Millionen Todesopfer direkt und durch Verseuchung sofort weitere fünf Millionen Tote. Jeder weitere Tag, an dem die Seuche in der betreffenden Region nicht bekämpft wird, bedingt weitere fünf Millionen Tote.

Ist eine Region total verseucht, so können die Nachbarländer infiziert werden. Eine weitsichtige, strategische Planung der Seuchenbekämpfung ist daher unumgänglich.

Der Schwierigkeitsgrad des Spieles ist zugegebenermaßen nicht gerade niedrig. Nur wer die Nerven behält und weitsichtig plant, wird letzten Endes die völlige Auslöschung der Menschheit, zumindest im Spiel, verhindern können.

(Wolf-D. Robrahn/ev)

# Reise durch die Wunderwelt der Grafik - Teil 7

> In dieser letzten Folge des Grafikkursus wird auf das Hinterschneidungsproblem eingegangen. Außerdem wird eine Lösung für die gleichzeitige Darstellung von hochauflösender Grafik, Text und Mehrfarb-Bit-Map auf einem Bildschirm gezeigt.

Dies ist die letzte Folge unseres Grafikkurses. In der nächsten Ausgabe wird noch ein Maschinenprogramm gezeigt, das die Grafik unterstützt. Das Dornröschen (unsere hochauflösende Grafik) wird dann völlig erwachen und ihre Behäbigkeit wird sich verlieren.

Es stellte sich die Frage, wie man es wohl erreichen könnte, daß nur sichtbare Teile einer Raumfläche gezeichnet werden. H.W. Franke hat in einem Artikel über Computergrafik geschrieben: »Bis heute kann man das Problem noch nicht als völlig abgeschlossen ansehen«. Damit meinte er das Hinterschneidungsproblem. Zumindest für unsere Aufgabenstellung und den C 64 kann man es lösen, wenn man folgendem Gedankengang verfolgt. Stellen Sie sich doch mal den Bildschirm des C 64 in 320 senkrechte Linien unterteilt vor, für jeden möglichen X-Wert also eine Senkrechte. Nun nehmen wir mal eine davon (bei X = X1) und ordnen ihr in unserem Koordinatensystem willkürlich einen Y-Wert 0 zu (Bild 1). In der Doppelschleife (siehe 3D-Programm in der letzten Folge) wird nun irgendwann X = XI sein und dann der dazugehörige Y-Wert berechnet. Dieser soll zum Beispiel gleich 1 sein. Der Punkt wird gesetzt, und die Schleife läuft weiter (Bild 2).

Wenn alle X-Werte durchlaufen wurden, erhöht sich der Z-Wert in der äußeren Schleife und von neuem wird für XI ein Y-Wert berechnet. Nehmen wir an, der läge bei 1,5. Auch dieser Punkt wird gesetzt und die Schleife geht weiter (Bild 3).

Wenn nun beim nächsten Schleifendurchlauf XI erreicht ist, wird es spannend. Es gibt nun drei Möglichkeiten (Bild 4).

In Fall A liegt der neue Punkt oberhalb von P', ist sichtbar und wird gezeichnet. Im Fall B liegt er unterhalb von P, ist ebenfalls sichtbar und wird gezeichnet. Im Fall C aber liegt er zwischen P und P', er ist nicht sichtbar, weil er auf einem uns abgewandten Hang der Raumfläche liegt und wird daher nicht gezeichnet. Sie sehen also, daß wir uns lediglich immer auf jeder dieser Senkrechten den bisher größten und den bisher kleinsten Wert von Y merken müssen. Bei jedem neuen Y-Wert können wir feststellen, ob er innerhalb des damit aufgespannten Bereiches liegt (dann wird er nicht gezeichnet) oder außerhalb (dann wird er gezeichnet und dieser Wert als der größte oder kleinste bisherige gemerkt). Damit ist für uns das Problem gelöst! Wir richten ein zweidimensionales Feld ein: G (319, 2), wo für jede der 320 Senkrechten drei Werte gespeichert werden können:

G(X,0) als bisher höchster Y-Wert,
G(X,1) als bisher kleinster Y-Wert,
G(X,2) als Kennmarke, ob für diesen X-Wert schon ein Y-Wert aufgetaucht ist (in dem Fall ist G(X,2)>0) oder noch nicht (dann ist G(X,2) = 0). Durch das RUN-Kommando sind alle Variablen gleich 0, also auch G(X,2). Genau besehen benötigen wir diese Kennmarke, ob auf der Senkrechten durch X schon ein Punkt gesetzt wurde, nicht unbedingt in unserem Programm. Es ist so gestaltet, daß beim X-Durchlauf keine Lücken gelassen werden. Sinnvoll ist es trotzdem, sie einzurichten, denn durch die 45° -Verschiebung erhöht sich ja der maximale X-Wert ständig und außerdem könnte man sich ja mal überlegen, ob man den X-Durchlauf mit Lücken macht. In der letzten Folge hatten wir im Flußdiagramm unsere Doppelschleife entwickelt. Dabei war ein Teil »Zeichnen des Punktes X,Y«. Diesen Teil ersetzen wir durch den in Bild 5.

Jetzt sehen wir uns das als Programmteil an. Also Computer anschalten, Laden des 3D-Programmes aus der letzten Folge sowie der Grafik-Unterprogramme aus der vierten Folge (entweder — falls Sie das haben — durch MERGEn oder als kombiniertes Programm aus der Arbeit in der letzten Folge). Zeile 230 des 3D-Programmes enthält als letzten Befehl GOSUB 50040, den Aufruf zum »Punkt zeichnen«. Den löschen wir jetzt und fügen die folgenden Zeilen ein:
232 IF G(X,2) = 0THEN G(X,0) = Y:G(X,1)=Y:GOTO 238
234 IF Y>G(X,0) THEN G(X,0) = Y:GOTO 238
236 IF Y<G(X,1) THEN G(X,1) = Y:GOTO 238
237 GOTO 240
238 G(X,2) = G(X,2) + 1:GOSUB 50040
Außerdem muß natürlich zu Beginn dieses Feld noch dimensioniert werden: 147 DIM G (319,2)
Mit der Beispielfunktion Y=COS(Z) *SIN(X) und den Eingaben:XU = -1, XO = 10, YU=-2, YO = 5, ZU = -.1, ZO = 7,	Schrittweite = 8,XA = 0,
XE = 6, ZA = .1, ZE = 7 sieht man den Effekt jetzt ganz deutlich. Das einzige — außer der Geschwindigkeit (und naja - vielleicht noch ein paar Kleinigkeiten) — was unsere 3D-Grafik jetzt von professionellen Systemen unterscheidet, ist die Möglichkeit der Netzgrafik (Bild 6).

Dieses Thema soll nicht ausführlich behandelt werden, sondern wir werden nur zwei Wege zur Netzgrafik anschauen:

### Weg 1:

Wir machen die Schrittweite in Z-Richtung sehr klein (so wie die in X-Richtung), setzen aber nicht jeden Punkt, sondern zum Beispiel in folgender Anordnung:
a)	1. Z-Wert: Jeder Punkt der X-Schleife wird gesetzt, dann
b)	2. bis 7. Z-Wert: Nur jeder 8.Punkt der X-Schleife wird gesetzt, dann c) wieder weiter wie beim 1. Z-Wert und so weiter.

Stark vergrößert hätten wir dann etwa Verhältnisse wie in Bild 7.

Diese Lösung ist programmtechnisch einfacher als Weg 2 und ganz gut an unser bisheriges 3D-Programm anzuhängen. Nun aber noch zu

### Weg 2:

Man läßt außer der Z-X-Doppelschleife zur Berechnung von Y auch noch eine X-Z-Doppelschleife laufen. Wenn Sie das ausprobieren, gibt es allerdings wieder Schwierigkeiten mit den nicht sichtbaren Linien, denn unser Verfahren zur Lösung des Hinterschneidungsproblems läßt nichts mehr zeichnen, was innerhalb von G(X,0) bis G(X,1) liegt!

Anscheinend hat man bisher noch keine Möglichkeit Erklärungen auf das Grafikbild zu schreiben. Wenn wir im Hochauflösungsmodus zum Beispiel das Programm durch <RUN/STOP> anhalten, dann tauchen alle Meldungen als farbige Quadrate auf dem Bildschirm auf. Der Inhalt des Bildschirmspeichers dient ja jetzt als Farbinformation. Was der Computer mit dieser Farbkombination dann jeweils auf dem Bildschirm zeigen soll, holt er sich aus der Bit-Map. Man kann natürlich ohne weiteres die wichtigsten Zeichen aus Punkten, Linien und Ellipsenbögen zusammenbauen unter Verwendung unserer Grafik-Unterprogramme. Das wäre sozusagen der »harte« Weg. Aber wozu haben wir im Speicher schon die fertigen Zeichenmuster liegen! Wir müßten nur auf sinnvolle Weise an sie herankommen. Prinzipiell gibt es zwei »weiche« Wege:

a)	Herbert Kunz hat den einen davon in der Zeitschrift Computer persönlich, Ausgabe 2 (1984), Seite 78 vorgestellt. Er kopiert zunächst den Zeichensatz in einen RAM-Bereich, schaltet dann — wie gewohnt — in den Hochauflösungsmodus (bei ihm liegt der Bildschirm bei 1024 und die Bit-Map richtet er bei 8192 ein) und druckt den Text auf den Bildschirm, wo dieser erst mal in farbigen Quadraten auftaucht. Nun sieht er mittels PEEK nach, welches Zeichen an der Bildschirmstelle steht (wo jetzt natürlich nur ein farbiges Quadrat zu sehen ist). Was Herbert Kunz dadurch erhält, ist die Kennzahl (der Bildschirmcode, zum Beispiel für ein A eine 1), die uns sagt, an welcher Stelle der Zeichentabelle das gefragte Zeichen steht. Dabei ist allerdings zu bedenken, daß es auch eine nullte Stelle gibt. Jedes Zeichen besteht aus 8 Bytes und deshalb multipliziert er die Kennzahl mit 8 und addiert sie zur Startadresse des RAM-Bereiches hinzu, in den er das Zeichen-ROM kopiert hat. Von da an überträgt er Byte für Byte das Zeichen in die entsprechende Stelle der Bit-Map (die er aus Zeilen und Spaltenangabe berechnet). So wird es dann sichtbar.

Das macht er Zeichen für Zeichen bis der gesamte — in einem String definierte — Text in der Bit-Map und damit für uns lesbar auf dem Bildschirm steht. Dieses Prinzip können wir in unsere Programme übernehmen. Dazu sind nur wenige Änderungen nötig. Zunächst schließen wir den neuen Zeichen-Speicher im RAM direkt an unsere Bit-Map an: ab 32768. Das Maschinenprogramm von Herbert Kunz verändern wir deshalb etwas und legen es nicht in den Kassettenpuffer, sondern von dez. 673 bis 715. Wie im Programm von Herbert Kunz brauchen wir dann nur noch die Angaben, in welcher Zeile und Spalte welcher Text geschrieben werden soll.

Zunächst einmal wird das Maschinenprogramm eingelesen und ausgeführt. In das 2D- und in das 3D-Programm fügen wir ein:
500 FOR I = 673 TO 715: READ A:PO-KE I, A:NEXTI:SYS 673: RETURN
510 DATA 120, 169, 49, 133, 1, 169, 0, 133, 98, 133,100, 169, 208, 133, 99, 169, 128, 133
520 DATA 101, 162, 16, 160, 0, 177, 98, 145, 100, 200, 208, 249, 230, 99, 230, 101, 202, 208
530 DATA 242, 169, 55, 133, 1, 88, 96

In Zeile 5 hängen wir an die beiden POKE-Kommandos noch an :GOSUB 500

In Zeile 120 definieren wir einen String, der einen senkrechten Tabulator ermöglicht:
120 CP$ = CHR$ (19):FOR I = 1 TO 24:CP$ = CP$ + CHR$ (17):NEXT I Dann definieren wir den zu druckenden String und Zeile und Spalte des Druckortes:
122 TE$ = "Y” + F$:ZE = 0:SP = 0

Jetzt müssen wir nur noch dafür sorgen, daß nach dem Zeichnen der Kurve oder Raumfläche der Text gedruckt wird. Dazu gleichen wir zunächst mal das 2D- an das 3D-Programm an. In den Zeilen 200, 210, 220 des 2D-Programmes ändern wir die Zeilennummern zu 300, 310, 320 (dann muß natürlich in Zeile 300 die Anweisung THEN 200 zu THEN 300 umgeschrieben werden und die alten Zeilen 200 bis 220 gelöscht werden). Im 2D-Programm hört das Zeichnen in Zeile 195, im 3D-Programm in Zeile 250 auf. Deswegen legen wir den Druckvorgang ab Zeile 260:
260 PRINT LEFT$ (CP$,ZE + 1)TAB (SP)TE$;
262 AN = 23552 + ZE*40 + SP:GS = 24576 + ZE*320 + SP*8
264 FOR I = AN TO AN + LEN (TE$)-1
266 L = PEEK (I) :Z = 32768 + 8*L:PO-KEI, 16*F1 + F2
268 FOR J = 0 TO 7:POKE GS+J, PEEK (Z+J):NEXTJ
270 GS = GS + 8:NEXTI

Wenn Sie das Programm (2D- oder 3D-Programm) jetzt starten, bekommen Sie als Kopf des Hochauflösungsbildschirmes noch die gezeichnete Funktion als Gleichung gedruckt. Sie können sich leicht aus diesen Angaben ein Programm schreiben, in dem die Zeilen 260 bis 270 ein Unterprogramm bilden, das jeweils mit neuem Text TE$, neuer Zeile ZE und Spalte SP aufgerufen werden kann. So können Sie beliebigen Text in das Hochauflösungsbild schreiben.

b)	Nun zum zweiten »weichen« Weg. Weil sich dieser nahezu völlig in Maschinensprache abspielt, soll hier nur das Prinzip erklärt werden. In der Serie über Assembler-Programmierung wird dieses sogenannte Interrupt-Handling besprochen. Zunächst das Programm. Tippen Sie NEW ein und dann Listing 1.

Starten Sie mit RUN und Ihr Bildschirm ist in drei Zonen aufgeteilt. Ist das Programm beendet, drücken Sie eine Taste. Sie sind auch nach dem END noch in dieser Bildschirm-Aufteilung. Sie können das leicht feststellen, wenn Sie den Cursor nach oben bewegen und ein paar Schreibversuche machen. Oder versuchen Sie mal das LIST-Kommando! Wenn Sie davon genug haben, dann geben Sie (RUN/ STOP) und (RESTORE) ein, und Sie sind wieder im Normalzustand des Bildschirmes. Wenn man diese Technik beherrscht, kann man mit dem Bildschirm praktisch alles machen, was man will! Wir bedienen uns eines sogenannten Rasterzeilen-Interrupts. Ich habe Ihnen in der letzten Folge erklärt, daß der bildaufbauende Elektronenstrahl über zirka 280 Rasterzeilen huscht und 20mal in der Sekunde ein komplettes neues Bild aufbaut. In der einschlägigen Literatur ist man sich übrigens uneins: Woanders wird erzählt, es handle sich um 264 Rasterzeilen und 60 mal in der Sekunde werde ein neues Bild aufgebaut. Wie dem auch sei: Richtig ist, daß es ein enorm schneller Geselle ist, der über den Bildschirm huscht, und daß die aktuelle Rasterzeile in den Registern 53266 (LSB) und 53265, Bit7 (msb) mitgezählt wird. Interrupts bringen den Computer dazu, neben seiner uns sichtbaren Arbeit (zum Beispiel Programmablauf) noch eine Anzahl anderer Dinge zu tun. Eines davon ist die ständige Wiederauffrischung des Fernsehbildes durch Informationen an den Rasterstrahl. Der C 64 löst solche Interrupts auch per Programm aus. Zu diesem Zweck dienen die Register 53273 und 53274. Bit 7 von 53273 sagt uns, daß ein Interrupt aufgetreten ist (Bit 7 ist dann 1), mit einer der Ursachen, die noch in den Bits 0 bis 3 einzeln angegeben werden:

Bit 0= 1 Rasterzeilen-Interrupt Bit 1 = 1 Sprite/Hintergrund-Kollision Bit 2 = 1 Sprite/Sprite-Kollision Bit 3= 1 Interrupt durch Lichtgriffel.

Register 53274 bietet uns die Möglichkeit einer sogenannten Interrupt-Maske. Bis auf Bit 7 ist es genauso aufgebaut wie 53273. Wenn wir hier zum Beispiel in Bit 0 eine Eins setzen, dann weiß der VIC-II-Chip, daß er einen sogenannten Rasterzeilen-Interrupt auslösen soll. Nur dies alleine würde kaum Wirkung haben, denn nun erfolgt beim Auslösen des Interrupts ein Sprung an die Adresse, die vom Interrupt-Vektor (Speicherstellen 788 (LSB) und 789 (MSB)) angezeigt wird. Das ist im Normalfall ein Maschinenprogramm im Betriebssystem (Start bei 59963). Weil dieser Zeiger im RAM liegt, kann er verändert werden, so daß er auf ein eigenes Maschinenprogramm weist, das nun die Interruptbehandlung nach unserem Gutdünken ausführt. Außerdem müssen wir noch angeben, in welcher Rasterzeile der Interrupt stattfinden soll. Dazu schreiben wir in das Rasterregister diese Zeilennummer ein. Das ist also das Prinzip, und weil diese ganze Angelegenheit sehr schnell erledigt sein muß, ist das nur in Maschinensprache möglich.

## Grafik und Maschinensprache

Wer Grafik in Basic betreibt, braucht Sitzfleisch. Das haben Sie sicherlich am eigenen Leibe bemerkt. 20 Minuten für ein fertiges 3D-Bild, das ist schon ziemlich lange! Die meisten brauchbaren Grafik-Programme sind deshalb in Maschinensprache geschrieben. In der nächsten Ausgabe wird ein einfaches aber brauchbares Grafik-Unterprogramm-Paket in Maschinensprache vorgestellt, mit dem Sie den Zeitbedarf erheblich reduzieren können. Verantwortlich für diese lange Zeitdauer von Basic-Programmen ist der Basic-Interpreter, der jeden Befehl übersetzen muß und dann ein zum Befehl gehöriges, oft recht verwickeltes Maschinenprogramm ausführt, dann den nächsten Befehl übersetzt, und so weiter... Wenn das zum Beispiel in einer FOR....NEXT-Schleife mit 320 Durchläufen passiert, dann dauert das...! Je einfacher und auch allgemein verwendbarer ein Maschinenprogramm ist (jedenfalls für Grafik), desto umfangreicher muß das Basic-Aufrufprogramm sein. Oder: Je spezialisierter ein Maschinenprogramm ist, desto weniger Basic-Aufrufprogramm ist nötig. Ein Beispiel: Wenn das Maschinenprogramm lediglich die Routine zum Berechnen und Zeichnen eines Punktes enthält, dann muß vom Basic-Aufrufprogramm eine FOR..NEXT-Schleife 320 durchlaufen werden, in der jedesmal X variiert, Y aus der Funktionsgleichung berechnet wird, beide dann transformiert werden auf das Bildschirmsystem, die transformierten Werte an die Speicheradressen gePOKEt werden, von denen es die Maschinenroutine nach dem SYS-Aufruf abholt. Man hat im Aufrufprogramm allerlei Freiheiten: Man kann nach Belieben das Koordinatensystem ändern, die zu zeichnende Funktion, den Start- und den Endwert der FOR..NEXT-Schleife und das alles relativ einfach durch einige INPUT-Anweisungen oder notfalls Programmzeilenänderungen erreichen. Dafür muß man die lange Zeitdauer des Aufrufprogrammes hinnehmen. Ein Maschinenprogramm wäre zwar sehr schnell und erforderte von Basic aus unter Umständen nur einen SYS-Befehl. Aber es wäre mehr oder weniger festgelegt auf immer diese eine Aufgabe und damit recht unbeweglich und auch ziemlich lang. Maschinenprogramme andererseits, die dieselben Eingabe- und Variationsmöglichkeiten wie das vorhin erwähnte Basic-Aufrufprogramm bieten, sind schon etwas für Feinschmecker der Assemblerprogrammierung und äußert rar. Ein anderes Phänomen ist die Tatsache, daß man vor der Wahl steht: Geschwindigkeit oder Speicherplatz sparen. Man kann Grafik-Maschinenprogramme enorm beschleunigen durch spezielle Programm-Techniken. Sie werden dann aber häufig so lang, daß man sie kaum mehr als DATA-Zeilen-Listing abdrucken kann.

## Bewegte Grafik

Wie man einen Trickfilm mit Hilfe von Sprites drehen kann, habe ich Ihnen in Folge 5 gezeigt. Welche Möglichkeiten gibt es ohne Sprites? Schneller Bildaufbau — kurze Verzögerung — Bild löschen — neues Bild aufbauen mit veränderter Ansicht — und so weiter... Wenn Sie das in Basic überlegen, können Sie das gleich wieder vergessen. Um den Eindruck von Bewegung zu vermitteln, muß alles viel schneller gehen. Aber auch ein Maschinenprogramm muß sehr sorgfältig entwickelt werden, um die nötige Geschwindigkeit des Bildaufbaues zu erhalten. Für einfache Darstellungen könnte dieses Konzept aber funktionieren. Denken Sie aber zum Beispiel mal an unsere 3D-Bilder! Mit dem C 64 — behaupte ich — geht's so nicht. Stellen Sie sich vor, wir benützen mehrere Bit-Maps und Bildschirme und zeichnen in je eine Bit-Map einen Bewegungszustand unseres Bildes. Dann müssen wir nur noch in einer Aufrufschleife von Bit-Map zu Bit-Map umschalten. Das ist auch in Basic möglich. Wir hätten dann drei Bit-Maps zur Verfügung. Das ist zwar nicht viel, aber immerhin könnte man damit schon eine Raumfläche in zwei Richtungen kippen oder ähnliches. Wenn man in Maschinensprache programmiert, hat man sogar 5 Bit-Maps (mindestens) zur Verfügung und weil auch noch alles schneller geht, kann man mit einigem Geschick vielleicht sogar während man vier Bilder nacheinander zeigt, das fünfte Bild ungesehen aufbauen und auf diese Weise mehr als fünf Bewegungsstadien realisieren. Sie sehen aber schon: Das ist die hohe Schule der Programmierkunst und hier gibt es noch viel zu tun. Einen 3D-Trickfilm auf diese Weise zu erzeugen, ist heute auch auf großen Computern noch kaum möglich. Der Film TRON beispielsweise setzt sich aus lauter per Computer erzeugten Einzelbildern zusammen, die erst filmtechnisch zum Bewegungsablauf aneinandergehängt wurden. Dort wo Echtzeit-Darstellung notwendig ist, bei Simulationen beispielsweise in Flugtrainern, reduziert man die Darstellung auf das unbedingt notwendige und hat außerdem dazu Computer zur Verfügung, die uns C 64-Benutzern das Wasser im Mund zusammenlaufen lassen. Aber was solls. Die Kunst des Programmierens liegt ja vielleicht darin, daß man mit einem Minimum an Aufwand einen Maximaleffekt erzielt. Und wenn man sich dann mal ansieht, was wir aus unserem C 64 alles herausholen können, dann stehen wir eigentlich ganz gut da, meinen Sie das nicht auch?

(Heimo Ponnath/aa)

# Assembler ist keine Alchimie – 2. Teil

> Bisher haben wir uns mit dem Innenleben unserer Computer auseinandergesetzt und die wichtigsten Teile der Hardware kennengelernt. Jetzt kommen wir wie versprochen zur Software, nämlich zum Assembler.

Sollten Sie einen Assembler haben, dann schalten Sie ihn jetzt bitte ein. Falls Sie keinen haben, schaffen wir Abhilfe. Wir werden in den nächsten Ausgaben ein komplettes Software-Paket; Assembler, Disassembler und Monitor veröffentlichen. Dieser Assembler wird uns dann den ganzen Kurs hindurch begleiten. Meistens meldet der Assembler sich mit einer Registeranzeige. Sollte Ihrer das nicht tun, dann müssen Sie wohl noch den Monitor anschalten oder speziell einen Befehl für die Registeranzeige eingeben (häufig ist das ein R). Jedenfalls wird nun auf dem Bildschirm der Inhalt der Register angezeigt, (Bild 1).

Die angezeigten Werte sind Beispiele, wie sie beim C 64 auftreten können. PC ist der Programmzähler, der immer auf den nächsten zu holenden Befehl zeigt. (Der Wert $E147 rührt vom SYS-Aufruf, mit dem ich meinen Assembler starte). IRO zeigt uns an, auf welche Adresse der sogenannte Interrupt-Vektor gestellt ist. Das ist das Byte-Paar 788 (LSB) und 789 (MSB). Auf den Wert $EA31 zeigt es im Normalfall.

Die nächsten acht Angaben beziehen sich auf das Prozessorstatusregister, das wir in der letzten Folge P genannt haben. Die Bedeutung der einzelnen »Flaggen« zeigt Ihnen (Bild 2).

AC ist der aktuelle Inhalt des Akkus.

XR zeigt an, was im X-Register und YR was im Y-Register enthalten ist. SP (von Stackpointer=Stapelzeiger) gibt uns Auskunft über den freien Platz im Stapelregister. Damit wissen wir genau, was in diesem Moment in unserem Computer vorgeht. So fremd Ihnen das alles im Augenblick noch vorkommt, bald werden Sie mit dieser Registeranzeige auf vertrautem Fuß stehen.

## Wie sieht ein Assemblerprogramm aus?

Das menschliche Gehirn hat dem des Computers vieles voraus. Dazu gehört es beispielsweise, daß ein Mensch allerlei Dinge gleichzeitig tun kann: gehen, sprechen, Musik hören, lächeln, Handbewegungen vollführen, womöglich dabei auch noch etwas kauen und so weiter. Ein Computer ist dazu nicht imstande. Er erledigt eine kleine Aufgabe nach der anderen. Weil er das so schnell macht, hat es für uns den Anschein, es geschähe alles gleichzeitig. Das Maschinenprogramm ist eine Kette solcher kleiner Aufgaben. Das erste Glied daraus, das wir kennenlernen wollen ist der Befehl
LDA.

Das bedeutet: Lade den Akkumulator. Alle Assembler-Befehlsworte bestehen aus drei Buchstaben wie dieser hier auch. Wir haben in der ersten Folge schon gesagt, daß einem solchen Befehl eine 8-Bit-Codezahl entspricht. Das ist hier $A9 oder binär 1010 1001 oder schließlich dezimal 169. Die Code-Zahl muß in einem Speicherplatz stehen, zum Beispiel in $1500 (entspricht dez. 5376). Assemblerlistings sehen dann so aus:
1500 LDA

Hier tritt also die Speicherplatznummer mit einem nachfolgenden Befehl anstelle der vom Basic gewohnten Zeilennummer.

Hier fehlt noch etwas Entscheidendes: Was soll den in den Akku geladen werden? Genauso wie es in Basic Befehle gibt, die für sich alleine stehen können wie CLR oder LIST, gibt es auch im Assembler solche Befehle. Weitaus häufiger aber sind hier Befehle, die ein Argument erfordern (in Basic zum Beispiel PEEK(100)). Dabei ist 100 das Argument). In Assembler gibt es zwei Sorten von Argumenten. Solche, die in einem Speicherplatz unterzubringen sind und andere, die zwei Bytes brauchen. Mit dem Befehlswort Quer also LDA) zusammen gezählt, existieren in Assembler also l-Byte-Befehle, 2-Byte-Befehle und 3-Byte-Befehle.

Das Argument von LDA ist also das, was in den Akku soll. Laden wir also mal eine 1 in den Akku:
1500 LDA #$01

Wir haben jetzt einen 2-Byte-Befehl erzeugt. Was aber bedeuten # und $ dabei? $ ist leicht zu erklären. Die große Mehrzahl der Assembler nimmt bei Zahlenangaben Hexadezimalzahlen an. Bei einigen muß man das durch das $-Zeichen kennzeichnen. Manche Assembler lassen auch Binärzahlen, Dezimalzahlen und sogar ASCII-Zeichen als Argumente zu. Für jede Eingabeart steht dann vor dem Argument ein Zeichen, das die Art des Argumentes angibt, zum Beispiel häufig »I« für Dezimalzahlen oder % für Binärzahlen. Nun zum # -Zeichen. Es gibt viele Arten, den Akku zu laden. Direkt mit einer Zahl — wie wir hier —, aber zum Beispiel auch mit dem Inhalt eines anderen Speichers und so weiter. Man spricht von der sogenannten Adressierung.

Es gibt eine ganze Menge davon und jede wird auf eindeutige Weise gekennzeichnet. Wenn wir in unseren Akku eine Zahl laden, dann ist das die »unmittelbare« Adressierung, und die kennzeichnet man mit dem #-Zeichen.

Wenn in Speicherstelle $1500 die Codezahl für LDA steht, dann muß die 1 in der Speicherstelle $1501 stehen, wie es sich für einen 2-Byte-Befehl gehört. Wenn Sie nun die Assemblerzeile eingegeben haben und (RETURN) drücken, dann taucht auf dem Bildschirm ... eine Fehlermeldung auf (bei vielen Assemblern). Wir müssen vorher nämlich noch unserem Software-Instrument sagen, jetzt zu assemblieren. Wie das geschieht, ist auch wieder von Assembler zu Assembler verschieden. Die meisten erwarten, daß man vor der Zeile noch ein A eingibt:
A 1500 LDA #$01

Wenn Sie jetzt (RETURN) drücken, zeigt der Bildschirm:
A 1500 LDA#$01
A 1502
und meistens einen blinkenden Cursor, der auf die nächste Eingabe wartet. $1502 ist die nächste freie Speicherstelle, und wenn beim Programmablauf der Programmzähler nach dem LDA # $01 auf $1502 deutet, dann erwartet er dort den nächsten Befehl. Wenn dort Unsinn steht, dann stürzt der Computer im allgemeinen ab, je nachdem, welcher Code dann hier zufällig enthalten ist. Wir haben ja 256 Möglichkeiten dafür: $00 bis $FF. Im Gegensatz zu Basic, wo man durch den Interpreter die Möglichkeit hat, Zeilennummern zu bauen wie man will, muß hier das Progamm eine ununterbrochene Perlenschnur von Befehlen in Speicherstellen sein. Durch einige Befehle läßt sich dieses Prinzip allerdings durchbrechen,

Damit wir die Wirkung von Befehlen sehen können, greife ich auf einen Befehl vor, der ähnlich dem STOP in Basic einen Programmabbruch bewirkt: BRK, Die genaue Funktion soll erst später erklärt werden, aber wir sehen jedenfalls dann, wenn ein Maschinenprogramm auf einen BRK-Befehl läuft, die Registerinhalte angezeigt. Das ist in den meisten Assemblern eingebaut. Wir ergänzen jetzt:
A 1502 BRK

Damit erstmal genug. Steigen Sie aus dem Assembler aus, und starten Sie das Programm. In den meisten Assemblern geht das mit
G 1500
oder sonst von Basic aus mit SYS 5376. Jetzt werden wieder die Register angezeigt. Der Programmzähler steht auf 1503, im Akku steht 01, alle Flaggen außer der Breakflagge sind Null (die unbenutzte Flagge steht immer auf 1). Jetzt ändern wir das Argument:
A 1500 LDA #$00
A 1502 BRK

Wir starten wieder und sehen uns die Register an: Programmzähler 1503, Akku jetzt 00, aber bei den Flaggen hat sich etwas verändert: Die Zero-Flagge ist auf 1 gesetzt. Wir sehen also: Diese Flagge bleibt solange ungesetzt, solange nicht eine Null im Akku auftaucht, erst dann wird sie 1.
Noch einmal ändern wir das Programm:
A 1500 LDA #$FF
A 1502 BRK

Nach erneutem Start steht das Erwartete in den Registern, nur bei den Flaggen ist etwas Merkwürdiges passiert: Die Vorzeichenflagge steht auf 1. Das bedeutet, im Akku soll eine negative Zahl stehen! Nun wissen wir aber, daß $FF = dez. 255 ist. Dieses Rätsel wird uns noch eine Weile begleiten. Es sei hier nur bemerkt, daß kein Fehler vorliegt: Immer wenn in einer Zahl das Bit 7 gleich 1 ist, geht die Vorzeichenflagge auf 1. Die Lösung des Rätsels werden wir bei den negativen Binärzahlen finden.

Wir schließen aus alledem: Der LDA-Befehl beeinflußt die Vorzeichen- und die Zeroflagge.

## Der zweite Assemblerbefehl: STA

STA heißt »store accumulator«, also »lege Akkuinhalt ab«. Wie Sie sich denken können, muß auch hier ein Argument auftauchen: Nämlich wohin abgelegt werden soll. Wir legen unseren Akkuinhalt in die erste Bildschirmspeicherstelle (C 64:$0400, VC 20 Grundversion: $lE00, VC 20 mit Erweiterung: $1000). Unser Programm muß also so aussehen:
A 1500 LDA #$01
A 1502 STA $0400 oder die entsprechende Adresse (siehe oben).

Mit diesem STA-Befehl lernen wir eine neue Adressierungsart kennen: Die »absolute« Adressierung. Sie ist daran zu erkennen, daß kein besonderes Merkmal verwendet wird. Die Adresse $ 0400 ist nicht in einem Byte darstellbar, sondern wird aufgeteilt auf zwei Bytes. Im Speicher steht jetzt:
1500 LDA #
1501 $ 01
1502 STA
1503 $ 00 »das ist das LSB«
1504 $ 04 »das ist das MSB«
Hier liegt also ein 3-Byte-Befehl vor, und die nächste freie Speicherstelle ist $ 1505.

Vom Basic her wissen Sie, daß 1 der Bildschirmcode für den Buchstaben A ist, und daß man jeder Bildschirmspeicherstelle auch eine Bildschirmfarbspeicherstelle zuordnet. Um ein eingeschriebenes Zeichen vom Hintergrund abzuheben, muß man dort dann eine Farbinformation eingeben. Der Start dieses Büdschirmspeichers liegt so:
C 64 :$ D800
VC 20 (Grundv): $9400
VC 20 (Erw. Vers.): $9600.

Der Farbe Schwarz entspricht die Code-Zahl 0. Wir ergänzen unser Programm durch:
A 1505 LDA #$00
A 1507 STA $D800 (oder entsprechender Speicher, siehe oben). Die nächste freie Adresse ist nun $150A. Unser Programm soll jetzt abgeschlossen sein. Damit der Computer aber beim Programmzählerstand $150A nicht Unsinn vorfindet, muß — ähnlich wie bei END in Basic — das Programm auf irgendeine Weise beendet werden. Das kann durch BRK geschehen. Wir wollen aber den dritten Assembler-Befehl kennenlernen:
RTS

Das heißt »return from subroutine«, also »Rückkehr aus Unterprogramm«. In unserem Fall bewirkt das eine Rückkehr zum Basic. Wie Sie sehen, ist das ein l-Byte-Befehl, also ohne Argument. Auch hier spricht man von einer Adressierungsart, nämlich der »impliziten«-Adressierung. Man erkennt sie am Fehlen des Argumentes. Die Adresse ist implizit, das heißt im Befehl selbst enthalten. Dies ist nämlich ein Befehl, der immer an den Programmzähler gerichtet ist. Der Computer holt sich vom Stapel-Speicher die dort zuoberst liegende Adresse, das ist die, bei der der Computer in ein Unterprogramm gesprungen ist oder aber die, bei der der Computer Basic verlassen hat. Wir ergänzen also noch:
A 150A RTS
und starten das Programm, zum Beispiel von Basic aus mit SYS 5376. Natürlich taucht dann in der linken oberen Ecke des Bildschirmes ein schwarzes A auf. Hier noch der Basic-Lader:
10 FOR I = 5376 TO 5386:READ A:POKE I,A:NEXT I:END 20 DATA169,l,141,0,4*169,0,141,0,216*, 96.

Die mit * markierten Zahlen müssen für den VC 20 verändert werden: Grundversion: 30 und 148 Erweiterung: 16 und 150.

Eine Kombination von LDA mit STA ist vergleichbar mit dem POKE-Befehl in Basic. Man kann in Assembler nicht direkt eine Zahl in einen Speicher einschreiben, sondern muß den Umweg über den Akku machen. Außer dem Akku eignen sich dazu aber auch das X-Register und das Y-Register. Hierfür gibt es die Befehle LDX (lade X-Register), STX (lege X-Register-Inhalt ab), LDY lade Y-Register) und schließlich STY (lege Y-Register-Inhalt ab). Sie können das übungshalber an unseren kleinen Programm ausprobieren. An dem folgenden Programm sehen Sie noch eine Eigenart der drei Register (Akku, X-Register, Y-Register):
A 1500 LDA #$01
A 1502 LDX #$00
A 1504 LDY #$02
A 1506 STA $0400
A 1509 STX $D800
A 1500 STY $0401
A 150F STX $D801
A 1512 STA $0402
A 1515 STX $D802
A 1518 RTS

Für den VC 20 werden die entsprechenden Speicherstellen für Bildschirm- und Bildschirmfarbspeicher eingesetzt. Dieses Programm druckt — wie erwartet — »ABA« in die linke obere Ecke des Bildschirms. Dabei ist das X-Register dreimal ausgelesen worden und der Akku zweimal. Sie sehen also, daß die Registerinhalte durch die STA-, STX-, STY-Befehle nicht verändert werden.

Wir wollen noch etwas ausprobieren. Bisher haben wir den LDA-Befehl nur mit der »unmittelbaren« Adressierung kennengelernt. LDA, LDX, LDY können auch »absolut« adressiert werden.

A 1518 LDA $D800

Damit laden wir den Inhalt der Speicherstelle $ D800 (beim VC 20 die anderen Adressen des Bildschirmfarbspeichers) in den Akku. Der Inhalt ist seit $1509 eine Null. Jetzt weiter:
A 151B STA $0403
A 151E STX $D803
A 1521 RTS

Das müßte beim Ablauf des Programms noch einen Klammeraffen (@mit Bildschirmcode 0) an die vierte Stelle plazieren, was Sie durch SYS 5376 leicht nachprüfen können. Sie sehen, daß man mit diesen sieben Befehlen schon eine Menge anfangen kann.

Wir kommen noch einmal zur Adressierung. Ich hatte Ihnen gesagt, daß LDA #$01 ein 2-Byte-Befehl mit unmittelbarer Adressierung ist (ein Byte für LDA und eines für 01), LDA $D800 ist ein 3-Byte-Befehl (ein Byte für LDA, je eines für das LSB und das MSB von $D800) mit absoluter Adressierung. Da werden Sie sich doch sicher schon gefragt haben, wo bleibt die Adressierung! Wenn aber kein Byte für die Adressenmarkierung (zum Beispiel #) reserviert ist, muß die Kennzeichnung irgendwie anders sein. Wenn Sie einen Disassembler zur Verfügung haben, dann sehen Sie sich damit unser Programm an. Fast jeder Disassembler gibt neben dem Assemblertext auch Byte für Byte in Hexadezimalzahlen die Codes an. Wenn Sie nun die beiden Befehle LDA # $01 und LDA $d800 von den Codes her untersuchen, sehen Sie folgendes:
1500 A9 01 LDA#$01
und
1518 AD 00 D8 LDA$D800

Offensichtlich gehört jeweils das erste angezeigte Byte zu LDA. Sie sind aber verschieden! Wir sehen daraus, daß die Codezahl für einen Befehl gleich zwei Informationen enthält: Das Befehlswort selbst (LDA) und die Adressierungsart.

Genauso wie man LDA sowohl unmittelbar als auch absolut ausführen kann, ist das auch mit LDX und LDY möglich. Bei den Befehlen STA, STX, STY ist eine unmittelbare Adressierung sinnlos. Für RTS kennt man nur eine implizite Adressierung. Wir fassen das alles zusammen in Bild 3.

In den letzten Spalten von Bild 3 ist noch angegeben, inwieweit durch diese Befehle das Prozessorstatusregister beeinflußt wird, so wie wir es für den Befehl LDA schon ausprobiert haben. In der vorletzten Spalte sehen Sie, wie lange die Ausführung eines Befehls dauert. Wenn sie für einen Taktzyklus etwa eine Mikrosekunde rechnen, dann müßten Sie jetzt ausrechnen können, wie lange unser letztes Programm zur Bearbeitung braucht: 48 Mikrosekunden. Ein vergleichbares Basic-Programm braucht dazu etwa hundertmal so lange: zirka 0,05 Sekunden.

Ein bißchen von Assembler-Alchimie verstehen Sie jetzt schon mit diesen sieben Befehlen. Wir wollen uns nun die Zahlen ansehen, die hier Verwendung finden: Das Binärsystem und das Hexadezimalsystem.

Die einzigen Ziffern, die unser Computer kennt, sind 0 und 1. Sie stehen für »Strom an« oder »Strom aus«, oder für »keine magnetische Erregung« oder »magnetische Erregung«. Deswegen ist es für uns als angehende Assembler-Alchimisten von großer Bedeutung — wir arbeiten ja ganz eng an der Hardware — dieses binäre Zahlensystem handhaben zu können. Das Hexadezimalsystem kennt der Computer eigentlich gar nicht. Wir verwenden es, weil es in einem besonders engen Zusammenhang mit Binärzahlen und dem Aufbau unseres Computers steht: Die größte einstellige Hex-Zahl ist $F, das entspricht genau 1111 im Binärsystem, also dem maximalen Füllungsgrad eines halben Bytes, das Nibble genannt wird. Ein ganzes Byte kann maximal $FF enthalten (binär 1111 1111) und der gesamte Speicheradressenbereich unseres Computers geht bis $FFFF (dezimal 65535). Eine einstellige Hex-Zahl paßt also in ein Nibble, eine zweistellige in ein Byte und eine dreistellige oder vierstellige in zwei Bytes, weshalb man solche Hex-Adressen auch recht leicht in das LSB und das MSB aufteilen kann:
$ D8 00
MSB LSB

Rechnen werden wir mit Hexadezimalzahlen nicht, dazu benutzen wir dann das Dezimalsystem oder — wenn es sich um computerinterne Vorgänge handelt — das Binärsystem.

Das Rechnen mit Binärzahlen funktioniert genauso wie das mit Dezimalzahlen. Es gilt also
0 + 0 = 0
0 + 1 = 1
1 + 0 = 1
1 + 1 = 10
wobei binär 10 gleich dezimal 2 ist. Als Beispiel können wir mal 2 + 1 = 3 im Binärsystem rechnen:
10 entspricht dez. 2
+ 01 entspricht dez. 1
---
11, was ja dezimal 3 ergibt.

Die Addition erfolgt also spaltenweise wie beim gewohnten dezimalen Addieren. Auch mit dem Übertrag läuft es wie im dezimalen. Beispiel: 2 + 2 = 4:
10	entspricht dez. 2
+10 entspricht dez. 2
---
100,	was dezimal eine 4 ergibt.

In der zweiten Spalte wurde nach der Regel verfahren: 1 + 1 = 10. Rechnen wir noch 3 + 3 = 6:
11	entspricht dez. 3
+ 11 entspricht dez. 3
---
110,	was dezimal eine 6 ergibt.

In der ersten Spalte wurde gerechnet 1 + 1 = 10, wobei nach dem alten Motto: 0 hin, 1 im Sinn die 0 unter den Strich gesetzt wurde. In der zweiten Spalte wird dann so verfahren: 1 +1 +1 (das ist die 1, die wir »im Sinn« hatten)=11. Ich meine, daß Sie ohne Probleme die folgenden Übungsaufgaben lösen und dann jeweils dezimal das Ergebnis nachprüfen können: 10+5, 7 + 1, 16 + 16, 240+16, 62 + 65.

In der nächsten Folge werden wir eine Anzahl neuer Assembler-Befehle kennenlernen und erfahren, wie der Computer Zahlen voneinander abzieht. Bei der Gelegenheit lernen Sie dann noch einige Flaggen kennen, und wir werden das Rätsel, warum bei LDA # $FF eine negative Zahl angezeigt wird, lösen. Und vor allen, Sie erhalten einen komfortablen Assembler, Disassembler und einen Monitor.

(Heimo Ponnath/aa)

# In die Geheimnisse der Floppy eingetaucht – Teil 1

> Das Diskettenlaufwerk VC 1541 ist der Renner unter den Massenspeichern. Doch mit der passenden Literatur hapert es. Deshalb beschränken sich die meisten Anwender auf das Speichern und Laden von Programmen. Mit diesem Kurs lernen Sie, Ihre Floppy effektiv auszunützen und schließlich zu manipulieren.

Daß die 1541 ein sehr wandelbares Gerät ist, werden die meisten Benutzer wohl wissen oder zumindest erahnen. Man denke ja nur an den »Kleinkrieg« zwischen Softwareherstellern und Softwarepiraten, die sich gegenseitig das Leben schwer machen. Die meisten »Schlachten« liefert man sich hier im Inneren der Floppy, die viel raffiniertere Methoden des Programmschutzes anbietet als der Commodore 64.

Aber auch solche Programme, wie das HYPRA-LOAD, das Sie ebenfalls in dieser Ausgabe als Listing des Monats finden, beweisen die Flexibilität der 1541. Doch wie bei so vielen Dingen in der Commodore-Welt sind auch hier die Informationen rar, beziehungsweise in den Handbüchern gar nicht vorhanden. So wollen wir uns mit Ihnen an die Floppy heran- und in sie hineintasten. Angefangen bei grundlegenden Informationen über den Diskettenaufbau und den Befehlssatz der Floppy werden wir Schritt für Schritt in deren Möglichkeiten zur Programmierung und Manipulation hinabtauchen. Was wird benötigt?

Nun, außer einem C 64 und einer VC 1541, »nur« Basic-Erfahrungen, grundlegende Kenntnisse in Maschinensprache (für spätere Folgen) und ein wenig Geduld.

Bevor wir jedoch mit unserer ersten Tauchfahrt beginnen, tippen Sie bitte das beigefügte Programm EDDI (Listing 1) ein, sofern Sie nicht über einen eigenen Disk-Monitor verfügen. Auf die Bedienung von EDDI wird im Einzelnen eingegangen.

Sehen wir uns jetzt erst einmal so eine Diskette an; die folgenden Erläuterungen beziehen sich auf eine formatierte Diskette.

## Aufbau einer Diskette

Die Diskette ist in 35 konzentrische Spuren (englisch: Tracks) aufgeteilt. Diese Spuren enthalten wiederum jede eine bestimmte Anzahl von Sektoren, die von außen nach innen abnimmt. Die genauen Zahlenverhältnisse stehen in Tabelle 1.

Die Spuren sind, beginnend mit der äußeren Spur, von 1 bis 35 durchnumeriert. Die Sektoren sind auf den Spuren in numerischer Reihenfolge gegen den Uhrzeigersinn angeordnet. Jeder Sektor enthält einen Block, das sind 256 Bytes, an Information. Es kann jeder der 683 Blöcke auf der Diskette durch Angabe der jeweiligen Spur- und Sektornummer aufgerufen werden. Allerdings stehen davon dem Benutzer normalerweise nur 664 Blocks zur Verfügung, da das Betriebssystem der Floppy die Spur 18 für sich beschlagnahmt.

Für die nun folgenden Versuche wäre es sinnvoll, eine Diskette neu zu formatieren, mit der wir ein bißchen »spielen« können. Sehen wir uns nun erst einmal das Directory an (LOAD "$",8).

In der ersten Zeile stehen die Drivenummer (hier immer 0) und der Name der Diskette, sowie die ID und das Formatkennzeichen (genaueres später).

Die zweite Zeile enthält, da sich kein File auf der Diskette befindet, die Meldung »664 BLOCKS FREE«.

## Erste Versuche mit EDDI, dem Disk-Monitor/Editor

Da sich diese Informationen auf der schon erwähnten Spur 18 befinden, wollen wir uns diese Spur mit EDDI gleich einmal etwas genauer ansehen. Laden Sie den Editor und legen Sie unsere »Spieldiskette« ein; danach starten Sie mit RUN.

Als Kommando tippen Sie F3 für »BLOCK LESEN«. Danach geben Sie, durch Komma getrennt, die Spur und Sektornummer des gewünschten Blocks ein; in unserem Fall »18,0«.

Nach dem Ladevorgang meldet sich EDDI mit Byte 0 der ersten von 16 Seiten, zu je 16 Bytes. Drücken Sie jetzt RETURN, um die erste Seite anzuzeigen, welche wir nun betrachten wollen.

Es sollte vielleicht erwähnt werden, daß die Zählung von Blöcken und Bytes grundsätzlich bei Null beginnt. Den eingeladenen Block bezeichnet man als BAM (Block Availability Map), auf deutsch etwa »Blockbelegungsplan«. Dieser Plan gibt an, welche Blöcke auf der Diskette frei und welche schon beschrieben sind. Ferner enthält er den Namen der Diskette, die ID, das Formatkennzeichen und den Beginn des Directory.

Die ersten beiden Bytes (0,1) dieses Blocks enthalten Spur und Sektor des ersten Directoryblocks; normalerweise »18,1« (siehe auch Tabelle 2).

Byte 2 enthält das Formatkennzeichen (hier 65, beziehungsweise »A«), Zur Erklärung: Commodore stellt ja verschiedene Laufwerke her, zum Beispiel 1541, 3040, 8050, 8250... Diese Laufwerke unterscheiden sich fast alle im Aufzeichnungsformat, das heißt Anzahl und Verteilung der Spuren und Sektoren; so hat die CBM 8050 77 Spuren mit bis zu 29 Sektoren, was deren höhere Speicherkapazität zur Folge hat. Solche Disketten können verständlicherweise von der 1541 weder gelesen noch beschrieben werden. Am Formatkennzeichen »A« erkennt die 1541 nun Disketten ihres eigenen Formats; ist dieses nicht identisch, so beschwert sich die Floppy mit einer Fehlermeldung. Eine Ausnahme dieser Regel bildet die Lesekompatibilität, die besagt, daß eine »fremde« Diskette zwar gelesen, aber nicht beschrieben werden kann (zum Beispiel 3040 auf 1541).

Byte 3 steht generell auf Null, da es bei der 1541 keine Funktion erfüllt.

Die Bytes 4 bis 143 enthalten nun die eigentliche BAM, deren Format ein wenig kompliziert ist: Für jede Spur sind 4 Bytes reserviert, wobei das jeweils erste Byte die Anzahl der noch freien Blöcke auf dieser Spur angibt. Die folgenden drei Bytes müssen wir als eine Gesamtheit von 24 Bits betrachten, wobei jedes gesetzte Bit einen freien Block signalisiert; siehe auch Tabelle 3.

Um auch die folgenden Seiten des Blocks zu betrachten, drücken Sie zum Vorwärtsblättern Fl; die weitere Bedienung ist analog zur oben beschriebenen. Rückwärtsblättern ist durch Drücken von F2 möglich.

Fahren Sie nun bis zum Byte 144 vor und sehen Sie sich die Seite an.

Die Bytes 144 bis 161 enthalten den Namen der Diskette, der beim Formatieren festgelegt wird. Direkt im Anschluß daran folgen die Bytes 162,163, die die ID im ASCII-Code beinhalten, gefolgt von einem »Shift Space«. An der ID erkennt die Floppy, ob die Diskette gewechselt wurde; deshalb sollte jede Diskette eine andere ID haben.

Byte 165 und 166 enthalten DOS-Version und Formatkennzeichen, hier normalerweise »2A«, wiederum gefolgt von einem »Shift Space«.

Die Bytes 171 bis 255 haben normalerweise keine Bedeutung und können unterschiedlich gefüllt sein.

## Wie sieht das Inhaltsverzeichnis aus?

Auf unserer Entdeckungsreise durch Spur 18 folgen wir jetzt der Angabe in den ersten beiden Bytes und laden den ersten Directoryblock (F3; 18,1). Das Format des Blocks ist der Tabelle 4 zu entnehmen. Jeder Direktoryblock enthält acht File-Einträge und den Zeiger auf den nächsten Direktoryblock (Byte 0 und 1); ist die Tracknummer des nächsten Blocks 0, so war der gelesene Directoryblock der letzte, und das zweite Byte zeigt die Anzahl der hier benutzten Bytes an. In unserem Fall stehen hier 0 und 255.

Nun zu Tabelle 5, die das Format eines Directoryeintrags darlegt: Jeder dieser Einträge besteht aus 30 Bytes, wobei das erste den Filetyp (siehe Tabelle 6), die beiden nächsten Spuren und Sektoren des ersten Fileblocks und die 16folgenden Bytes den Filenamen enthalten. Die folgenden 3 Byte werden nur bei relativen Dateien verwendet; sie werden später im einzelnen noch besprochen.

Byte 26 und 27 enthalten Track und Sektor des neuen Files, falls das alte mit »@« überschrieben wurde. Die Bytes 28,29 schließlich geben die Anzahl der belegten Blöcke dieses Files an.

## Die einzelnen Datei-Typen der Floppy

Diese bis jetzt beschriebenen Angaben werden vom Betriebssystem der Floppy, also vom DOS (englisch: Disk Operating System) verwaltet.

Beschäftigen wir uns nun mit den restlichen Blöcken auf der Diskette, die dem Anwender zur freien Verfügung stehen, denn dort werden die einzelnen Files abgespeichert, deren Aufbau uns jetzt interessiert.

### DEL-Files:

Diese Fileanzeige existiert normalerweise nicht im Directory; wird ein File gelöscht, so wird dieses nicht mehr angezeigt; das Byte des Filetyps steht dann auf 0. Durch setzen des Filetyps auf 128 (hex. $80) kann eine DEL-Anzeige jedoch erzwungen werden.

### SEQ-Files:

Dieser Filetyp dient zur Speicherung von Daten auf Diskette (im Gegensatz zur Programmspeicherung). Der Aufbau dieses Filetyps ist relativ einfach: Die ersten beiden Bytes eines Datenblocks zeigen jeweils auf den nächsten Block im File; so erfolgt eine beliebig lange Blockverkettung auf der Diskette. Da aber auch das schönste File einmal zu Ende geht, muß der letzte Block gekennzeichnet sein. Dies erfolgt, wie schon beim Directory, durch eine 0 als Spurnummer. Die Sektornummer bezeichnet jetzt die Anzahl der belegten Datenbytes dieses Blocks. Diese Art der Verkettung von Blöcken wird bei allen Filetypen vorgenommen! Die restlichen 254 Bytes jedes Blocks enthalten die Daten.

### USR-Files

USR-Files stimmen im Aufbau exakt mit den SEQ-Files überein, sie haben jedoch noch Zusatzfunktionen im DOS, auf die ein anderes Mal eingegangen werden soll.

### PRG-Files

PRG-Files stellen den häufigsten Filetyp dar. Sie dienen der Speicherung von Programmen auf der Diskette und haben nahezu den selben Aufbau wie SEQ-Files. Der einzige Unterschied besteht in den Bytes 2 und 3 des ersten Blocks, welche die Startadresse des Programms im Computer enthalten. Ist diese Adresse gleich der Adresse des Basic-Anfangs, also 2049 ($0801), so können die Programme mit »LO-AD”Name",8« geladen werden; dieser Modus ignoriert die Anfangsadresse auf Diskette und lädt die Programme generell an den Basic-Anfang (sogenanntes relatives Laden). Sollen Programme jedoch an anderen Stellen im Speicher stehen, zum Beispiel Maschinenprogramme, so muß diese angegebene Adresse als Startadresse benutzt werden; man lädt hier absolut mit »LOAD”Name”,8,1«.

### REL-Files:

Dieser Filetyp ist im Aufbau ungleich komplizierter als die eben besprochenen; es soll daher zuerst kurz auf die Arbeitsweise von REL-Files eingegangen werden. Sequentielle Files haben den Nachteil, daß sie praktisch nur aus einem Datensatz bestehen. Sucht man nun, zum Beispiel in einer Kartei, eine bestimmte Hausnummer oder einen bestimmten Namen, so muß der gesamte Datensatz durchgelesen werden, um die entsprechende Stelle zu finden. In einer relativen Datei geht man deshalb einen anderen Weg, um jede Stelle schnell auffinden zu können.

Es existiert eine beliebige Anzahl (zum Beispiel 100) von Datensätzen, wobei alle Datensätze die gleiche Länge haben müssen (maximal 254 Zeichen).

Das DOS legt jetzt einen sogenannten Side-Sektor an, der aus bis zu sechs Blöcken bestehen kann. Diese Blöcke enthalten nun die Zeiger auf sämtliche Datenblöcke, in denen die Datensätze gespeichert sind (1 Datensatz hat maximal 1 Block Länge). Auch hier sind die Datenblöcke wieder durch Zeiger in den Bytes 0 und 1 verkettet. Den Aufbau eines Side-Sektor-Blocks zeigt Tabelle 7. Zum besseren Verständnis hier ein kleines Beispiel:

Wir haben eine relative Datei mit 250 Datensätzen ä 127 Zeichen. Diese Datei benötigt also 125 Datenblöcke und zwei Side-Sektor-Blöcke. Im Directory-Eintrag finden wir jetzt die schon erwähnten zusätzlichen Bytebelegungen: Byte 19 und 20 jedes Eintrags enthalten jetzt Spur und Sektor des ersten Side-Sektor-Blocks; Byte 21 gibt die Datensatzlänge (Recordlänge) an.

Wir wollen jetzt auf den 248. Datensatz zugreifen; das DOS arbeitet nun folgendermaßen: Ein Datensatz enthält 127 Byte, das heißt, es passen zwei Datensätze in einen Block; dadurch errechnet sich der Block, auf den jetzt zugegriffen wird, aus (248-1)/2 = 123.5. (Minus 1, da immer von 0 an gezählt wird). Da ein Side-Sektor-Block nur 120 Einträge aufnehmen kann, ist der Zeiger auf den Datenblock im Side-Sektor-Block Nummer 2 zu finden. Dieser wird jetzt anhand des Verzeichnisses in Block 1 gelesen und dann auf Zeiger Nummer 3 (Bytes 22,23) zugegriffen. Wir kennen also jetzt Spur und Sektor des Blockes, in dem unser Datensatz steht; die Position des ersten Datenbyte berechnet sich jetzt aus dem Nachkommaanteil der obigen Division (0.5*254 = 127). Der Datensatz beginnt also beim 127+2 = 129ten Byte.

Der Aufbau von relativen Dateien ist also, wie schon erwähnt, ziemlich kompliziert; diese Art der Datenspeicherung hat aber einige Vorteile gegenüber der ’normalen’ mit SEQ-Files.

### Bedienungshinweise für EDDI, dem Disk-Monitor/Editor

Da unserem U-Boot auf dieser schwierigen Fahrt der Sauerstoff ausgegangen ist, wollen wir uns nun erst einmal erholen. Hier noch ein paar Anregungen zur Arbeit mit EDDI: EDDI kann nicht nur Blöcke lesen und anzeigen; Sie können auch Bytes verändern und diesen Block danach wieder abspeichern.

Dazu laden Sie den zu verändernden Block und fahren auf die Seite, die Sie interessiert; hier tippen Sie als Kommando F5, und der Editor-Modus startet. Sie können jetzt Bytes dezimal abändern, indem Sie den jeweils neuen Wert eingeben und »RETURN« drücken. Wollen Sie aus dem Eingabemodus aussteigen, so tippen Sie entweder »RETURN« und können weiterblättern ohne den Editor zu verlassen, oder Sie tippen »t RETURN«, um in den Kommando-Modus zu kommen. Nach einigem Probieren wird Ihnen EDDI sehr schnell vertraut werden; wir gehen auch in den folgenden Ausgaben noch darauf ein.

### Wichtig:

Beim Wechseln einer Diskette muß die Funktionstaste F6 getippt und nach dem Austausch eine Taste gedrückt werden, sonst reagiert die Floppy mit einer Fehlermeldung. Diese können übrigens mit »@« abgerufen werden. Das Zurückschreiben eines Blocks auf Diskette erfolgt mit F4, wobei Spur und Sektornummer angegeben werden müssen. Hier noch ein paar Vorschläge zum Ausprobieren: Ändern Sie doch einmal auf Ihrer Versuchsdiskette (!) das Formatkennzeichen (Spur 18, Sektor 0, Byte 2 auf 66 statt jetzt 65 und speichern den Block an die gleiche Stelle auf die Diskette zurück. Versuchen Sie nun einmal ein kleines Programm auf diese Diskette zu schreiben. (Die genauen Vorgänge in der Floppy werden beim nächstenmal erläutert.) Oder ändern Sie einmal die Bytes im Directory, die den Filetyp angeben, entsprechend Tabelle 6 und laden Sie es danach. Mit dem klugen Satz »Probieren geht über Studieren« verabschieden wir uns für diese Ausgabe. Nächstesmal beginnt dann ein praktischer Teil unserer Expedition, nämlich die Vorstellung des Befehlssatzes der 1541 mit vielen Beispielen und Anregungen.

(K. Schramm/B. Schneider/gk)

# Der gläserne VC 20 – Teil 2

> In der ersten Folge haben wir uns hauptsächlich mit der Basic-Verwaltung befaßt. Dabei tauchte immer wieder der Begriff Zeropage auf, mit dem wir uns heute beschäftigen wollen.

Die Zeropage — oder zu Deutsch die Seite Null — ist in Maschinensprache besonders einfach zu handhaben. Als Seite bezeichnet man im übrigen immer ein Paket von jeweils 256 Byte. So entspricht Seite 0 den Adressen 0-255, Seite 1 den Adressen 256-511 und so weiter.

Eine Zeropageadressierung, zum Beispiel LDA $42, benötigt nur zwei Byte, eine absolute Adressierung, zum Beispiel LDA $1234, hingegen drei Bytes im Speicher. Damit verbunden ist auch die Bearbeitungsgeschwindigkeit eines Maschinenprogramms. Denn die Zeropageadressierung ist schneller als die entsprechende Drei-Byte-Methode. Bei kleineren Programmen in Assembler fällt dieser Aspekt zwar nicht so sehr ins Gewicht, bei sehr umfangreichen Routinen, (wie zum Beispiel beim Basic-Interpreter) spielt die Adressierungsart jedoch eine größere Rolle.

In der Seite 0 legt der Computer also insbesondere die Daten ab, die er oft benötigt, wie zum Beispiel Vektoren, Parameter etc. Die komplette Liste der Adreßbelegung zeigt Tabelle 1.

Wir wollen es jedoch nicht nur mit der Aufstellung alleine bewenden lassen. Die interessantesten Lokationen möchte ich hier herausgreifen und besprechen. Beginnen wir also mit den ersten drei Bytes im Speicher:

## Der USR-Vektor

**Adresse 0,1,2:** Über die USR-Funktion kann der Benutzer eigene mathematische Routinen, die nicht im Basic implementiert sind, in seine Programme einbinden. Dieses Kommando ruft ein Maschinenprogramm auf, dessen Startadresse vorher in den Speicherzellen 1 und 2 abgelegt wurde. Wer sich dieses Befehls nicht bedient, hat drei Zeropagespeicherzellen zur freien Verfügung, die er für eigene Maschinenprogramme nutzen kann. Die Syntax der USR-Funktion entspricht derjenigen normaler Basic-Funktionen wie zum Beispiel FRE, POS, SIN, COS, TAN etc.: A= USR (B) oder PRINT USR (B).

Der Vorteil gegenüber dem SYS-Befehl liegt in der Möglichkeit Parameter zu übergeben. In unserem Beispiel wird der Benutzerroutine die Variable B übergeben. Der errechnete Zahlenwert kann dann seinerseits wieder einer Variablen zugewiesen werden.

Wie kann man sich in einem Maschinenprogramm die eingegebene Zahl beschaffen? Nun, alle Basic-Variablen werden im Fließkommaformat abgespeichert, eine Ausnahme bilden nur die Integer-Variablen. Dabei werden die Zahlen vom Computer nach einem bestimmten Verfahren binär verschlüsselt, so daß eine Zahl mit acht Nachkommastellen und einem Exponenten in nur fünf Bytes Platz findet.

Zwischengespeichert wird das Ergebnis in besonderen Fließkomma-Akkumulatoren (Adresse 97-104). Mit Hilfe eines Unterprogramms aus dem Basic-Interpreter kann es von dort aus abgerufen werden, wobei es in eine Integerzahl (also ein Wert zwischen 0 und 65536) umgewandelt wird.

Aufgerufen wird die Routine mit JSR $D7F7. Der 2-Byte-Wert steht dann in den Zeropagestellen $14 und $15 (Hexadezimal) zur Verfügung. Da diese Adressen vom Interpreter oft benutzt werden, ist es ratsam die Zahlen in andere Register zu übertragen (in welche, darauf kommen wir später noch zu sprechen).

Das Gegenstück zu dem eben gezeigten Unterprogramm stellt die Routine »2-Byte in Fließkomma« dar. Das Low-Byte wird in das y-Register geladen, das höherwertige Byte muß in den Akku. Dann wird die Routine mit JSR $D391 gestartet, wobei die USR-Variable (in unserem Beispiel A) die Daten erhält.

## Speicher ausgedeutet — die Basic-Zeiger

**Adresse 43 — 56:** Diese Adressen spielen, wie wir schon im ersten Teil gesehen haben, bei der Verwaltung von Basic-Programmen und -Variablen eine zentrale Rolle. Über sie erfolgt die Trennung zwischen Programm und den einzelnen Variablentypen. Auch für das Speichern und Laden von Programmen liefern sie die Basisdaten. Die einzelnen Funktionen können sie Tabelle 1 entnehmen.

Eine interessante Gebrauchsmöglichkeit ergibt sich durch die Memoryroutine. Dies ist ein kurzes Basic-Programm, welches die Aufgabe hat, den von Programmen, Variablen, Strings und Arrays belegten Speicherplatz festzustellen (Listing 1):

Wie man nach dem Starten des Programms sehen kann, erhält man die Werte, indem man die Zeiger — nachdem sie in Dezimalzahlen umgewandelt worden sind — voneinander subtrahiert. Den Speicherplatz, der durch Variablen belegt ist, erhält man beispielsweise durch Subtraktion des Hilfszeigers, »Beginn der Variablen« (45/46) von dem Zeigerpaar »Beginn der Arrays« (47/ 48).

Gerade bei stark limitiertem Speicherplatz (wie zum Beispiel in der Grundversion) kann dieses Hilfsprogramm Aufschluß über die momentane Speicherverteilung geben.

Eine weitere Verwendung ergibt sich durch geschicktes Manipulieren der Speicherzellen, so daß es möglich wird, mehrere Programme gleichzeitig um Speicher unterzubringen.

Diese Aufgabe erfüllt das recht komfortable Programm »Basic-Switch« (Listing 2); zunächst aber die Grundlagen: Die besagten Zeiger stecken, wie bereits im ersten Teil unseres Kurses beschrieben, den Adreßbereich für Basic-Programme ab. Die ersten vier Bytes aus dem Zeropagekomplex (Adresse 43 bis 46) grenzen das Programm nach oben und unten ab. Die daran folgenden Variablen sind in ihrer Ausdehung ebenfalls durch ein Zeigerpaar (Adresse 55/56) limitiert. Der Bereich jenseits dieser Markierung ist für Basic tabu. Dort ist also Platz für Maschinenprogramme oder ähnliches, denn ein Überschreiben durch Basic-Variable ist nicht möglich.

Will man nun mehrere Basic-Programme im Speicher versammeln, so muß man sie nur durch verstellen der Zeiger eindeutig voneinander trennen.

Wie in Bild 1 zu sehen ist, grenzen die Programmblöcke direkt aneinander. Unter Programmblock ist hier die Einheit von Programm und einem sich daran anschließenden Variablenbereich zu verstehen. Durch Umschalten der Zeiger wird dann immer der gewünschte Programmblock eingeblendet.

Nützlich kann diese Art der Speicheraufteilung sein, wenn man umfangreiche Programme erstellen möchte und es nötig wird, andauernd Hilfsprogramme (zum Beispiel Grafikeditor oder ähnliches) nachzuladen. Durch Basic-Switch kann hier viel Arbeit eingespart werden.

Diese Routine liegt wieder in zweierlei Form ausgedruckt vor. Zum einen als Assemblerlisting für solche, die tiefer in das Programm einsteigen möchten (Listing 3). Und zum anderen als Basic-Lader. Das Programm ist grundsätzlich auf jeder Ausbaustufe lauffähig. Sinnvoll wird es jedoch erst bei größerem Speicher. Es ist in bewährter Weise über das Befehlswort PI in den Interpreter eingebunden.

Nachdem die Routine per SYS gestartet worden ist, (der Lader übernimmt auch diese Arbeit), muß der erste Programmbereich initialisiert werden, das heißt der Benutzer nimmt die größenmäßige Einteilung des Speichers vor. Man muß sich jedoch schon im voraus darüber im klaren sein, wie lang das Programm inklusive Variablen sein soll, denn eine nachträgliche Änderung ist nicht möglich.

Die Syntax für die Initialisierung lautet: πE »Länge«. Danach steht der Speicherbereich abzüglich zwei Bytes für Basic zur Verfügung. Der erste so eingerichtete Programmblock hat die Nummer 1, der zweite 2 und so fort. Nachdem ein zweiter Programmbereich eingerichtet wurde, kann mit πS »Nummer« zwischen den Blöcken umgeschaltet werden, wobei die Routine jedoch jedesmal die Variable löscht.

Um dem Benutzer die Orientierung zu erleichtern, druckt das Maschinenprogramm nach jedem Umschalten die ersten REM-Zeilen aus. Daher ist es ratsam, jedem Programm eine Kopfzeile mit den wichtigsten Informationen zu geben.

Nach dieser etwas umfangreichen Erläuterung kehren wir nun zur Beschreibung der Zeropage zurück.

**Adresse 59,60:** Diese Speicherzellen enthalten die laufende Zeilennummer eines Basic-Programms. Sollte es im Programmlauf unterbrochen werden, hat man hier die Möglichkeit, die Zeilennummer nachzulesen.

**Adresse 63 — 66:** Mit Hilfe dieser Zeiger läßt sich ein zeilennummerngesteuertes RESTORE realisieren. Die ersten zwei Bytes enthalten die momentane Zeilennummer für die DATA-Abfrage. Dies ist sehr praktisch, denn damit kann man jederzeit feststellen, in welcher DATA-Zeile man sich befindet. Das zweite Doppelbyte bildet die Adresse für die nächste DATA-Zeile. Man hat also zwischen Zeilennummer und der absoluten Adresse einer DATA-Zeile zu unterscheiden.

Das nun folgende kurze Maschinenprogramm (Listing 4 und 5) ermöglicht ein Zeilennummern-RE-STORE. Man kann damit zwar nicht gezielt auf ein Element in einer DATA-Zeile zugreifen, aber zumindest auf eine bestimmte Zeile.

Was auch im Zusammenhang mit dem Maschinensprachkurs von Interesse sein kann, ist der Aufbau dieser kurzen Routine. Denn durch geschicktes Nutzen von Unterprogrammen aus dem ROM kann man nämlich viel Speicherplatz sparen. Aus diesem Grunde werde ich in einer späteren Folge Interpreter- und Betriebssystemunterroutinen näher beleuchten.

Das vorliegende Maschinenprogramm benötigt genau 43 Byte und liegt am Ende des verfügbaren Basic-Speichers. Die Start- und Endadresse wird vom Lader angegeben. Aufgerufen wird der Zeilenrestore mit: SYS »Startadresse«, »Zeilennumer«.

Die DATA-Zeiger werden dann auf die angegebene Zeile zurückgestellt, was sowohl im Direktmodus, als auch vom Programm aus erfolgen kann.

## Zustandsbeschreibung: Das Statusflag

**Adresse 144:** Dieses Statusflag ist auch von Basic aus über die STATUS beziehungsweise ST-Anweisung abfragbar. Es liefert das Computerstatus-Byte, dessen Inhalt aufgrund der letzten Input-Output-Operation gesetzt wurde. Bezogen auf den Kassettenport liefert es nach Bild 2 bestimmte Meldungen. Die Informationen über die geladenen Programme werden binär wiedergegeben. Die Null signalisiert ein ordnungsgemäß geladenes Programm. 32 hingegen bedeutet, daß ein Prüfsummenfehler vorliegt. Es ist aber auch möglich, daß der Computer mehrere Meldungen in dieses Byte packt, beispielsweise 52 = 32 + 16 + 4 : Hier wurde ein kurzer Block geladen, jedoch ist die Priifsumme falsch und ein fataler Ladefehler liegt vor.

An dieser Stelle ist es angebracht, sich näher mit dem Aufzeichnungsverfahren zu beschäftigen (Bild 3).

## So kommen Programme aufs Band

Jeder Abspeichervorgang beginnt mit dem Header. Dieser Kopf besteht aus dem Vorspann (das ist ein etwa acht Sekunden langer Pfeifton) und dem eigentlichen Programmkopf. Dieser enthält vier wichtige Informationen, nämlich über Programmtyp, Startadresse, Endadresse und Programmname. Diese Daten sind ebenfalls im Bandpuffer zu finden und können von dort abgerufen werden.

Das erste Byte (Adresse 828) gibt Auskunft über den Headertyp. Eine 1 zeigt an, daß es sich um ein Programm handelt, das verschoben geladen werden kann, also auch an eine andere Stelle, als die, von der aus es abgespeichert wurde. Das Gegenstück dazu ist die absolute Lademethode (Headertyp 3), die bereits in der ersten Folge meiner Abhandlung vorgestellt wurde. Gemeint ist LOAD”..”,1,1. Die Sekundäradresse 1 signalisiert dem Computer, daß er das Proramm (unabhängig von den Zeigern 43, 44) wieder in den gleichen Adreßbereich laden soll. Um Verwechslungen vorzubeugen, ist es wichtig, Headertyp und Sekundäradresse zu unterscheiden. Für den Headertyp gibt es drei Möglichkeiten:
1:	Laden mit Verschiebelader (die Anfangsadresse wird durch den Zeiger 43 und 44 bestimmt).
2:	Ein File — also Daten aus Variablen — wurde abgespeichert. Die Unterscheidung ist wichtig, denn Daten können nicht mit LOAD geladen werden.
3:	Ein Programm ist absolut zu laden.

Die nächsten vier Bytes geben die Anfangs- und Endadresse des geladenen Files an. Mit der Endadresse hat es eine besondere Bewandtnis. Sie wird nämlich nach korrektem Laden der Zeropage (Adresse 45, 46) übergeben. Bei Load Error geschieht dies nicht; PRINT FRE(0) zeigt dann die volle Bytezahl an, obwohl sich ein Programm im Speicher befindet. Man darf das Programm — das vielleicht nur einen geringfügigen Fehler hat —, dann nicht starten, weil die Variablen dieses überschreibenwürden. Abhilfe schafft in diesem Fall
POKE 45,PEEK(831):POKE 46,PEEK (832):CLR.
Die Werte werden damit von »Hand« übertragen und ein normaler Programmablauf ist in den meisten Fällen wieder möglich.

Jetzt aber wieder zurück zu Bild 3: Nachdem der Vorspann und der Programmkopf vor einem Trennzeichen (dies ist ein ganz kurzer Pieps) auf Band geschrieben worden ist, wird der Header gleich noch einmal abgespeichert.

Dies ist eine Eigenheit des Commodore-Systems, das der Datensicherheit dient. Denn nachdem der Programmkopf 1 geladen hat, vergleicht er in einem zweiten Durchgang das bisher geladene (welches sich ja schon im Speicher befindet) mit Programmkopf 2. Eine Abweichung veranlaßt den Computer eine Fehlermeldung auszugeben, in ganz schweren Fällen wird der Ladevorgang gleich ganz unterbrochen. Diese Verfahrensweise gilt nicht nur für den Programmkopf, sondern auch für Programme und Daten — sie alle werden doppelt abgespeichert.

Nachdem also der Programmkopf erkannt worden ist, zeigt der Computer den Filenamen an, und das eigentliche Programm (oder die Daten) wird geladen. Ihnen ist wiederum ein kurzer Vorspann vorangestellt. Der Endblock besteht aus Endmarkierung und einem Nachspann. Er zeigt dem VC 20 das Ende des geladenen Programms an, womit der Ladevorgang beendet ist.

Nach diesem Exkurs zum Kassettenaufzeichnungsformat nun wieder zur Zeropage.

## Die STOP-Taste mit Sonderfunktion

**Adresse 145:** Mit Hilfe dieser Speicherstelle kann man den Zustand der STOP- und der linken SHIFT-Taste abfragen:
Wert =
253:	Linke SHIFT-Taste gedrückt
254:	STOP-Taste gedrückt
255:	Keine der beiden gedrückt

Wenn man das Low-Byte des STOP-Vektors (Adresse 808) auf 114 — statt ursprünglich 112 — setzt, so ist man in der Lage, diese Taste von Basic aus abzufragen, ohne das laufende Programm anzuhalten. Ihr kann dann in der Routine eine besondere Funktion zugewiesen werden, beispielsweise Anhalten des Programmablaufs für eine bestimmte Zeit.

## Programmiert oder direkt? Das ist hier die Frage

**Adresse 157:** Dieses Flag kann nur zwei Zustände annehmen: Entweder 0 oder 128. Ist der Inhalt der Speicherstelle Null, dann arbeitet der Computer gerade ein Programm ab; bei 128 befindet er sich im Direktmodus.

Diese Zeropageadresse kann dann von Bedeutung sein, wenn man eigene Basic-Kommandos definieren will (vergleiche Teil 1).

Zum Beenden einer solchen Routine gibt es zwei Möglichkeiten: Entweder kam der Programmbefehl aus dem Direktmodus. In diesem Fall springt man in die Interpreterschleife QMP $C474) zurück, damit der Computer READY meldet. Kam das Kommando aber aus einem Basic-Programm, so muß man mit JMP $0079 in die CHRGOT-Routine zurückspringen, damit kein Bereitschaftszeichen ausgegeben wird. Mit Hilfe dieses Flags trifft man hier die Unterscheidung.

Nun wenden wir uns einem anderen Kapitel zu, der Cursorverwaltung. Über die Zeropage kann jederzeit die Cursorposition festgestelltwerden. Die Speicherstelle 211 zeigt die Spalte, 214 die Zeile, in der sich der Blinker derzeit befindet. Korrekte Werte liefern die zwei Adressen aber nur innerhalb eines Programms.

Interessanter ist die umgekehrte Verfahrensweise, nämlich das Setzen des Cursors an eine beliebige Bildschirmposition. Dazu müssen allerdings vier Adressen geändert werden. Glücklicherweise nimmt uns eine Unterroutine aus dem Betriebssystem diese Arbeit ab.

## Gewußt wo — der Cursor

In Maschinensprache wird das X-Register mit dem Zeilenwert, das Y-Register mit dem Spaltenwert geladen. Danach ruft man mit JSR $E50C das Unterprogramm auf.

Von Basic aus werden die zwei CPU-Register über die Adressen 781 und 782 geladen (warum das so ist, sehen wir in der nächsten Folge): POKE 781,»Zeile«: POKE 782,»Spalte«: SYS 58636.

Diese Verfahrensweise ist, wie man sieht, wesentlich komfortabler als das Hantieren mit den Steuerzeichen.

Eine andere Zeropageadresse kann uns zu einer weiteren Erleichterung verhelfen. Jeder kennt das Problem, den Cursor innerhalb von Anführungszeichen (»Gänsefüßchen«) zu bewegen. Es werden nur Steuerzeichen ausgedruckt, eine Bewegung des Zeigers findet nicht statt.

Dieses Manko läßt sich durch eine kurze Maschinenroutine beheben:
LDA #$00 ; lösche Hochkommaflag
STA $D4	; speichere es ab
JMP $FEAD ; springe in die NMI-Routine

Ausgelöst wird diese Routine durch Drücken der RESTORE-Taste. Dazu muß vorher der NMI-Vektor (eine nähere Beschreibung nächstes Mal) auf den Beginn unserer Routine gestellt werden. Da die sehr kurz ist, legen wir sie im Kassettenpuffer ab. Dort ist sie solange sicher verwahrt, bis man etwas laden oder abspeichern will. Hier zunächst der Einzeiler, der die Routine in den Bandpuffer generiert:
10 FORT=828 TO 834: READD: POKE T,D:NEXT: DATA 169, 0, 133, 212, 76, 173, 254: POKE 792, 60: POKE 793, 3

Arbeitet man im Hochkommamodus, so kann man durch Drücken der RESTORE-Taste diesen Betriebszustand abschalten, der Cursor kann dann wieder ganz normal bewegt werden.

Abschließend möchte ich noch sagen, welche Zeropageadressen ohne Komplikationen von eigenen Maschinenroutinen genutzt werden können, was im hohen Maße vom Verwendungszweck abhängt.

Nicht verändert werden dürfen solche Speicherstellen, die vom Betriebssystem gebraucht werden, also die Adressen 192 bis 244 und 160 bis 162. Hat das Maschinenprogramm keine Verbindung zu Basic, so können alle Speicherstellen zwischen 0 und 138 überschrieben werden, weil sich hier nur Basic-Parameter befinden. Eng wird der Platz für die sogenannten Utilities— also für Basic-Ergänzungen oder Hilfsprogramme. Will man Daten nur zwischenspeichem, kann man sie in den Bereich zwischen Adresse 147 bis 159 packen. Dort sind sie bis zum nächsten Lade- oder Abspeichervorgang sicher.

Dauerhaft können Daten nur am Anfang und am Ende der Zeropage abgelegt werden. Dazu gehören Adresse 0 bis 2 und 245 bis 254.

Genau diese werden aber auch von käuflichen Basic-Erweiterungen gebraucht, wodurch es zu Komplikationen kommen kann. Also Vorsicht, erst durch vorheriges Probieren testen, ob man sie benutzen darf!

Damit möchte ich für heute schließen. In der nächsten Folge werden schwerpunktmäßig der Tastaturpuffer, die Basic-Vektoren und die Kernalvektoren behandelt.

(Christoph Sauer/ev)

# Mit 4 Baud über den Balkon

> Man stelle sich vor: Der Nachbar morst mit einer Taschenlampe und Ihr Computer empfängt die Zeichen. Auf dem Bildschirm zeigt er Ihnen an, was Ihr Nachbar will. Nicht möglich? In Sindelfingen schon. Zwei Computer senden und empfangen Lichtzeichen. Datenfernübertragung von Balkon zu Balkon.

Die Nachbarn haben sich inzwischen daran gewöhnt. Immer wenn es dunkel wird, blinken auf zwei Balkons Morsezeichen auf. Dann wissen die Anwohner, daß die beiden 19jährigen Freunde Mark Schneider und Dietmar Schwuchow wieder mit ihren Computern spielen.

Die Computer-Karriere der beiden begann vor zwei Jahren: Wie viele andere auch studierten sie Handbücher, tippten Listings ab, schrieben schließlich eigene Spiele und »Nutzprogramme«. Im Frühjahr brach bei beiden der Spieltrieb durch. »Wir waren es leid, immer getrennt mit unseren Computern zu arbeiten. So kamen wir auf die Idee, sie als Kommunikationsmittel einzusetzen. Ein Kabel oder ein Akustikkoppler war uns jedoch zu langweilig«, erklärten Dietmar und Mark, die beide gerade ihr Abitur erfolgreich hinter sich gebracht haben.

Die Freunde wohnen so nah beieinander, daß sie sich vom Balkon aus zuwinken können. Daher erschien es ihnen am einfachsten, Lichtimpulse für die Datenübertragung zu nutzen. Schnell einigten sich die Elektronik-Fans über diesen Weg. »Klar wußten wir von ersten Moment an, daß wir damit keine professionelle Datenfernübertragung machen können. Was uns reizt, ist vielmehr das Basteln und Spielen. Unter diesem Vorzeichen sehen wir auch unser selbstgebautes Lichttelefon«. Für Mark und Dietmar zählt das Außergewöhnliche ihrer Sende- und Empfangseinrichtung mehr als ein tatsächlicher Nutzen.

Vier Monate brauchten sie, um die Idee in die Tat umzusetzen. Jetzt spielen sie zusammen »Schiffchen versenken« — jeder an seinem Computer. Der übernimmt mittlerweile »artig« die Ver- und Entschlüsselung der Daten sowie das »Morsen« bei der Übertragung. Vier Bit huschen in jeder Sekunde von Balkon zu Balkon und übermitteln die Züge an den jeweils anderen Computer.

Zunächst machten sich die Computer-Freaks über die Hardware her. Die beiden Computer, ein C 64 und ein Sinclair ZX Spectrum, mußten durch entsprechende Elektronik mitje einer Lampe als Sender und einem Fotowiderstand als Empfänger verbunden werden.

## Ins Innenteben des Computers wurde nicht eingegriffen

Da Mark und Dietmar nicht unbedingt in das Innenleben der Computer eingreifen wollten, nutzten sie die vorhandenen Anschlüsse. Der Tonausgang dient zum Ansteuern der Lampe: beim C 64 ist dies der Audio-Ausgang und beim ZX Spectrum der Recorderanschluß. Den Signalempfang übernimmt der jeweilige Joystick-Port.

Es war von vornherein vorgesehen, nur bei Dunkelheit zu übertragen. Trotzdem — die erste Schaltung erwies sich bei den Testläufen als zu unempfindlich. Mit einer verbesserten Elektronik war dieses Problem schnell gelöst.

Nachdem sich die beiden Freunde auf einen gemeinsamen Code geeinigt hatten, kam der große Moment: der erste richtige Übertragungsversuch. Jedem Bustaben wurde ein Fünf-Bit-Code zugeordnet. Es handelte sich um eine serielle Übermittlung, wobei die Lampe bei gesetztem Bit kurz aufblinkte. Das Senden begann mit einem Synchronisationssignal, um damit den empfangenden Computer auf den Übertragungstakt einzustellen. Da Basic für diese Zwecke nicht präzise genug arbeitet, kamen Mark und Dietmar auf die Idee, den internen Zeitzähler zu nutzen. Es funktionierte, die Daten wurden im Sekundenrhythmus übertragen — jede Sekunde ein Bit.

Ganz zufrieden waren die Elektronik-Tüfftler noch nicht. Bei mehr als 20 Zeichen gab es noch Ungenauigkeiten in der Übertragung. Außerdem war ein Baud (Bit pro Sekunde) doch ein bißchen zu langsam. Fazit: Die Software wurde umgeschrieben, so daß die Geschwindigkeit jetzt vier Baud beträgt. Auch bei größeren Datenmengen fällt nur selten ein gesendetes Bit über den Balkon — die Information kommt zuverlässig beim anderen an.

Derzeit arbeiten Mark und Dietmar an der nächsten Verbesserung ihrer Datenfernübertragung. Die Auswertung von zwischengespeicherten Daten ist momentan erst möglich, nachdem alle Bits im Computer angekommen sind. Geplant ist ein Maschinenprogramm, das die empfangenen Zeichen sofort decodiert und ausdruckt. Die Lust am Basteln hält weiter an. Das nächste Projekt — ein Plotter aus Fischer-Technik-Bauteilen — steht kurz vor der Vollendung. Aber auch den »Ernst des Lebens« will sich — zumindest Mark — mit Computern versüßen. Bereits am Gymnasium hat er Lehrer »gespielt«. Jetzt versucht er, sein Computer-Wissen in der Volkshochschule »loszuwerden«.

(M. Schneider/ D. Schwuchow/kg)

## Ablauf der Datenübertragung

Die Datenübermittlung beginnt wie es sich gehört: Der Sender »klingelt« zunächst beim Empfänger. Dazu setzt er ein Blinksignal von % Hz, das bedeutet 2 Sekunden Licht an, 2 Sekunden aus und so weiter. Der Empfänger muß seine Bereitschaft signalisieren. Kennzeichen: einmal 4 Sekunden lang aufblinken. Wird dieses sogenannte Bereitschaftssignal erkannt, schaltet der vorher blinkende Computer auf Texteingabe um und beginnt zu senden. Der »angeklingelte« Computer stellt nach dem Abschicken des Bereitschaftssignals sofort auf Empfang um. Damit ist die Richtung der Informationsübermittlung festgelegt. Sie wechselt jetzt regelmäßig ohne vorheriges »Klingeln«.

Jeder Sendevorgang beginnt mit einem Synchronisationssignal — einem Aufblinken von 3 Sekunden Dauer. Eine Sekunde später folgen die Kontrollbytes: Zweimal fünf Bit im Viertelsekundenrhythmus. Damit wird dem empfangenden Computer mitgeteilt, wieviele Zeichen die Nachricht beinhaltet und wie oft demnach die Empfangsschleife durchlaufen werden muß, bevor er decodieren darf. Das Synchronisationssignal dauert drei Sekunden, dann folgt eine Sekunde lang Sendepause. Erst jetzt wird die eigentliche Nachricht geschickt, ebenfalls im Viertelsekundentakt.

Die Übertragungsrichtung wechselt am Ende der Mitteilung automatisch und der vorherige Empfänger startet seinen Sendevorgang mit dem Synchronisationssignal.

Wie kann der Empfänger dem Sender mitteilen, daß er nur »Schrott« mitbekommt, wenn die Übertragung immer nur auf eine Richtung festgelegt ist? Dafür gibt es eine Maschinen-Code-Routine.

Falls der Empfänger während der Übertragung einen Fehler feststellt, so drückt er einfach eine Error-Taste, beim C 64 ist dies die obere linke Pfeiltaste. Damit schaltet er seinen Computer auf »Texteingabe«, was bedeutet, er kann jetzt senden und dem anderen mitteilen, daß etwas falsch angekommen ist. Das

Synchronisationssignal dauert dann — zur Unterscheidung von normaler, fehlerfreier Übermittlung — allerdings 10 Sekunden. Obwohl der andere Computer in dem Moment noch eifrig weitersendet (er hat ja keine Ahnung, daß etwas nicht richtig rüberkommt) erkennt er ein Dauersignal von mehr als 5 Sekunden. Nach der Warnung schaltet er auf Empfang, um die Fehlermeldung des anderen aufzunehmen.

## Hardwarebeschreibung

Computer und ein Teil der Elektronik sind im Zimmer untergebracht — der Rest des sogenannten Lichttelefons steckt in einem Sende- und Empfangskästchen auf dem Balkon. Bild 3 zeigt, was drinnen und was draußen steht.

Mark und Dietmar müssen bei der Datenübertragung eine Strecke von etwa 200 m überwinden. Das erfordert ein relativ intensives Lichtsignal, damit die Information überhaupt beim anderen ankommt. Eine 12V/10W-Lampe erbringt die notwendige Leistung.

Als Spannungsquelle für die Lampe dient ein ausrangierter (Rennbahn-)Trafo. Die 12V des Trafos sind außerdem mit einem Spannungsregler des Typs 7805 verbunden, der für eine konstante 5V-Spannung der zusätzlichen Hardware sorgt (Bild 1).

Die Sende- und Empfangskästchen sind mit Schirmklemmen am Balkongeländer befestigt. Nimmt man den Regenschutz — aus Pappe und aufgeklebter Aluminiumfolie — ab, so wird ein quaderförmige Holzgehäuse von 7 x 7 x 12 cm frei. In die Vorderwand wurde ein Loch für die Linse gesägt, die wiederum fest in einem Papprohr sitzt. Das Sendeelement (Lampe) und Empfangsteil, der lichtempfindliche Widerstand (LDR), müssen im Brennpunkt der Linse sein. Da diese fest eingebaut ist, wird eine genaue Einstellung nur durch Verschieben der Platine erreicht, auf die die Bauteile gelötet sind (Bild 6).

Die Kästchen auf dem Balkon sind über ein vierpoliges abgeschirmtes Kabel mit der Elektronik im Zimmer verbunden. Das Ende des Kabels bildet ein DIN-Stecker, mit der in Bild 2 dargestellten Stiftbelegung.

Das Senden funktioniert nach einem einfachen Prinzip: Beim Morsen wird für logisch »1« am Audioausgang des Computers ein Tonsignal abgegeben, das durch die Schaltung (Bild 4) verstärkt und digitalisiert wird. Als Folge davon schließt das Relais und die Lampe im Sendekästchen leuchtet auf.

Beim Empfangen (Bild 5) vergleicht der Operationsverstärker (OP3) die Signale von beiden Spannungsteilern, die durch den lichtempfindlichen Widerstand (LDR) mit dem 100 KOhm-Widerstand und dem Regler 47 KOhm gebildet werden. Dieser Verstärker ist auch für die hohe Empfindlichkeit verantwortlich. Die nachfolgende Schaltung ist für langsame Helligkeitsschwankungen unempfindlich. Lediglich bei Lichteinfall setzt sie ein Flipflop und nimmt es bei Dunkelheit zurück. Dieses Flipflop steuert das Relais für den Joystick-Eingang an. Darüber hinaus bietet es eine doppelte Kontrolle beim Empfang: sowohl auf dem Balkon beim Einstellen der Kästchen über die LED als auch im Zimmer durch den BEEP.

# Unterprogrammebibliothek: Sieger mit Maske

> In dieser Ausgabe wird zum erstenmal ein Gewinner unseres Programmierwettbewerbs »Unterprogrammbibliothek« vorgestellt. Das Programm »Maske« bietet eine komfortable Routine zur Eingabe und Programmierung von Bildschirmmasken.

Die Anzahl der eingegangenen Unterprogramme und deren unterschiedliche Thematik machte eine Bewertung natürlich nicht einfach. Wenn Ihr Programm diesmal nicht vorgestellt wird, so bedeutet das keine Abqualifikation. Damit Sie als Leser aber auch in den Genuß umfangreicherer Unterprogramme kommen, werden wir gelegentlich zusätzlich zu unserem »Unterprogramm des Monats« andere interessante Einsendungen veröffentlichen.

Der Autor dieses Programms ist ein waschechter Berliner. Jacques Effenberg ist 35 Jahre alt und von Beruf Maschinenschlosser. Im März 1983 kaufte er sich einen C 64. Nachdem er sich ein knappes Jahr mit Basic versuchte, stieg er auf Assemblerprogrammierung um, weil er mit Maschinensprache viele Probleme besser lösen konnte. Zum Programm selbst:

Das Programm Maske hat die Aufgabe, die Programmierung von Bildschirmmasken zu vereinfachen. Der erste Befehl erstellt horizontale und vertikale Linien. Die an den Schnittstellen benötigten Zeichen werden vom Programm ermittelt und eingesetzt. Der zweite Befehl löscht vom Benutzer definierte Felder in der Bildschirmmaske. Der dritte Befehl dient dazu, Text an bestimmte Stellen des Bildschirms zu drucken. Das Maschinenprogramm liegt im Speicherbereich von 49152 bis 50539. Eigene Fehlermeldungen und das Listen der Basic-Zeile in der der Fehler vorkommt, erleichtern dem Benutzer die Arbeit.

## Parameterübergabe, Fehlermeldungen

### 1)	Linien zeichnen

Der Befehl für Linien zeichnen wird in Basic wie folgt programmiert:
SYS 49152, Richtung, Zeile, Spalte, Länge, Farbe
1a) Richtung
Für eine horizontale Linie geben Sie eine 0 und für eine vertikale Linie eine 1 ein. Bei einer Zahl größer als 1 meldet sich der Computer mit der Fehlermeldung:

Richtung Wert zu groß (0 bis 1) in:
und listet die Zeile Ihres Basic-Programms.
1b) Zeile
Die Zeilenangabe liegt im Bereich von 1 bis 25. Bei Werten von kleiner als 1 oder größer als 25 lautet die Fehlermeldung:

Zeilenwert kleiner 1 oder größer 25 in:
und die Basic-Zeile wird gelistet.

1c) Spalte

Die Werte für die Spaltenangabe liegen im Bereich von 1 bis 40 und Werte kleiner als 1 oder größer als 40 ergeben die Fehlermeldung:

Spaltenwert kleiner 1 oder größer 40 in:
sowie eine Anzeige der Zeile.
1d) Die Länge kann im Bereich von 1 bis 40 für horziontale Linien und für vertikale Linien im Bereich von 1 bis 25 liegen. Werte, die nicht in diesem Zahlenbereich liegen, führen zu der Fehlermeldung:

Länge Linie zu klein oder zu groß in:
Wollen Sie zum Beispiel eine horizontale Linie zeichnen, mit dem Spaltenwert 20 und geben als Länge einen Wert von 22 an, so führt das zur Meldung:

Spalte + Länge Linie größer 40 in:
da der Bereich von 40 möglichen Spalten überschritten wird.

Eine vertikale Linie zum Beispiel ab Zeile 10 und mit der Länge 17 würde die Fehlermeldung:

Zeile + Länge Linie größer 25 in:
ergeben, da das Ergebnis von 10 + 17 den möglichen Bereich von 25 Zeilen überschreitet. In allen drei Beispielen erfolgt ein LISTen der Basic-Zeile.
1e) Farbe
Für die Farbwerte würden Zahlen im Bereich von 0 bis 15 in Frage kommen. Werte größer als 15 führen zu keiner Fehlermeldung.

### 2)	Felder löschen

Um bestimmte Bereiche auf dem Bildschirm zu löschen, müssen Sie den Befehl:

SYS50083, abZeile, bisZeile, Spalte, Länge eingeben.
2a) ab Zeile, bis Zeile

Wollen Sie zum Beispiel die ersten fünf Zeilen auf Ihrem Bildschirm komplett löschen, müßte der Befehl wie folgt aussehen:
SYS 50083,1,5,1,40
also ab Zeile 1 bis Zeile 5, ab Spalte 1 und 40 Zeichen lang. Ist nur eine Zeile zu löschen, dann ist der Wert ab Zeile gleich dem Wert bis Zeile.

Geben Sie zum Beispiel für ab Zeile 10 und bis Zeile 2 ein, so erfolgt die Fehlermeldung:

Zeile 1 ist größer als Zeile 2 in:
sowie ein Listen der Basic-Zeile.
2b) Zahlenbereich

Für die Bereichsangabe gelten die Werte aus Absatz 1, sowie bei Überschreitungen auch die Fehlermeldungen.

### 3)	Print

Für die gezielte Ausgabe eines Textes auf dem Bildschirm lautet der Befehl:

SYS 50242, Zeile, Spalte, Farbe, ”Text”
3a) Zeile, Spalte, Farbe

Alle unter Absatz 1 beschriebenen Zahlenbereiche für die Angabe bei Zeile, Spalte, Farbe gelten auch hier. Ebenso treffen auch die dort erwähnten Fehlermeldungen bei einer Bereichsüberschreitung zu.
3b) "Text”

Hier kann all das stehen, was Sie auf dem Bildschirm ausgeben wollen.
Ein Beispiel:
SYS 50242,1,20,2,”Probe”
es wird in diesem Fall in der ersten Zeile ab Spalte 20 das Wort »Probe« in roter Farbe auf dem Bildschirm ausgegeben. Sie könnten auch vorher im Programm festlegen, daß D$ = ’’Probe” ist, schreiben dann SYS 50242,1,20,2, D$ und erhalten das gleiche Ergebnis.

Hatten Sie vor diesem Befehl eine grüne Cursorfarbe, dann wird, nach dem Ausgeben des Wortes »Probe« in roter Farbe, Ihre Cursorfarbe wieder grün sein.

### 4)	Erklärungen zum DATA-Programm

4a) Programmablauf

In Zeile 1000 werden nach der Dimensionierung der Variablen P die 116 Prüfsummen für das Maschinenprogramm in P(I) eingelesen. Jede Prüfsumme ist das Ergebnis einer Addition von zwölf DATA-Werten. Die Variable SP addiert die Prüfsummen. Zeile 1130 überprüft die Gesamtsumme und gibt bei einer Differenz die Meldung »Fehler Prüfsumme« aus. Das Programm wird beendet.

Das Maschinenprogramm wird ab Zeile 1140 eingelesen und gespeichert. Die Variablen S und SI addieren und ZI zählt die DATA-Werte.

Ist ZI = 12 wird in Zeile 1160 die Variable S mit der jeweiligen Prüfsumme P (PI) verglichen. Ist S ungleich P (PI), verzweigt das Programm zur Zeile 1210.

In Zeile 1190 wird SI mit der Gesamtsumme aller DATAs verglichen. Bei einer Differenz ergibt sich ein Fehler in der letzten DATA-Reihe. Es kommt zur Ausgabe der Meldung »Fehler letzte Reihe DATA«.

Sind alle Werte richtig eingegeben, wird in Zeile 1200 nach der Meldung »OK« das Programm beendet. Beim Einlesen von DATA-Zeilen notiert sich der Interpreter die abzuarbeitende Zeilennummer in den Speicherstellen 63 und 64 der Zeropage. War in Zeile 1160 die Summe von 12 DATA-Werten und die Prüfsumme P (PI) ungleich, so wird in Zeile 1210 die Zeilennummer in der der Fehler auftrat in Z$ festgehalten.

Dann wird der Bildschirm gelöscht und in Zeile 1240 die Meldung »Fehler in Zeile« Z$ ausgegeben. In den Zeilen 1250 bis 1260 wird der Befehl »LIST« und die Zeilennummer in den Tastaturpuffer gePOKEt. Dazu kommt in Zeile 1270 noch der Befehl »RETURN« und in der Speicherstelle 198 wird dem Interpreter mitgeteilt, wieviel Stellen im Tastaturpuffer belegt sind.

Nach dem Befehl »END« in Zeile 1280 und der Ausgabe von »READY« befindet sich der Computer in einer Warteschleife, in der auch die Speicherstelle 198 abgefragt wird. Da der Wert in 198 größer als 0 ist, arbeitet der Interpreter jetzt den Tastaturpuffer in folgender Reihenfolge (zum Beispiel bei Fehler in Zeile 1290) ab:
Speicher 631 Wert 76 = L
Speicher 632 Wert 105 = i (L + Shift i = Kurzzeichen für LIST)
Speicher 633 Wert 49 = 1
Speicher 634 Wert 50 = 2
Speicher 635 Wert 57 = 9
Speicher 636 Wert 48 = 0
Speicher 637 Wert 13 = Return
also LIST 1290 und die Zeile mit dem Fehler wird gelistet.
4b) Programmverbindung

Haben Sie alle DATA-Werte richtig eingegeben und der Computer hat sich nach einiger Zeit mit »OK« wieder gemeldet, so können Sie jetzt die Zeilen 1000 bis 1280 löschen. Dann geben Sie die folgende Zeile ein: 1280 FOR I = 49152 TO 50539:READ X : POKE I, X:NEXT:NEW
und speichern das Programm ab.

Wenn Sie das Programm in Zukunft benutzen, dann wird nach dem Einlesen des Maschinenprogramms in den Speicherbereich 49152 bis 50539 das DATA-Programm gelöscht, und Sie haben den ganzen Basic-Speicher für Ihr eigenes Programm zur Verfügung.

Sind Sie Besitzer eines Diskettenlaufwerkes, dann können Sie in der Zeile 1280 statt »NEW« den Befehl LOAD ”...”,8 schreiben, und das DATA-Programm lädt nach dem Einlesen der DATA-Zeilen Ihr eigenes Programm gleich nach.

Zwischen ”...” muß der Name Ihres Programms stehen. Wenn Sie diese Variante wählen, dann muß aber die erste Zeile Ihres eigenen Programms wie folgt aussehen:
10 POKE 45, PEEK (174): POKE 46, PEEK (175): CLR
Durch diese Lösung wird das DATA-Programm auch gelöscht und Ihr Programm wird gleich nachgeladen und startet sich selbst.

(Jacques Effenberg/gk)

# 64'er Disk-Ecke

> Wie die Überschrift schon andeutet, hat sich eine Änderung vollzogen. Das »Ka« für Kassette ist weggefallen. Dafür hat sich »Di« zu Disk gemausert. Es ist uns also endlich gelungen, die Programme auch auf Diskette anzubieten. Wir mußten allerdings eine Entscheidung fällen: Kassette oder Diskette, beides ging nicht. Die Diskette ist aufgrund ihrer Verbreitung ausgewählt worden. Dafür sind jetzt alle Programme einer Ausgabe (VC 20 und C 64) auf einer Diskette erhältlich.

Eines hat sich aber nicht geändert: der Preis. Die Diskette für eine Ausgabe kostet demnach 29,90 Mark. Sie werden bei einigen Disketten bestimmte Programme vermissen. Deren Autoren konnten sich nicht entschließen, ihr Programm im Rahmen des Leserservice für eine Verbreitung auf Datenträger freizugeben. Bei den Ausgaben 4, 5 und 6 können noch Kassetten (VC ...) bestellt werden. Auf kurze Programme wurde aus Gründen der Übersichtlichkeit verzichtet. Nun noch einige technische Details. Zu den Programmen sind immer die Seitenzahlen angegeben, unter der Sie die Beschreibungen in der entsprechenden Ausgabe finden können. Der Diskette liegen also, keinerlei Informationen bei. Lesen Sie daher aufmerksam die Anleitung (ob SYS-Befehle nötig sind, in welcher Reihenfolge geladen werden muß, eventuelle Sprach- oder Speichererweiterungen und ähnliches mehr) in dem jeweiligen Artikel nach. Aus Aktualitätsgründen wird jeweils die abgedruckte Version angeboten. Eventuelle systematische Fehler, die sich noch im Programm befinden können, müssen von Ihnen selbst, nach Studium des Druckfehlerteufelchens, korrigiert werden.

## Ausgabe 10/84

Bestellnummer CB 019

### Commodore 64

Finanzmathematik (AdM)
Hypra-Load (LdM)
Hardcopy
Compact 2
Hardcopy MPS 801
Hardcopy VC 1526 neu
Hardcopy Gemini-10X
Hardcopy FX-80
Hardcopy VC 1520 farbig
Apocalypse now
Supercopy
Disk-Dump
Diskettenorganisation
User-Port-Tastatur
UP-Maske

### VC20

Epedemic
Video-Vorspann

## Ausgabe 9/84

Bestellnummer CB 014

### Commodore 64

Indexsequentielle Adreßdatei, S. 54 — Spring Vogel (LdM), S. 68 — Orgel/Synthesizer (AdM), S. 70 — Sprite Aid +, S. 89 — Screen Change, S. 94 — List-Stop, S. 97 — Renew, Datawandler, S. 102 — Synthetische suchen, S. 104 — Geregelter Zahlungsverkehr, S. 164

### VC20

Schiebung (GV>), S. 77 — Deuzei (8K >), S. 79 — Hardcopy 1520 (GV>), S. 87 - RS232-Interface (GV>), S. 100 — Datawandler (GV>), S. 102

## Ausgabe 8/84

Bestellummer CB 013

### Commodore 64

Castle of Doom, S. 66 — Pac-Boy, S. 89 — Kopplung, S. 73 — User-Port-Display, S. 97 — RS232-Test, S. 77 - View BAM, S. 99 - Görlitz Hardcopy, S. 83 — Milchvieh, S. 156

### VC20

Kudiplo (3K), S. 86 — Print at Restore n (GV), S. 101

## Ausgabe 7/84

Bestellnummer CB 017

### Commodore 64

Terminalprogramm, S. 24 — Softwarekatalog, S. 72 — Russvok (SB), S. 76 - Crown No. 1, S. 80 -Space Invaders, S. 81 — 1520 Hardcopy, S. 108 — Centronics Interface, S. 110 — Kurvendiskussion, S. 116 — Copy Rel. Files, S. 132 — Autostart, S. 138 — Strubs (OP u. QP), S. 154

### VC20

Rätsel, S. 122

## Ausgabe 6/84

### Commodore 64

Bestellnummer CB 018

Lehrerkalender, S. 64 — Morsetrainer, S. 72 — Supervoc, S. 69 — Grafische Darst. (SB), S. 82 — Hot Wheels, S. 92

### VC 20

Bestellnummer VC 008

Movemaster (8K), S. 78 — Ghost Manor (GV), S.104 — Logic Disass. (3K>), S. 108 — Underground (LdM 16K), S. 120

## Ausgabe 5/84

### Commodore 64

Bestellnummer CB 016

Adreß- & Telefonregister, S. 64 — Fahrsimulator, S. 82 — Schatzsucher (LdM), S. 90

### VC 20

Bestellnummer VC 007

Relative Datei (8K), S. 69 — Schmatzer (GV) S. 76 — 3D-Grafik (8K), S. 78 - Rallye (28K), S. 128

## Ausgabe 4/84

### Commodore 64

Bestellnummer CB 015

Drawline + Demos, S. 65 — Sprite Move, S. 70 — Invaders (SB), S. 74 — Caesar, S. 78 — Disk-Copy, S. 92 - Merge, S. 94

### VC 20

Bestellnummer VC 006

Elektr. Notiz. (16K), S. 50 — Rennfahrer (GV), S. 86 - Erste Hilfe (GV >), S. 88 - Disk-Copy (3K >), S. 92

Bedeutung der Abkürzungen
*LdM = Listing des Monats
*AdM = Anwendung des Monats
*SB = Simons Basic
*GV = Grundversion
*GV> = alle Speicherversionen können verwendet werden (einschließlich GV)
*3K = 3-KByte-Speichererweiterung wird benötigt
*8K> = Speichererweiterunggrößer als 8 KByte wird benötigt.

# Vorschau

In der nächsten Ausgabe vom 19. Oktober lesen Sie:

## Listing des Monats

Das Bestechende an dieser Grafik-Spracherweiterung ist nicht nur die einfache Anwendung durch neue Befehle, sondern auch die hohe Geschwindigkeit, mit der gezeichnet wird. Die neuen Grafik-Befehle lassen sich problemlos in Basic-Programme einbauen. Auch das Zeichnen mit Joystick oder Light-Pen wird unterstützt.

## Drucker-Test

Wiederum stellen wir Ihnen einige Drucker vor, die sowohl für den C 64-Besitzer als auch für den VC 20-Besitzer interessant sein dürften. Die Marktübersicht (Teil 2) bietet weitere wichtige Hilfen für die Kaufentscheidung.

## Einführung in Comal

Eine neue Programmiersprache für den C 64 ist auf ihrem Siegeszug. Comal vereint die Vorzüge von Basic, Pascal und Logo und erfreut sich dadurch wachsender Beliebtheit. Wir zeigen, wie man mit Comal programmiert.

## Anwendung des Monats

Schachspieler wollen oft bereits gespielte Partien von bedeutenden Turnieren nachvollziehen. Das Programm Schachmeister bietet Ihnen eine optisch ansprechende Lösung.

## Test Monitore

Was bringt ein Farbmonitor gegenüber einem Fernseher mit Video-Eingang? Ist wirklich jeder Monitor gleichermaßen für die Textverarbeitung geeignet? Wir haben eine Reihe von Geräten für Sie getestet und ihre Stärken und Schwächen festgestellt. In einer Marktübersicht informieren wir über Monitore für den VC 20 und C 64.

## Das Super-Laufwerk

Nun gibt es das MSD Super Disk Drive für den C 64 endlich auch in Deutschland. Diese Floppy stellt eigentlich den Traum für jeden C 64-Besitzer dar. Doppellaufwerk, serieller und paralleler Anschluß, qualitativ hochwertige Mechanik und schnellere Übertragung (mit dem IEC-Bus) der Daten. Wir haben die Floppy unter den Aspekten der Kompatibilität, der Laufzeiten und der Zuverlässigkeit getestet.

## Software-Tests

VizaStar wird als ideale Ergänzung zu dem Textverarbeitungsprogramm VizaWrite angeboten. Was läßt sich mit diesem Tabellen- und Datenverwaltungsprogramm in Verbindung mit dem Textprogramm alles anfangen? Wie steht es im Vergleich mit den Einzellösungen da? Hat die Konzeption eines integrierten Software-Pakets auf dem C 64 eine Zukunft? Ist es besser als die im Plus/4 eingebaute Software? Wir geben eine Antwort auf all diese Fragen.

## Der beste Einzeiler

Die Wettbewerbe bringen eine ganze Reihe guter Ideen ans Licht. Wir veröffentlichen die bisher besten Einzeiler. Lassen Sie sich überraschen, was man alles in einer Zeile realisieren kann. Die Unterprogramm-Bibliothek wird ergänzt durch eine sehr komfortable Sortierroutine in Maschinensprache. Außerdem stellen wir den Programmierern eine weitere, sehr anspruchsvolle Aufgabe.

## Listings

— Eine Grafik-Befehlserweiterung — Komfortabler Synthesizer
— SMON — ein komplettes Assemblerpaket mit Monitor (Teil 1)
— Vier gewinnt in drei Dimensionen — Verbesserung von Simons Basic — Einfaches Laden von Programmen
— Betriebssystemerweiterung — Pseudo-Sprites und Sprites ohne Esoterik
— 3D-Körper aus allen Richtungen betrachten
— und wieder viele Tips und Tricks für den VC 20 und C 64

