# Künstlich intelligent?

»Eliza«, die wir als Anregung für unseren Programmierwettbewerb (das Ergebnis finden Sie in dieser Ausgabe) genommen haben, ist einer der klassischen Versuche auf dem Gebiet der Künstlichen Intelligenz. Das Programm und vor allem die Reaktion des Publikums zeigten schon vor Jahren, daß der Computer für intelligent gehalten wird, weil der Mensch in die programmierten Fragen und Antworten Intelligenz, das heißt einen bestimmten Sinn hineininterpretiert. Derartige Effekte nutzte man aber schon in der An-tike beim Orakel von Delphi ganz ohne Rechner...

Ein wesentliches Problem bei den Forschungen auf dem Gebiet der Künstlichen Intelligenz ist die Interpretation der natürlichen Sprache. Unsere normale Ausdrucksweise ist für einen Computer viel zu redundant (wir machen zu viele Worte) und viel zu ungenau beziehungsweise unvollständig (wir setzen zu viel als selbstverständlich bekannt voraus).

Ob es um automatische Übersetzung, akustische Spracheingabe oder Programmieren und Datenbankabfrage in natürlicher Sprache geht: Die Probleme häufen sich. Bis ein Computer richtig Deutsch versteht (Englisch kann er auch nicht besser - GET hin, PRINT her), wird noch einige Zeit vergehen. Vorläufig ist man keineswegs sicher, ob ein Computer den Bibelspruch »Der Geist ist willig, aber das Fleisch ist schwach« mit »Es fehlt nicht an guten Absichten, sondern an der Realisierung« oder mit »Der Whisky war in Ordnung, aber das Steak ließ zu wünschen übrig« übersetzen würde. Woraus Sie ersehen, daß Künstliche Intelligenz nicht nur ein Forschungsprojekt mit Tücken, sondern auch ein durchaus amüsantes Denksportthema ist.

Michael Pauly, Chefredakteur

# Die neue Abmahnmasche: Vorsicht bei Programmangeboten

> Die neueste Abmahn-Masche, mit der unterbeschäftigte Rechtsanwälte hart am Rande der Legalität zu Geld zu kommen suchen, trifft die Programmierer

So bekam kürzlich ein Leser, der eine selbstgeschriebene Grafik-Routine für 30 Mark in einer Kleinanzeige angeboten hatte, von einem Rechtsanwalt eine Abmahnung samt Gebührenforderung über 501,60 Mark (willkürlich vom Anwalt festgesetzter »Streitwert«: 20000 Mark). Begründung: In der Anzeige fehle der Hinweis, daß es sich um einen gewerblichen Anbieter handle — das verstoße aber gegen das Gesetz gegen unlauteren Wettbewerb.

Das wäre in Ordnung, wenn es sich bei dem Anbieter um eine Firma handeln würde — oder wenn der Softwareverkauf gewerblich betrieben würde. Nun gibt es aber viele Computerbenutzer, die zwar bereit (und vielleicht sogar interessiert sind), das eine oder andere selbstgeschriebene Programm an Interessenten abzugeben — die aber daraus keineswegs ein Geschäft oder gar Gewerbe machen wollen. Um Ärger mit gewerblich tätigen Firmen, Rechtsanwälten und vor allem dem Finanzamt zu vermeiden, sollten Sie entweder nur tauschen (Tausch zwischen Privatleuten im Rahmen ihres Hobbys ist keine gewerbliche Tätigkeit) oder darauf achten, daß Sie lediglich einen Kostenersatz berechnen. Es ist zweckmäßig, den Betrag zu spezifizieren — zum Beispiel 1,30 Mark Porto, 10 Fotokopien à 0,50 Mark, eine Diskette à 4,85 Mark und so weiter.

Wenn Sie einen — und sei er auch nur bescheiden — Gewinn erzielen wollen, müssen Sie auf schriftlichen Unterlagen in Inseraten und so weiter durch eine geeignete Angabe wie »Firma«, »Programmierbüro«, »Softwarevertrieb« oder ähnliches erkennen lassen, daß Sie sich gewerblich betätigen. Sie müssen außerdem das Gewerbe bei der Gemeinde beziehungsweise Stadt anmelden und ein Minimum an Buchführung machen, damit Sie dem Finanzamt jederzeit Umsätze, Kosten und Gewinn nachweisen können. In den meisten Fällen werden Umsatz und Ertrag so gering sein, daß ohnehin keine ernstzunehmende Menge Steuern zu bezahlen ist.

Sollten Sie als Privatmann eine Abmahnung der oben erwähnten Art bekommen, dann schreiben Sie umgehend zurück, daß Sie ihren Computer nur privat benutzen, die Programme für private Zwecke geschrieben haben und durch das Anbieten ihrer selbstgeschriebenen Progamme Kontakt zu anderen Computerbenutzern zum Zweck des Erfahrungs- und Programmaustausches suchen. Ihre selbstgeschriebenen Programme gäben Sie entweder im Tausch oder gegen Ersatz der durch Erstellen und Versenden der Kopie entstehenden Kosten ab. Falls das zutrifft, brauchen Sie auch keine Unterwerfungserklärung abzugeben und keine Gebühren zu zahlen.

(py)

TODO ASIDE

## Abmahnschwindler nie gefaßt

Mit einem Abmahnschwindel besonderer Art tat sich im vergangenen Jahr eine »R + S Computerorganisation« in Berlin hervor: Sie trat als angeblicher Wettbewerber auf, verlangte von zahlreichen Anbietern von Raubkopien die Abgabe einer Unterlassungserklärung sowie die Bezahlung einer Gebührenrechnung in Höhe von mehreren hundert Mark. Der Rechnungsbetrag sollte in bar zusammen mit der Unterlassungserklärung an eine Postfachadresse in Berlin geschickt werden. Die Staatsanwaltschaft schaltete sich sehr schnell ein und stellte fest, daß das angegebene Postfach in der vorgegaukelten Form nicht existierte. Es handelte sich dabei, wie die Justizpressestelle jetzt auf Anfrage mitteilte, um die Nummer einer Postlagerkarte bei einem Berliner Postamt, die tatsächlich ausgegeben worden war »ohne daß die Personalien des Empfängers notiert worden wären oder hätten notiert werden müssen«. Bei Beobachtungen in dem Postamt stellte die Kriminalpolizei im vergangenen Jahr zwar einen 15jährigen Jungen, der mit der Postlagerkarte und einer Vollmacht der Schwindelfirma die Post abholen wollte. Als die Polizisten ihn nach dem Auftraggeber fragten, deutete er auf einen etwa hundert Meter vom Postamt entfernt stehenden Mann, der daraufhin zusammen mit einem anderen, mit einem Auto die Flucht ergriff. Da der Junge nach Feststellungen der Polizei als Mittäter ausscheidet und die beiden Flüchtigen nicht identifiziert werden konnten, wurde das Verfahren gegen R + S wohl oder übel eingestellt.

(py)

# Aktuell

## Software fast umsonst

Der »Folklife Terminal Club« in den USA hat seine Software-Palette PET, CBM, C 64, VC 20, C 16 und Plus/4 auf über 6000 Programme vergrößert und auch für Nichtmitglieder zugänglich gemacht. Es handelt sich dabei um »Public Domain Software«, die von den Autoren umsonst zur Verfügung gestellt wird. Für die Diskette, den Kopieraufwand und die Versandkosten werden allerdings 15 Dollar berechnet. Als erstes sollte man sich die »Catalog Disk« für seinen Computertyp bestellen. Sie enthält alle Programme, die derzeit angeboten werden. Die Bezahlung sollte über einen Bankscheck, den auch US-Banken akzeptieren oder über Auslandspostanweisungen erfolgen.

Info: Folklife Terminal Club, Box 555-SB, Coop City Station, Bronx, N.Y. 10475 USA

## Vorsicht »B-Platine«

Für das europäische Ausland werden Commodore 64 mit einem »B-Board« vertrieben. Computer mit dieser Board-Version sind weder VDE- noch FTZ-zugelassen. In Deutschland darf nur die zugelassene A-Version gekauft werden. Wegen grundsätzlicher Unterschiede zwischen den einzelnen Board-Versionen können diese Computer nicht den postalischen Bedingungen entsprechend umgerüstet werden. Einige Händler scheinen sich mit diesen B-Versionen aus dem Ausland eingedeckt zu haben. Sollte Ihr C 64 den Fernsehempfang des Nachbarn stören, haben Sie vielleicht einen B-Computer erwischt, der möglicherweise zu Schwierigkeiten mit den zuständigen Behörden (Post) führen kann. Wollen Sie sich einen C 64 kaufen, so vergewissern Sie sich bitte vorher, ob dieser die A-Platine besitzt.

## Schneller mit Modul

Roreger bietet die Schnelllade- und Schnellspeicher-Systeme TurboROM-Disksystem und Tapesystem auf Modul für den Expansion-Port des C 64 an. Dadurch soll kein Eingriff mehr in den Computer oder das Floppy-Laufwerk erforderlich sein. Außerdem soll das System voll kompatibel zu Steckplatzerweiterungen sein. Das Tape-System arbeitet auch mit Simons Basic und Files, die mit Turbo-Tape oder Fast-Tape aufgenommen wurden zusammen. LOAD, SAVE und VERIFY sollen bis zu 10 mal schneller, beim Disk-System bis zu 7 mal schneller (abspeichern 3,5 mal) sein.

Info: Dipl.-Ing. K. Roreger, Liebigstr. 28, 4780 Lippstadt

## Floppy 1541 jetzt für PC-1500

Den Anschluß von bis zu drei 1541-Laufwerken an den Sharp PC-1500 soll das Floppy-Inter-face von Tramsoft ermöglichen. Alle Möglichkeiten des C-1541-DOS sollen dabei erhalten bleiben. Ausgerüstet mit zusätzlicher Software, kann am gleichen Interface auch ein Drucker oder Plotter mit Centronics-Eingang betrieben werden.

Info: SRS Ing. Rudolf W. Fankhauser, Postfach 1115, 7893 Jestetten, Tel. (0 4153) 6 25 93

## Software für Kleinbetriebe

Um aus dem C 64 ein leistungsfähiges Arbeitsmittel für Kleinbetriebe zu machen, hat SM Software eine eigene Software-Serie mit dem Namen »Small Business« entwickelt. Diese kaufmännisch orientierte Software-Serie beinhaltet die Programmbausteine Textverarbeitung, Lohn-/Ge-haltsabrechnung, Lagerverwaltung, Adreßverwaltung sowie ein reines Fakturierungsprogramm. Alle Programme zusammen sollen zirka 1000 Mark inklusive Mehrwertsteuer kosten.

Info: SM Software AG, Small Business Service, Scherbaumstr. 33, 8000 München 83, Tel. (089)6371211

## Ferien mit dem Computer

Für Einsteiger, Fortgeschrittene und Computerfüchse bietet sich durch fun & future in den Sommerferien die Möglichkeit, zwei Wochen Computerurlaub in Bad Harzburg zu verbringen. Das Angebot richtet sich an 11-bis 19jährige, die folgende Kurse belegen können: Logo, Basic I bis III, Spiele, Maschinensprache und Pascal. Der täglich 4stündige Computerunterricht ist kombiniert mit einem vielfältigen Freizeitangebot.

Info: fun & future Schopka KG, Mittelstr. 86, 2000 Norderstedt, Tel. (0 40) 5 24 3176

## Data-Com Plus — Datasette leicht justiert

Nie mehr LOAD ERROR! Damit dieser Traum zur Wirklichkeit wird, muß man eigentlich nur den Tonkopf der Datasette neu justieren. Dabei soll das Gerät Data-Com Plus, das zusammen mit einer Einmeßkassette zum Preis von 39 Mark erhältlich ist, helfen.

Info: Computer Store, Herzebrockerstr. 46, 4830 Gütersloh 1, Tel. (0 52 41) 120 80

## Jetzt auch in Deutschland ein Strategiespiele-Versand

Für alle, die sich für Strategiespiele begeistern, wurde jetzt ein Spezialversand für diese Spielgattung gegründet. Die Firma Thomas Müller Computer-Service hat sich auf den Vertrieb von SSI- und Avalon-Hill-Strate-gie-Software spezialisiert. Sie besitzt außerdem die Rechte, deutsche Anleitungen für SSI-Spiele herzustellen. Raubkopierer können dort allerdings nichts holen: Die deutschen Anleitungen werden nur zusammen mit der Software verkauft. Das Spiel Cosmic Balance, das in unserem Artikel über Strategiespiele für Herbst dieses Jahres angekündigt wurde, dürfte bei Erscheinen dieser Ausgabe schon lieferbar sein.

Info: T. Müller Computer-Service, Postfach 25 26, 7600 Offenburg, Tel. (07 81) 7 20 04

## Speichererweiterung für C 16

Auf insgesamt 32 KByte RAM läßt sich der C 16 mit dem 16-KByte-Modul der Firma Jeschke erweitern. Das Modul (Preis 119 Mark) wird einfach in den Expansions-Port des C 16 eingesteckt und ist sofort betriebsbereit. Im Grafikmodus wird damit der zur Verfügung stehende Speicher von mageren 2 auf immerhin 18 KByte aufgestockt, so daß endlich sinnvoll mit Shapes gearbeitet werden kann. (ev)

Info: Klaus Jeschke, Im Birkenfeld 3, 6233 Kelkheim

## Neues Oxford-Pascal für den C 64

Eine neue, verbesserte Version des Oxford-Pascal-Compilers (Test in Ausgabe 12/84) wird seit Anfang April von der Firma CPL angeboten. Besitzer der alten Version können den neuen Compiler im Rahmen einer Umtauschaktion gegen einen geringen Unkostenbeitrag erhalten. Neben der Diskettenausgabe ist Oxford-Pascal jetzt auch in einer Kassettenversion erhältlich.

Info: CPL Computer plus Soft GmbH, Bahnstr. 20-26, 4220 Dinslaken.

## »60000 Bytes free« beim C 16

Die 64-KByte-Erweiterung von Kingsoft macht’s möglich: über 60 KByte stehen beim C 16 für Basic-Programme zur Verfügung (zum Vergleich: 38 KByte beim C 64). Auch bei Einsatz der hochauflösenden Grafik bleibt mit gut 50 KByte immer noch reichlich Platz fürs Programm. Die Erweiterungsplatine für 199 Mark wird ohne Löten direkt ins C 16-Gehäuse eingebaut; der Steckmodulport bleibt frei.

Info: Kingsoft, Fritz Schäfer, Schnackebusch 4, 5106 Roetgen

## Eureka - Das 85000 Mark-Adventure

Für die Lösung des Adventure-Paketes Eureka kann man 85000 Mark bekommen. Eureka besteht aus 5 einzelnen Abenteuerspielen, die alle in sich abgeschlossen sind. Die einzelnen Lösungen ergeben zusammengesetzt eine Telefonnummer in England. Der erste Anrufer dieser Nummer erhält die Siegprämie. Das Original des Spieles ist in Englisch geschrieben. Zum ersten mal gibt es parallel aber eine deutsche Version, die ab dem 20. März erhältlich sein soll. Unter der Hotline-Telefonnummer kann der Aben-teuer-Freund jederzeit erfahren, ob der Preis schon vergeben ist. Sollte das »Eureka-Rätsel« bis zum 31. Dezember dieses Jahres nicht gelöst sein, wird der Preis unter den Einsendern einer mitgelieferten Postkarte aufgeteilt.

Info: LINEL Handelsfirma, Landquartstr. 46 A, CH-9320 Arbon, Schweiz

## RS232-Datenübertragung

Märki und Lenz bieten ein bidirektionales RS232C-(V.24-)In-terface an, das an den IEC-Bus des C 64 angeschlossen wird. Angesprochen wird es wie ein Drucker über die Geräteadresse 4. Mit der Sekundäradresse wird die Art der Codewandlung eingestellt. »1« öffnet den Linearkanal, »2« schaltet die CMB/ ASCII-Code-Wandlung ein. Mit kurzen Befehlen können dabei bis zu 16 Zeichen umdefiniert werden.

Das Interface arbeitet RS232-seitig mit 7 Bit, keine Parität, 1 Stop-Bit und einstellbarer Baudrate (50 bis 9600 Baud).

Der Einsatzbereich des Interfaces liegt in der Ansteuerung von RS232-Druckern und der Datenübertragung zwischen zwei Computern. Mit dem Interface lassen sich beispielsweise Vizawrite-Textdateien an einen IBM-PC übertragen und dort mit Wordstar weiterbearbeiten. Als Software wird dazu ein Viza-Kon-vertierungsprogramm für den C 64 und ein Terminalprogramm für den IBM (Cross-Talk, Open Access) benötigt.

Info: Märki und Lenz, Bernstr. 15, CH-3114 Wichtrach, Tel. (00 41/31-98 2152, Preis: 454 Mark

TODO ASIDE

## Die Kuriositäten-Ecke

Interessantes, Seltsames und sonstige Ungereimtheiten aus dem Computer-Dschungel. Diesmal beschäftigen wir uns mit unbeabsichtigten, beabsichtigten und folgenreichen Ausrutschern verschiedener Compu-terfirmen.

* Steven Spielberg verkaufte die Rechte zu E.T. für 22 Millionen Dollar an Atari. Atari brachte das Spiel allerdings nur für das VCS-Telespiel heraus —, und dort war es ein totaler Flop. Trotzdem entschloß sich Atari, die Rechte zu »Gremlins« ebenfalls zu kaufen, und zwar für einen Betrag in etwa derselben Größenordnung. Diesmal aber wurde die weise Entscheidung getroffen, das Spiel für Homecomputer herauszubringen. Die Kritiken mehrerer amerikanischer Fachzeitschriften zu diesem Spiel waren allerdings schon wieder vernichtend. Ob Atari in diesem Fall wieder so viel Pech haben wird, bleibt abzuwarten.
* Ein weiterer »Fehlgriff« von Atari: Alan Alda, ein bekannter amerikanischer Fernsehstar, unterzeichnete einen zehn Millionen Dollar Vertrag mit Atari, um für eine Dauer von fünf Jahren deren Computer in der Werbung anzupreisen. Nachdem Atari an Jack Tramiel verkauft wurde, fühlte Alda sich nicht mehr gebunden und sagte in einer Talkshow etwas über »Computer, die vom Markt verschwinden könnten«. Atari kann nichts gegen solche Äußerungen tun, der Vertrag wurde nämlich noch mit dem ehemaligen Eigentümer, der Warner Communications Company, abgeschlossen. 
* Apple ist mittlerweile groß ins Geschäft mit T-Shirts, Mützen und Tassen eingestiegen, die alle diesen angebissenen Regenbogenapfel tragen. Sogar in der 64’er Redaktion stand schon eine Apple-Kaffeetasse (der Besitzer wurde wegen Hochverrats mit dem Verschwinden seiner Kaffeetasse bestraft). Da dieses Mailorder-Geschäft offensichtlich ganz gute Gewinne einbringt, sollte sich Commodore nicht nur auf Bayern-T-Shirts beschränken.
* Die englische Firma »Bad Taste Software« hat mit ihrem Spiel »Di’s Baby« erhebliches Aufsehen in den englischen Medien erregt. In einer der fünf Spielrunden muß man als Prinz Charles mit einem Nachttopf herumrennen, um die »Reste« des Kleinen aufzusammeln — was im Lauf der Zeit immer geschmackloser wird. Im weiteren Spielverlauf muß man vorbei an verrückten Doktoren, Journalisten etc., um zu Lady Di’s Schlafzimmer vorzudringen. Dort muß man dann das nächste Baby produzieren (jedes neue Baby gibt Bonuspunkte). Kommentar der englischen Zeitschrift Commodore Horizons: »A monumental exercise in bad taste« (ein gigantisches Beispiel für schlechten Geschmack). Über Geschmack läßt sich bekanntlich streiten, aber bei solcher Publicity müßte das Spiel eigentlich ganz gut verkauft werden.
* Coleco, USA, verteilte an die Käufer des Coleco-Adam umsonst die sogenannten Cabbage Patch Dolls, Puppen, die in USA ähnlichen Erfolg haben wie bei uns die Barbies. Die Produktion des Adam-Computers wurde mittlerweile eingestellt. Vielleicht hätte Coleco andersrum mehr Erfolg gehabt (zu den Puppen den Computer umsonst).
* Nachdem letztes Jahr viele Hardware-Hersteller Millionenverluste erleiden mußten, sind auch bei den Softwarefirmen Einbrüche erfolgt. Nach Sirius-Software, die sich überhaupt nicht mehr retten konnten, fiel nun auch Hesware dem Pleitegeier zum Opfer. Hes, die hauptsächlich Software für den C 64 produzierten, wurden samt Inventar und Programmierer durch die Firma »Avant Garde« ersteigert, die bisherhauptsäch-lich auf dem Apple II und dem Personal Computer-Markt aktiv war. Synapse Software hatte ebenfalls zu leiden, konnte sich aber gerade noch durch einen billigen Verkauf ihres gesamten Lagers und durch Lizenzverkäufe an englische Firmen (die die Synapse-Spiele auf den Sinclair Spectrum umschreiben!) retten. Synapse wird mittlerweile voll von Broderbund-Software finanziert, bleibt aber weiterhin eine unabhängige Firma. Synapse-Chef Igor Wolosenko kündigte an, daß einige gemeinsame Projekte von Synapse und Broder-bund in Planung sind.

(M. Kohlen/aa)

Nachdem wir dieses Mal nur über Firmen berichtet haben, wird unsere nächste Kuriositätenecke wieder etwas bunter gemischt sein. Was zu erwarten ist, wollen wir noch nicht verraten. Wenn Sie etwas Interessantes, Kurioses oder Witziges herausfinden sollten, dann schreiben Sie uns ruhig (Ihre Informtionen sollten auf der Wahrheit beruhen und nachprüfbar sein).

# Leserforum

## Wie funktioniert Multicolor beim VC 20?

Ich habe seit einem Jahreinen VC 20 und stehe jetzt vorfolgen-dem Problem: Ich sehe in manchen Computerspielen Figuren im Mehrfarbmodus. Und zwar sind diese Farben gezielt angewendet worden. Ich weiß zwar, daß es einen POKE-Befehl gibt, der die Zeichen farbig erscheinen läßt, jedoch ist dies dann kunterbunt gemischt. Können Sie mirsagen, wie man Multicolor gezielt anwenden kann?

Martin Knizia

Ja, Sie müssen sich nur erst einen anderen Zeichensatz in den Speicher setzen. Tun Sie das in der Grundversion durch POKE 36869,255. Der Videochip greift jetzt auf die Zeichen im Speicherbereich ab dezimal 7168 zu. Dort können Sie Ihre Zeichen ablegen. Allerdings bedeutet hier (ich hoffe Sie beherrschen das Binärsystem) nicht wie im normalen Hires-Modus die Eins einen gesetzten Punkt und die Null einen gelöschten Punkt. Um die Multicolor-Grafik anzusprechen, setzen Sie für die verschiedenen Farben Bitpaare ein. »10« steht für die Zeichenfarbe, die für jede Bildschirmstelle (7680 -8191) in der zugeordneten Farbspeicherstelle (37888 bis 38912) steht. »01« steht für die Rahmenfarbe, die die erste Multicolor-farbe darstellt. Die zweite Multi-colorfarbe, Bitkombination »11«, ist die Hilfsfarbe, die in Bit 4 bis 7 des Videoregisters 36878 liegt.

Dadurch hat man natürlich nur noch 4 mal 8 Punkte große Grafikzeichen, die Farbe läßt sich aber jetzt gezielt ansteuern.

Wesentlich ausführlicher ist das Problem bereits im VC 20-Kurs in der Ausgabe 3/85 dargestellt worden.

## Probleme mit Super Line?

Ich habe* das Programm SUPER LINEaus dem 64’erSonder-heft (Tips & Tricks) abgetippt und die richtigen Checksummen erhalten. Es wurde auch keine Fehlermeldung ausgegeben. Nach dem Befehl »O« und RETURN erscheint jedoch nur ein wirres Muster. Nach »F« ist derBildschirm im normalen Zustand mit Cursor und »Ready«. Nach einem erneuten »O« und einem RUN/STOP-RESTORE erscheint ein ganzer Bildschirm voller As.

Eine Eingabe eines Zeichens mit 80 Zeichen pro Zeile ist nicht möglich. Ich habe aber angenommen, daß das mit obigem Programm möglich sein sollte.

Kurt Lüscher-Feldmann

Viele Leser haben das gleiche Problem: Sie lesen die Anleitung nicht ganz durch. In der Anleitung zu Super Line steht ganz deutlich, daß Text mit dem Befehl »W, x, y, ’’Text’« im 80-Zei-chen-Modus ausgegeben werden kann. Von Eintippen im 80-Zei-chenmodus war nicht die Rede. Aber früher oder später wird uns vielleicht ein Leser ein 80-Zeichen-Programm mit dieser Möglichkeit einschicken?!

## Nochmals »Graphics Basic«

Zu Ihrem Artikel über »Graphics Basic« in Ausgabe 12/84 habe ich einige Fragen:

1.	Wo kann man Graphics Basic beziehen und wieviel kostet diese Erweiterung genau?
2.	Kann man die anderen Basic-Befehle (zum Beispiel PO-KEs fürListschutz) einsetzen?
3.	Wieviele Farben sind mit Graphics Basic realisierbar?
4.	Kann man mit dem Window-Befehl den Bildschirm in verschiedene Aktivitätszonen wie bei Dallas Quest (Oben Grafik, unten Text, derunterderGrafik verschwindet) aufteilen?
5.	In wieviele Aktivitätszonen kann man den Bildschirm unterteilen? Ulrich Reiter

Die Firma Ariolasoft, die das Programm ursprünglich vertreiben wollte, konnte sich nicht dazu entschließen, das Programm auf den deutschen Markt zu bringen. Vielleicht, weil die Herstellerfirma »HES« wegen Bankrott versteigert wurde.

Mit anderen Worten: Graphics Basic ist leider nicht mehr über den Fachhandel zu beziehen. Nach Auskunft von Ariolasoft werden lediglich noch die vorbestellten Exemplare ausgeliefert, ein späterer Verkauf ist ausgeschlossen.

Zu 2.: Man kann die anderen Basic-Befehle ohne Schwierigkeiten einsetzen.
Zu 3.: Alle
Zu 4.: Das geht mit den Befehlen »TEXT FROM x TO y« und »GRAPHICS FROM x TO y«.
Zu 5.: Mehr als drei Aktivitätszonen sind leider nicht möglich.
Aus dem Takt geraten?

Sie schrieben in Ihrer Turbo-Pascal-Story in einer älteren Ausgabe, daß der Z-80 des CP/M-Moduls mit 2 MHz getaktet ist. Ist das ein Fehler Ihrerseits, oder hat Commodore das CP/M-Modul verbessert?

Dirk Müller

Der Fehler liegt bei uns, und Commodore hat nichts verbessert (sowas kann man von Commodore erfahrungsgemäß nicht erwarten). Die Produktion des CP/M-Moduls wurde schon vor einiger Zeit eingestellt. Es ist daher ratsam, alles was mit CP/M und dem C 64 zu tun hat am besten zu vergessen.

Das CP/M-Modul soll unbestätigten Berichten zufolge außerdem nicht mit den neuesten C 64-Versionen zusammenarbeiten. Interessant wird das Thema CP/M allerdings wieder mit dem C 128, der einen Z-80-Pro-zessor mit 4 MHz Taktfrequenz fest eingebaut hat.

## ROM-Listings gesucht

Wo kann man Schaltpläne zur Floppy 1541 und zum Drucker MPS-802 erhalten? Bietet jemand ein kommentiertes ROM-Listing des MPS-802-Betriebssy-stems an? Gibt es irgendwo kommentierte Listings von Simons Basic, Exbasic, Assemblern etc.? Manfred Grebler

Schaltpläne zu Commodore-Geräten kann Ihnen nur Commodore selbst beziehungsweise Ihr Commodore-Händler beschaffen. Ein kommentiertes Listing von Simons Basic finden Sie beispielsweise im Commodore 64-Buch, Band 5, »Ein Leitfaden durch Simons Basic« (Markt & Technik).

## Hi-Eddi mit C 1525?

Das Programm Hi-Eddi (Ausgabe 1/85) ist einfach toll. Aber ich habe ein Problem. Das Hi-Print-Programm läuft nicht auf meinem Grafik-Drucker C1525. Alle Versuche, es entsprechend abzuändern, sind bei meinen geringen Programmierkenntnissen fehlgeschlagen.

Andreas Neuner

In der nächsten 64’er finden Sie Druckerroutinen für MPS 801 und 802.

## Vizawrite-Hilfe gesucht

Seit einigerZeit verarbeite ich meine Texte mit einer englischen Version von Vizawrite. Mit ein paar Kunstgriffen läßt sich dieses Programm ganz gut handhaben. Es gibt aber einen Schönheitsfehler: Auf dem Bildschirm erscheinen nicht die deutschen Umlaute, und meine bisherigen Versuche, selbst Bildschirmzeichen zu definieren, schlugen fehl, da diese von Vizawrite wieder überschrieben werden. Wer kennt eine nicht allzu komplizierte Lösung für mein Problem?

Bertram Hafner

## Mitglieder gesucht

Der VC 20 User Club »Byte Sprinter« sucht noch Mitglieder.

Manfred Beier

Info: VC 20 User Club »Byte Sprinter«, Manfred Beier, Narzissenweg 3, 4044 Karst 1.

## 8-Zoll-Floppy für C 64?

Ich benötige für meinen C 64 einen Massenspeicher mit wesentlich höherer Kapazität als sie die 1541 bietet.

Joachim Kaluza

Eine Möglichkeit wäre die SFD 1001 von Commodore. Sie hat eine Speicherkapazität von rund 1000 KByte. Zusätzlich ist eine IEEE 488-Schnittstelle erforderlich (siehe 64’er, 3/85).

## CBM-Gehäuse gesucht

Ich möchte meinen C 64 wie in der 64’er Ausgabe 8/84 beschrieben in ein CBM-Gehäuse der 3000/4000er Serie einbauen, konnte aber bislang immer noch keins bekommen. Welcher Leser kann mir helfen?

Jörg Stegemann

## TA Gabriele 8008 am C 64

Ich suche ein Interface zum Anschluß der Typenradschreibmaschine TA Gabriele 8008 an den C 64. Ausgabe 3/84

Oskar Greifenberger jun.

Dieser Brief wurde mit einer TA 8008 in Verbindung mit dem »Textomat« von Data Becker geschrieben. Damit dürfte die Frage von Herrn Greifenberger jun. beantwortet sein. Das Interface gibt es bei der Firma Daum Elektronik, Kagenhof 3, 8501 Veitsbronn. Die Typenbezeichnung lautet: Schnittstelle VC 8008. Ich habe die Schnittstelle im November 1984 für 289 Mark gekauft.

Dieter Seifried

## Welches Betriebssystem?

Wie kann ich feststellen, ob mein 1526-Drucker mit dem alten oder mit dem neuen Betriebssystem ausgerüstet ist? Ausgabe3/85. GünterReuter

Welches Betriebssystem eingesetzt ist, kann man sehr einfach feststellen, indem man einen Drucker-Selbsttest durchführt (Gerät mit festgehaltener Papiervorschub-Taste einschalten). In der ersten gedruckten Zeile erscheint die Bezeichnung »REV.« mit einer Zahl dahinter. Ist diese Zahl »1.0«, dann ist das alte Betriebssystem eingesetzt; bei »7.0« ist es das neue.

Ob der Drucker im 1525- oder im 1526-Modus arbeitet, kann man feststellen, wenn man ihm einen Text über die Sekundäradresse 7 schickt. Wird der Text gedruckt, so ist der Drucker im 1525-Modus, andernfalls im 1526-Modus. Ist der Drucker in der 1525-Betriebsart, dann kann man ihn bei neuem Betriebssystem wie folgt auf den 1526-Modus umstellen:

1.	Gerät öffnen (Achtung, Garantiefrist beachten)
2.	Das IC mit der Bezeichnung »U4D« suchen (steht auf der Leiterplatte neben dem IC)
3.	Pin 16 des IC auf Masse legen

Der Drucker arbeitet jetzt im 1526-Modus. Hendrik Hartje

## Fragen Sie doch

Selbst bei sorgfältiger Lektüre von Handbüchern und Programmbeschreibungen bleiben beim Anwender immer wieder Fragen offen. Viel mehr Fragen ergeben sich bei Computer-Interessenten, die noch keine festen Kontakte zu Händlern, Herstellern oder Computerclubs haben. Sie können der Redaktion Ihre Fragen schreiben oder Probleme schildern (am einfachsten auf der Karte »Lesermeinung«). Wirveranlassen, daß sie von einem Fachmann beantwortet werden. Allgemein interessierende Fragen und Antworten werden veröffentlicht, die übrigen brieflich beantwortet.

## Laden mit Bild?

Während der C 64 ein Programm von Kassette lädt, zeigt er normalerweise kein Bild auf dem Monitor an. Nun habe ich aber an einigen Maschinensprache-Programmen gesehen, daß es doch möglich ist, ein Bild während des Ladens stehen zu lassen. Ist dieser Effekt auch in Basiczu erzielen oderist dazu die Kenntnis von Maschinensprache notwendig?

Dieter Kurbjuhn

Vom Basic aus ist das nicht möglich. Da der Videochip und der Prozessor abwechselnd auf den selben Datenbus zugreifen, kann es bei Ladevorgängen von Kassette zu Zeitproblemen kommen, die das System zum Absturz bringen könnten. Um das zu verhindern, schaltet das Betriebssystem während der Dauer des Kassettenzugriffs den Videochip einfach aus, wodurch natürlich das Bild verschwindet.

Um das zu verhindern, darf man nicht auf die vorhandenen Betriebssystemroutinen zugreifen — wie es das Basic automa-.tisch macht, sondern muß sich eigene Laderoutinen schreiben.

Das allerdings ist nur in Maschinensprache möglich?

## Assembler für »lllegals«?

Ich habe von einigen Maschinenbefehlen gehört, die die CPU 65xx versteht, obwohl sie in keinem Handbuch zu finden sind. Hat jemand nähere Informationen darüber oder gibt es schon einen Assembler dafür?

Klaus Heinz

In der Ausgabe 3/84 des 64’er-Magazins haben wir eine Beschreibung dieser illegalen Opcodes gebracht. Weitere Beiträge zu diesem Thema sind in Vorbereitung.

Bei der Anwendung dieser vom CPU-Hersteller nicht unterstützten Opcodes ist aber Vorsicht geboten: Während die »legalen« Befehle unter Garantie auch bei späteren Prozessorversionen funktionieren, ist das bei den »illegalen« nicht unbedingt der Fall. Unter Verwendung solcher Codes geschriebene Maschinenprogramme sind daher nicht immer auf Prozessoren der gleichen Familie (zum Beispiel vom 6502 zum 8502 des C 128) übertragbar.

## Wo gibt's ausländische Computermagazine?

Ich würde gerne auch ausländische Computermagazine lesen. Deshalb meine Frage: Wie beziehungsweise wo bekommt man englischsprachige Computermagazine?

Roland Rechinger

Englische und amerikanische Zeitschriften gibt es in jeder größeren Stadt im Bahnhofsbuchhandel zu kaufen. Manche dieser Läden erhalten diese Zeitschriften allerdings oft mit erheblicher Verspätung (manchmal bleiben auch die Lieferungen aus den USA ganz aus). Wenn Sie also an einem ständigen Konsum dieser Blätter interessiert sind, sollten Sie ein Abo in den USA oder England bestellen. Informationsreiche Zeitschriften sind Compute!, Computes Gazette, Computer Games, Electronic Games, Personal Software (USA) sowie Commodore Horizons, Your Computer, Computer & Video-Games (England).

## Copyright-Problem

Darf ich eigentlich Programmteile, die im 64’erabge-druckt sind, für meine eigenen Programme benutzen und diese dann wieder einschicken?

Rene Frehner

Da der Verlag Markt & Technik das Copyright an diesen Programmen besitzt, dürfen Sie auch einzelne Programmteile nur verwenden, wenn das schriftliche Einverständnis von Markt & Technik vorliegt, falls Sie Ihr Programm einem anderen Verlag anbieten.

Schicken Sie Ihr Listing aber an uns ein, dürfen Sie dieses Einverständnis natürlich immer voraussetzen.

Generell dürfen Sie einem Verlag Listings nur dann anbieten, wenn alle Rechte an dem Programm bei Ihnen liegen, das heißt in der Regel, wenn Sie es selbst geschrieben haben. Falls das Programm nur eine umgeschriebene Version eines anderen ist, oder falls einzelne Routinen aus anderen Quellen stammen, müssen Sie das unbedingt im Anschreiben erwähnen, sonst kann das unangenehme Folgen haben.

Falls Sie das Programm jedoch ausschließlich für Ihren privaten Gebrauch verwenden, dann brauchen Sie sich um solche Dinge keine Gedanken zu machen. Es entspricht aber einer guten Programmierer-Tradition und auch der allgemeinen Fairneß, bei aus anderen Programmen entnommenen Routinen die Original-Quelle und den Namen des Autoren der Routine anzugeben.

## Modulbereich nutzen?

Wie kann man beim VC 20 mit 24 KByte den geänderten Zeichensatz in den Modulbereich ($A000-$BFFF) verlegen ? Welcher Wert muß dazu in die Speicherstelle 36869 gePOKEt werden ? Muß dazu auch der Bildschirmspeicher verlegt werden? Oliver Berger

Die Bits 0 bis 3 aus Adresse 36869 (Register 5 des VIC) bestimmen die Lage des Zeichengenerators im Speicher, und zwar nach einem recht komplizierten Schema, bei dem einige Bits der generierten effektiven Startadresse des Zeichenspeichers immer auf Null sind. Leider gehören auch Bit 13 und 14 der Zeichenspeicher-Adresse zu diesen Null-Bits. Dadurch ist der Speicherbereich ab $A000 (= 1010 0000 0000 0000 binär) nicht als Zeichengenerator-Adresse einstellbar. Auch der Bildschirmspeicher läßt sich beim besten Willen nicht in diesen Adreßbereich verlegen. In der Ausgabe 1/85 des 64’er-Magazins finden Sie im VC 20-Kurs eine ausführliche Beschreibung dieser Problematik.

## Hier gibt's Lightpens

Wo bekomme ich einen anschlußfertigen Lightpen für den C 64?
Ausgabe 2/85

Markus Lucassen

Lightpens mit Demonstrations-Software in Simons Basic gibt’s bei mir für 50 Mark auf Bestellung. Anwendungsprogramme für das Zeichnen auf dem Bildschirm sind in Vorbereitung.

Werner Backes Info: Werner Backes, Talstr. 15, 6695 Tholey

Die Firma Softline bietet den »Tech-Sketch«-Lightpen in verschiedenen Versionen ab 159 Mark an, von Stack Computer Services gibt es den »Stack«-Lightpen. Beide Lightpens werden inklusive komfortabler Grafik-Software geliefert. In unserem Testbericht in der Ausgabe 4/85 können Sie sich genauer über den Tech-Sketch informieren.

Info: Softline, R. Alverdes, Schwarzwaldstr. 8a, 7602 Oberkirch
Stack Computer Services Limited, 290-298 Derby Road, Bootle, Merseyside, England.

## Wollen Sie antworten?

Wir veröffentlichen auf dieser Seite auch Fragen, die sich nicht ohne weiteres anhand eines guten Archivs oder aufgrund der Sachkunde eines Herstellers beziehungsweise Programmierers beantworten lassen. Das ist vor allem der Fall, wenn es um bestimmte Erfahrungen geht oder um die Suche nach speziellen Programmen. Wenn Sie eine Antwort auf eine hier veröffentlichte Frage wissen — oder eine andere, bessere Antwort als die hier gelesene, dann schreiben Sie uns. Antworten publizieren wir in einer der nächsten Ausgaben. Bei Bedarf stellen wir auch den Kontakt zwischen Lesern her.

## Fernschreiber am C 64?

Wer hat eine Schaltung, um einen C 64 an einen Fernschreiber anzuschließen ? WerkenntLite-ratur, in der dies beschrieben wird? Am besten wäre eine Schaltung, mit der man auch noch Lochstreifen vom Fernschreiber in den Rechner einlesen kann.

Bernd Alef

## C 64-Speicher puffern?

Ich möchte den RAM-Speicher des C 64 puffern, um Datenverluste beim Abschalten zu vermeiden. Wer kann mir sagen, wie das zu bewerkstelligen ist? Erwin Rieks

Bisher haben wir leider keinen Schaltplan oder eine Bezugsquelle für eine derartige Schaltung gefunden. Eine Firma aus den USA, die bereits für den Apple II eine 64-KByte-Karte anbietet, auf die bei einem Reset der Inhalt des gesamten Speichers gezogen wird, will diese Karte (Name: »Wild Card«) auch für den C 64 anbieten. Wann und ob diese Erweiterung in Deutschland erhältlich ist, ist jedoch noch völlig ungewiß.

Falls Sie jedoch auch mit einem akkugepufferten Zusatzspeicher zufrieden sind, ist vielleicht das Xtend 64-Modul von Roßmöller das richtige für Sie. Dieses Modul erweitert den C 64 wahlweise um 32 KByte RAM (akkugepuffert) oder 128 KByte EPROM. EPROM und RAM können auch gemischt eingesteckt werden.

# Leser fragen - Willi Brechtl antwortet

> Hallo liebe Leser, hier bin ich wieder, um Eure Fragen zu beantworten.

Ich werde mich hauptsächlich um Leserbriefe kümmern, die nicht in das sachliche Einerlei des Leserforums passen. Zum Beispiel Fragen, die sich aus dem einen oder anderen Grund nur ganz subjektiv beantworten lassen. Oft genug tauchen auch Probleme auf, die sich nicht mit einem kurzen Antwortsatz abhandeln lassen. Und wenn selbst eine längere Antwort im Rahmen des Leserforums nicht mehr ausreichen würde, dann ist das ganz klar ein Fall für Willi Brechtl.

Also: Wenn Sie als Anfänger Probleme mit Computer, Software oder Handbuch haben, dann wenden Sie sich in Zukunft doch einfach vertrauensvoll direkt an mich.

## Fragen zum C 6

Ich habe mirerst kürzlich den C16 zugelegt, und habe zu diesem einige Fragen:

1.	Mirist aufgefallen, daß die Speicherkapazität des C 16 unter Verwendung von hochauflösender Grafik um rund 10 KBytes verringert wird. Woran liegt das und wie kann man es verhindern?
2.	Der C 16 hat eine recht geringe Speicherkapazität. Gibt es eine Speichererweiterung?
3.	Zur Zeit gibt es noch sehr wenig Software und Literatur zum C16. Werden im 64’erkünf-tig auch Artikel über den C 16 veröffentlicht? Wird Data Becker Bücher für den C16 veröffentlichen?
4.	Da Joysticks und Datasette 1530 nicht kompatibel zum C16 sind, hätte ich gerne gewußt,, ob es Interfaces oder Stecker zum Anschluß der Datasette 1530 und der »alten« Joysticks geben wird?

Andre Bremer

Zu 1. Da die Grafik ja auch in irgendeinem Speicherbereich liegen muß, ist es logisch, daß dieser Platz, wenn schon kein eigener Grafikspeicher vorhanden ist, das Basic-Ram benützt und verkleinert. Dabei werden 8 KByte für die Hires-Grafik und 2 KByte für den Farbspeicher verbraucht. Verhindern kann man das nur dadurch, daß man einfach keine hochauflösende Grafik benutzt.

Zu 2. Eine 16-KByte-Speicher-erweiterung wird derzeit von der Firma Jeschke angeboten. Eine 64-KByte-Erweiterung ist über Kingsoft zu beziehen. Die Firma Roßmöller entwickelt derzeit eine 32-KByte-Erweiterung mit zusätzlichen EPROM-Steckplätzen.

Zu 3. und 4. Data Becker müssen Sie schon selbst fragen. Im 64'er wird der C 16 entsprechend seiner Verbreitung auf dem Markt berücksichtigt. Einen Selbstbau-Stecker zum Anschluß der »alten« Datasette an den C 16 haben wir bereits gebracht, den entsprechenden Adapter für Joysticks finden Sie als Bauanleitung in dieser Ausgabe.

Sie sehen also, wir haben die C 16-Besitzer nicht vergessen und werden auch in Zukunft am Ball bleiben — wie bei allen aktuellen Commodore-Computern.

Info: Roßmöller GmbH, Finkenweg 1, 5309 Meckenheim
Klaus Jeschke Hard & Software, Im Birkenfeld 3e, 6233 Kelkheim
Kingsoft, Fritz Schäfer, Schnackebusch 4, 5106 Roetgen

## »Load Error« bei Datasette?

Ich habe folgendes Problem mit meinerDatasette: Sie macht andauernd »? LOAD ERROR« trotz Kassettenwechsel. Mit meiner Datasette ist alles in Ordnung. Man hat mir nun gesagt, daß vielleicht etwas mit meinem Mikroprozessor im C 64nichtstimmt. Kann es tatsächlich daran liegen? Ronny Gaab

Leider kann man bei so allgemeinen Angaben nur vage Vermutungen über die Fehlerursache anstellen. Tritt der Lesefehler nur bei fremden Programmen auf oder auch bei selbst abgespeicherten? Wurde die Abspeicherung mit VERIFY überprüft, und mit welchem Ergebnis? Können nur vereinzelt Programme nicht gelesen werden oder funktioniert gar nichts mehr?

Jedenfalls ist es sehr unwahrscheinlich, daß der Fehler am C 64 liegt (an der CPU kann es schon gar nicht liegen, wenn der Computer sonst einwandfrei funktioniert).

Die häufigste Fehlerursache ist ein verschmutzter oder verstellter Tonkopf an der Datasette. Reinigen Sie Tonkopf, Bandführung und Andruckrolle von Zeit zu Zeit mit einem in Spiritus getränkten Wattestäbchen. Die korrekte Einstellung des Tonkopfes kann Ihr Fachhändler vornehmen, wenn Sie sich selbst daranwagen wollen, sollten Sie entsprechende Fachliteratur zu Rate ziehen (zum Beispiel das Cassetten-Buch von Data Becker).

Bei der Aufzeichnung denken Sie bitte unbedingt immer an das VERIFY, daß nach jedem Abspeichern auf Kassette durchgeführt werden sollte. Verwenden Sie keine Billig-Kassetten, aber auch keine Chromdioxid oder Reineisen-(»Metall«)-Bänder. C 90 und C 120-Kasset-ten sollten Sie ebenfalls vermeiden. Lassen Sie am Anfang und am Ende jeder Kassette mindesten 10 bis 20 Sekunden Band frei, da diese Bandstellen durch das ständige Anschlagen beim Umspulen besonders starken mechanischen Belastungen ausgesetzt sind. Achten Sie darauf, daß das Band in der Kassette frei beweglich ist (glatte Spulenwickel), eventuell ein paar Mal vollständig vor- und zurückspulen. Beachten Sie schließlich den obersten Programmierer-Grundsatz: Vonjedemwichtigen Programm eine Sicherheitskopie anfertigen.

## Ordnungs-Probleme

Ich nehme an einem Fernkurs fürBasic teil und erhalte jeweils ein paarLehrbriefemit Übungs-ferogrammier-)aufgaben. Seit ich nun eine Diskettenstation habe, speichere ich diese Übungsprogramme auf Diskette ab. Nun habe ich aber ein fürchterliches Durcheinander auf meinen Disketten. Daherha-be ich mit meinen jetzigen Fähigkeiten ein Disketten-Verwal-tungsprogramm geschrieben, mit dem ich die gewünschte Übungsaufgabe aufAnhieb finden kann. Wenn ich allerdings die Übung geladen und korrigiert habe, ist natürlich anschließend mein Verwaltungsprogramm nicht mehr im Speicher, so daß ich es immer wieder nachladen muß, was recht viel Zeit kostet (immerhin 63 Blöcke). Was kann ich dagegen tun? Gibt es einen Speicher, in dem ich mein Verwaltungsprogramm ablegen und jederzeit wieder hervorrufen kann, ohne es umständlich wieder von Diskette laden zu müssen ? Wie gelange ich in diesen Speicher und wie funktioniert das Ganze?

Christian Wüger

Ein solcher Speicher ist vom Betriebssystem her nicht vorgesehen, kann aber auf der Maschinenspracheebene durchaus realisiert werden. In unserem Tips & Tricks-Sonderheft haben wir das »Multi-Programm-System« abgedruckt, mit dem es möglich ist, bis zu 31 (!) Basic-Programme gleichzeitig im Speicher zu halten.

Eine viel einfachere Methode ist es jedoch, für jede Diskette eine Karteikarte mit den Programmnamen anzulegen. Diese Karte können Sie in der Diskettenhülle mit unterbringen. Wenn Sie dann noch von vorneherein für Ordnung sorgen, indem Sie jeweils logisch irgendwie zusammengehörende Programme auf einer Diskette zusammenfassen (also beispielsweise Übungsaufgaben zu Lektionen 1-5 auf Diskette 1) und dies auf dem Diskettenaufkleber vermerken, werden Sie nie Probleme mit dem Suchen nach Programmen haben und können den Computer für sinnvollere Dinge als die Verwaltung der Verwaltungssoftware einsetzen.

# Welcher Drucker ist der richtige?

> Einen Drucker müßte man haben, aber welchen? Ein vielschichtiges und verwirrendes Angebot macht die Entscheidung wr ein Druckermodell nicht gerade einfach. Wir stellen Ihnen die wichtigsten Typen vor und sagen Ihnen, worauf Sie beim Kauf achten müssen.

Die papierlose Gesellschaft wird es auch in absehbarer Zukunft nicht geben. Menschen möchten die Resultate ihrer Arbeit nicht nur auf der flüchtigen Anzeige eines Monitors sehen. Vielmehr wird jedem Computerbesitzer schon nach kurzer Zeit bewußt, daß ein Drucker die wohl sinnvollste Ergänzung seines Computersystems ist. Der Anwendungsbereich eines Druckers ist dabei enorm vielfältig. Im industriellen Bereich dienen sie als Ausgabedrucker in Rechenzentren, erstellen Briefe, bedrucken Flugscheine und Fahrkarten, fertigen aber auch die Originale für so komplexe Erzeugnisse wie Telefonbücher, Bedienungs- und Verkaufsunterlagen. Im häuslichen Bereich haben Drucker mittlerweile ebenfalls einen weiten Aufgabenkomplex übernommen. Sie dienen hier als Listingdrucker, zur Daten- und Textverarbeitung, fertigen Grafiken an und protokollieren Meßabläufe.

### Drucker statt Schreibmaschine

Der enorme Erfolg des Commodore 64 hat eine interessante Entwicklung in Deutschlands Haushalten eingeleitet: Immer mehr Computerbesitzer bearbeiten ihren privaten Schriftverkehr nicht mehr mit der Schreibmaschine, sondern mit ihrem C 64, einem Textverarbeitungsprogramm und einem Druk-ker. Eine verständliche Entwicklung, denn die Vorteile sind enorm. Es darf korrigiert, umgestellt, ersetzt, neu formatiert und modifiziert werden — schlechte Zeiten für Tipp-Ex. Trotzdem ist dieser Themenkomplex nicht ohne Probleme. Den für die gewünschte Aufgabe richtigen Drucker zu finden ist, in Anbetracht der Typen- und Modellvielfalt, ein umfangreiches Unterfangen.

### Druckverfahren

Erstes Unterscheidungsmerkmal eines Druckers ist sein Druckverfahren. Man unterscheidet zwischen mechanischen (impact) und nichtmechanischen (nonimpact) Druckern. Zu den mechanischen Druckern zählen sowohl Drucker mit festen Typen (auf Kugelkopf, Hammer oder Rad), als auch Matrixdrucker, die ein zu druckendes Zeichen aus Einzelpunkten zusammensetzen. Nichtmechanische, anschlagfreie Drucker sind beispielsweise Laserdrucker, Thermodrucker oder Tintenstrahldrucker. Ein wesentlicher Vorteil von mechanischen Druckern gegenüber anschlagsfreien Druckern ist die Möglichkeit, direkt Durchschläge herzustellen.

Vom Arbeitsprinzip her lassen sich die Drucker in serielle Drucker, die Zeichen für Zeichen nacheinander auf das Papier bringen (Matrixdrucker) und Parallel- oder Zeilendrucker, die eine ganze Zeile auf einmal erstellen, unterteilen. Im Heimbereich haben sich in den letzten Jahren im wesentlichen nur vier verschiedene Druckertypen durchgesetzt: Die Matrixdrucker dank ihrer Flexibilität, die Typenraddrucker mit ihrem schönen Schriftbild, die Thermodrucker, weil sie preiswert und leise sind und seit neuestem auch die Tintenstrahldrucker, die viele Vorteile in sich vereinigen. Leider kann man mit Thermo- und Tintenstrahldruckern keine Durchschläge erzeugen.

### Die Matrixdrucker

Seriell arbeitende mechanische Matrixdrucker drucken Zeichen als eine matrixförmige Anordnung von Punkten (Bild 1). Der Druckkopf besteht aus einer senkrecht zur Druckzeile stehenden Reihe von dünnen Rohren, die je eine Nadel enthalten. Die Nadeln werden je nach Form des zu druckenden Zeichens von Elektromagneten angestoßen und bringen über das Farbband einen Punkt auf das Papier (Bild 2). Der Nadelkopf bewegt sich dabei entlang der Zeile und druckt die Zeichen entsprechend der im Drucker gespeicherten Informationen. Die diesen Zeichen zugrundeliegende Zeichenmatrix hängt vom verwendeten Druckermodell ab. Viele Drucker verfügen sogar über mehrere solcher Zeichensätze. Die Qualität des resultierenden Schriftbildes ist direkt von der verwendeten Zeichenmatrix und indirekt von der Nadelzahl abhängig. Es leuchtet ein, daß beispielsweise eine senkrechte Linie mit einer bestimmten Länge aus 9 Punkten zusammengesetzt, wesentlich besser aussieht, als eine gleich lange aus 5 Punkten.

Mit verschiedenen Maßnahmen versuchen die Druckerhersteller das Schriftbild ihrer Modelle zu verbessern. So gibt es Drucker mit zwei hintereinander angeordneten Nadelreihen, damit auch die Zwischenräume zwischen den Punkten mit Druckfarbe gefüllt werden können. Ein anderes Verfahren läßt eine Zeile zweimal drucken, wobei beim zweiten Druckvorgang der Kopf zum Ausfüllen der Zwischenräume etwas versetzt wird. Solche Maßnahmen gehen natürlich auf Kosten der Geschwindigkeit. Die Druckgeschwindigkeit eines Matrixdruckers hängt hauptsächlich von der Geschwindigkeit der auslösenden Elektromagneten und der Anzahl der zu betätigenden Nadeln ab. Druckgeschwindigkeit zwischen etwa 60 und 180 Zeichen pro Sekunde sind üblich; es gibt aber auch Matrixdrucker, die mit bis zu 600 Zeichen pro Sekunde arbeiten. Die meisten der modernen Matrixdrucker arbeiten mit einer Druckwegoptimierung, bei der freie Flächen auch in der Druckzeile selbst übersprungen werden. Mit der Druckwegoptimierung läßt sich die Druckgeschwindigkeit, je nach Anwendungsfall, beträchtlich erhöhen. Einige Matrixdrucker ermöglichen die Ansteuerung jeder einzelnen Nadel (Einzelnadelsteuerung). Auf diese Weise läßt sich jeder Punkt auf der Papierfläche bedrucken. Diese Funktion dient ins-besonders zur Ausgabe von Grafiken, aber auch zum Druck von selbstdefinierten Zeichen. Man spricht bei dieser Funktion auch von der Grafikfähigkeit eines Druckers.

Den Nachteil früherer Druckergenerationen, ein Druckbild zu liefern, bei dem jeder einzelne Nadelanschlag sichtbar ist, haben neueste Entwicklungen überwunden. Sie bieten eine sogenannte Near Letter Quality (NLQ) an, die dem Vergleich mit dem Schriftbild einer Schreibmaschine durchaus standhält (Bild 3).

### Die Typenraddrucker

Manchen sicher schon von seiner Schreibmaschine her bekannt ist das Typenradprinzip. Die Drucktypen sind auf elastischen Armen (Speichen) eines Typenrades aus Metall oder Kunststoff befestigt. Durch Drehung wird das Rad in die richtige Druckposition gebracht. Dann schlägt ein Hammer die Typen gegen Farbband und Papier. Obwohl in der Zwischenzeit auch die Matrixdrucker über gute Druckqualitäten verfügen, ist das Schriftbild eines guten Typenraddruckers bisher unerreicht. Die Domäne der Typenraddrucker liegt demzufolge auch in derTextverarbeitung. Dabei sind solche Drucker relativ langsam. Preiswerte Modelle arbeiten mit Druckgeschwindigkeiten um 20 Zeichen pro Sekunde, die professionellen Geräte schaffen teilweise über hundert Zeichen in der Sekunde. Auch bei den Typenraddruckern läßt sich die Druckqualität noch durch verschiedene Maßnahmen verbessern. Eine solche Maßnahme ist der Doppeldruck, bei dem jedes Zeichen zweimal angeschlagen wird, oder die Schattenschrift, die jedes Zeichen zweimal, aber etwas versetzt, druckt. Auch die Typenraddrucker gehören der unüberhörbaren Kategorie an. Trotzdem gibt es Unterschiede, die hauptsächlich auf die Bauart (Dämpfung, Rollenmaterial) zurückzuführen sind. Leider beherrschen die Typenraddrucker keine Grafik wie die Matrixdrucker. Sie sind vielmehr auf die Zeichen ihres Typenrades begrenzt und können keine beliebigen Punktmuster auf dem Papier drucken. Einfache Grafiken mit diesen Zeichen sind dafür nur ein unzureichender Ersatz. Größter Vorteil, neben dem Schriftbild, ist die Vielfalt der verfügbaren Schriften. Durch einfaches Wechseln des Typenrades steht ein völlig neuer Zeichensatz zur Verfügung. Andere Sprachen, wissenschaftliche Zeichen und viele Sonderzeichen stehen für die meisten Typenraddrucker zur Auswahl. Eine Sonderform des Typenraddruckers ist die Schreibmaschine mit eingebauter Schnittstelle zum Computer. Im Gegensatz zum Typenraddrucker hat die Schreibmaschine ein eigenes Tastenfeld, über das sie, auch ohne Computer, bedient werden kann. Diesen Vorteil muß man allerdings, bei gleichem Leistungsniveau auch mitbezahlen.

### Die Thermodrucker

Diese anschlagsfreien Drucker verwenden ein wärmeempfindliches Spezialpapier, das beispielsweise mit einer Wachsschicht überzogen sein kann. Der Druckkopfbe-steht aus einer Matrix von Widerständen, die heute üblicherweise auf einem Siliziumchip integriert sind. Dieser Druckkopf ist in ständigem Kontakt mit dem Papier. Zum Drucken werden die Widerstände der Matrix selektiv erhitzt und schmelzen dabei die Oberfläche des Spezialpapiers weg, so daß die darunter befindliche Farbe als Punkt sichtbar wird. Ein anderes Prinzip arbeitet mit normalem Papier, bei dem die wärmeempfindli-che Schicht auf dem Farbband aufgebracht ist. Durch Erhitzen des Widerstandes löst sich diese Schicht vom Farbband und bleibt auf dem Papier haften. Thermodrucker sind relativ preisgünstige und vor allem sehr leise Drucker. Leider stehen die Unterhaltskosten im umgekehrten Verhältnis zu den Anschaffungskosten. Sowohl das Spezialpapier als auch das wärmeempfindliche Farbband sind ziemlich teuer. Die Grafikfähigkeiten der Thermodrucker sind, durch das Matrixprinzip, durchaus gut.

### Die Tintenstrahldrucker

Auch Tintenstrahldrucker arbeiten nach dem Matrix-Verfahren, doch läßt sich mit ihnen ein Zeichenfeld wesentlich feiner rastern, als mit mechanischen Matrix-Druk-kern: Auf eine Länge von etwa einem Millimeter passen mehr als zehn Farbtröpfchen; mit einer zusätzlichen Überlappung der Punkte erreicht man ein Druckbild, das sich von dem einer Schreibmaschine kaum mehr unterscheidet. Es gibt verschiedene Versionen von Tintenstrahldruckern. In einer Ausführung sind, wie beim Nadeldrucker, mehrere Röhrchen senkrecht übereinander angeordnet, durch die Tinte auf das Papier gelangt. Bei anderen Verfahren wird ein aus einer Düse austretender Tintenstrahl, durch elektrische oder magnetische Felder auf die entsprechende Stelle des Papiers abgelenkt. Ein besonderer Vorteil der Tintenstrahldrucker ist ihr geringer Geräuschpegel. Die Druckgeschwindigkeit mancher Tintenstrahldrucker reicht bis über 300 Zeichen pro Sekunde. Eine Chance, die Tintenstrahldrucker gegenüber anderen Druckverfahren für die Zukunft bieten, ist der Mehrfarbendruck.

## Druckerauswahl — ein Entscheidungsproblem

Nun kennen Sie die wesentlichsten Druckerarten. Damit ist aber bei weitem noch nicht geklärt, welcher Drucker für welchen Zweck der geeignetste ist. Stellen wir uns zunächst den idealen Drucker vor: Er wäre so leise wie ein Tintenstrahldrucker, grafikfähigund schnell wie ein Matrixdrucker, hätte das Schriftbild eines Typenraddruckers, könnte Durchschläge anfertigen und hätte den Preis eines Thermodruckers. Leider gibt es dieses Gerät nicht. Die Entscheidung für einen bestimmten Drucker ist also immer ein Kompromiß, bei dem die gestellten Anforderungen am besten erfüllt werden. In Tabelle 1 haben wir für Sie einige Merkmale zusammengestellt, anhand derer Sie sich das Anforderungsprofil Ihres Druckers zusammenstellen können. Die dort verwendeten Begriffe wollen wir hier zunächst erläutern:

### — Art der Schnittstelle

Es gibt Drucker, die direkt an den seriellen Bus des C 64 beziehungsweise VC 20 anschließbar sind. Zu diesen Druckern gehören selbstverständlich die Commodore-Drucker. Einige andere Druckerhersteller bieten mittlerweile ebenfalls Drucker mit dieser Schnittstelle an. Diese Drucker sind in der Regel auch in ihren Steuerungsbefehlen an das Commodore-Basic angepaßt und beherrschen den Zeichensatz des C 64/VC 20. Andere Drucker sind mit einer Schnittstelle ausgestattet, die nicht direkt an einen Commodore-Computer anschließbar ist. Hier haben sich hauptsächlich zwei Standards gebildet. Zum einen ist das die serielle RS232C-(V.24) und zum anderen die Centronics-Schnittstelle. Drucker beider Schnittstellenarten sind trotzdem an den C 64/VC 20 anschließbar, allerdings nur wenn ein Interface verwendet wird. Dieses Interface übernimmt die Aufgabe, die vom Computer kommenden Zeichen so aufzubereiten, daß der Drucker sie richtig verarbeiten kann. Solche Interfaces können entweder in den Drucker eingebaut, oder zwischen Computer und Drucker geschaltet werden. Es ginge zu weit, alle Besonderheiten zu beschreiben. Zusammengefaßt läßt sich aber sagen, daß ein Interface mindestens über einen Linearkanal (Daten ohne Wandlung übertragen), eine wählbare CBM-ASCII-Codewandlung und eine Umschaltmöglichkeit zwischen Groß-und Kleinschreibung wie bei den Commodore-Druckern verfügen sollte (Sekundäradresse 7). Letztere Funktion ist besonders dann wichtig, wenn fertige Softwarepakete wie Dateiverwaltung und Textverarbeitung verwendet werden sollen, denn diese Programme verwenden meist den GroB-/Kleinschrift-Mo-dus. In vielen Fällen reicht es bereits aus, zwischen Computer und Drucker ein einfaches Kabel zu legen und die Anpassung der Datenausgabe im Computer vorzunehmen. Viele Interfaces sind nach diesem Prinzip aufgebaut, man erkennt sie an der immer notwendigen Software, die zusätzlich geladen werden muß.

### — Grafikfähigkeit

Ein Drucker ist immer dann grafikfähig, wenn er in der Lage ist, Daten als Bitmuster zu interpretieren. Fast alle Matrixdrucker verfügen über diese Fähigkeit. Diese Funktion ist beispielsweise dann unumgänglich, wenn Hardcopies eines Grafikbildschirmes ausgedruckt werden sollen.

### — Zeichensatz

Der Zeichensatz ist verantwortlich für das Aussehen und die Zusammensetzung der Druckzeichen. Viele Drucker verfügen über internationale Zeichensätze (zum Beispiel mit deutschen Umlauten) oder über den gleichen Zeichensatz wie Commodore-Computer. Sollen beispielsweise viele Programmlistings ausgedruckt werden, ist der CBM-Zeichensatz inklusive der reversen Steuerzeichen notwendig.

### - Schriftbild

Das Schriftbild ist das wesentlichste Kriterium für einen Drucker. Wichtig sind vor allem echte Unterlängen und die Punktdichte. Eine hohe Punktdichte läßt die Zeichen so erscheinen, als ob sie nicht mehr aus verschiedenen Punkten, sondern aus einer ununterbrochenen Linie bestehen. Ein weiteres Kriterium ist die Möglichkeit der Schriftbeein-flussung. Tabelle 2 gibt Aufschluß über verschiedene Methoden der Schriftgestaltung. Wichtigster Punkt ist das Vorhandensein einer Proportionalschrift, bei der die Zeichenzwischenräume so gewählt werden, daß ein harmonisches Schriftbild entsteht. Krönung der Schriftarten ist eine Near Letter Quality-Schrift.

### — Geschwindigkeit

Vergleichen Sie bei diesem Punkt vor allem die Geschwindigkeit bei verschiedenen Schriftarten. Allerdings gilt: Je höher die maximale Druckgeschwindigkeit, destoschnel-ler sind auch die Geschwindigkeit bei verschiedenen Schriftarten.

### — Papierarten

Welche Papierarten kann der Drucker verwenden. Es gibt Einzelblätter (wie bei der Schreibmaschine) Rollenpapier (besonders billig), Traktor-Endlospapier (meistverwendet) und Spezialpapier (für Thermodrucker).

### — Sonderfunktionen

Sie geben Auskunft über die Leistungsfähigkeit des Druckers. In Tabelle 2 sind einige Sonderfunktionen aufgeführt.

### — Pufferspeicher

Verfügt ein Drucker über einen eingebauten Pufferspeicher, so kann das zweifachen Nutzen haben. Zum einen bieten manche Drucker eine Funktion an, mit der eigene Zeichensätze geladen werden können (Download-Charakters). Zum anderen verkürzt ein Pufferspeicher die Zeit, die Sie warten müssen, bis Sie den Computer weiterverwenden können, denn normalerweise reagiert kein Computer auf Eingaben, solange er Zeichen an den Drucker sendet.

### — Geräuschpegel

Außer den Thermo- und Tintenstrahldruckern machen alle Drucker mehr oder weniger Lärm. Es ist deshalb ratsam sich ein neues Gerät nicht nur anzusehen, sondern auch anzuhören.

### — Bedienungsanleitung

Sie ist von entscheidender Wichtigkeit für den Nutzen, den Sie aus Ihrem Drucker ziehen können. Eine Anleitung sollte umfassend und in deutscher Sprache über die Funktionen eines Drucker aufklären. An Beispielprogrammen sollte dabei die Funktionsweise des Druckers deutlich werden.

### Jeder ist seines Druckers Schmied

Sie sehen, ein Druckerkauf ist Planungssache. Je nachdem auf welches Gebiet (Textverarbeitung, Programmierung oder Grafik) Sie Ihren Schwerpunkt setzen, wird Ihre Entscheidung anders ausfallen. Ein weiteres wichtiges Argument wird der Preis sein. Hier heißt es rechnen, denn mancher Drucker mit Interface kostet weniger als ein gleichwertiger Drucker ohne ein solches. Auch sollten Sie zukünftige Entwicklungen mit im Auge behalten, denn möglicherweise kaufen Sie einen neuen Computer, dann sollte am besten der alte Drucker weiterhin verwendbar sein. So ist ein Drucker mit Centronics-Schnittstelle sicher eine zukunftssichere Entscheidung, leider brauchen Sie für solch einen Drucker immer ein spezielles Interface. Ein Commodore-Drucker ist dagegen direkt anschließbar, paßt aber unter Umständen nicht an ihren nächsten Computer (es sei denn es ist der C 128). Obwohl gute Leistungen schon ab etwa 700 Mark zu haben sind, sollte bei einen Drucker ruhig etwas investiert werden, denn die Erfahrung zeigt, daß die Ansprüche schon nach kurzer Zeit steigen.

(Arnd Wängler/aa)

# Vergleich: Drucker unter 700 Mark

> Lohnt sich der Kauf eines Billigdruckers? Wir haben sieben Drucker der unteren Preisklasse getestet und wollen Ihnen eine Antwort auf diese Frage geben.

Billige Drucker gibt es eigentlich nicht. Selbst einfachste Modelle bewegen sich oft auf einem Preisniveau, das über dem des C 64 liegt. Der Kauf des ersten Druckers will also wohl überlegt sein, denn mit dem falschen Drucker sind schnell einige hundert Mark verloren. Dabei ist es keineswegs gleichgültig, für welches Modell einer Preisgruppe man sich entscheidet, denn Leistungen und Schriftbild sind oft von Gerät zu Gerät stark unterschiedlich. Auch sollte man sich vor dem Kauf genauestens über die Vor- und Nachteile der verschiedenen Konstruktionsprinzipien klar werden. Wir haben für Sie einige| Low-Cost-Drucker mit Preisen bis zu 700 Mark getestet.

### Bunt gemischt

Zum Test standen sieben Geräte verschiedenster Bauarten, die sich in zwei Gruppen einteilen lassen. Die erste Gruppe verwendet schmales, 12 Zentimeter breites Papier. Die zweite Gruppe setzt sich aus Druckern zusammen, die mit normal breitem Papier (21 Zentimeter) arbeiten. Uns kam es beim Test vor allem darauf an, den jeweiligen Drucker in dem Anwendungsgebiet zu testen, für das er konstruiert wurde. Es ist sinnlos, einen mit schmalem Papier arbeitenden Drucker auf seine Fähigkeiten bei der Textverarbeitung hin zu testen. Niemand wird auf die Idee kommen, Briefe im Format eines besseren Kassenzettels zu verschicken. Besonderswichtigwar für uns die Handhabungsfreundlichkeit und natürlich das Zusammenspiel mit dem C 64. Die Qualität des Handbuches wurde besonders berücksichtigt, da preiswerte Drucker in der Regel von Einsteigern benutzt werden.

## Kleiner Epson ganz groß

Was zunächst wegen seiner kompakten Maße wie ein verkleinertes Modell aussieht, erweist sich in der Praxis schnell als ein recht vielseitiges und zuverlässiges Werkzeug. Der Epson P-40 (Bild 1) ist ein Kleindrucker mit einer Papierbreite von 11,2 Zentimetern, der ursprünglich für den HX-20 Hand-Held-Computer entwickelt wurde. Er arbeitet nach dem Thermo-Prinzip und ist deswegen extrem leise. Im flachen Gehäuse präsentiert er sich wie eine verkleinerte Ausgabe des bekannten FX-80-Druckers. In der Tat teilt der P-40 mit seinem großen Bruder nicht nur die Centronics-Schnittstelle, sondern auch einige Steuerbefehle. Für einen Drucker dieser Preisklasse ungewöhnlich sind Befehle zum Einstellen der verschiedenen Schriftarten (Bild 2) wie komprimierter (80 Zeichen) und gedehnter (40 Zeichen) Schrift. Wer das gut strukturierte und umfangreiche Handbuch studiert, stößt sogar auf zwei Befehle für einfache und doppelte Grafik, die den Befehlen der »großen« Brüder entsprechen. Ganz erstaunlich ist auch der eingebaute Zeichengenerator. Er bietet die Möglichkeit zwischen verschiedenen internationalen Zeichensätzen zu wählen, unter anderem auch einem deutschen. Dieser Zeichensatz enthält 96 ASCII-Zeichen, inklusive der Groß- und Kleinschreibung. Trotz seines guten Konzeptes ist der Betrieb des P-40 am C 64 nicht ohne Probleme. In jedem Fall wird ein zusätzliches Interface notwendig, das mindestens 50 Mark kostet. Für eine riesige Auswahl solcher Schnittstellen ist allerdings gesorgt: Da der P-40 über die gleiche Befehlssyntax wie seine »großen Brüder« verfügt, können alle für die RX-80/FX-80 konstruierten Schnittstellen verwendet werden. Mittels Batterien kann er auch ohne Netzteil betrieben werden. Insgesamt ist der P-40 ein gelungenes Gerät, bei dem es allerdings am rechten Einsatzgebiet fehlt. Für eine Textverarbeitung ist sein Papier zu schmal und als Listingdrucker fehlt ihm der Commodore-Zeichensatz. Mit einem Preis von 448 Mark (ohne Interface) ist der P-40 auch etwas teuer.

## Doppeltes Lottchen

Der Brother HR-5 (Bild 3) ist ein Thermo-Transfer-Drucker, den es in zwei verschiedenen Ausführungen gibt. An einem »C« hinter dem Namen erkenntlich, stellt sich die direkt an den C 64 anschließbare Version vor. Ein eingebautes Interface sorgt für alle Anpassungen, die für den Betrieb am C 64 wichtig sind. Beim HR-5 ohne »C« stehen zwei Schnittstellen, Centronics parallel oder V.24 (RS232C) zur Verfügung. Das Druckverfahren des HR-5C ist etwas ungewöhnlich. Während des Druckes fährt der Druckkopf am stillstehenden Farbband entlang und preßt es gegen das Papier. Dabei werden die angesteuerten Punkte auf dem Druckkopf erwärmt und die Farbpartikel bleiben auf dem Papier hängen. Nach dem Druck einer Zeile hält der Druckkopf an und es wird mit verhältnismäßig lautem Geräusch das Farbband weitergespult. Da der Druck' bidirektional abläuft, wird die nächste Zeile in der Regel von rechts nach links gedruckt. Beim HR-5C können zwei verschiedene Papiersorten verwendet werden. Neben dem Druck auf normalem Papier mit Farbband (Bild 4) kann der Drucker auch direkt auf Thermopapier drucken. Man hat also die Wahl zwischen teurem Farbband und billigem Papier oder teurem Thermopapier. Der HR-5C ist zum Betrieb mit vier Monozellen vorgesehen. Wahlweise kann auch ein Netzgerät, das aber mit 40 Mark extra bezahlt werden muß, verwendet werden. Diese Anschaffung ist aber ratsam, denn bei einer Leistungsaufnahme von 6 Watt sind Batterien natürlich schnell erschöpft. Sehr viel Fingerfertigkeit verlangt das Einstellen der unter der Führungsstange und dem Steuerriemen verborgenen DIL-Schal-ter und das Einlegen der Farbbandkassette. Das eingebaute Interface wurde in wesentlichen Punkten an die Steuerung der Commodore-Drucker angepaßt. Mit der Sekundäradresse 0 erfolgt der Ausdruck im Normalmodus (Großbuchstaben und Grafikzeichen). Mit der Sekundäradresse 7 erreicht man den Zeichensatz mit großen und kleinen Buchstaben. Zu den Fähigkeiten des HR-5C gehört auch der Druck von reversen und vergrößerten Zeichen. Das umfangreiche Handbuch erleichtert die Einarbeitung in den HR-5C.

Der HR-5C ist mit einem Preis von 499 Mark sicherlich kein schlechter Kauf für alle, denen es auf problemlosen Anschluß und niedrigen Geräuschpegel ankommt. Drei Dinge sind es aber, die den sonst guten Eindruck des HR-5C schmälern: Die relativ hohen Unterhaltskosten, die niedrige Druckgeschwindigkeit (10 bis 30 Zeichen pro Sekunde) und die unpraktische Handhabung.

## Die Hausmarke

Seikosha und Commodore-Drucker sind zwei Worte für den gleichen Begriff. Drucker dieser Firma haben den C 64, und vorher den VC 20, auf weiten Strecken ihrer Entwicklung begleitet. Seikosha war auch die erste Firma, die außer Commodore selbst, direkt an den seriellen Port des C 64 anschließbare Drucker anbot. Kein Wunder, denn die Commodore 1525- und MPS 801-Drucker werden eigentlich von Seikosha produziert (nur das Gehäuse stammt von Commodore). So kommt es auch, daß einige unserer Testkandidaten auffällige Ähnlichkeiten besitzen. Wir haben den MPS 801 und den Seikosha GP500A miteinanderverglichen. DieMecha-nik beider Drucker ist identisch und auch beim Gehäuse bestehen kaum Differenzen. Der Unterschied liegt im Verborgenen, denn der MPS 801 wurde mit den gleichen Steuerbefehlen wie der seit langem bekannte 1525 (baugleich mit Seikosha GP100VC) ausgestattet. Dazu aber später mehr. Betrachten wir zunächst den GP500A (Bild 5). Mit einer Centronics-Schnittstelle ausgestattet, ist der GP500A nicht direkt an den C 64 anschließbar. Es wird deshalb notwendig, zusätzlich ein Interface anzuschaffen. Einziger Vorteil dieses Druckers gegenüber dem MPS 801 wäre der vorhandene deutsche Zeichensatz. Von dem kann der C 64-Besitzer aber wenig Gebrauch machen, denn das Schriftbild (Bild 6) ist eigentlich nicht ausreichend. Der GP500A kann keine Unterlängen drucken. Buchstaben wie »p« oder »y« werden immer angehoben, was einem harmonischen Textbild nicht gerade zuträglich ist. Wer ihn zum Programmieren verwenden möchte, stößt recht bald auf die Grenzen. Außer einer vergrößerten Schrift und einem Grafikmodus sind kaum Sonderfunktionen vorhanden. Der GP500A kostet 598 Mark.

Dem GP500A ähnlich ist der GP50A. Er ist ebenfalls ein Nadel-Matrixdrucker, bei dem die Papierbreite allerdings halbiert wurde. Auch er verfügt nur über eine Centronics-Schnittstelle. Das Haupteinsatzgebiet dieses Druckers wäre das eines preiswerten (398 Mark) Protokolldruckers beim Programmieren. Dazu fehlt ihm aber der Commodore-Zeichensatz. Da er diese Fähigkeit erst zusammen mit einem Interface erlangt, geht leider einiges vom Preisvorteil verloren. Die Handbücher zu den beiden Druckern sind ziemlich kurz gehalten und nicht auf das Commodore-Basic abgestimmt.

## Die Problemlosen

Der MPS 801 (Bild 7) ist eine Weiterentwicklung des 1525 (baugleich mit Seikosha GP100VC, der vom GP500C abgelöst wurde). Alle Steuerzeichen und Sekundäradressen des C 64 entsprechen denen des Druckers. Der Unterschied liegt im etwas modernisierten Gehäuse und einer anderen Druckmechanik (die des Seikosha GP500A). Das Farbband wurde gegenüber dem 1525-Drucker verkleinert und direkt auf dem Druckkopf in einer kleinen Kassette untergebracht. Durch die neue Mechanik ist der MPS 801 etwas schneller als sein Vorgänger geworden, er schafftjetzt 50 Zeichen pro Sekunde gegenüber 30 Zeichen pro Sekunde beim 1525. Leider haben diese Neuerungen ihren Preis, der MPS 801 kostet 698 Mark, bietet aber nur wenig Vorteile gegenüber dem 1525. Er eignet sich vor allem als Grafik-Drucker oder zum Listen eigener Programme. Für die Textverarbeitung gilt das gleiche wie für den Seikosha GP500A. Die Zeichendarstellung erreicht leider keine Briefqualität (Bild 6).

Der billigste für den C 64 erhältliche Drucker ist der 1520 (Bild 8). Genau genommen ist der 1520 eigentlich gar kein Drucker, sondern ein Plotter. Mit einer Papierbreite von 11,5 Zentimetern ist der 1520 in der Lage, mit seinen vier Farbminen sowohl Grafiken, als auch Programmlistings auszudrucken. Der 1520-Prin-ter/Plotter ist im wesentlichen ein XY-Plotter, der mit kurzen Kugelschreiberminen arbeitet. Er wird durch Schrittmotoren angetrieben und ermöglicht präzises Zeichnen mit einer Auflösung von 0,2 Millimetern und einer Geschwindigkeit von 14 Zeichen pro Sekunde. Wie alle Commodore-Drucker wird auch der 1520 über Sekundäradressen gesteuert. Beim Auslisten von Programmen übersetzt der 1520 alle Grafik- und Steuerzeichen in unterstrichene Buchstaben. Nach einer kurzen Eingewöhnungszeit sind solche Programmlistings sogar deutlicher zu lesen, als die mit dem MPS 801 erstellten. Da der 1520-Plotter/ Printer mittlerweile für weniger als 300 Mark erhältlich ist, lohnt seine Anschaffung auch dann noch, wenn schon ein Matrixdrucker vorhanden ist. Die Programmierung der Plotterfunktionen stellt für sich alleine betrachtet schon eine interessante Aufgabe dar. Erwägt man den 1520 als Protokolldrucker bei Meßvorgängen einzusetzen, gibt es kaum eine preiswertere Alternative. Die Handbücher sind in der für Commodore typischen Kürze gehalten, trotzdem erklären sie die wichtigsten Funktionen ausführlich genug.

## Der leise Star

Der Star STX 80 (Bild 9) ist der leistungsfähigste Drucker dieses Testes. Als Thermo-Drucker konstruiert, ist er fast nicht zu hören. Der STX 80 schafft im bidirektionalen Druck bis zu 60 Zeichen pro Sekunde. Alle Buchstaben haben Unterlänge und sogar deutsche Umlaute sind vorhanden. Schade, daß der STX 80 nur mit Spezialpapier drucken kann, denn sonst wäre er der einzige auch zur Textverarbeitung einsetzbare Drucker. Sein Schriftbild erfüllt die Mindestanforderungen. Seine wahren Fähigkeiten zeigt der STX 80 wenn er mit dem Star-Interface an den C 64 angeschlossen wird. Bild 10 zeigt die umfassenden Möglichkeiten, die dem Programmierer dann zur Verfügung stehen. Die Befehle des Interfaces erlauben sogar einwandfreie Listings in Klarschrift (Steuerzeichen werden übersetzt).

Mit einem Preis von 595 Mark ohne Interface bietet der STX 80 viel für sein Geld. Er ist der ideale Drucker für alle, die gehobene Ansprüche stellen, denen aber Nadel-Matrixdrucker zu laut sind. Sein größter Nachteil sind die relativ hohen Kosten für das Spezialpapier. Das Handbuch für den Drucker und das Interface können als gelungene Produktbeschreibung bezeichnet werden.

## Lohnt es sich?

Der Test hat gezeigt, daß, trotz einiger Lichtblicke, bei Low-Cost Druckern nach wie vor große Abstriche an Qualität und Leistungsfähigkeit gemacht werden müssen. Keines der getesteten Geräte erfüllt alle an einen Drucker zu stellenden Anforderungen in ausreichendem Maße. Die schwierigste Hürde, die Eignung zur Textverarbeitung, haben eigentlich alle Testkandidaten dieser Preisklasse nicht nehmen können. Entweder reicht die Qualität der Schrift für heutige Ansprüche kaum aus, oder die Papierbreite beziehungsweise Papierart behindert eine sinnvolle Anwendung. Trotzdem haben Low-Cost-Drucker ihren Markt, denn bei Preisen von 300 Mark aufwärts, sind sie die oft einzigen erschwinglichen Alternativen. Dennoch sollte jeder prüfen, ob er nicht doch zwei- oder dreihundert Mark mehr anlegen kann. Ab zirka 800 Mark gibt es heute schon Drucker, deren Schriftbild und Leistungsfähigkeit weit über denen der getesteten Geräte liegt. Der Wiederverkaufswert eines Druckers sinkt wegen der vielen mechanischen Teile schneller, als bei einem rein elektronischen Gerät wie einem Computer. Drucker sollte man lieber eine »Nummer zu groß« kaufen, denn mit steigenden Programmierfähigkeiten wachsen meist auch die Ansprüche.

(Arnd Wängler/hm)

Info:
Brother International, Im Rosengarten 14,6368BadVilbel, Tel. (0 6193) 80 50;
Star, Frankfurter Allee 1—3, 6236 Eschborn/Ts., Tel. (0 6169) 70180;
Commodore, Lyonerstr. 38, 6000 Frankfurt 71, (0 69) 6 63 80;
Epson, Am Seestern 24, 4000 Düsseldorf, Tel. (0211) 5 95 2110;
Microscan, (Seikosha-Drucker), Oberseering 31, 2000 Hamburg 60, Tel. (040) 6320030.

# Superdrucker mit frechem Preis

> Kaum vier Jahre, nachdem Star mit dem Gemini 10 sein Debüt auf dem Peripherie-Markt gab, wurden auf der CES in Las Vegas die Drucker einer neuen Generation vorgestellt. SG, SD und SR heißen die Modelle, die mit außergewöhnlichen Leistungen und günstigen Preisen neue Maßstäbe setzen.

Star setzt mit den Druckern SG-10, SD-10 und SR-10 einen neuen Standard. Die neue Star-Gene-ration weist Leistungen auf, wie sie sonst nur von wesentlich teureren Geräten her bekannt sind. Dabei sind alle drei Geräte nach dem gleichen Konzept konstruiert. Dieses Konzept versucht, durch hohe Flexibilität, allen erdenklichen Anforderungen gerecht zu werden. Von einem modernen Drucker wird heute erwartet, daß er über verschiedene Zeichensätze verfügt, eine Reihe von Schriftarten beherrscht, voll grafikfähig ist und bei niedrigem Geräuschpegel trotzdem schnell druckt. Darüber hinaus steigen die Ansprüche an das Schriftbild. Gerade bei Briefen werden Schriftqualitäten verlangt, die mit denen eines Typenraddruckers vergleichbar sind. Alle diese Anforderungen wurden bei der Konstruktion der neuen Druckergeneration von Star berücksichtigt. Jedes Modell verfügt über einen enormen Reichtum verschiedenster Schriftarten (Bild 1) und Steuerbefehle, mit denen jeder Text abwechslungsreich aufbereitet werden kann. Alle Modelle beherrschen sechs Grafikmodi mit Auflösungen zwischen 8 x 60 und 8 x 240 Punkten pro Inch (1 Inch = 2,54 Zentimeter) und verschiedene Zeichensätze. Eine bisher wenig bekannte Neuerung ist die Definition von sogenannten »Makros«.

Diese Befehle sind nichts anderes als selbst definierte Steuerbefehle, in denen mehrere Druckfunktionen zusammengefaßt werden. So genügt es, beispielsweise eine bestimmte Schriftart einmal zu definieren, durch Aufruf des Makros steht diese Schrift dann jederzeit zur Verfügung. Auch die Druckgeschwindigkeit der Testkandidaten kann sich sehen lassen. Sie reicht von 120 Zeichen pro Sekunde beim SG-10 über 160 beim SD-10 bis zu 200 Zeichen pro Sekunde beim SR-10. Man kann diese Werte auch als relative Druckgeschwindigkeit bezeichnen, denn die tatsächliche Geschwindigkeit ist noch von einigen anderen Punkten abhängig. So verkürzen beispielsweise die Druckwegoptimierung (siehe Grundsatzartikel in dieser Ausgabe) und auch eine hohe Geschwindigkeit des Papiertransports die Zeit, nach der ein Schriftstück fertig gedruckt ist. Die drei Testkandidaten glänzen hier mit sehr guten Werten, denn sie sind alle druckwegoptimiert und transportieren das Papier mit 10 (SD/SG) bis 12 (SR) Zeilen pro Sekunde. Diese Geschwindigkeiten gelten natürlich nur für den Normalschrift-Modus, dessen Aussehen etwa dem des Epson FX-80 entspricht. Jede Veränderung der Schrift wirkt sich, wie bei allen Druckern dieses Konstruktionsprinzips, allerdings auf die Schreibgeschwindigkeit aus.

## Typenraddrucker eingebaut

Bislang ließen sich mit der Proportionalschrift die besten Schriftbilder erzeugen. Bei der neuen Star-Generation wurde der ebenfalls vorhandene Proportional-Modus durch eine besondere Drucktechnik erweitert. Sie nennt sich NLQ-Schrift. Die drei Buchstaben NLQ stehen dabei für »Near Letter Quality« oder auf gut deutsch für Briefqua-lität oder Schönschrift. Hinter diesem Zauberwort versteckt sich ein Zeichensatz, dem eine 17 x ll-Zei-chenmatrix zugrunde liegt. Der Druckkopf fährt dabei nicht nur einmal, sondern zweimal über die Zeile und setzt jedes Zeichen aus zwei Teilen zusammen. Diese entweder über einen gut erreichbaren Schalter (wie alle anderen Schalter auch) oder aber softwaregesteuert einstellbare Schrift setzt in dieser Preisklasse Maßstäbe der Druckqualität bei Matrixdruckern, wie sie bisher nur von Typenraddruckern bekannt waren (Bild 2). Zwar mit deutlich verlangsamter Druckgeschwindigkeit, aber dennoch schneller als die meisten Typenraddrucker, kann das Resultat dieser Neuerung als kleine Sensation bezeichnet werden.

Endlich wird es möglich mit ein und demselben Gerät sowohl schnelle Listings, hochauflösende Grafiken und Schriftstücke mit Briefqualität zu erstellen. Damit aber nicht genug der Besonderheiten. Ein 2 KByte großer Pufferspeicher, der entweder zum Speichern eigener Zeichensätze oder als Eingabepuffer dient, sorgt dafür, daß wirklich jedes nur erdenkliche Zeichen gedruckt werden kann. Wer will, entwirft so seine eigenen Zeichensätze (beispielsweise andere Schriften oder wissenschaftliche Zeichen) bis hin zu ägyptischen Hyrogly-phen. Als Papier kann bei allen Funktionen entweder Einzelblatt oder Endlospapier verwendet werden.

## Drei (un)gleiche Brüder

Alle drei Drucker der neuen Generation sind sich sehr ähnlich. Eigentlich sind es sogar sechs Brüder, denn alle drei Geräte sind auch unter der Bezeichnung SG-15, SD-15 und SR-15 erhältlich. Sie sind dann in der Lage, Papier in einer Breite von bis zu 38 Zentimetern, gegenüber 25 Zentimetern bei den 10er-Versionen zu verarbeiten. Trotzdem sind Unterschiede auch zwischen den einzelnen Geräten vorhanden, die unterschiedliche Preise rechtfertigen. Wichtigstes Unterscheidungsmerkmal ist die Druckgeschwindigkeit. Daneben gibt es Verschiedenheiten im technischen Aufbau. Das kleinste Modell arbeitet mit Farbbandrollen, die beiden größeren verwenden Farbbandkassetten. Der Traktorantrieb ist bei den beiden kleineren Modellen anders konstruiert als beim Spitzenmodell SR-10. SD-10 und SG-10 verwenden Traktorräder, die über der Druckwalze angeordnet sind. Beim SR-10 ist der Antrieb für Endlospapier in die Druckwalze integriert. Der Vorteil dieses Konzeptes ist zum einen die flachere Bauart und zum anderen eine komfortablere Handhabung bei der Papierjustage und -entnähme. Zusätzlich wird der beim SR-10 ebenfalls vorgesehene automatische Papiereinzug möglich. Außer zwei zusätzlichen Tasten für Druckunterbrechung und Papiervorschub ist der beim SR-10 mögliche Rückwärtstransport des Papiers letzter großer Unterschied zu den kleinen Brüdern.

## Anschluß sichergestellt

Die Anschlußfähigkeit an möglichst viele Computertypen ist eines der Hauptmerkmale der neuen Star-Generation. Zum Anschluß an den IBM-PC wurde sogar ein eigener IBM-Modus installiert. Die Konstrukteure haben sich weiterhin entschieden, die Drucker serienmäßig mit einer Centronics-Schnittstelle auszustatten und Interfaces für verschiedene Computer als Option (RS 232, Apple, Commodore, IEEE-488, Atari) anzubieten. Wir haben natürlich das völlig neu überarbeitete Commodore-Interface getestet. Das Interface wird am seriellen Bus des C 64 und an der Centronics-Schnittstelle des Druckers angeschlossen. Das Interface wurde so konstruiert, daß es die Vorteile aller Commodore-Drucker (Grafikfähigkeit des MPS 801, Textformatierung des MPS 802) vereinigt und zusätzlich die Fähigkeiten des Star-Druckers selbst nicht einschränkt. Sogar Hardcopy-Routinen wie sie von Supergrafik 64 und Simons Basic verwendet werden, funktionieren, ohne daß eine spezielle Maßnahme vor dem Druck ergriffen werden muß. Auch alle anderen Programme, die mit der Grafik der MPS 801-Drucker arbeiten, funktionieren einwandfrei. Trotzdem braucht der Anwender nicht auf die Vorteile, über die der Drucker selbst verfügt, zu verzichten. Der einmal eingestellte deutsche Zeichensatz bleibt, neben allen Commodore-Grafikzeichen, in vollem Umfang erhalten. So können Programmlistings und Briefe mit deutschen Umlauten hintereinander ausgedruckt werden, ohne daß auch nur ein Sonderbefehl notwendig wird.

Als positiv ist der Weg zu beurteilen, der bei der Darstellung der Commodore-Steuerzeichen in einem Programmlisting gewählt wurde. Das Interface übersetzt alle Steuer-Codes in ähnlicher Weise wie die in diesem Heft abgedruckten Programmlistings. Die Steuerzeichen werden als Klarschriftübersetzung des jeweiligen Zeichens ausgedruckt.

## Die neue Referenz

Die Leistungsmarken der neuen Star-Drucker sind derzeit noch unübertroffen. Mit einem Preis von 1195 Mark dürfte der SG-10 (Bild 3) die derzeit wohl beste Empfehlung für den Commodore 64 sein. Der SD-10 mit einem Preis von 1595 Mark bietet dem Anwender, bei sonst gleicher Leistung, eine um 40 Zeichen pro Sekunde gesteigerte Druckgeschwindigkeit. Er ist deshalb auch für größere Textmengen geeignet. Der SR-10 liegt mit einem Preis von 2150 Mark sicher schon etwas außerhalb des Heim-Bereichs. Mit seinen überlegenen Fähigkeiten und der sehr hohen Druckgeschwindigkeit von 200 cps ist dieses Gerät wahrscheinlich der hauptsächlich kommerziellen Verwendung vorbehalten. Die neue Star-Generation ist zukunftsorientiert. Sie paßt sowohl zum C 64 als auch zum neuen C 128. Durch das in jeder Hinsicht gelungene Interface werden die neuen Star-Drucker sogar zu den besten »Commodore-Druk-kern«, die es bisher gab. Der SG-10 ist dank seiner Flexibilität und der einmaligen NLQ-Fähigkeit unsere neue Referenz in dieser Preisklasse.

(Arnd Wängler/aa)

# Zu neuen Horizonten

> Centronics ist nicht nur eine Schnittstelle, sondern auch ein Drucker-Hersteller. Mit dem H80A stellen wir einen Drucker der gehobenen Klasse vor.

Als die Techniker von Centronics für ihre Drucker eine parallele Schnittstelle entwarfen, konnten sie noch nicht wissen, welchen Erfolg ihre Arbeit haben würde. Mittlerweile hat sich die Centronics-Norm neben der RS 232-Schnittstelle weltweit durchgesetzt. Zum Glück wurde diese Schnittstelle von anderen Herstellern akzeptiert und ein Schnittstellenchaos verhindert. Kompromißlos haben die Konstrukteure des Horizon versucht, die Leistungen des Druckers den Ansprüchen der Kunden anzupassen. Dazu gehören natürlich mehrere Schriftarten, Grafikfähigkeit und Bedienungsfreundlichkeit. Für die Textverarbeitung spendierte Centronics dem Horizon eine spezielle Schriftart. Sie nennt sich Near-Letter-Quality-(NLQ-) Schrift und stellt das von Matrixdruckern bisher gewohnte Schriftbild in den Schatten. Die NLQ-Schrift (Schönschriftmodus) des Horizon basiert auf einer 23 x 9 Zeichenmatrix. Da der Horizon ein 9-Nadel-Matrixdrucker ist, druckt er im NLQ-Modus immer zweimal über eine Zeile. Beim zweitenmal jedoch leicht versetzt, um eine höhere Auflösung zu erreichen. Trotzdem bleibt der Horizon ein sehr schneller Drucker. Das Handbuch nennt eine Geschwindigkeit von 160 Zeichen pro Sekunde im Normalmodus. Das ist genau der gleiche Wert wie er vom Epson FX-80 erreicht wird. Wer von den beiden ist aber tatsächlich schneller? Wir haben die Probe gemacht. Beide Drucker hatten unter gleichen Bedingungen (Vizawrite 64, Kabelinterface) den gleichen Text von vier Seiten Länge auszudrucken. Das Testergebnis warüberraschend: Zweivorsorglich bereitgelegte Stoppuhren waren überflüssig, denn der Horizon schlug den Epson um Längen. Als der Horizon die letzte Zeile druckte, lag der Epson fast eine Seite zurück. Trotzdem stimmen die Geschwindigkeitsangaben in beiden Handbüchern. Der Unterschied erklärt sich aus dem schnelleren Papiertransport und der optimalen Druckkopfbewegung des Horizon.

Der Horizon ist ein vielseitiger Drucker, der die verschiedensten Papierarten verarbeiten kann. Vorgesehen sind Einzelblatteinzug und Endlospapier mit Traktorantrieb. Der Traktor ist hinter der Druckwalze versenkt und gut zugänglich. Das Konstruktionsprinzip, Papier um die Druckwalze zu schieben statt es zu ziehen, hat zwei Vorteile: Zum einen läßt sich das Papier leicht justieren, zum anderen kann es direkt oberhalb des Druckkopfes abgerissen werden. Im hinteren Teil des Druckergehäuses ist eine Vertiefung zum Einlegen einer Endlos-Papierrolle angebracht.

Wie bei fast allen Druckern können auch beim Horizon viele Druckfunktionen mit Hilfe von Schaltern eingestellt werden. Auf insgesamt drei DIL-Leisten (DIL = Dual in Line) besitzt der Horizon genau 20 Schalter. Neben den üblichen Funktionen wie Auto-Line-Feed und den internationalen Zeichensätzen, wird hier die Art der Schrift eingestellt, die beim Einschalten zur Verfügung stehen soll.

Der Horizon wird, wie die meisten Drucker, mit ESC-Befehlen und Steuerzeichen programmiert. Ein reichhaltiges Spektrum verschiedener Befehle zur Einstellung der Schriftarten, Formatsteuerungen (Tabs, linker und rechter Rand, Zeilenabstände) und für den Grafikbetrieb stehen zur Verfügung. Es sind sogar vier verschiedene Grafik-Modi mit Punktdichten von 60 bis 240 Punkten pro Inch (1 Inch = 2,54 Zentimeter) vorhanden.

Zum Laden eines eigenen Zeichensatzes mit 9 x 11 Punkte-Zeichenmatrix besitzt der Horizon einen 2 KByte großen Pufferspeicher. Da der Speicher auf insgesamt 8 KByte erweitert werden kann, besteht sogar die Möglichkeit, eigene Zeichensätze in NLQ-Qualität zu programmieren. Der Horizon verfügt über Leistungen, mit denen er allen Ansprüchen gerecht wird: Es stehen viele mischbare Schriftarten zur Verfügung. Sogar eine Propor-tional-Schrift, bei der alle Zeichenabstände automatisch ausgeglichen werden.

### Anschluß on den C 64

Der Horizon wurde so konstruiert, daß er mit möglichst vielen Computern zusammenarbeitet. Möchte man ihn an einen C 64 anschließen, kommt man um die Anschaffung eines Interfaces nicht herum. Will man in den Genuß der Commodore-Grafikzeichen, reverser Schrift und der Steuerzeichen in einem Programmlisting kommen, wird die Anschaffung eines Hardware-Interfaces notwendig. Ein solches Interface wird bereits von der Firma Wiesemann angeboten.

## Rundum gelungen

Mit seiner hohen Druckgeschwindigkeit bei relativ niedrigem Geräuschpegel (60 dBA) ist der Horizon ein echter Profi. Der größte Nachteil des Horizon ist sein relativ hoher Preis von 2 050 Mark. Dazu kommen die Kosten für ein Interface. Dafür ist der Horizon aber auch ein hochwertiges Qualitätsprodukt, das seinem Besitzer gute Dienste leistet.

(Arnd Wängler/hm)

Info: Centronics Data Computer, Lyoner Str. 44-48, 6000 Frankfurt 71, Tel. (0 69) 6 66 67 48

# Beeindruckend: D-80X

> Gute Drucker müssen nicht teuer sein. Der D-80X überrascht durch sehr gute Schriftqualität und viele Anschlußmöglichkeitenoei günstigem Preis.

Eigentlich ist der Matrixdrucker D-80X (Bild 1) ein alter Bekannter. Schon kurz nach der ersten Druckprobe war sich die Redaktion einig: »Dieses Schriftbild hatten wir doch schon mal!«. Eine nähere Untersuchung der Druckmechanik schaffte Klarheit. Sowohl der Druckkopf, als auch der Druckmechanismus sind mit dem des Commodore MPS 802 identisch. Die Ähnlichkeit ist schnell erklärt, wenn man etwas hinter die Kulissen der Elektronik-Branche schaut. Dort ist es durchaus üblich, Teile großer Zubehörlieferanten (meist in Fernost) einzukaufen, in eigene Entwicklungen einzubauen und das Ganze dann mit neuem Namen zu verkaufen. So wird beispielsweise das 1541-Laufwerk von Alps-Elektronik, die auch Alpine Autoradios fertigen, an Commodore geliefert. So ist eine gewisse Verwandtschaft von MPS 802, Decam D-80X, Mannesman Tally und Shinwa SP-80 zu erkennen. Damit soll aber nicht gesagt sein, daß es keine Unterschiede zwischen diesen Druckern gibt. Im Gegenteil, ein Mercedes mit Bosch-Zündung ist ja auch etwas anderes als ein Golf mit Bosch-Zündung. Die Druckmechanik setzt nur den Rahmen des Möglichen. Der Charakter eines Druckers wird aber erst durch die Firmware, der eingebauten Software auf EPROMs, bestimmt.

Hier liegt die Stärke des D-80X. Er wurde in Richtung größter Flexibilität konstruiert und programmiert. Dabei hatten die Entwickler ein scharfes Auge für das Marktgeschehen. Schon das Handbuch mit Beispielen in Commodore-Basic zeigt, wo der D-80X die größten Absatzchancen hat. Er ist in erster Linie für die Commodore-Computer konstruiert worden. Dies belegen seine Schnittstellen. Der D-80X ist mit insgesamt vier Schnittstellen ausgestattet, von denen drei eingebaut sind und über DIL-Schalter eingestellt werden. Je nachdem wie diese Schalter eingestellt sind, belegt der D-80X die eingebaute Centronics-Buchse mit einer anderen Schnittstellennorm. Es kann gewählt werden zwischen normaler Centronics-Schnittstelle mit ASCII oder CBM-Zeichensatz, einer IEEE-488 Parallel und einer IEC-seriellen Schnittstelle. Eine RS232 kann nachträglich eingebaut werden. Das bedeutet, daß der D-80X ohne zusätzliche Erweiterungen sowohl an die »großen« CBM-Serien, als auch an den seriellen Bus des C 64 direkt anschließbar ist. Einzige Maßnahme ist das Umlegen eines DIL-Schalters. Der Platz dieser Schalter ist allerdings eine Zumutung. Um sie zu erreichen, muß zuerst der Gehäusedeckel abgeschraubtwerden. Nach längerem Suchen findet man die beiden Schalter an entlegenen Ecken der Hauptplatine. Es wäre empfehlenswert, diese Schalter gleich ab Werk an der Gehäuserückseite anzubringen.

Der Anschluß an den C 64 ist so problemlos wie bei einem CBM-Drucker; das mitgelieferte Kabel wird einfach an das Diskettenlaufwerk oder direkt am Computer angeschlossen.

Welche Leistungen kann der Programmierer von einem mit 899 Mark relativ preisgünstigen Drucker erwarten? Eignet er sich für Grafikausdruck und Textverarbeitung gleichermaßen? Beim D-80X ist es leicht, diese Fragen mit einem deutlichen »Ja« zu beantworten. Neben dem vom MPS 802 bekannt guten Schriftbild mit echten Unterlängen bietet der D-80X viele Sonderfunktionen und Schriftarten (Bild 2).

## Von jedem das Beste

Die Konstrukteure haben bei der Programmierung des D-80X die Flexibilität der Hardware fortgeführt. Alle wichtigen Sonderfunktionen wie Unterstreichen, Schriftarten, Tabulatoren und Formatsteuerungen werden durch ESC-Befehle eingestellt. Die Syntax und Bedeutung der Befehle entspricht dabei im wesentlichen denen der Epson-Drucker. Zusätzlich wurden spezielle Codes zum Einstellen Commodore-spezifischer Funktionen definiert. Der re-verse Druck wird beispielsweise durch den CHR$-Code 18 erreicht. Das entspricht genau dem Wert, der auch auf dem Bildschirm für reverse Zeichen sorgt. Möchte man nun eine Zeile revers ausdrucken, genügt es, innerhalb der Anführungsstriche einer PRINT-Zeile auf die Tasten CTRL und 9 zu drücken. Einfacher geht es wirklich nicht mehr. Auf ähnliche Weise werden Doppeldruck, Fettschrift, komprimierte Schrift, Groß- und Kleinschrift sowie Sub-und Superscript eingestellt.

## Volle Grafikfähigkeit

Im Gegensatz zum MPS 802 ist der D-80X voll grafikfähig. Er besitzt sogar zwei verschiedene Punktdichten. Im ESC K-Modus arbeitet dieser 9-Nadel-Matrixdrucker mit 640 Punkten pro 7,5 Zeilen, beim ESC L-Modus sind es sogar 1280 Punkte pro 7,5 Zeilen. Ein lange gehegter Wunsch vieler Programmierer wird erfüllt, ja sogar übertroffen: Der D-80X besitzt auch im Commodore-Zeichensatz die deutschen Umlaute. Dafür mußte zwar auf einige Grafikzeichen verzichtet werden, der Verlust fällt aber normalerweise kaum auf. Leider entsprechen die Stellen, an denen die Umlaute einprogrammiert wurden, nicht denen der Standard-ASCII-Tabelle. Es kann deshalb leicht zu Problemen mit verschiedenen Textverarbeitungsprogrammen kommen, die keine Code-Zuweisung erlauben.

Hier wäre es vorteilhaft, wenn man nicht nur bei der Centronics-Schnittstelle, sondern auch bei der seriellen IEC-Schnittstelle, zwischen ASCII- und Commodore-Zeichensatz, wählen könnte. Wünschenswert wäre auch ein Linearkanal, bei dem alle Daten an den Drucker ohne irgend eine Umwandlung übermittelt werden.

## Vorbildlich und konkurrenzlos

Trotz einiger kleiner Schwächen ist der Decam D-80X der zur Zeit interessanteste, direkt an den C 64 anschließbare Drucker unter 900 Mark. Für den erstaunlich niedrigen Preis erhält man einen vielseitigen Drucker, der sowohl zum Listingausdruck als auch zur Grafik-und Textverarbeitung geeignet ist. Sein ausführliches Handbuch erleichtert auch dem weniger erfahrenen Programmierer das Kennenlernen dieses vielseitigen Druckers. Die vielen eingebauten Schnittstellen rüsten den D-80X schon heute bestens für kommende Computergenerationen. Der D-80X ist im wahrsten Sinne des Wortes »beeindruckend«.

(Arnd Wängler/hm)

Info: Decam GmbH, Postfach 12 32, 7505 Ettlingen, Tel. (0 72 43) 6 92 64, Preis 899 Mark.

# Marktübersicht: Matrixdrucker

> Ständig steigt das Angebot von Matrixdruckern für Heimcomputer. Ein Grund, den Drucker-markt zu durchleuchten und Ihnen eine Einkaufshilfe zu geben.

Immer mehr Besitzer von Heimcomputern entscheiden sich zum Kauf eines Matrixdruckers. Die Möglichkeiten dieser Drucker gehen vom einfachen Listingsdruck bis zur Korrespondenz in Schönschrift. Sie müssen also entscheiden, wozu Sie den Drucker verwenden wollen. Zum Druck von Listings gibt es inzwischen sehr günstige Geräte, deren Schriftbilder durchaus akzeptabel sind. Achten Sie darauf, daß der Drucker zu diesem Zweck auch die Grafikzeichen des C 64 beherrscht. Der Anschluß des Druk-kers kann auf verschiedene Arten erfolgen. Commodore-Drucker werden über den seriellen Bus des C 64 angeschlossen. Centronicskompatible Drucker haben einen parallelen 8 Bit breiten Eingang. Ein spezielles Interface ist also zusätzlich nötig. Der Preis dafür liegt zwischen 50 und 300 Mark.

Wollen Sie HiRes-Bilder des C 64 zu Papier bringen, muß der Drucker grafikfähig sein. Das heißt, seine Nadeln müssen einzeln ansteuerbar sein.

Zum Druck von langen Listings und viel Korrespondenz ist eine hohe Druckgeschwindigkeit von Vorteil. 30 Zeichen pro Sekunde, das hört sich beim Studieren von Katalogen recht schnell an, wird aber schon beim zweiten Ausdruck zur Langweilerei.

Die Geräuschentwicklung des Druckkopfes sollte nicht außer Acht gelassen werden. 70 dB(A) um Mitternacht sind für Mietwohnungen einfach zu laut.

Wie Sie sehen, Drucker ist nicht gleich Drucker. Ein hoher Qualitätsstandard muß zwar bezahlt werden, aber es gibt durchaus erschwingliche Drucker, die über eine hohe Druckqualität in den verschiedensten Schriftarten verfügen.

(hm)

# Der MPS 802 lemt deutsch

> Der MPS 802 ist als zuverlässiger Drucker mit ansprechendem Schriftbild bekannt. Leider kennt er keine deutschen Umlaute. Unser kleines Programm ändert das: Der MPS 802 lernt deutsch.

Die Geschichte des MPS 802 ist interessant und abwechslungsreich wie kaum eine andere. Entstanden ist er aus dem CBM 4022/4023 der für die PET-Generation geschaffen wurde und noch einen parallelen IEC-Bus (IEEE 488) besaß. Daraus entstand der 1526 (mit serieller Schnittstelle), der mit immer neuen Gerüchten über seine Fähigkeiten und seine Fehler überraschte. Von einem zweiten Modus war die Rede, und sogar von ei-nervollen Grafikfähigkeit. Wie aber jeder weiß, kann sowohl der 1526 als auch der MPS 802 Grafiken nur im »Zitter-Rumpel-Verfahren« erzeugen. Soll heißen, seine Grafikfähigkeit beschränkt sich auf ein einziges Zeichen, das ständig umprogrammiert wird. Seit der Hannover-Messe 1984 nennt sich der 1526 nun MPS 802 (Bild 1), ist aber rein technisch gesehen unverändert geblieben. Was neu ist, ist die sogenannte Firmware, oder um es gleich beim richtigen Namen zu nennen, das Betriebssystem. Es ist müßig, die vielen Fehler der verschiedenen 1526-Versionen aufzuzählen, beim MPS 802 sind sie jedenfalls ausge-merzt. Deshalb ist es auch für jeden Besitzer des 1526 empfehlenswert, sein Kernal-ROM durch das des MPS 802 zu ersetzen, es funktioniert einwandfrei. Der Austausch ist ein einfaches Unterfangen, aber dazu später mehr. Schauen wir uns zunächst einmal die Hardware des MPS 802 an. Gesteuert wird das kleine Druckwunder durch einen zum 6510 softwarekompatiblen 6504-Pro-zessor. Außer dem 6504 befinden sich noch zwei 6532-RIOT (RAM In-put/Output Timer) und eine 6522-VIA (Variable Interface Adapter) auf der Hauptplatine. Das Betriebssystem befindet sich in einem 8-KByte-EPROM vom Typ 2764, wie er überall im Handel erhältlich ist. Im einzelnen ist die Speicheraufteilung des MPS 802 in Bild 2 dargestellt.

Genug der Theorie. Im praktischen Betrieb fällt bald schon das Fehlen der deutschen Umlaute schmerzlich auf. Dem kann abgeholfen werden. Nachstehend abgedrucktes Programm (Listing 1) verändert in der schon vom Hypra-Per-fekt (Ausgabe 4/85) bekannten Overlay-Methode das Original-Betriebssystem. Dazu müssen wir allerdings erst einmal in den Besitz des Kernals kommen. Lösen Sie die vier Schrauben des Gehäuses und nehmen Sie (nach dem Farbband) vorsichtig das Gehäuseoberteil ab (Vorsicht! Garantieverlust bei neuen Geräten). Nachdem Sie sich gemerkt haben, wie das Verbindungskabel vom Deckel zur Hauptplatine eingesteckt war, können Sie auch dieses entfernen. Auf der linken, hinteren Seite des Druckers ist eine ebenfalls abschraubbare Verkleidung aus Blech angebracht — weg damit. Jetzt braucht nur noch der 2764-EPROM in der rechten hinteren Ecke der Platine (Bild 3) geortet und vorsichtig herausgehebelt werden. Die Besitzer eines EPROM-Programmiergerätes wissen jetzt sicherlich schon was kommt — das EPROM wird ausgelesen und abgespeichert. Im folgenden wird deshalb davon ausgegangen, daß der Inhalt des MPS 802-EPROMs von $6000 bis $7FFF im Speicher des C 64 steht.

Die Zeichenmatrizen, daß heißt die Informationen über das Aussehen der einzelnen Zeichen, stehen nun im Bereich von $6400 bis $69FF. Aber in welcher Form? Da der MPS 802 einen Druckkopf mit 8 Nadeln besitzt, besteht jedes Zeichen aus 8 mal 8 Punkten. Jedes Zeichen belegt also 8 Byte. Jedes Byte definiert eine Spalte des Zeichens, da die Nadeln im Druckkopf senkrecht angebracht sind. Ist ein Bit gesetzt, so wird die entsprechende Nadel beim Druck des Zeichens aktiviert. Steht das entsprechende Bit auf Null, wird natürlich auch kein Punkt gedruckt. Das Leerzeichen besteht beispielsweise aus acht mal Byte 0. Etwas deutlicher wird das Ganze, wenn wir uns einmal das Zeichen »A« genauer anschauen. Die Zeichenmatrix für das A steht von $6408 bis $640F.

Ein Monitor liefert uns für diesen Bereich die Werte:
3E 50 90 90 50 3E 00 00

Jede Hexadezimalzahl repräsentiert die Summe einer Spalte (Bild 4). Man erkennt, welcher Zusammenhang zwischen der Hexadezimalzahl (Bitmuster) und der gedruckten Matrix besteht. Das Programm aus Listing 1 verändert die vorhandene Zeichenmatrix so, daß es die deutschen Umlaute an Stelle einiger Grafikzeichen zusammen mit der deutschen Version von Vizawrite druckt. Außerdem werden die Steuercodes für Breitschrift von CHR$(1) auf CHR$(14) und die Rückstellung auf Normalschrift von CHR$(129) auf CHR$(16) geändert, was gebräuchlicher ist. Wer aber dennoch selber den Zeichensatz abändern möchte, findet die einzelnen Zeichensätze an folgenden Speicherstellen:

Von $6400-$6407 steht der Klammeraffe. Darauf folgen die Großbuchstaben von A—Z ($6408— $34DF). Ab $34E0 kommen die Sonder- und Grafikzeichen. Die Kleinbuchstaben beginnen bei $6808 (mit dem kleinen a). Leider hat der Drucker kein RAM, mit dem man eine Veränderung des Zeichensatzes ausprobieren könnte. Beim Entwerfen des eigenen Zeichensatzes ist ferner auf folgendes zu achten: Der Drucker führt nach dem Einschalten einen Selbsttest durch. Dabei wird auch das ROM geprüft, indem die Prüfsumme über den Bereich $6400 bis $7FFF ermittelt wird. Listing 2 dient in diesem Fall dazu, die Prüfsumme eines bereits veränderten, im Bereich von $6000 bis $7FFF stehenden ROMs anzupassen. Diese Anpassung ist natürlich nur dann notwendig, wenn eigene Veränderungen vorgenommen wurden.

Die noch verbleibenden Arbeiten sind schnell durchgeführt. Mit einem EPROM-Programmiergerät wird ein 2764-EPROM mit dem Inhalt der Speicherstellen $6000 bis $7000 gebrannt. Das neue Betriebssystem wird dann anstelle des alten in den Drucker eingesteckt (Kerbe auf Kerbe). Ob alles programmgemäß abgelaufen ist, läßt sich am einfachsten mit dem Selbsttest feststellen. Sollten Sie nun unter den vielen Zeichen tatsächlich die deutschen Umlaute finden, dann dürfen Sie sich ruhig ein kleines Päuschen genehmigen, denn Sie haben nun etwas Einzigartiges: Den MPS 802 in deutscher Version.

(Ernst Schöberl/Arnd Wängler/gk)

# Die Videowerkstatt

> Mit Computer, Kamera und Video-Digitizer erschließen sich neue Dimensionen — der C 64 lernt das »Sehen«. Ungeahnte Möglichkeiten stecken hinter dieser Technik.

Der Video-Digitizer von Köhler (Österreich) ist ein kleines, in ein Kunststoffgehäuse eingebautes Modul, das am User-Port des C 64 angeschlossen wird. Von dort erhält es auch seine Stromversorgung. Einziger zusätzlicher Anschluß ist eine Cinch-Buchse auf der Oberseite des Moduls. Mit einem entsprechenden Kabel wird hier ein Norm-Videosignal (zirka 1 Vss an 75 Ohm, BAS/FBAS-Signal) eingespeist.

An dieser Buchse lassen sich Geräte wie beispielsweise ein Videorecorder oder eine Videokamera (eventuell unter Zwischenschaltung des Recorders) anschließen. Auch der Videoausgang eines Fernsehgerätes ist geeignet. Wir haben das VD 64 mit einer Videokamera und einem Videorecorder getestet.

### Videorecorder anschließbar

Der C 64 wird durch ein kleines Steuerprogramm von der mitgelieferten Diskette auf den Empfang der Bildinformationen vorbereitet. Dieses Programm sorgt gleich nach dem Start für die automatische Ein-pegelung auf das ankommende Signal. Schon kurz nach diesem Meßvorgang steht das erste Bild auf dem Monitor. Das VD 64 arbeitet extrem schnell und braucht deshalb zur Bildabtastung kein Standbild. Das lästige Anhalten des Videorecorders oder die Montage der Videokamera auf einem Stativ kann deshalb ganz entfallen. Das Bild wird in einem Durchlauf (zirka 20 Millisekunden) abgetastet und in den Multicolor-Modus des C 64 übertragen. Dieser Vorgang dauert nur etwa 0,4 Sekunden. Damit ergibt sich für den Betrachter der Grafik eine Wiederholungsrate von zwei Bildern pro Sekunde. Die Bildabtastung läuft dann so lange kontinuierlich ab, bis die Signalübertragung mit der STOP-Taste »eingefroren« wird. Das Bild kann nun durch einige interessante Befehle modifiziert werden. So verändern die Funktionstasten die Farbsättigung der gerade ausgewählten vier Farben. Im Differenzmodus wird der jeweilige Bildinhalt vom vorhergegangenen Bild subtrahiert. Dadurch treten bewegte Objekte besonders klar hervor. Sogar eine komplette Invertierung Qeder helle Punkt wird dunkel und umgekehrt) des Bildes gehört zu den Fähigkeiten des VD 64-Steu-erprogramms.

### Video in Multicolor

Die Konstrukteure des VD 64 haben den Multicolor-Modus des C 64 trotz seiner geringeren Auflösung (200 x 160 Punkte) gegenüber dem High-Resolution-Modus (200 x 320 Punkte) gewählt. Dafür stehen entweder vier verschiedene Graustufen, oder ersatzweise, vier Farben zur Verfügung. Durch geschickte Auswahl der Farben entstehen beeindruckende Effekte. Manche Bilder sehen wie vom Computer selbst entworfen aus, andere gleichen dem Original in verblüffender Weise. Damit diese Video-Kunstwerke aber auch einen dauerhaften Charakter bekommen, stehen sowohl eine Lade-/Speicheroption, als auch eine Hardcopy-Routine zur Verfügung. Die Hardcopy-Routine läßt die Einstellung verschiedener Druckertypen zu. Bei der getesteten Version konnten per Auswahlmenü die Drucker MPS 802, MPS 801, Hewlett Packard Ink Jet und der Commodore 4023 eingestellt werden. Weitere Anpassungen sind nach Angaben des Herstellers bereits in Arbeit.

### Kompatibel zu Koala-Bildern

Der Clou des VD 64 ist aber das Format, in dem er seine Bilder ablegt. Es entspricht genau dem des Koala-Painter. Hier eröffnet sich eine unerschöpfliche Palette von Bearbeitungsfunktionen. Die Bilder können nachträglich mit dem Koala-Painter editiert oder farblich verändert werden; mit allen 16 Farben. Auch das Mischen verschiedener Bildbestandteile erweitert das Anwendungsspektrum um ein Vielfaches. Auf diese Weise können Sie beispielsweise beliebig viele »Zwillinge« ihres Motivs herstellen oder dem ganzen Bild einen neuen Hintergrund geben. Die Bilder können selbstverständlich auch in eigene Programme eingebaut oder mit einem zum VD 64 dazugehörigen Programm in der Art einer Diavorfüh-rung gezeigt werden.

Der VD 64 ist mehr als nur eine sinnvolle Ergänzung des C 64. Es ist ein Vorbote einer zukünftigen Entwicklung, in der fast alle elektronischen Medien vermehrt miteinander verknüpft werden. Es ist durchaus vorstellbar, daß die mit dem VD 64 aufgenommenen Bilder über das Telefonnetz übertragen werden. Wie vielfältig die Anwendungsgebiete des VD 64 sind, läßt sich auf den ersten Blick kaum abschätzen. Wie man den VD 64 letztendlich einsetzt und welches Bild-Motiv gewählt wird, ist reizvolle Aufgabe des Anwenders.

(Arnd Wängler/hm)

Bezugsquelle: Merkens, Fuchsstraße 6A, 6231 Schwalbach, Tel. (0 6196) 8 30 30 + 30 26, Preis 575,— + Mehrwertsteuer

# Mit 5 Mark zu neuen Dimensionen

> Völlig neue Klangdimensionen schafft der C 64 an einer Stereoanlage. Die neue Spielegeneration mit ihrer hervorragenden Tonuntermalung gewinnt stark an Reiz. Zusätzlich können Sie nun Ihre Kompositionen mit bestmöglicher Qualität aufzeichnen.

Mit etwa 5 Mark läßt sich ein Anschlußkabel bauen, mit dem Sie den C 64 an Ihre HiFi-Anlage anschließen können. Mit 130 Watt auf jeder Seite wird nicht nur Ghostbusters zu einem neuen Erlebnis. Denn Lautsprecher von Fernseher und Monitor (falls überhaupt einer eingebaut ist) haben in der Regel nur eine bescheidene Tonqualität.

Für den geplanten Anschluß wird der Audio/Video-Port des C 64 und die DIN-Buchse der Stereoanlage oder des Verstärkers hergenommen. Sollte Ihr Verstärker nur Chinch-Buchsen haben, müssen Sie die Pins 3 und 5 des Audio-Steckers einfach durch zwei Chinch-Stecker ersetzen. Die Beschaltung der Vi-deo/Audio-Buchse des C 64 zeigt Bild 1. Entscheidend sind die Pins 2 (Masse) und 3 (Tonausgang). Sollten Sie einen älteren C 64 mit 5poligen Video/Audio-Anschluß haben, ist das kein Grund, das Handtuch zu werfen. Die Belegung der Pins 1 bis 5 beider Buchsen stimmt nämlich völlig überein. Die Beschaltung der DIN-Buchse Ihrer Stereoanlage sehen Sie ebenfalls in Bild 1. Die wichtigen Anschlüsse sind die Pins 3 (Wiedergabe links), 5 (Wiedergabe rechts) und 2 (Masse). Damit der Monoausgang des C 64 beide Stereo-Kanäle ansteuern kann, wird das Tonsignal des C 64 gleichzeitig auf Pin 3 und 5 des Stereosteckers gelegt.

Aber nun genug der Theorie. Legen Sie den Lötkolben schon mal bereit. Als Bauteile für das Adapterkabel in Bild 2 brauchen Sie zwei 5polige Diodenstecker, bei denen die fünf Pins einen Halbkreis bilden und ein abgeschirmtes 2adriges Kabel.

Haben Sie einen Monitor am C 64 angeschlossen, müssen Sie einen Verteiler wie in Bild 3 bauen, um die Video/Audio-Buchse des C 64 doppelt nutzen zu können. Zu diesem Zweck sollten Sie folgende Teile besorgen:

8polige Klein-Geräte-Kupplung 5poliger Diodenstecker 8poliger Klein-Geräte-Stecker 2- und 5adriges abgeschirmtes Kabel.

Die Klein-Geräte-Kupplung sieht von vorne aus wie die Video-/Audio-Buchse des C 64. Hat Ihr C 64 noch die alte 5polige Buchse, sind alle 8poligen Bauteile durch 5polige zu ersetzen.

Haben Sie alle Teile vor sich auf dem Tisch liegen, kann's losgehen. Schneiden Sie das Kabel in die gewünschte Länge und isolieren Sie die einzelnen Leitungen ab. Die äußere Plastikhülle wird am einfachsten mit einem scharfen Messer entfernt. Schneiden Sie dazu etwa 3 cm vor Kabelende die Isolation ringsum vorsichtig ein, bis Sie auf die Abschirmung stoßen und ziehen unter Drehen die Isolation ab. Jetzt wird die Abschirmung aufgetrennt, verdrillt und die einzelnen Leitungen etwa 2 mm weit abisoliert.

Bevor Sie sich nun ans Löten machen, müssen noch die Gehäuse der Stecker auf das Kabel geschoben werden.

Nun können Sie die Drähte wie in Bild 2 oder 3 beschrieben anlöten. In den Schaltplänen sehen Sie die Anschlüsse von der Lötseite, wie das allgemein üblich ist. Pin 5 der Video/Audio-Buchse des C 64 sollte man mit Vorsicht genießen. Es ist der Toneingang des C 64 und führt direkt an den Sound-Chip. Wird hier unvorsichtigerweise eine Spannung angelegt, kann sich der SID schnell verabschieden. Die Verbindung zwischen Pin 3 und 5 des Audio-Steckers wird am einfachsten mit einer Lötbrücke hergestellt. Der Draht wird dazu etwas länger abisoliert und an beide Pins angelötet. Da die Kabelabschirmung nur computerseitig ans Steckergehäuse angelötet werden soll, wurde in den Schaltplänen darauf verzichtet.

Das U-förmige Blech am Steckerende dient zur Zugentlastung der Lötstellen, um ein Ausreißen zu verhindern. Das Kabel wird dazu nach dem Anlöten einfach mit einer kleinen Zange in dieses Blech-U eingequetscht und dadurch fest mit dem Stecker verbunden.

### Anschluß an Chinch-Buchse

Hat Ihr Verstärker keinen DIN-Eingang, sondern Chinch-Buchsen, dann löten Sie einfach anstelle von Pin 3 und 5 im Audiostecker zwei Chinch-Stecker (Eingang linker und rechter Kanal) an, indem Sie das Kabel von einem Stecker zum zweiten weiterführen. Masse liegt bei einem Chinch-Stecker immer auf dem äußeren Kontakt.

Nach einer Schlußüberprüfung des Adapterkabels steht der neuen Klangdimension nichts mehr im Wege. Bevor Sie aber nun vor Begeisterung Ihren Lautstärkeregler in die rechte Anschlagposition bringen und den Staub von den Lautsprechermembranen schütteln, sollten Sie auf die Uhr sehen. Ein Kopfhörer ist vielleicht der günstigere Schallwandler.

(hm)

# Alter Joystick am C 16

> Inkompatibilität bestimmt den C 16 — auch bei den Joystickports. Mit ein wenig Geschick läßt sich jeaoch ein Adapter herstellen.

Ein recht geschickter Schachzug ist Commodore mit seinen Joystickports am C 16 gelungen. Denn bisher vertreibt nur Commodore die passenden Joysticks. Und diese bestechen nun wirklich nicht gerade durch ihre mechanische Qualität.

Wer nun einen guten, aber teureren Joystick, oder ganz einfach einen älteren am C 16 benutzen will, der benötigt einen Adapter. Eine preiswerte Lösung ist der Selbstbau. Die Herstellung ist recht einfach:

Sie brauchen nur etwas Kabel und zwei Stecker sowie einen 9-Pol-Canon-Stecker für den Joystick und einen 8-Pol-Micro-Din-Stecker für den Computer.

Beide Stecker erhalten Sie in jedem guten Elektronikfachgeschäft. Die beiden Stecker müssen Sie dann nur gemäß der Abbildung verbinden, und schon können Sie alle anderen handelsüblichen Joysticks am C 16 verwenden.

(Peter Schneider/ev)

# User-Port-Display

> Eine kleine elektronische Schaltung setzt den User-Rort ins richtige Licht. Sie zeigt auch, wie der User-Pört für Steuerungsaufgaben eingesetzt werden kann.

Die Computer VC 20 und C 64 haben als Verbindung zur Außenwelt an der Gehäuse-Rückseite den User-Port. Dieser 8 Bit breite parallele Port besteht aus acht programmierbaren Anschlüssen PB0 bis PB7, die als Eingabe-oder Ausgabeleitung geschaltet werden können. Weiterhin stehen noch die Eingabe-Handshakelei-tung FLAG2 (CA1 beim VC 20) und die Ausgabe-Handshakeleitung PA2 (VC 20: CB2) für diese acht Leitungen zur Verfügung.

Diese Anschlüsse sind vom User-Port aus mit dem universellen Inter-face-Baustein (VIA) 6522 direkt verbunden (VIA = Versatile Interface Adapter). Sie erlauben den Anschluß von externen Schaltungen und Geräten. Das User-Port-Display, das noch als universeller Ein-/Aus-gabe-Adapter verwendet werden kann, wird an dieser Platinen-Stek-kerleiste am besten über einen Platinenstecker der Bezeichnung 251-12-50-170 angeklemmt. Die einzelnen Port-Leitungen PB0 bis PB7 haben eine bestimmte binäre Wertigkeit, wie in Tabelle 1 gezeigt. Die Belegung des User-Ports entnehmen Sie bitte dem Handbuch zum C 64. Die Handshakeleitung FLAG2 (CA1) kann bei der Eingabe, die Handshakeleitung PA2 (CB2) bei der Ausgabe von Datenwörtern als Quittierungssignal benutzt werden.

### Die Schaltung des User-Port-Displays

Zur Überwachung der logischen Zustände bei der Programmierung der einzelnen Ports wurde die in Bild 1 gezeigte Schaltung entworfen. Dadurch werden die Eingabe- und Ausgabe-Datenwörter an den Ports PB0 bis PB7 durch Leuchtdioden (LEDs) sichtbar gemacht. Gleichermaßen werden die logischen Zustände der Handshakeleitungen angezeigt. Eine Stückliste für den I/O-Adapter (Input/Output) finden Sie in Tabelle 2. High-Pegel, also logisch »Eins«, werden durch Leuchten, Low-Pegel (logisch »Null«) durch Verlöschen der entsprechenden LED signalisiert.

Die Schaltung besteht aus zehn Invertern (2 x 74LS04, Bild 2), an die über je einen Widerstand von 330 Ohm die LED an + 5 V angeschlossen sind. Ein Inverter kehrt das Eingangssignal um. Aus + 5 V werden 0 V, aus 0 V werden + 5 V.

### Spannungsversorgung und Aufbau

Zur Spannungsversorgung für die Anzeigeeinheit wird die an Pin 2 des User-Port anliegende Spannung von +5 V benutzt. Es ist darauf zu achten, daß der Stromverbrauch der gesamten Anordnung 100 mA nicht übersteigt. In Fällen größerer Stromentnahme wird ein separates Netzteil erforderlich.

### Aufbau der Schaltung

Da es sich bei dieser Schaltung um eine relativ einfach aufzubauende Einheit handelt, wurde auf ein Platinenlayout verzichtet. Statt dessen kann die Schaltung auf eine Lochrasterplatte (Rastermaß: 2,51 mm) aufgebaut werden. Die entsprechenden Verbindungen werden dann mit Drahtverbindungen ausgeführt. Entweder durch Löten von Drahtstücken, oder mit Wire-Wrapping. Bei der letzteren Technik umwickelt man mit einer speziellen Maschine die Anschlußbeine mit Kupferlackdraht und stellt so die Verbindungen her. Die Anzeigeeinheit und die 13polige Buchsenleiste kann in einem kleinen Gehäuse untergebracht werden. Über ein 12adriges Kabel wird nun der User-Port mit dem Display verbunden. Zusätzlich ist es sinnvoll, die + 5-V-Spannung und die Masse auf separate Buchse zu legen, um ein eigenes Netzteil anschließen zu können. Pin 2 des User-Ports muß dann natürlich abgeklemmt werden.

## Die Programmierung des User-Ports

Wie bereits erwähnt, lassen sich die acht Port-Leitungen als Ein-/Aus-gabeleitungen programmieren. Nach dem Einschalten des Computers werden alle Ports automatisch auf Eingabe geschaltet. Dies läßt sich leicht daran erkennen, daß alle acht LEDs des User-Port-Displays leuchten. Über das Datenrichtungsregister, Adresse DDRB = 56579 (VC 20 = 37138), lassen sich die einzelnen acht Ports so programmieren, daß sie entweder als Ein- oder Ausgabeleitung arbeiten. Mit dem Befehl POKE DDRB,X wird die Programmierung vorgenommen. Hierbei ist »X« eine Dezimalzahl zwischen 0 und 255. Die der Dezimalzahl entsprechende Binärzahl erscheint dann am User-Port an den Ausgängen PB0 bis PB7. In der Binärzahl stellt die logische »0« einen Eingabe-, die logische »1« einen Ausgabeport dar. Als logische Pegel liegen allerdings die invertierten Pegel an, da der C 64 und VC 20-Com-puter mit negativer Logik arbeitet; also High-Pegel bei logisch »0« und umgekehrt.

Mit POKE DDRB,255 werden alle acht Ports zu Ausgabeleitungen, da dezimal 255 in Binärdarstellung 11111111 ist. Die Programmierung mit POKE DDRB,0 ergibt entsprechend 00000000 und alle acht Ports sind Eingabeleitungen. POKEt man in die Speicherstelle DDRB die Dezimalzahl 240, so ergibt dies die Binärzahl 11110000. Dies bedeutet, daß die Ports PB0 bis PB3 Eingabeleitungen und die Ports PB4 bis PB7 Ausgabeleitungen sind. So lassen sich durch POKEn einer Zahl zwischen 0 und 255 in die Speicherstelle DDRB die jeweils gewünschten Ein-/Ausgabe-kombinationen einstellen.

### Die Ausgabe von Daten

Nachdem das Datenrichtungsregister auf Ausgabe programmiert ist, können die Daten über die Speicherstelle PRB = 56577 (VC 20: PRB = 37136) ausgeben werden. Der entsprechende Befehl hierzu lautet PO-KE PRB,X. Auch hier kann X eine Dezimalzahl zwischen 0 und 255 sein. Die entsprechende Binärzahl erscheint an den Ports und bringt die dazugehörigen LEDs zum Leuchten. High-Pegel bedeutet jetzt Aufleuchten der LED. Mit Listing 1 kann dies leicht überprüft werden. In Zeile 10 werden alle Ports PB0 bis PB7 auf Ausgabe geschaltet. In Zeile 20 erfolgt die Zahleneingabe (Zahl zwischen 0 und 255). In Zeile 30 wird diese Zahl in die Speicherstelle PRB gePOKEt und an den Ports als Binärzahl ausgegeben. Gleichzeitig stehen diese Signale an der 13poligen Buchsenleiste an, wo Interfaces für die vielfältigsten Schalt- und Kontrollaufgaben angeschlossen werden können.

### Die Ausgabe-Handshakeleitung

Mit der Ausgabe-Handshakelei-tung PA2 (VC 20: CB2) kann man die Ausgabe von Datenwörtern zu Steuerzwecken quittieren. So kann ein angeschlossenes Gerät durch diese Handshakeleitung zur Übernahme der Daten freigegeben werden.

Mit POKE 37148,220 wird an Port CB2 des VC 20 Low-Pegel, mit dem Befehl POKE 37148,255 High-Pegel gelegt. Beim C 64 sind dies die Befehle POKE 56576,147 für Low-Pegel und POKE 56576,151 für High-Pegel an Port PA2. Eine spezielle Anwendung bleibt dem Benutzer überlassen. Der Befehl kann in einem Programm an die Stelle eingefügt werden, wo er eine Schaltfunktion übernehmen soll. Listing 2 soll die Wirkungsweise von CB2 und PA2 veranschaulichen.

In Zeile 10 werden die Ports auf Ausgabe programmiert. In Zeile 20 wird die auszugebende Binärzahl als Dezimalzahl in die Speicherstelle PRB geschrieben. In Zeile 30 erfolgt dann der Quittungsbefehl. In diesem Fall wird ein Low-Pegel am Port PA2 oder CB2 ausgegeben. Nach dem Durchlauf einer Warteschleife in Zeile 40 wird PA2 (CB2) wieder auf High-Pegel zurückgesetzt, und die grüne LED leuchtet.

### Eingabe von Daten

Das Datenrichtungsregister wird zu diesem Zweck mit POKE DDRB,0 auf Eingabe programmiert. Dies wird deutlich durch das Aufleuchten der LED angezeigt. Die entsprechenden Ports können nun auf Low-Pegel gelegt werden und bilden hierdurch eine bestimmmte Binärkombination. Mit den LEDs läßt sich die eingestellte Binärzahl anschaulich ablesen. Über den Befehl PRINT PEEK(PRB) wird der logische Zustand an den Ports abgefragt und auf dem Bildschirm erscheint die Zahl 189.

Das nachstehende Programm verdeutlicht noch einmal diese Möglichkeit der Dateneingabe:
10 POKE DDRB,0
20 PRINT "Ausgabe des Datenwortes"; PEEK(PRB)
30 GOTO 20

In Zeile 10 werden die Ports auf Eingabe programmiert. In Zeile 20 werden die angelegten Daten eingelesen und auf dem Bildschirm angezeigt.

### Die Eingabe-Handshake-Leitung

Mit einem weiteren Befehl kann der Computer veranlaßt werden, das Basic-Programm anzuhalten und zu warten, bis eine Dateneingabe erfolgt ist. Hierzu ist die Eingabe-Handshake-Leitung CA1FLAG2 (VC 20: CA1) als Quittungssignal vorhanden. Bei einem Flankenwechsel von High nach Low werden die anliegenden Daten eingelesen. Mit Hilfe von Listing 3 läßt sich dieser Vorgang bewerkstelligen.

In Zeile 10 werden die Ports auf Eingabe programmiert. In Zeile 30 wird das Basic-Programm solange angehalten, bis der Flankenwechsel am Port FLAG2 (CA1) erfolgt. Danach wird das Programm wieder fortgesetzt, und in Zeile 40 das angelegte Datenwort auf dem Bildschirm angezeigt.

### Daten-Ein- und -Ausgabe kombiniert

Mit der Kombination von Daten-Ein- und Ausgabe können vielfältige Steuer- und Kontrollaufgaben gelöst werden. Hierbei werden Datenwörter eingelesen, im Computer verarbeitet und zur Steuerung wieder ausgegeben. Listing 4 zeigt dies beispielhaft. In Zeile 10 wird eine eventuell bestehende Kombination gelöscht. In 20 werden die Ports PB0 bis PB3 auf Eingabe und die Ports PB4 bis PB7 auf Ausgabe programmiert. In Zeile 40 wird das Programm solange angehalten, bis ein Flankenwechsel von High nach Low an Port FLAG2 (VC 20: CA1) erfolgt. In Zeile 50 wird die eingegebene Binärkombination mit der vorgegebenen Dezimalzahl 11 verglichen. Bei Erfüllung dieser Bedingung wird ein Steuerbefehl zum Port PB4 gesendet, der dann irgendeine Funktion auslösen kann. Bei Nichterfüllung der vorgegebenen Bedingung wird in Zeile 60 eine Rücksprunganweisung zur Zeile 50 gegeben. Mit Listing 5 können Sie den C 64 in eine Lichtorgel umfunktionieren.

### Ausblick

In Bild 3 sind zwei Interface-Schaltungen gezeigt, die den C 64 oder VC 20 mit der Außenwelt verbinden. Hüten Sie sich bei Ihren Experimenten vor Netzspannung. Nicht nur der Computer kann damit ins Jenseits befördert werden.

(Dipl.-Ing. Richard Kurzhals/hm)

# Dateiverwaltungen: Was Sie beim Kauf beachten sollten

> Der Kauf einer Dateiverwaltung ist risikoreich. Denn die Schwächen eines solchen Programms tauchen oft erst auf, wenn schon eine große Anzahl von Daten eingegeben wurde. Der Entwickler des »Datenmanager 64« gibt wertvolle Ratschläge.

Bevor Sie losziehen und sich verschiedene Programme anschauen, erstellen Siezuerst bitte ein »Mengengerüst«: Überlegen Sie sich, wie lang ein Datensatz Ihrer Datei (zum Beispiel eine Adresse) maximal sein kann, aus wievielen Feldern er besteht (Name, Vorname, PLZ ...) und wieviele Datensätze Ihre Datei — planen Sie großzügig ein oder zwei Jahre voraus — aufnehmen muß. Seien Sie bei der Erstellung dieses Mengengerüstes nicht zu knauserig. Nichts ist schlimmer, als nach einem Jahr feststellen zu müssen, daß die Datei zu groß für die vorhandene Dateiverwaltung wird.

Sortieren Sie nun die Programme aus, die dieses Mengengerüst nicht erfüllen. Die Werbung ist dabei nicht sehr hilfreich, da viele Firmen einen kleinen Trick verwenden: Sie geben zum Beispiel an, daß Ihr Programm maximal 2000 Datensätze verwalten kann und daß ein Datensatz maximal 250 Zeichen lang sein darf. Nach dem Kauf stellt sich dann oft heraus, daß sich beide Versprechungen gegenseitig ausschließen: Entweder kann das Programm 2000 Datensätze verwalten, jedoch nur mit einer Länge von 70 Zeichen, oder aber es kann Datensätze mit einer Länge von 250 Zeichen verwalten, davon jedoch keine 2000.

Ein besserer Weg ist es, sich direkt beim Fachhandel zu erkundigen. Angesichts der Programmvielfalt für einen Computer wie den C 64, sind jedoch nur wenige Verkäufer in der Lage, detaillierte Auskunft über einzelne Programme zu geben. Als Lösung verbleibt somit nur ein intensives Studium von Zeitschriften und den darin erschienenen Tests.

Nachdem Sie nun diejenigen Programme aussortiert haben, die Ihre (zukünftigen) Datenmengen nicht verkraften können, kommt die zweite Selektionsstufe: die Frage der Datensicherheit. Dieses Kriterium wird oftmals unterschätzt. Viele Benutzer achten nur auf die Leistungsfähigkeit eines Programms. Ebenso wichtig ist jedoch, mit welcher Sicherheit und Anwenderfreundlichkeit diese Leistung erbracht wird.

## »Verdächtige« Programme meiden

Hören Sie sich bei Ihren Bekannten um, und lesen Sie die Tests in den entsprechenden Zeitschriften. Sollte es Hinweise für die mangelnde Datensicherheit eines Programms geben, so streichen Sie dieses unverzüglich aus Ihrer Liste.

Sollten Sie einen Drucker besitzen, ist es natürlich selbstverständlich, daß das jeweilige Programm diesen unterstützen muß. Wenn Sie, zusammen mit einem Interface, den Drucker eines Fremdherstellers verwenden, so testen Sie die Kompatibilität mit den in Frage kommenden Programmen. Sollten Sie keinen Drucker besitzen, erkundigen Sie sich, ob über den Bildschirm allein alle Programmfunktionen ausgenutzt werden können.

### Weitere notwendige Eigenschaften:

* Es muß möglich sein, mindestens ein frei wählbares »Schlüssel-« oder »Indexfeld« anzugeben. Ein solcher Schlüssel erlaubt die schnelle Suche nach Datensätzen auch bei umfangreichen Dateien.
* Alle Felder des Datensatzes müssen bei der Suche durch »UND« miteinander verknüpft werden können. Beispiel: Selektiere alle Adressen mit dem Namen »Müller« und dem Wohnort »Mannheim«.
* Selbstverständlich muß die Datei nach einem frei wählbaren Feld des Datensatzes sortiert werden können.

### Universell ist besser als speziell

Dateiverwaltungen, die die bisher geschilderten Anforderungen nicht erfüllen, sollten Sie von Ihrer Liste streichen. Auf einen weiteren Punkt sollten Sie jedoch noch achten: Speziell für den C 64 gibt es eine Fülle verschiedener Datenverwaltungen, mit denen Sie beliebige Arten von Dateien aufbauen können (Adreß-datei, Schallplattendatei etc.), aber auch Programme, die nur eine bestimmte Dateiart verwalten, meist eine Adreßdatei — das wohl häufigste Anwendungsgebiet. Selbst wenn Sie momentan nur eine solche Adreßdatei verwalten wollen, so überlegen Sie bitte, ob es nicht dennoch sinnvoller ist, ein Programm zu kaufen, mit dem sich beliebige Arten von Dateien verwalten lassen. Betrachten Sie eine eventuelle Mehrausgabe als Investition in die Zukunft. Sie wissen heute vielleicht noch nicht, welche zukünftigen Aufgaben Sie für Ihren Computer noch finden werden.

Die zusätzlichen Kriterien, anhand derer eine Dateiverwaltung beurteilt werden kann, sind zu einem großen Teil abhängig von Ihren persönlichen Ansprüchen an den Komfort des Programms:

* Erlaubt das Programm die Verwendung mehrerer Indizes? Durch Verwendung eines Schlüsselfeldes bei der Suche ist selbst eine schnelle Selektion bestimmter Datensätze möglich. Findet in dem jeweiligen Schlüsselfeld hingegen kein Eintrag statt — Sie wissen nur noch, daß die gesuchte Person in München wohnt, erinnern sich jedoch nicht an ihren Namen — so können Sie bei sehr umfangreichen Dateien nicht selten eine Zigarettenpause einlegen, bis der gewünschte Datensatz gefunden wird. Daher ist es vorteilhaft, wenn für mehrere Felder eines Datensatzes ein solcher Index angelegt werden kann.
* Sind außer der »UND«-Ver-knüpfung von Suchkriterien noch weitere Verknüpfungsmöglichkeiten vorhanden, zum Beispiel »ODER« (Selektiere alle Personen, die Müller heißen oder in Mannheim wohnen)?
* Möglicher weiterer Suchkomfort (und auch bei vielen Programmen verwirklicht): die abgekürzte Eingabe von Suchkriterien, das Suchen mit Hilfe von Vergleichsoperatoren (>, <, > =, < =), alle Adressen mit Postleitzahl zwischen 4450 und 4459)) oder »Ma?er« findet »Maier« und »Mayer«. i
* Ist es möglich, außer einem primären Sortierkriterium noch ein sekundäres anzugeben oder eventuell gar noch weiter in die Tiefe zu sortieren (Beispiel: Sortiere nach »Name«. Sind zwei Namen gleich, sortiere diese nach »Vorname«)?
* Ausdruck: Prinzipiell sollten sich alle Möglichkeiten einer Dateiverwaltung auch ohne Drucker erschließen lassen. Achten Sie daher darauf, ob zum Beispiel die sortierte Ausgabe von Datensätzen auch auf dem Bildschirm möglich ist. Sollten Sie jedoch einen Drucker besitzen, ist für Sie wichtig, wie frei Sie den Ausdruck gestalten können. Mindestanforderungen: Sie müssen angeben können, ob alle oder nur spezifische Felder eines Datensatzes gedruckt werden sollen, ob die Felder eines Datensatzes neben- oder untereinander stehen sollen, wie groß der Randabstand sein soll etc.. Einige Programme bieten dem Anwender sogar die Möglichkeit, eine eigene, völlig frei gestaltbare Druckmaske zu entwerfen. Wichtig ist auch, einen Datensatz jederzeit vom Bildschirm ohne »Verrenkungen« auszudrucken.
* Drei weitere Punkte dürften speziell für kommerzielle Anwender wichtig sein:

1.	Textverarbeitung: Ist es möglich, mit den Adressen einer Adreßdatei Serienbriefe zu erstellen, oder muß ein weiteres Programm gekauft werden, und gibt es dieses Programm passend zur Dateiverwaltung?
2.	Globale Operationen, zum Beispiel die Änderung der Preise aller Artikel in einer Artikeldatei um 10 Prozent in einem Arbeitsgang.
3.	Verknüpfung von Dateien, zum Beispiel die Verknüpfung von Adreß- und Lagerdatei zum Schreiben von Rechnungen. Von echten Datenverwaltungen (im Gegensatz zu Datenbanken) können derartige dateiübergreifende Verknüpfungen jedoch nicht erwartet werden.

Erfüllung des Mengengerüstes und Datensicherheit sind unabdingbare Mindestanforderungen, wohingegen Suchkomfort, Textverarbeitung etc. weitgehend vom Geschmack (und Geldbeutel) des Einzelnen abhängig sind. Ein äußerst wichtiges Kriterium zur Beurteilung einer Dateiverwaltung habe ich mirjedoch bis zum Schluß aufge-spart: die Zugriffsgeschwindigkeit. Wenn ein Programm Dateien mit 50 Datensätzen schnell verwaltet, sagt dies nichts über die Leistungsfähigkeit des gleichen Programms mit 500 Datensätzen aus. Das Verhalten bei großen Datenmengen ist ein sehr komplexes Problem, das von den verwendeten Datenstrukturen abhängt und sehr unterschiedlich sein kann. Ideal wäre es, wenn jeder Hersteller eines Programms zu diesem »vollgepackte« Demo-Dateien anbieten würde, die ein potentieller Käufer beim Fachhändler testen kann. Da dies im Moment jedoch nur Wunschdenken ist, empfehle ich Ihnen das Studium von Tests oder aber das Umhören im Bekanntenkreis.

Als letzter Schritt erwartet Sie nun der Gangzum Fachhändler. Bei der Beurteilung einer Dateiverwaltung wird zumeistjiur der Aspekt der Leistungsfähigkeit gesehen. Oft besteht jedoch ein »umgekehrt proportionaler« Zusammenhang zwischen der Leistungsfähigkeit und der Bedienungsfreundlichkeit eines Programms. Dies ist verständlich, denn je größer die Vielfalt an Funktionen ist, desto schwieriger wird es, diese dem Benutzer einfach zu »servieren«. In vielen Fällen muß sich der Anwender durch eine Unmenge von Menüs, Untermenüs und Unter-Untermenüs durchkämpfen, um eine bestimmte Funktion anzuwählen. Nehmen Sie sich daher außer Zeit noch Ihre Liste mit den in Frage kommenden Programmen, gehen Sie zum Händler, und probieren Sie möglichst viele Funktionen selbst durch. Begnügen Sie sich nicht mit eventuell vorbereiteten Demo-Versionen, sondern bauen Sie selbst Dateien auf. Nur auf diese Weise können Sie feststellen, ob ein Programm Ihnen nicht nur von seiner Leistung her zusagt, sondern auch vom Bedienungskomfort. Ein Programm, zu dessen Benutzung das wochenlange Studium von Handbüchern notwendig ist, sollten Sie sich nur dann kaufen, wenn Sie dessen Funktionen auch wirklich benötigen.

(Said Baloui/gk)

TODO ASIDE

## Checkliste

### Minimalforderungen:

* Wieviele Datensätze der von Ihnen benötigten Länge kann das Programm verwalten (beachten Sie ein mögliches Wachstum Ihrer Dateien in späteren Jahren)?
* Wieviele Felder darf ein Datensatz enthalten?
* Werden verschiedene Datentypen unterstützt?
* Was können Sie über die Datensicherheit in Erfahrung bringen?
* Kann für ein beliebiges Feld ein Index zur schnellen Suche erstellt werden?
* Ist ein minimaler Suchkomfort vorhanden (Verknüpfung von Suchkriterien, Abkürzen, Mengenoperatoren)?
* Können alle Funktionen ohne Drucker genutzt werden?
* Wird der eigene Drucker unterstützt?
* Ist das Sortieren der Datei möglich?
* Wie verhält sich das Programm bei großen Datenmengen (Zugriffsgeschwindigkeit und Datensicherheit)?
* Wie bedienungsfreundlich ist das Programm?

### Zusätzlicher Komfort:

* Welche zusätzlichen Suchmöglichkeiten gibt es (Maskieren, Intervallsuche)?
* Können mehrere Schlüssel definiert werden?
□	Wie frei ist die Gestaltung des Ausdrucks?
* Können mehrere Sortierkriterien verwendet werden?
□	Sind globale Änderungsoder Löschfunktionen vorhanden?
□	Ist die Serienbrieferstellung möglich oder zumindest der Zukauf eines geeigneten Textprogramms?
* Können einzelne Dateien miteinander verknüpft werden?

TODO ASIDE

## Die wichtigsten Begriffe der Dateiverwaltung

### Datensatz, Datensatzfeld:

Ein Datensatz ist eine Menge zusammengehöriger Informationen (zum Beispiel Daten eines Artikels: Artikelnummer, Preis etc.). Die einzelnen Elemente des Datensatzes werden Felder genannt (Bild 1).

### Datei:

Eine Menge gleichartiger Datensätze (zum Beispiel alle Artikel, die Sie führen) wird als Datei bezeichnet (Bild 1).

### Dateiverwaltung:

Programm, das eine Datei verwalten kann, das heißt, das in der Lage ist, vom Benutzer vorgenommene Anfragen zu beantworten (»Welche Adresse hat Herr Gustav Werner?«) und den Änderungsdienst zu erledigen (Eintragen neuer Datensätze, Andern von Datensätzen, Löschen von Datensätzen).

### Benutzerschnittstelle:

Unter Benutzerschnittstelle versteht man die Art und Weise, in der die Kommunikation zwischen Dateiverwaltung und Benutzer erfolgt, in der dieser zum Beispiel Anfragen an das Programm stellt, oder den sortierten Ausdruck der Datei veranlaßt. Die zwei gebräuchlichsten Arten der Benutzerschnittstelle sind die Menüsteuerung und die Steuerung mit Hilfe von Abfragesprachen.

### Menüsteuerung:

Die Benutzung geschieht interaktiv, im Dialog mit dem Programm.

### Abfragesprachen:

Der Benutzer formuliert seine Wünsche an die Dateiverwaltung mit Hilfe einer eigens dafür zur Verfügung gestellten Sprache; er schreibt gewissermaßen ein Abfrageprogramm.

### Datenstrukturen:

Man unterscheidet logische und physische Datenstrukturen. Logische Datenstrukturen definieren die Beziehung der einzelnen Elemente einer Datei zueinander, physische Datenstrukturen entscheiden über die Art und Weise, in der die Daten auf einem Speichermedium abgelegt werden.

### Sequentieller Zugriff:

Zugriffsart, bei der auf die Daten einer Datei nur nacheinander in der Reihenfolge der Abspeicherung zugegriffen werden kann. Um den x-ten Datensatz zu lesen, müssen erst die Datensätze 1, 2	x-1 gelesen werden. Häufig verwechselt werden »sequentieller Zugriff« und »sequentielle Datei«: eine sequentielle Datei ist eine Datei, deren einzelne Elemente sich lückenlos hintereinander auf dem Speichermedium befinden (im Gegensatz beispielsweise zur Hashing-Datei). Die Art der Datei erlaubt jedoch noch keine Schlußfolgerung auf die Zugriffsart.

### Direktzugriff:

Durch Angabe des Ortes, an dem sich ein Datensatz befindet (Floppy: Spur und Sektor) kann auf diesen direkt zugegriffen werden (Bild 2). Eine Sonderform des Direktzugriffs ist der relative Zugriff: Hierbei wird das Speichermedium in »Records« unterteilt, deren Länge beim Aufbau der Datei festgelegt wird und die der maximalen Datensatzlänge entspricht. Jeder Datensatz wird in einem solchen Record abgespeichert. Unter Angabe der jeweiligen Recordnummer kann auf jeden Datensatz der Datei direkt zugegriffen werden.

### Schlüssel/Index:

Eine Datei wird nach einem oder mehreren Schlüsseln geordnet. Ein solcher Schlüssel ist meist ein Feld des Datensatzes, zum Beispiel »Name« oder »Artikelnummer«.

### Schlussel-/Indexdatei:

Eine Datei, die zu jedem Datensatz das Schlüsselkriterium enthält, nach dem die Datensätze geordnet sind, sowie einen Zeiger auf den eigentlichen Datensatz in der Datensatzdatei.

### Index-sequentielle Datei:

Dateiform, bei der außer der Datensatzdatei noch eine Schlüsseldatei existiert. Da diese Schlüsseldatei von jedem Datensatz nur einen Teil enthält (zum Beispiel den Namen), ist sie klein im Vergleich zur Datensatzdatei und kann dadurch in den Computerspeicher geladen und in diesem erheblich schneller als auf einem externen Speichermedium durchsucht werden (Bild 3). Wenn die Suche nach einem Datensatz nicht nach dem Schlüssel erfolgt, geht der Vorteil der schnellen Suche über die Indexdatei verloren; die Datensatzdatei muß sequentiell durchsucht werden (außer wenn das Dateiverwaltungsprogramm die Verwendung mehrerer Schlüssel gestattet).

### Ordnung:

Die Ordnung einer Datei nach einem bestimmten Kriterium kann durch sequentielle Reihung entsprechend der Ordnung (einfache Liste), oder durch Verknüpfung der Daten über Zeiger (verkettete Listen, Baumstrukturen) geschehen.

### Zeiger (Pointer):

Um Ordnung in eine Datei zu bringen, deren Elemente nicht in der Reihenfolge dieser Ordnung abgespeichert sind, verwendet man für jedes Element der Datei einen oder mehrere Zeiger, die auf den Speicherort des in der Reihenfolge nächsten oder auch vorhergehenden Elements zeigen.

### Binäre Suche:

Eine — zum Beispiel alphabetisch oder numerisch — geordnete Datei läßt sich mit Hilfe der binären Suche sehr schnell durchsuchen: Zuerst wird auf das mittlere Element der Datei zugegriffen. Ist das gesuchte Element größer, anschließend auf die Mitte der rechten Hälfte der Datei und so weiter. Bei jedem Suchschritt wird die Länge der noch zu durchsuchenden Datei halbiert.

### Hashing:

Ein Verfahren, bei dem der Ort, an dem ein Datensatz abgespeichert wird, mit Hilfe eines geeigneten Algorithmus direkt aus dem Inhalt dieses Datensatzes ermittelt wird (zum Beispiel, indem die Quersumme der ASCII-Zeichen des ersten Datensatzfeldes als Recordnummer beim relativen Zugriff verwendet wird). Hashing-Verfahren zeichnen sich durch außergewöhnlich schnellen Datenzugriff aus. Nachteilig ist, daß die Daten so abgespeichert werden, wie sie eingegeben wurden, und daher nicht geordnet sind.

### Baumstruktur:

Eine häufig verwendete Datenstruktur, bei der jedem Datensatz mehrere Zeiger zugeordnet werden, durch die die Ordnung der Datei hergestellt wird; zum Beispiel einen Zeiger auf das »nächstgrößere« Element und einen Zeiger auf das »nächstkleinere« Element (Binärbaum, Bild 4).

### Sortierverfahren:

Eine der häufigsten Aufgaben einer Dateiverwaltung ist die sortierte Ausgabe von Daten. Bei einer Hashing-Datei muß die Datei in einem solchen Fall unbedingt sortiert werden, da die Datensätze nach keiner erkennbaren Ordnung abgelegt sind. Aber auch bei einer geordneten Datei ist die Sortierung immer dann unumgänglich, wenn eine sortierte Ausgabe nach einem anderen Ordnungskriterium gewünscht wird als jenem, das zum Aufbau zum Beispiel der Baumstruktur verwendet wurde. Es gibt eine Vielzahl von Sortierverfahren (Sortieren durch Auswahl, durch Vergleich, durch Mischen, siehe 64er, Ausgabe 4/85 ff, Effektives Programmieren).

### Interne Sortierverfahren:

Interne Sortierverfahren (zum Beispiel Quicksort) können immer dann angewendet werden, wenn sich die zu sortierenden Elemente im RAM befinden.

### Externe Sortierverfahren:

Externe Sortierverfahren sind notwendig, wenn der Arbeitsspeicher (RAM) zu klein ist, um alle zu sortierenden Elemente aufzunehmen. In diesem Fall müssen die Elemente direkt auf dem externen Speicher (Floppy/Platte) sortiert werden. Meist werden mit Hilfe interner Sortierverfahren auf dem externen Speicher mehrere kleine, vorsortierte Dateien erzeugt, die dann mit entsprechenden Sortierverfahren weiterverarbeitet werden.

### Reorganisation (update):

Dateien müssen teilweise aktualisiert werden. Dieser Vorgang wird als Reorganisation bezeichnet. Eine solche Reorganisation ist zum Beispiel immer dann nötig, wenn der Benutzer die Struktur der Daten verändern will (zum Beispiel neue Felder hinzufügt oder löscht) oder es zu Programmabstürzen kam.

(Said Baloui/gk)

# Dateiverwaltung ist nicht gleich Datenbank

> Alle reden über Dateiverwaltung. Über die vielfältigen Anwendungsmöglich-keiten und über Vor- und Nachteile der verschiedenen Programme. Wenig verbreitet ist jedoch das Wissen darum, was eine Dateiverwaltung eigentlich ist und welche Unterschiede zu Datenbanken bestehen.

Zuerst sei folgendes erklärt: eine Datenbank ist nicht einfach eine Art »bessere Dateiverwaltung«. Zwischen Datenbank und Dateiverwaltung bestehen nicht nur graduelle Unterschiede. Beiden gemeinsam ist die Aufgabe, eine Menge gleichartiger Daten, das heißt Dateien zu verwalten, ob es sich bei diesen Daten nun um Artikel, Schallplatten oder Videotitel handelt. Das Verwalten besteht im sogenannten »Änderungsdienst«, dem Ändern und Löschen von Datensätzen, dem Sortieren von Dateien und der möglichst komfortablen Beantwortung von Anfragen des Benutzers, also dem Selektieren bestimmter Datensätze aus der Gesamtmenge.

Mit einer leistungsfähigen Dateiverwaltung läßt sich nicht nur eine spezifische Datei verwalten, sondern der Benutzer kann beliebig viele verschiedene Dateien aufbauen. Mit einer Datenbank ist es jedoch möglich, mehrere Dateien miteinander zu verknüpfen (siehe Übersicht Tabelle 1).

Ein Beispiel: Stellen Sie sich vor, Sie seien der Inhaber eines Zeitungsvertriebs und seit kurzem stolzer Besitzer eines Computers. Diesen wollen Sie dazu verwenden, das Schreiben von Rechnungen an die Abonnenten zu automatisieren. Sie erwerben eine Datenbank wie zum Beispiel dBase II und bauen zwei Dateien auf: Eine Kundendatei, in der Sie Ihre Abonnenten führen (Kundennummer, Anschrift des Kunden, abonnierte Zeitschrift) und eine Zeitschriftendatei (Zeitschrift, Abonnentenpreis). Bisher verlief das Schreiben von Rechnungen so: Sie suchen in dem Karteikasten »Kunden« den jeweiligen Abonnenten, tragen dessen vollständige Anschrift in die Rechnung ein, merken sich den Namen der abonnierten Zeitschrift, suchen in dem Karteikasten »Zeitschriften« nach der entsprechenden Karteikarte und tragen den Abonnentenpreis in die Rechnung ein. Ein sehr zeitaufwendiger Vorgang, wenn die Dateien groß sind.

Der Datenbank müssen Sie nur angeben; »Suche in der Kundendatei nach dem Kunden xyz, merke dir die abonnierte Zeitschrift und suche in der Datei »Zeitschriften« nach diesem Titel. Die Datenbank verfügt nun über alle Informationen, um eine vollständige Rechnung auszudrucken.

Die gestellte Aufgabe erfordert die Verknüpfung von Kunden- und Zeitschriftendatei. Gute Datenbanken sind sogar in der Lage, mehr als zwei Dateien gleichzeitig zu bearbeiten und somit noch weitaus komplexere Anfragen zu beantworten.

Sollten Sie im Besitz einer Dateiverwaltung sein, müssen Sie auf diese Möglichkeiten der Verknüpfung von Dateien leider verzichten. Sie müssen ebenfalls darauf verzichten, sich mit Hilfe einer Datenbanksprache ein Abfrageprogramm zu schreiben, das genau auf Ihre spezielle Anwendung zugeschnitten ist. Jede Datenbank bietet eine solche Datenbanksprache. Mit Ihrer Hilfe lassen sich immer wiederkehrende Abläufe fest einprogrammieren. In unserem Beispiel könnte ein solches Programm so aussehen: die Datenbank wartet auf die Eingabe der Kundennummer, durchsucht daraufhin selbständig Kunden- und Zeitschriftendatei nach dem vorgegebenen Schema und druckt die Rechnung aus; anschließend wird auf die Eingabe der nächsten Kundennummer gewartet. Die Arbeit mit einer Dateiverwaltung hingegen geschieht im Dialog mit dem System. Der Benutzer muß sich auch bei immer wiederkehrenden Abläufen durch eine Vielzahl von Menüs hindurcharbeiten, um eine bestimmte Funktion anzuwählen.

Diese beiden Merkmale einer Datenbank, das Verknüpfen von Dateien, und die feste Programmierung immer gleicher Arbeitsabläufe sind jedoch nur für den kommerziellen Anwender interessant. Der private Benutzer, der seine Adressen oder Schallplatten verwaltet, wird mit einer leistungsfähigen Dateiverwaltung wohl immer zufrieden sein.

Sollten Sie aufgrund der Tatsache, daß Dateiverwaltungen nicht so leistungsfähig wie Datenbanken sind, nun der Ansicht sein, daß die Programmierung einer Dateiverwaltung wohl recht einfach sein müßte, muß ich Sie jedoch enttäuschen. Es gibt unzählige Möglichkeiten, eine Dateiverwaltung zu erstellen, die vor allem von den gewählten Datenstrukturen abhängen; und die Auswahl an Datenstrukturen ist fast unbegrenzt. Es gibt Listenstrukturen, Baumstrukturen, Hashing-Verfahren etc. Die Wahl der geeigneten Datenstrukturen entscheidet über die spätere Leistungsfähigkeit einer Dateiverwaltung und kann im Nachhinein kaum geändert werden. Es ist meist leichter, ein Programm neu zu schreiben, als die verwendeten Datenstrukturen eines fertigen Programms zu ändern, weil Sie sich als nicht leistungsfähig genug erwiesen haben.

Die meist verwendeten Datenstrukturen will ich kurz näher erläutern (einige zum Verständnis nötige Begriffe wie »binär«, »Zeiger« etc. sind im Lexikon in dieser Ausgabe erläutert). Sollte dieser Artikel bei Ihnen Appetit auf »mehr« wecken, so möchte ich Sie auf das Buch »Alles über Datenbanken und Dateiverwaltung mit dem C 64«, erschienen bei Data Becker, hinweisen. Kommen wir nun zu den versprochenen Datenstrukturen fTabelle 2).

**Listenstrukturen** können Sie sich als eine Aneinanderreihung von Datensätzen vorstellen, vergleichbar mit der Anordnung von Daten in einem Telefonbuch. Diese Aneinanderreihung kann ungeordnet oder geordnet sein (meist alphabetisch). Geordnete Listen haben den Vorteil, daß sie schneller durchsucht werden können als ungeordnete. Sie können die Suche in einer geordneten Liste mit der Suche in einem Telefonbuch vergleichen, bei der Sie wohl kaum auf der ersten Seite mit der Suche nach »Maier« beginnen, sondern wesentlich effizienter suchen, eben (fast) binär. Problematisch an geordneten Listen ist das Eintragen und Löschen von Datensätzen. Um einen neuen Datensatz einzutragen, müssen alle alphabetisch nachfolgenden Datensätze verschoben werden, um Platz zu schaffen. Aus diesem Grund wird die Ordnung bei verketteten Listen nicht durch die Reihenfolge, sondern durch Zeiger hergestellt. Jedes Element der Liste besitzt einen solchen Zeiger, der auf den Ort weist, an dem der (alphabetisch) nachfolgende Datensatz abgespeichert ist. Da die Reihenfolge der Elemente unerheblich ist, kann ein neu einzutragender Datensatz einfach an das Ende der Liste angehängt werden. Er muß allerdings einen Zeiger auf den alphabetisch nachfolgenden Datensatz bekommen, und der vorhergehende Datensatz einen Zeiger auf den gerade neu eingetragenen. Eine verkettete Liste läßt sich leider nicht binär durchsuchen, sie muß sequentiell, also Element für Element, durchsucht werden. Dafür erlaubt sie das schnelle Eintragen und Löschen von Datensätzen. Da sie geordnet ist, kann sich der Benutzer einer solchen Dateiverwaltung jederzeit den alphabetisch nächsten oder vorhergehenden Datensatz zeigen lassen.

**Baumstrukturen** sind im Grunde genommen nur eine besondere Form von geordneten Listen, bei der die einzelnen Elemente, allerdings durch mehr als einen Zeiger, miteinander verkettet werden. Zum Einfügen eines neuen oder Löschen eines alten Elementes müssen nur wenige Zeiger verändert werden; das Verschieben von Elementen ist nicht nötig. Die Suche nach bestimmten Elementen ist schnell, da der Baum binär durchsucht wird. Aufgrund Ihrer Vorteile gehören Baumstrukturen zu den beliebtesten Datenstrukturen.

**Hashing**: Das sogenannte »Hash-Verfahren« hat mit den bisher geschilderten Datenstrukturen keinerlei Gemeinsamkeiten. Es beruht darauf, daß mit Hilfe eines geeigneten Algorithmus direkt aus dem abzuspeichernden Datensatz die Adresse gewonnen wird, an dem dieser abgelegt wird. Ein Beispiel: der einfachste denkbare Hash-Algorithmus bestünde darin, die Quersumme der einzelnen ASCII-Werte für ein einzelnes Datensatzfeld, zum Beispiel »maier«, zu bilden. Die ermittelte Zahl (366) könnte nun als Recordnummer oder als Index für einen String verwendet werden (a$(366) = "maier;georg;münchen"). Bei der Suche nach einer bestimmten Adresse wird nun dieser Algorithmus auf den Namen angewandt, und der String mit diesem Index oder aber der jeweilige Record eingelesen. Der Vorteil des Hash-Verfahrens liegt in der Geschwindigkeit: in den meisten Fällen ist keinerlei Suche nach bestimmten Daten mehr nötig, sondern es kann direkt auf den gewünschten Datensatz zugegriffen werden. Nachteilig ist, daß die Daten völlig ungeordnet sind.

Diese kurze Vorstellung verschiedener Datenstrukturen sollte vor allem eines zeigen: Die Wahl einer bestimmten Datenstruktur hängt von derjeweiligen Aufgabenstellung ab. Wenn der entscheidende Gesichtspunkt bei der Verwaltung von Daten die Zugriffsgeschwindigkeit ist, empfiehlt sich das Hash-Verfahren. Muß die Datei jedoch unbedingt alphabetisch durchblättert werden können, so bieten sich Listen- oder Baumstrukturen an.

### Handicap für Kassettenrecorder

Kurz erwähnt werden sollte noch die Art des Zugriffs auf Daten. Man unterscheidet hauptsächlich den direkten und den sequentiellen Zugriff (Tabelle 3). Mit einem Kassettenrecorder geht es nur sequentiell: Um einen bestimmten Datensatz zu finden, müssen alle in der Datei vorhergehenden Elemente gelesen werden. Damit ist weder die indexsequentielle Datei, bei der über einen Zeiger direkt auf den gewünschten Datensatz zugegriffen werden kann, noch die Hashing-Datei, die ebenfalls direkten Zugriff voraussetzt, möglich.

Bei der Floppy gibt es diese Einschränkungen nicht. Sie hat nurzwei Grenzen; zum einen die Speicherkapazität und zum anderen die Geschwindigkeit, mit der Daten übertragen werden. Und diese beiden Punkte sind es auch, die die Verwendung von Datenbanken auf dem C 64 fraglich machen. Die Verwendung mehrerer Dateien ist sehr speicherintensiv, und die Verknüpfung dieser Dateien erfordert einen häufigen Zugriff auf die Diskette und ist daher auch ein Zeitproblem. Interessant dürften Datenbanken eher beim neuen PC 128 werden. Warten wir's ab.

(Said Baloui/gk)

# Sprachen für Computer (2)

> Diesmal sollen uns bei unserem Überblick über die Welt der Programmiersprachen die modernen Sprachen interessieren. Sie erfahren, was Ada kann und was man sich unter Modula oder Lisp vorzustellen hat.

Die »klassischen« alten Programmiersprachen wie Fortran, Co-bol oder Algol haben viel mehr miteinander gemeinsam, als man beim oberflächlichen Betrachten von Programmen in einer dieser Sprachen erwarten würde. So können zum Beispiel nur numerische Datentypen verwendet werden, eine Einschränkung, in der sich die unzulänglichen Hardwaremöglichkeiten der fünfziger Jahre wiederspiegeln. Tatsächlich war Rechenzeit und Speicherplatz damals Mangelware, und niemand dachte auch nur im entferntesten daran, die teure Rechnerkapazität für andere Dinge als schwierige numerische Berechnungen einzusetzen. Das führte dann später in den sechziger und siebziger Jahren zur Unsitte, rein numerisch orientierte Sprachen wie Fortran schließlich für alle möglichen Zwecke einzusetzen. Die Sprache war halt einmal vorhanden, Rechenkapazität verfügbar und so wurden sogar ganze Textverarbeitungsprogramme in Fortran geschrieben, Buchstabe für Buchstabe fein säuberlich als Zahlenwert codiert und in einem numerischen Datenfeld abgelegt.

Da war eine Sprache wie Basic, das 1965 am Dartmouth College entwickelt worden ist, schon ein gewisser Fortschritt. Basic bietet neben numerischen Datentypen auch noch Strings, also Zeichenketten, als Datentyp an und stellt auch spezielle Operatoren dafür zur Verfügung. Tatsächlich ist mit der Möglichkeit, numerische Daten und Texte zu bearbeiten, schon ein großer Teil der (damals) denkbaren Computer-Anwendungen abgedeckt. Moderne Programmiersprachen stellen aber noch weitaus mehr Komfort zur Verfügung. Es können beliebige eigene Datentypen definiert werden, es gibt sogenannte »Verbundvariable«, zusammengesetzt aus mehreren Variablen verschiedener Datentypen, und schließlich können auch komplexe Datenstrukturen wie verkettete Listen oder Suchbäume einfach dargestellt werden. Die erste Sprache, die diese Möglichkeiten konsequent verwirklichte, war Pascal, auf das schon im ersten Teil ausführlicher eingegangen wurde. Im folgenden wollen wir uns etwas näher mit den Nachfolgern von Pascal beschäftigen, aber auch auf völlig andersartige Konzepte eingehen.

## Pascal in Kurzform: C

Die Entwicklung der Sprache C ist eng verbunden mit der Geschichte des 16-Bit-Betriebssystems Unix, das selbst vollständig in C geschrieben ist. Der Name dieser Sprache hat eine verblüffend einfache Herkunft. Zur Programmier-Unterstützung auf Minicomputern von Digital Equipment wurden um 1970 Spezialsprachen entwickelt, die einfach nach dem Alphabet die Bezeichnungen A und B erhielten. Die B-Sprache wurde 1971 dazu benutzt, Unix, das damals noch in Assembler geschrieben war, auf einfache Art und Weise auf andere Computer zu übertragen. Schließlich erkannte Dennis Ritchie, ein Programmierer bei Bell Labs, die Fähigkeiten der Sprache B, erweiterte und verfeinerte sie und nannte das Resultat C.

Kurz darauf (1973) wurde Unix auf C umgeschrieben — das erste Betriebssystem, das in einer höheren Programmiersprache abgefaßt war. Das war nur möglich, weil C ein strukturiertes Sprachkonzept bei gleichzeitiger größtmöglicher Effizienz der Programme zur Verfügung stellt. In C geschriebene Programme sind einerseits sehr kompakt (geringer Speicherbedarf), andererseits sehr schnell (typischerweise etwa 50 mal so schnell wie Basic).

Programmierung in C besteht im wesentlichen im Schreiben von Funktionen, die jeweils Teilbereiche des Problems lösen. Die Gesamtlösung ergibt sich dann durch zweckmäßigen Einsatz dieser Funktionen. Dementsprechend ist C einerseits stark an Pascal angelehnt, verfügt andererseits aber über zusätzliche Befehle und Operatoren, die der verbesserten Ausnutzung der vorhandenen Hardware (= des Prozessors) dienen. So bietet C spezielle, an die Assembler-Programmierung angelehnte Befehle zum Inkrementieren und Dekrementieren (erhöhen/erniedrigen) von Varia-blenwerten und als einzige der verbreiteten höheren Programmiersprachen die Option, Variable als Register-Variable zu deklarieren. Das bedeutet, daß solche Variablen nach Möglichkeiten in internen Prozessor-Registern gehalten werden, was einen wesentlich schnelleren Zugriff als bei den normalerweise verwendeten Speichervariablen ermöglicht. An dieser Stelle merken Sie wahrscheinlich schon, daß bei der Entwicklung der Sprache nicht unbedingt an den 6502-Prozessor gedacht wurde, der mit seinen bescheidenen drei Registern (A,X,Y) in dieser Beziehung nicht gerade überwältigende Möglichkeiten bietet. Allerdings würde sich als Register-Ersatz die Zero-Page anbieten, bei der der Zugriffja auch etwas schneller ist. Andererseits wurde C auch nicht gerade für 64-Bit-Superprozessoren konzipiert. Derartige in Großrechnern verwendete Prozessoren verfügen in der Regel über eine sehr große Zahl von Registern, und ein guter Fortran-Com-piler für so einen Großrechner verwendet natürlich auch diese Register für die Programmoptimierung. So wird C in der Regel auf 16- oder 32-Bit-Maschinen eingesetzt. Bei den 8-Bit-Prozessoren ist C praktisch nur für den Z80 verbreitet (unter CP/M), allerdings soll eine Version für den C 64 in Vorbereitung sein. Wir werden Sie im 64'er Magazin darüber auf dem laufenden halten.

## Modulare Programmierung: Modula

Das Grundkonzept aller modernen Programmiersprachen heißt Modularisierung der Programmentwicklung. Damit ist gemeint, Probleme nicht mit immensem Aufwand in umfangreichen Programmen zu lösen (die ja für jedes Problem wieder neu geschrieben werden müssen), sondern Teilaspekte des Problems in möglichst allgemeiner Form in eigenständigen Teilprogrammen, eben den sogenannten Modulen, zu lösen. Der Vorteil dieser Art der Software-Entwicklung liegt auf der Hand: Ein Teilproblem muß nur ein einziges Mal gelöst werden; tritt das gleiche Teilproblem irgendwann einmal wieder bei der Programmierung auf, kann man auf das fertige Modul zurückgreifen. Außerdem ist es natürlich zumeist viel einfacher, mehrere kleinere Probleme zu lösen als ein großes. Bei konsequentem Einsatz der »modularisierten Programmierung« lassen sich Programme somit auf lange Sicht wesentlich rationeller entwickeln.

Allerdings gibt es einige Voraussetzungen für die Modularisierung: Die einzelnen Module müssen über genau definierte »Schnittstellen« nach »außen« verfügen, damit sie zweckmäßig ausgewählt und eingesetzt werden können. Andererseits darf aber das »Innenleben« der Module auf keinen Fall irgendwelche Dinge »außen« beeinflussen. Basic ist daher zum Beispiel sehr schlecht für diese Art der Programmierung geeignet: Unterprogramme haben keine Namen, sondern werden über Zeilennummern aufgerufen (schlechte Dokumentation), es gibt keine Parameterübergabe, also keine feste Schnittstelle, und schließlich ist jede Variable, die im Unterprogramm verändert wird, anschließend auch im Hauptprogramm verändert.

Modula, entwickelt von Professor N. Wirth, dem Schöpfer der Sprache Pascal, ist eine der ersten Sprachen, die das Konzept der Modularisierung, das zum Teil ja auch schon in Pascal enthalten ist, konsequent durchführt.

Jedes Modula-Programm ist selbst ein Modul und kann dementsprechend andere Programme als Untermodule verwenden. Dabei gibt es keinen Unterschied zwischen den Standard-Modulen, die die Sprache dem Benutzer zur Verfügung stellt und selbstgeschriebenen (Programm-)Modulen. Jedes Modul ist in sich vollständig abgeschlossen, daß heißt Vereinbarungen über Datentypen, Funktionen und Variable gelten nur innerhalb des Moduls. Sollen die in einem Modul getroffenen Definitionen anderen Modulen zugänglich gemacht werden, dann müssen sie vom Modul »exportiert«, von den anderen Modulen »importiert« werden. Damit werden alle unerwünschten Nebeneffekte, wie sie etwa bei Basic-Unterprogrammen häufig auftreten können, vollständig ausgeschlossen.

Selbstverständlich sind die einzelnen Module intern ebenfalls völlig strukturiert aufgebaut. Den Befehl GOTO sollte man als Modula-Pro-grammierer schnellstens vergessen; dafür stehen die von Pascal gewohnten Schleifenstrukturen (FOR...TO... DO...END, REPEAT...UNTIL, WHI-LE...END) zur Verfügung, zusätzlich noch die LOOP...EXIT...END-Schlei-fe, die alle Befehle zwischen LOOP und END so lange durchläuft, bis die bei EXIT angegebene Bedingung erfüllt ist. Diese Schleifenstrukturen sind übrigens ohne Ausnahme auch im Commodore 3.5-Basic des C 16, oder im 7.0-Basic des C 128 vorhanden, ein sicheres Zeichen, daß sich das Konzept der strukturierten Programmierung auch im Bereich der Basic-Heimcomputer immer mehr durchsetzt. Leider ist Modula noch nicht für Commodore-Computer erhältlich.

## Die Krönung: Ada

Den bisherigen Höhepunkt bei der Entwicklung moderner, modularer Programmiersprachen stellt ohne Zweifel die Sprache Ada dar.

Die Sprache hat ihren Namen nach der Countess Augasta Ada Lovelace, die sich als erste Frau bereits im vorigen Jahrhundert (!) mit Algorithmen und Rechenmaschinen beschäftigte. Bekannt wurde sie in erster Linie, indem sie ein »Rechenkalkül« für die von Charles Babbage entworfene mechanische Rechenmaschine entwarf. Dieses Kalkül kann man im weitesten Sinne als den ersten Algorithmus für eine Maschine bezeichnen.

Ada wurde erst in jüngster Zeit im Auftrag des amerikanischen Verteidigungsministeriums entwickelt und baut ebenso wie C und Modula auf dem Konzept von Pascal auf. Die Sprache ist ebenso wie Modula streng modular und strukturiert aufgebaut, geht aber von den Fähigkeiten weit über Modula hinaus.

Wie in Modula gehören praktisch alle Funktionen, insbesondere auch die Ein-/Ausgabe-Operationen nicht direkt zur Sprache, sondern werden in besonderen Modulen, den sogenannten Packages (Pakete) bereitgehalten. Das hat den Vorteil, daß der Anwender im Bedarfsfalle fast alle Funktionen selber neu schreiben kann, wenn ihm die Standard-Funktionen nicht gefallen. Alle Packages, ob selbstgeschrieben oder vom System bereitgestellt, müssen ins Programm, das seiner-seit ein Package darstellt, importiert werden. Dies geschieht sehr einfach durch Angabe des entsprechenden Paket-Namens. Um zum Beispiel die Standard-Routinen für die Ein- und Ausgabe von Texten zu importieren, verwendet man die Anweisung:
TEXT_IO IS PACKAGE
STANDARD_TEXT_IO

Durch diese Angabe werden die im Modul STANDARD_TEXT_IO enthaltenen Funktionen dem Programm-Modul unter dem Namen TEXT	IO bekanntgemacht. Das Standard-Modul enthält beispielsweise die Funktionen WRITE und READ zum Drucken und Einlesen von Daten.

Durch die Anweisung USE TEXT	10 werden dann bei Bedarf (wenn WRITE oder READ im Programm vorkommt) die entsprechenden Funktionen aus dem STANDARD_TEXT_IO-Modul (das ja innerhalb des Programms den Namen TEXT	IO erhalten hat) entnommen und ins Programm eingefügt. Will man aber an einer bestimmten Stelle nicht die Standardfunktion verwenden, sondern eine selbstgeschriebene, dann braucht man das eigene Modul nur mit
MEIN_TEXT IS PACKAGE
EIGENE_TEXT_IO
anzumelden und im Programm mit
USE MEIN_TEXT
auf die selbstgeschriebenen Routinen umzuschalten. Dabei wird die Ada-Fähigkeit des »Überladens« von Funktionen verwendet, was nichts anderes bedeutet, als daß ein- und dasselbe Schlüsselwort (oder Zeichen) je nach Kontext grundverschiedene Funktionen bezeichnet. Nach Umschaltung mittels »USE« heißt die Ausgabefunktion in unserem Beispiel zwar immer noch »WRITE«, es wird aber die selbstgeschriebene Funktion aufgerufen und nicht die Standard-Funktion.

Natürlich kann man diese Technik auf alle möglichen Bereiche ausdehnen. Damit wird zusammen mit der Möglichkeit sich eigene Datentypen, wie in Pascal oder Modula, zu definieren, ein sehr hoher Grad an Flexibilität gewährleistet. Zum Beispiel kann man sich bei Bedarf einen Datentyp COMPLEX für komplexe Zahlen definieren und die Operatoren »+«,»-«, »*« und»/«durch Überladen auch auf diesen neuen Datentyp anwenden.

Zwei weitere Aspekte von Ada sind noch besonders erwähnenswert: Zum einen existieren sehr komfortable Möglichkeiten, Ausnahmesituationen im Programm (sogenannte Exceptions) ohne Abbruch unter Kontrolle zu bringen. In der Regel dient das zum Abfangen von Fehlerbedingungen, die innerhalb eines Programms auftauchen können (in etwa vergleichbar mit »ON ERROR« oder »TRAP« in Basic). Eine solche Fehlerbehandlung ist bei Compilersprachen bislang sehr selten, für die Zwecke des amerikanischen Verteidigungsministeriums aber natürlich unabdingbar. Man stelle sich nur vor, in kritischen Situationen würden Radarstationen keine Informationen mehr weitergeben wegen eines »DIVISION BY ZERO ERROR« ...

Der zweite zusätzliche Aspekt von Ada ist die Fähigkeit, parallele Prozesse automatisch durchführen zu können (Multitasking). Damit ist gemeint, daß bestimmte Operationen gleichzeitig ablaufen können (sofern der Computer mit mehreren Prozessoren ausgestattet ist, sonst ergibt sich natürlich nur eine »Pseudo-Gleichzeitigkeit«), Das bringt natürlich eine unter Umständen immense Erhöhung der Verarbeitungsgeschwindigkeit, allerdings auf Kosten eines hohen Hardwareaufwandes.

Wer sich etwas näher mit Ada beschäftigen will und einen C 64 besitzt, der findet im Ada-Trainings-kurs von Data Becker (siehe Test in dieser Ausgabe) einen brauchbaren Einstieg.

Es gibt ganz grob eingeteilt zwei grundverschiedene Linien unter den Programmiersprachen.

Da sind einmal die sogenannten Anweisungs-Sprachen, zum anderen die funktionalen Sprachen. Zu den Anweisungs-Srachen gehören alle »klassischen« Programmiersprachen einschließlich Basic, daneben natürlich Pascal, Modula, Ada und C. Alle diesen Sprachen sind von Ihrer Struktur her mehr oder weniger stark an die Hardware-Organisation der heutigen Computer angelehnt (Befehl holen — Befehl ausführen — Programmzeiger auf nächsten Befehl setzen). Funktionale Sprachen verlangen demgegenüber nicht die Ausführung spezieller, einzelner Befehle, sondern beschreiben Strukturen und bilden neue Strukturen.

Vertreter dieser Sprachen sind zum Beispiel Lisp (eine listenverarbeitende Sprache), Snobol (eine symbolische Simulations-Sprache) und eine Unzahl kleiner, außerhalb der Universitäten völlig unbekannten Spezialsprachen.

Lisp ist sicherlich der bekannteste Vertreter dieser Sprachenklasse. Für den Laien besteht Lisp in erster Linie aus einer Unzahl von öffnenden und schließenden Klammern, ab und zu findet sich dazwischen auch mal ein anderes Zeichen. Die Ursache dafür ist die funktionale Struktur der Sprache. Es gibt in Lisp keine Befehle, sondern nur Funktionen, die aus primitivsten Grundelementen sehr komplexe Strukturen aufbauen können. Ausgangspunkt ist immer die kleinste, unteilbare Lisp-Struktur, das Atom. Ein Atom kann eigentlich alles sein, was man über eine Tastatur in einen Computer hineinbekommt. Mit (ATOM APFEL) wird ein »DING« namens Apfel definiert, daß weder interne Struktur noch Beziehungen zu irgendwelchen anderen Daten hat. Diese Beziehungen zu anderen Daten werden erst im folgenden durch Funktionen definiert. Wesentliches Element von Lisp (List Processing Language) ist die Fähigkeit, Listen zu bilden. Eine Liste ist eine geordnete Aufzählung von Elementen. Diese Elemente sind im einfachsten Fall Atome, es kann sich dabei aber auch um andere Listen oder gar um Funktionen handeln. Mit
( SETQ OBST (APFEL BIRNE KIRSCHE))
wird eine Liste OBST definiert, die aus den Atomen Apfel, Birne und Kirsche besteht (die natürlich vorher als Atome vereinbart worden sind).

## Funktionale Sprachen

Es gibt jetzt eine Menge vordefinierter Funktionen, um diese Listen weiter zu verarbeiten. Es können einzelne Elemente oder ganze Listen zu neuen Listen umgewandelt werden, es können Bedingungen festgelegt werden, unter denen das geschieht und so fort. Dabei können sehr komplexe Strukturen, regelrechte logische Netzwerke, entstehen.

Dadurch wird in gewisser Weise der in erster Linie assoziativ arbeitende Mechanismus des menschlichen Denkens viel besser simuliert, als durch schrittweise Abarbeitung von Befehlen.

Lisp wird denn auch mit durchaus beachtenswerten Erfolgen bei praktisch allen KI-(künstliche Intelli-genz-)Projekten eingesetzt. Die Sprache liefert vor allem auf den Gebieten der symbolischen Datenverarbeitung (nicht-numerische Mathematik), der Erkennung von Mustern und dem logischen Folgern gute Ergebnisse.

Für den C 64 ist Lisp nicht erhältlich, jedoch ist mit Logo eine andere Sprache verfügbar, die ebenfalls Listenverarbeitung unterstützt.

Dieser Aspekt der Listenverarbeitung ist allerdings bei Logo längst nicht so konsequent implementiert wie in Lisp, aber dafür auch für den Einsteiger recht schnell zu durchschauen. Bekannt geworden ist Logo allerdings in erster Linie durch die »Turtle-Grafik«, die schon zum Markenzeichen dieser Sprache geworden ist.

Die Turtle (Schildkröte) wird in der Regel durch ein kleines Dreieck am Bildschirm dargestellt, das mit Befehlen wie FORWARD, BACK, LEFT und RIGHT in alle Richtungen bewegt werden kann. Dabei hinterläßt die Schildkröte eine sichtbare Linie auf dem Bildschirm und kann so zum bequemen Zeichnen auch von komplexen Grafiken eingesetzt werden.

Wie bei Basic, so handelt es sich auch bei Logo (übrigens auch bei Lisp) um einen Interpreter, was ein sehr bequemes Vorgehen beim Programmieren erlaubt. Alle Programmbefehle können auch im Direktmodus eingesetzt werden, und so kann man alle Routinen direkt im Dialog mit dem Computer austesten, ohne das gesamte Programm wie bei einem Compiler nach jeder Änderung ständig wieder neu übersetzen zu müssen.

Die einfache Handhabung der Grafik ist sicherlich einer der Hauptgründe, die speziell beim C 64 für die Verwendung von Logo sprechen. Wenn Sie sich für Logo interessieren, dürfen wir Ihnen unseren Testbericht über das Commodore-Logo in dieser Ausgabe empfehlen.

Natürlich ist es mit den hier behandelten Sprachen noch nicht getan. Es existiert eine Unmenge weiterer Programmiersprachen, mit deren Behandlung man ganze Bücher füllen könnte. Dieser Bericht sollte Ihnen aber einen allgemeinen Überblick gegeben haben, wo’s bei den Programmiersprachen lang geht.

Speziell für den C 64 wird es sicher in naher Zukunft eine Reihe weiterer Sprachen geben. Interessant wird die Angelegenheit natürlich auch im Hinblick auf den neuen Commodore 128 PC, der ja die ganze Welt der Programmiersprachen unter CP/M zugänglich macht. Ganz sicher werden wir das Thema »Programmiersprachen« unter diesem Aspekt nochmals aufgreifen.

(ev)

# Infocom-Geheimnisse gelüftet?

> Bekannt dürften sie mittlerweile sein, die Adventurespiele von Infocom. Gelöst sind sie noch lange nicht. Ein Grund, Ihnen Tips dazu zu geben.

Die Infocom-Adventures sind wohl die besten Text-Abenteu-erspiele, die es gibt. Sie verstehen in der Regel einen Wortschatz von über 800 Wörtern, akzeptieren ganze Sätze und lesen sich wie spannende Romane — kein Wunder, denn Infocom läßt auch Romanautoren für sich arbeiten. Was für die einen der Unterschied zwischen Bilderbuch und ausgereiftem Roman, ist für die Adventurefans die Unterscheidung zwischen Grafik- und Textabenteuer. Die Textadventures verbrauchen keinen Speicherplatz für Grafiken und bieten deswegen viel mehr andere Möglichkeiten. Dieser für die anderen Dinge freie Speicherplatz wird meist ausgenutzt, um einen enormen Umfang an Räumen, Gegenständen und Aufgaben unterzubringen. Und da die Infocom-Adventures genau dies tun, sind sie sehr schwer lösbar. Daher unsere Tips.

## Tips für alle Infocoms

Als erstes erhalten Sie ein paar allgemeine Tips, die Sie eigentlich für alle Infocom-Adventures benutzen können.

Der Parser ist, einfach gesehen, das Stück des Programms, das die Eingabe der Sprache steuert. Der Infocom-Parser ist zwar einer der besten seiner Art; aber was immer auch so toll daran sein mag — es ist zu empfehlen, den Infocom-Parser einfach wie bei einem Zwei-Wort-Adventure anzusehen. Das spart eine Menge Zeit. Mit dem Wortschatz herumprobieren sollten Sie trotzdem: In jedem Infocom-Aben-teuer gibt es Worte, die die anderen Adventures aus diesem Softwarehaus nicht haben, und die manchmal zum Ziel führen können.

Und noch etwas: Denken Sie nie daran, was Sie machen würden, wenn Sie tatsächlich so ein Abenteuer durchleben müßten. Überlegen Sie sich, was der Autor an Gemeinheiten eingebaut haben könnte — das führt Sie viel eher zum Ziel.

Außerdem gibt es sehr selten zwei Methoden, ein Problem zu lösen. Speichern Sie also immer Ihr Spiel ab, bevor Sie mit etwas herumexperimentieren. Beispiel: Wenn Sie einen Gegenstand an einem Ort falsch benutzen und später einen Ort erreichen, an dem Sie den Gegenstand (oder Zauberspruch) unbedingt benötigen, müssen Sie den abgespeicherten Spielstand wieder laden (weil der Gegenstand oder Zauberspruch abgenutzt oder verbraucht ist). Es sei denn, Sie wollen von vorn beginnen.

### Gegenstände:

Untersuchen Sie alle Gegenstände sehr genau. Viele Dinge können manipuliert und verändert werden, andere haben ein »Innenleben«, das heißt sie können Flüssigkeiten oder andere Gegenstände beinhalten. Ein Eigenleben der Objekte ist auch nie auszuschließen; achten Sie also auf alles, was eigenständig sein könnte. Das Schwert aus der Zork-Serie leuchtet beispielsweise blau, wenn Gefahr nahe ist, und rot, wenn der Träger des Schwertes verärgert ist. Legen Sie die Gegenstände immer ab, wenn Sie sie einmal sinnvoll benutzt haben. In Infocom-Adventures werden sie meistens kein zweites Mal benötigt. Wenn Sie einen Gegenstand mehrmals untersuchen, und keine nähere Beschreibung folgt, können Sie den Gegenstand ruhig als unwichtig betrachten und vergessen. Letzteres gilt für alle Infocom-Adventures außer »Hitchhikers Guide to the Galaxy«, das extrem von der Firmennorm abweicht.

### Personen:

Um zu jemandem zu sprechen, müssen Sie als erstes den Namen der Person eingeben. Um beispielsweise den Dieb zu fragen, ob er Ihnen das Stilett geben würde, müssen Sie tippen:»Thief, give me the sti-letto«.

Fragen Sie die Leute nach Gegenständen, anderen Personen und speziellen Ereignissen. Untersuchen Sie auch die Personen genau (mit EXAMINE).

Soweit zu allgemeinen Tips. Zu den für die einzelnen Abenteuer angegebenen Hinweisen ist noch zu sagen, daß wir hier nur kleine Denkstützen geben wollen. Wer mehr erfahren will, kann sich die in Geheimtinte gedruckten »Hint Books« von Infocom selbst bestellen. Wir für unseren Teil arbeiteten völlig ohne Lösungsbücher, befragten dafür aber viele Abenteurer, aus deren Erfahrungen sich die folgenden Tips zu den speziellen Infocom-Adventures ergeben.

### ZORK I

Zork ist ein Spiel, bei dem es darum geht, zwanzig Schätze zu finden und sie in einer Schatzkiste abzulegen. Ein Dieb ist das Haupthindernis dabei, weil er versucht, Sie auszurauben oder umzubringen. Er kann zwar getötet werden, aber nur, wenn Sie stark genug sind (was von der Anzahl der Schätze in der Schatzkiste abhängt) und wenn Sie die richtige Waffe besitzen. Diese Waffe ist scharf, aber nicht das Schwert! Sobald Sie einen Schatz finden, sollten Sie Richtung Haus gehen.

### ZORK II

Hier gibt es zehn Schätze, aber das Hauptziel ist es, den Zauberer von »Frobozz« zu vernichten. Es ist sehr wichtig, herauszufinden, was im Irrgarten der seltsam verwinkelten Räume vor sich geht. Außerdem sollten Sie den Zweck des Korbs mit dem Wäschebeutel kennen.

### ZORK III

Sie können in diesem Spiel nur sieben Punkte bekommen. Und wenn Sie die alle haben, bedeutet das noch lange nicht, daß Sie gewonnen haben. Die Punkteverteilung ist auf eine »potentielle« Aufgabenlösung ausgelegt. Das bedeutet, daß Sie einen Punkt schon bekommen, wenn das Programm denkt, Sie wären nahe daran, ein Problem zu lösen. Philosophie spielt eine große Rolle in Zork III. Sie sollten sich sehr höflich und mildtätig benehmen — aber trotzdem mutig sein.

### INFIDEL

Sie müssen eine ägyptische Pyramide erforschen, in der Hieroglyphen an die Wand geschrieben sind. Lernen Sie die Hieroglyphen gut, denn in ihnen steht die Lösung aller Probleme. Entziffert ergeben sie übrigens reines Englisch. Tip: Viele Objekte haben ein einzelnes Hieroglyphen-Zeichen, das für sie steht. Nehmen Sie in der Pyramide alles mit, was Sie finden können, besonders den Mast. Übrigens: Die Pyramide steht fast neben dem Camp.

### STARCROSS

In diesem Spiel wurde viel Wert auf die Manipulation von Gegenständen gelegt. Viele Gegenstände sind farbig, um die Unterscheidung für den Spieler einfacher zu machen. Karten zu zeichnen ist hier wesentlich einfacher als bei den Zorks. Die farbigen Stäbe dienen als »Schätze« und müssen in die richtigen Slots gesteckt werden. Ein bißchen Wissen aus der Chemie (Atomhülle, Elektronen etc.) wird Ihnen helfen. Bevor Sie das Schiff verlassen, sollten Sie die vier farbigen »docking ports« des Alien-Raum-schiffs genau untersuchen. Geben Sie Ihren Raumanzug dem Chef, und folgen Sie ihm durch den »maze« zu einem anderen docking ports.

### PLANETFALL

Dieses Spiel basiert mehr auf Komplexität als auf schwierigen Problemen. Floyd muß sterben, bevor Sie gewinnen können. Betrachten Sie genau das Loch in der Wand und das verdächtige Gemälde, das in einem der Büros hängt.

### SUSPENDED

Sie kontrollieren sechs Roboter, die Ihnen Informationen senden. Jeder davon hat seine eigenen speziellen Fähigkeiten, die, richtig verstanden und angewandt, des Rätsels Lösung sein können. Iris kann zum Beispiel ein TV-Bild von dem, was sie sieht, senden. Konzentrieren Sie sich also ständig auf Iris. Die Farben der Gegenstände helfen Ihnen, herauszufinden wie man sie benutzt. Steuern Sie die Roboter so, daß die Menschen in unvermeidbare Fallen laufen.

### ENCHANTER

Enchanter läßt sich nur mit Hilfe von Zaubersprüchen lösen. Die »ewige Treppe« muß zerstört werden. Sie benötigen auch unbedingt die Hilfe des Abenteurers, der Ihnen begegnet. An einer anderen Stelle sollten Sie Bleistift und Radiergummi benutzen. Genaueres zu Enchanter finden Sie im 64’er, Ausgabe 3/85.

### SORCERER

Noch mehr Magie — und das schwerste aller Infocom-Adventu-res. »Beleuchten« Sie sich selbst (Zauberspruch »Frotz«), und gehen Sie dann los, um Belboz zu suchen. Benützen Sie den Infotater, um die Schatzkiste zu öffnen. Manche Zaubersprüche müssen zweimal gelernt werden, um die gewünschten Resultate zu erzielen. Speichern Sie nach jedem gelösten Problem ab, denn Sorcerer ist sehr schwer. Sie benötigen unbedingt die orange Flüssigkeit, bevor Sie den »Yonk«-Spell an einer bestimmten Stelle benutzen. Heben Sie sich den »Vezza«-Spell bis ganz zum Schluß auf.

### DEADLINE und WITNESS

In beiden Spielen wird kriminalistischer Spürsinn verlangt. Hauptarbeit ist es, die Leute über andere Personen und bestimmte Situationen auszufragen. Folgen Sie den Leuten unauffällig.

In Deadline müssen Sie »George« einen bestimmten Gegenstand zeigen, und zwar vor der Testamentsverlesung. Es gibt außerdem einen Geheimgang und einen versteckten Safe.

In Witness sollten Sie sich im Arbeitszimmer aufhalten, wenn »Monica« eintritt. Täter ist (wie immer) derjenige, der am wenigsten danach aussieht.

### HITCHHIKER'S GUIDE TO THE GALAXY

Dieses Spiel weicht stark von der »Infocom-Norm« ab, weil es sehr gemein und heimtückisch gemacht wurde.

Legen Sie sich vor dem Bulldozer in den Dreck und warten Sie. Nehmen Sie nicht das Handtuch, das Ihnen angeboten wird. Später im Adventure sollten Sie Ihre Sinne genau nachzählen; benutzen Sie den, der nicht auf dem Bildschirm steht. Manchmal werden Sie vom Programm angelogen. Versuchen Sie also alles mehrmals.

## SUSPECT

Dieses Spiel läuft ähnlich wie Deadline und Witness ab. Allerdings sind Sie diesmal der Mordverdächtige und müssen sich innerhalb ein paar Stunden vom Verdacht befreien. Achten Sie sehr genau auf Gespräche anderer Leute (auch Wortfetzen fügen sich mitunter zu wichtigen Indizien zusammen). Fragen Sie jeden über alles aus, was Ihnen einfällt. Besonders viel erzählt der Barkeeper, dem Sie sich als erstes zuwenden sollten.

## CUTTHROATS

Dieses Adventure ist eines der neuesten aus der Infocom-Reihe. Daher läßt sich hierzu noch nicht viel sagen. Wenn Sie einen Tip dazu haben — immer her damit!

Die oben genannten Hinweise zu den Adventures sind, wie gesagt nur minimale Denkanstöße für den Abenteuerspieler. Wer mehr wissen will, sollte sich die »Hint Booklets« von Infocom aus USA bestellen. Die Lieferzeiten sind allerdings sehr lang.

(M. Kohlen/rg)

# Trickfilm mit dem C 64

> In die vierte Dimension, die bewegte dreidimensionale Grafik, dringen Sie mit diesem Programm vor.
Sie können so mit einfachsten Mitteln Trickfilme mit verblüffenden Eigenschaften erstellen.

Die Idee zu diesem Programm kam uns, als wir zum zweiten Mal die Sendung »Das Bild, das aus dem Rechner kam« sahen.

Die erste noch in Comal geschriebene Version berechnete jeweils ein Bild und zeichnete es sofort. Das Ergebnis: nur alle 7 Sekunden ein Bild! Auch als erst alle Linien berechnet und dann gezeichnet wurden, konnte von einem flüssigen Be-wegungsablaufkeine Rede sein. Bei der jetztigen Version wird der Teil des Zeichnens von einer Maschi-nencode-Routine übernommen, die eine Geschwindigkeit von 3 bis 10 Bilder/s erlaubt. Die Unterschiede gegenüber anderen Trickfilmgeneratoren:

* Es muß nur ein Bild eingegeben werden, alle anderen Bilder berechnet der Computer aus diesem Bild.
* Auch komplizierte Bewegungsabläufe können mühelos erzeugt werden (zum Beispiel, um einen Körper um die Z- und X-Achse zu drehen, dabei heranzuholen und nach links zu bewegen, bis er den Bildschirm verläßt, braucht man nur eine DATA-Zeile!).
* Es können sehr viele (bis zu 255) und große Bilder gespeichert werden, da nur die Linienkoordinaten gespeichert werden.
* Es werden keine Basic-Erweite-rungen benötigt.

(Dirk und Armin Biernaczyk/rg)

TODO ASIDE

Wir erblickten am 14.4.1968 das Licht der Welt. Und nicht nur das, sondern jeder noch ein anderes Geschöpf: wir waren Zwillinge. Nachdem wir sechs Jahre zusammen mehr oder weniger ruhig verbracht hatten, wurden wir 1974 in die Grundschule West eingeschult. Dort überstanden wir die ersten 4 Jahre unseres Schullebens ohne Komplikationen. 1978 wechselten wir aufs Märkische Gymnasium, was keine große Umstellung bedeutete, denn auch hier reichte das Zeugnis immer aus, um die Geldbeutel der Verwandten zu öffnen. Meinen ersten Kontakt mit Computern hatte ich (Dirk) in der Schule in der 10. Klasse mit Logo, was meinem Bruder allerdings aufgrund seiner Wahl für Latein in der Klasse 9 nicht möglich war. Kurze Zeit darauf sammelten wir zusammen in der Volkshochschule Bochum unsere ersten Basic-Kenntnisse. Fasziniert von der Computerei kauften wir uns Ende 1983 einen C 64 mit Diskettenlaufwerk. Da wir nach Abschluß der 10. Klasse von der Schule immer noch nicht die Nase voll hatten, machten wir weiter und besuchen heute die 11. Klasse und versuchen dort im Informatikunterricht, mittlerweile zusammen und in Pascal, den Wurm im Apfel II zu dressieren. Zu Hause schlagen wir uns lieber mit Basic, Assembler und ein wenig Comal herum. Das Ergebnis unserer Programmierwut ist dieses Programm.

(Dirk und Armin Biernaczyk)

TODO END ASIDE

> In die vierte Dimension, die bewegte dreidimensionale Grafik, dringen Sie mit unserem Listing des Monats vor.

Der »3D-Movie Maker« muß in zwei Teilen eingegeben werden: zuerst das Maschinenprogramm, dann der Basic-Teil. Wenn das Maschinenprogramm eingegeben und gestartet wurde, so speichert es sich, falls kein Prüfsummenfehler auftrat, selbst als >TRICK.OBJ« ab. Man braucht sich nun nicht mehr darum zu kümmern. Bei dem Basic-Teil, der nun eingegeben werden kann, dürfen alle REM-Zeilen ersatzlos wegfallen. Beim Start des Basic-Teils wird automatisch der Maschinenteil, der sich auf Diskette befinden sollte, nachgeladen.

### Bedienung - Eingabe des Körpers

Vor der Benutzung des Programmes, müssen die Punkte Verbindungs- und Bewegungsvorschrift des Körpers in den DATA-Zeilen ab 8000 festgelegt werden. Dies ist notwendig, damit bei Änderungen oder einem erneuten Start nicht alles wieder neu eingegeben werden muß. Die DATA-Zeilen, die das Listing momentan enthält, erzeugen den auf dem Bildschirm herumfliegenden Schriftzug »64’er«. Die Punkte werden mitX, Y und Z-Koordinaten eingegeben. Als Endmarke dient hier dreimal die 1000. Bei der Verbindungsvorschrift wird jeweils der Anfangs- und Endpunkt angegeben zum Beispiel: Von Punkt 1 nachPunkt2 = DATA 1,2. Hierdientzweimaldie 1000 als Endmarkierung.

Beispiel: Man will ein Kreuz erzeugen.
Punkte: DATA0,10,0,10,0,0,-10,0
DATA—10, 0,0, 1000,1000,1000
Verbindungsvorschrift: DATA 1,3,2,4,1000,1000

Bei der Bewegungsvorschrift ist es allerdings etwas komplizierter. Hier müssen zweimal drei Verschiebungsarten, drei Drehungsarten und die Dauer des Vorgangs angegeben werden. Zuerst kommt die erste Verschiebung in X-, Y- und Z-Richtung, dann die Drehung um die drei Achsen, nun die zweite Verschiebung und zum Schluß die Dauer des Ganzen. Diese Reihenfolge hat folgenden Sinn:

Wird zuerstverschoben und dann gedreht, drehtsich die Figur um den Bildschirmmittelpunkt. Bei umgekehrter Reihenfolge dreht sich die Figur an beliebiger Stelle um ihren eigenen Mittelpunkt. Hier ein Beispiel einer DATA-Zeile:
DATA0,0,0,5,0,0, 0,5,0, 10

Die Figur bewegt sich 10 Bilder lang um jeweils 5 Stellen nach oben und dreht sich dabei um jeweils fünf Grad um die X-Achse. Einen Zoomeffekt erreicht man durch Verschieben in der Z-Achse, so kann man zum Beispiel mit DATA 0,0,0,0,0,0,0,0,1,50 eine Figur langsam vergrößern. Hier bildet einmal die 1000 die Schlußmarkierung. Um die vielen verschiedenen Möglichkeiten der Bewegung zu entdecken, lohnt es sich, die verschiedenen Kombinationen auszuprobieren (und dabei mit einfachen Bewegungen anzufangen).

### Bedienung — Ablauf des Programms

Der »3D-Movie-Maker« stellt vier Menüpunkte zur Wahl:
1. Erzeugen einer Grafik

Hierbei berechnet der Computer die Anzahl der Bilder und fragt diese noch einmal ab. Sollen alle Bilder gezeichnet werden, braucht nur RETURN eingegeben werden. Nun wird der Speicherbedarf berechnet; reicht der vorhandene Speicher von 23 KByte aus, so beginnt der Rechenvorgang. Dabei wird die Anzahl der fertigen Bilder angezeigt. Ist der Rechenvorgang beendet (bei 150 Bildern mit je 10 Punkten zirka eine halbe Stunde) kehrt das Programm ins Menü zurück. Durch das Drücken der Leertaste kann man sich während der Berechnungen den Film ansehen und dann durch nochmaliges Betätigen fortfahren.
2./3. Laden/ Speichern

Da das Erstellen eines Films recht lange dauert, kann man fertige Filme abspeichern und laden. Das Programm hängt an den Filenamen automatisch ein »GRA« an, so daß die Dateien in der Directory sofort erkennbar sind. Tritt ein Disk-Error beim Laden oder Speichern auf, landet man wieder in der »INPUT FILENAME«-Zeile. Hier noch ein Hinweis zur LOAD-Routine: Da das Einlesen von 23 KByte mit einer GET-Schleife nicht einwandfrei funktionierte und 15 Minuten dauerte, verwendet die jetzige Version die LOAD-Routine des Betriebssystems.
4. Abspielen

Beim Aufruf dieser Funktion wird man zuerst nach der Anzahl der Durchläufe (maximal 255) und nach der Anzahl der Bilder je Lauf gefragt. Beim letzteren braucht man nur RETURN eingeben, um alle Bilder ablaufen zu lassen.

### Der Algorithmus

Das eigentliche Kernstück des Programms ist ein Algorithmus, der die Punkte um einen Winkel dreht, die X-, Y- und Z-Kcordinaten in Bildschirmkoordinaten umrechnet und dann die außerhalb liegenden Teile der Linien wegstreicht. Beim Drehen (hier um die Z-Achse) werden erst X- und Y-Koordi-naten in Radius und Winkel (im Bogenmaß) umgerechnet; bezogen auf den Koordinatenursprung (siehe Bild 1). Nun wird der Winkel, um den gedreht werden soll, addiert und die neuen Koordinaten werden aus dem neuen Winkel und dem Radius errechnet (siehe Bild 2).

Beim Umrechnen in Bildschirmkoordinaten wird einfach die Z-Koordinate auf die X und Y-Koordinate so aufgerechnet, daß Punkte, die weiter vorne liegen, vom Mittelpunkt wegrücken. Außerdem wird der Koordinatenursprung in die Bildschirmmitte verlegt Durch dieses Verfahren wird die Figur mit einem Fluchtpunkt in der Mitte des Bildschirms dargestellt Das nun folgende Wegstreichen der außerhalb liegenden Linien und Linienstücke geschieht mit Hilfe einer Gradengleichung. Falls nur Teile der Geraden außerhalb des Bildschirms liegen, wird der äußerste Wert für X beziehungsweise Y angenommen und die fehlende Koordinate errechnet (siehe Bild 3).

### Beschreibung der Maschinenroutine

Die Zeichenroutine des »3D-Movie-Makers« übernimmt die Verwaltung der Grafik und ist, zum Erreichen eines Trickfilmeffekts, ganz auf Geschwindigkeit ausgelegt Aus diesem Grund erhielt sie die folgenden Merkmale:

* Sie ist in Assembler geschrieben.
* Sie berechnet keine Punkte, sondern zeichnet nur.
* Die Koordinaten werden nicht geprüft, das heißt: das Basic-Programm darf keine »unmöglichen« Koordinaten übermitteln.
* Der Bildschirm wird nur so weit gelöscht, wie es nötig ist
* Die Zeropage-Addressierung wird in breitem Umfang benutzt.
* Der IRQ wird abgestellt.

Das wichtigste Mittel zur Erzeugung eines flüssigen Bilderablaufs und die Grundidee der Routine ist jedoch das »verdeckte Zeichnen«. Dafür werden zwei Bitmaps benötigt (bei unserem Programm ab $A000 und $E000). Während nun eine der beiden zu sehen ist, wird auf der anderen gezeichnet Nun wird das neue Bild sichtbar gemacht und das alte, welches nicht mehr zu sehen ist, wird gelöscht Dieser Vorgang wiederholt sich, bis alle Bilder abgearbeitet sind. Hier noch eine Anmerkung: die Lineroutine haben wir mit einigen Änderungen dem Artikel »Ein schneller Drawline-Algorithmus« aus dem 64’er, 4/84 entnommen. Die Funktion läßt sich am besten dort nachvollziehen.

(Armin und Dirk Biernaczyk/rg)

# Weißt Du wieviel Sternlein stehen...

> Der C 64 als elektronische Sternenkarte bringt Klarheit ins Dunkel der Nacht. Das Programm zeigt Ihnen, wo Planeten una Sternbilder am Himmel stehen.

Das Programm entstand aus dem Bedürfnis, den Standort von Sternen, Sternbildern und Planeten zu ermitteln. Vor allem die Planeten lassen sich so ohne weiteres mit dem bloßen Auge, nicht erkennen. Man kann sie nur identifizieren, wenn man genaue Informationen über ihren jeweiligen Standort hat. Deshalb wurde die Berechnung der Planetenbahnen, der Bahn der Sonne und der des Mondes in das Programm aufgenommen. Das Programm erstellt eine Sternenkarte für einen eingegebenen Standort zum gewünschten Beobachtungszeitpunkt.

Die Sternenkarte enthält die hellsten und bekanntesten Fixsterne beziehungsweise Sternbilder des nördlichen Sternenhimmels.

Sehr interessant ist es, neben der Ausgabe der Sternenkarte für eigene Beobachtungen, sich die Sternenkarte für jeden Punkt der Erde zeichnen zu lassen.

So kann man sich zum Beispiel in Gedanken auf den Nordpol versetzen. Der Polarstern (Polaris) steht im Zenit, also genau über dem Beobachter. Gibt man als Beobachtungszeitpunkt den 21. März (Frühlingsanfang für die Nordhalbkugel) ein, kann man feststellen, daß die Sonne den ganzen Tag über scheint.

Am Nordpol hat der Tag begonnen. Die Sonne scheint nun ein halbes Jahr ohne Unterbrechung. Erst zum Herbstanfang geht sie wieder unter. Es ist dann für ein halbes Jahr Nacht. Auch die Verhältnisse am Äquator (Breite 0°) sind sehr interessant.

(H. Hinkelmann/hm)

TODO ASIDE

## Lebenslauf

Ich wurde am 02.10.26 in Ahlen (Westfalen) geboren und lebe seit 1951 in Hamm. Seit dem 01.04.43 bin ich in der Finanzverwaltung und dort seit 1955 als Betriebsprüfer tätig.

Bereits als Kind interessierte ich mich sehr für Naturwissenschaften und Technik. Ich baute mir selbst ein Fernrohr, um die Sterne beobachten zu können. Ende der 60er Jahre begann ich mit dem Basteln in der Mikroelektronik. Es entstand eine Digitaluhr mit Kalenderfunktion. Diese stellte sich automatisch nach dem Zeitzeichen des WDR. Mein erster »Computer« war der programmierbare Taschenrechner Casio FX 501 mit 112 (!) Programmschritten. Es folgte der Sharp CP 1211 und dann der VC 20. Meinen C 64 besitze ich seit etwa einem Jahr. Von Anfang an wurden die Computer bei den Betriebsprüfungen und hier insbesondere bei den Prüfungsvorbereitungen und den Berichtsabfassungen eingesetzt. Seit einiger Zeit bin ich Mitglied des Arbeitskreises EDV bei der Oberfinanzdirektion Münster und für die Einführung der Datenverarbeitung im Prüfdienst tätig.

Die ersten Steuerberechnungen nahm ich noch mit dem Taschenrechner vor. Es folgten dann Programme für den VC 20 und nun für den C 64. Inzwischen habe ich kaum noch Zeit, private Programme zu entwickeln.

(Horst Hinkelmann)

TODO END ASIDE

> Um über die Positionen von Fixsternen und Planeten informiert zu sein, schrieb Horst Hinkelmann dieses Programm für den C 64 mit Simons Basic.

Nach dem Start des Programms werden zunächst das aktuelle Datum sowie die aktuelle Uhrzeit (MEZ) und die geografischen Koordinaten des Beobachtungsortes eingegeben. Dabei müssen nördliche Breiten und westliche Längen positiv, südliche Breiten und östliche Längen negativ angegeben werden. Nun kann man den Beobachtungszeitpunkt wählen, wenn sich dieser vom bereits im Programm festgelegten Zeitpunkt unterscheidet.

Es folgt eine kurze Erläuterung des Programmablaufs und das Zeichnen der Sternkarte. Mit den Cursor-Tasten kann über ein Kreuz jedes Objekt der Sternkarte angesteuert werden. Die Bewegungsgeschwindigkeit ist abhängig von der Dauer des Tastendrucks; das heißt je länger eine Cursortaste gedrückt wird, desto schneller bewegt sich das Kreuz. Drückt man nach der Wahl die Funktionstaste F1, gibt der Computer den Namen des Sterns oder Planeten, der dem Kreuz am nächsten ist, an. Dabei wird der Cursor genau auf das Objekt positioniert. Möchte man wissen, um welches Sternbild es sich bei einer bestimmten Konstellation handelt, bringt man das Kreuz auf das betreffende Sternbild und drückt die Funktionstaste F3. Der Computer positioniert den Cursor auf den nächsten Stern des Sternbildes und zeigt den Namen des Sternes und des Sternbildes an. Das gesamte Sternbild blinkt. Es besteht auch die Möglichkeit, einen Stern, ein Sternbild oder einen Planeten nach dem Namen suchen zu lassen. Dazu gibt man einfach mit der Tastatur den Namen oder einen Teil des Namens des gesuchten Objekts ein und schließt die Eingabe mit der RETURN-Taste ab. Der Computer positioniert das Kreuz auf dieses Objekt und gibt den vollständigen Namen aus. Ist das gesuchte Objekt nicht gespeichert oder zum Be-obachtungszeitpunktam Beobachtungsortnichtzu sehen, erhält man eine entsprechende Fehlermeldung.

Will man die Sternkarte für einen anderen Beobachtungsort oder einen anderen Beobachtungszeitpunkt erstellen lassen, drückt man die Funktionstaste F7.

Mit F5 wird die Sternkarte auf einen MPS 801 gedruckt

### Programmerläuterung

Auf die Formeln, die den Berechnungen zugrunde liegen, soll verzichtet werden. Diese Berechnungen sind (zumindest für Mond- und Planetenpositionen) ziemlich kompliziert und können bei Interesse jedem größeren Werk über Astronomie entnommen werden.

Von programmtechnischem Interesse dürften allerdings die Suchroutinen sein. Deren Funktionsweise soll deshalb erläutert werden.

Zum Suchen werden die folgenden Arrays verwendet:

P$	Namen der Planeten
Z$	Namen der Sternbilder
P	Bildschirmkoordinaten der Planeten
Z%	Bildschirmkoordinaten der Fixsterne
Z	Zeiger auf Fixsterne (fürjedes Sternbild)
TODO

### Suchen Fixstern/Planet (Funktionstaste F1)

Zunächst werden die Bildschirmkoordinaten des Kreuzes (X,Y) mit denen der Planeten (X mit P(0), P(2), ..., Y mit P(1), P(3), ...) verglichen. Bei Übereinstimmung ist XX=0 und die Suche kann abgebrochen werden. In Zeile 42090 verzweigt das Programm nach 45000, wo der Name des Planeten geschrieben wird. Liegt keine Übereinstimmung vor, wird der Planet mit dem geringsten Abstand gespeichert (XP = Abstand<sup>2</sup>, ZP = Kennziffer des Planeten). Nun werden die Fixsterne in gleicher Weise überprüft. Der Stern mit dem geringsten Abstand wird gespeichert (Z = Kennziffer des Sterns; Zeile 44020). Wird kein Stern mit geringerem Abstand als der nächste Planet gefunden, wird der gespeicherte Planet genannt (Zeilen 44070 bis 45010). Dabei wird ab der Zeile 500 das Kreuz exakt auf den Planeten beziehungsweise Stern positioniert und dessen Bezeichnungen ausgegeben. Der Name eines Planeten ergibt sich aus dem Array P$ mit dem Index ZP. Der Name eines Sternes wird durch berechnetes RESET (Zeile 44080) aus den DATA-Zeilen 60000 bis 61240 ermittelt. Die 8chreibroutine befindet sich ab Zeile 300.

### Suchen Sternbild (Funktionstaste F3)

Zunächst wird die Suchroutine für Sterne mit Ausnahme des Abschnitts für die Planeten durchlaufen. Der gefundene nächste Stern bestimmt das Sternbild. Die Kennziffer Z des Sterns wird in Z1, die letzte Ziffer des gelesenen Datensatzes für den Stern (D; Zeile 44090) wird in Z gespeichert. Das Programm verzweigt nun in die Blink-Routine (Zeile 48060 bis 48250). Dort werden die zum Sternbild gehörenden Sterne (Punkte) abwechselnd gesetzt und gelöscht (Zeile 48170).

### Suchen nach Namen

Wird ein Name, oder ein Teil eines Namens eingegeben, verzweigt das Programm in 40100 nach Zeile 47000. Das komplizierte Löschen des zu überschreibenden Textes (GOSUB 340, GOSUB 360 in Zeile 47030) ist erforderlich, da Simons Basic Text mit den auf dem Grafik-Bildschirm gesetzten Punkten ODER- verknüpft. Aus diesem Grund wird der vorige Text erst gelöscht Nun wird geprüft, ob ein Planetenname mit der eingegebenen Bezeichnung übereinstimmt (47060 bis 47090). Ist dies der Fall, werden die Bildschirmkoordinaten des Planeten zu denen des Kreuzes (Zeile 47120). Ist der Planet zur Beobachtungszeit nicht sichtbar, dann ist X = 0 und eine Fehlermeldung wird ausgegeben (47140). Ansonsten wird das Kreuz auf den Planeten positioniert und in die Eingaberoutine gesprungen (47150). Handelt es sich bei der eingegebenen Bezeichnung um keinen Planeten, wird die Suchroutine in 48000 fortgesetzt. Dort werden zunächst die Namen der Sternbilder (deutsch und lateinisch) auf Übereinstimmung untersucht. Wird keine Übereinstimmung gefunden, springt das Programm in die Zeile 49000. Hier werden nun die Sternbezeichnungen eingelesen und mit der Eingabe verglichen. Kommt es zu keiner Übereinstimmung, wird die Fehlermeldung »... nicht gespeichert« ausgegeben und das Kreuz in die linke obere Ecke des Bildschirms gesetzt (Zeile 49050). Darauf kehrt das Programm in die Eingaberoutine (ab Zeile 40000) zurück.

(Horst Hinkelmann/hm)

# Checksummer 64

> Der Checksummer 64 überprüft jede Basic-Zeile direkt nach der Eingabe und erspart deshalb eine aufwendige Fehlersucha

Der Checksummer 64 ist ein kleines Maschinenprogramm, das Sie sofort unterrichtet, ob Sie diejeweilige Programmzeile korrekt eingegeben haben.

So gehen Sie vor:

1.	Programm abtippen und speichern. ,
2.	starten mit RUN
3.	nach kurzer Zeit sehen Sie am Bildschirm:<br>Checksummer 64, Checksummer aktiviert, ausschalten mit Poke 1,55, anschalten mit Poke 1,53, Ready.
4.	Anschalten des Checksummer 64 mit Poke 1,53.
5.	Test: Geben Sie in einer freien Zeile ein: »1 REM« und drücken die Return-Taste. Am Bildschirm oben links sollten Sie die Prüfsumme <144> sehen.
6.	Geben Sie ein Listing aus unserem Heft ein. Nach jeder Zeile wird die Zahl, die im Listing in Klammern < > steht, in den Bildschirm eingeblendet. Stimmen die Zahlen nicht überein, so liegt vermutlich ein Eingabefehler vor. **Die Zahl in den Klammern und auch die Klammern selbst dürfen beim Abtippen nicht mit eingegeben werden!**
7.	Achten Sie bitte darauf, Zahlen und Zeichen nicht zu vertauschen. So ergibt zum Beispiel die Zahl 210 in einer Basic-Zeile die gleiche Prüfsumme wie 201.
8.	Unsere Basic-Listings enthalten keine Grafikzeichen mehr. Diese werden ersetzt durch Klartext und stehen zwischen geschweiften Klammern. Deshalb sind weder die Klammern noch was dazwischen steht, abzutippen, sondern die in der Tabelle aufgeführten Tasten zu drücken. Auf Ihrem Bildschirm erhalten Sie dann wieder die entsprechenden Grafikzeichen.

Eine ausführliche Beschreibung finden Sie in den Ausgaben 1 bis 4/85. Ebenso den Checksummer für den VC 20.

TODO Tabelle "Die Steuerbefehle im Klartext"

# MSE-Abtippen sicher und leicht gemacht

> Ähnlich wie der »Checksummer« ist auch der MSE ein Hilfsmittel bei der Eingabe von Listings, diesmal jedoch bei reinen Maschinensprache-Programmen.

Im Gegensatz zum »Checksummer« aber ist die Eingabe nicht ohne den MSE möglich. Der MSE verringert die Tipparbeit um ein Drittel und schließt Fehleingaben vollkommen aus. Außerdem können Sie die DATAs blind eingeben, ohne andauernd auf den Bildschirm schauen zu müssen. Dies wird durch akustische Meldungen realisiert.

MSE ist ein Maschinenspracheditor, mit dem ein Vertippen ausgeschlossen ist. Eine abgetippte Zeile wird nur angenommen, wenn sie richtig ist. Eine Checksumme am Ende jeder Zeile prüft, ob die richtigen Werte in der richtigen Zeile an der richtigen Stelle stehen. Wenn nicht, ertönt ein Warnsignal, und man beseitigt den Fehler.

War die Zeile korrekt, erklingt ein Gong, und die nächste Zeilennummer wird ausgegeben. Damit ist also auch »blindes« Eintippen möglich; Sie können sich voll auf den Text konzentrieren.

### So arbeitet man mit MSE

Laden und starten Sie MSE. Zuerst wird der Programmname und die Start- und Endadresse erfragt. **Diese Angaben entnehmen Sie dem Kopf des jeweiligen abgedruckten Listings.** MSE meldet sich dann mit der Zeilennummer der ersten Zeile. Wenn Sie die Zeile richtig eingegeben haben, erscheint die nächste Zeilennummer und so weiter bis zum Ende. Zum Schluß wird das fertige Programm mit »CTRL-S« auf Diskette oder Kassette abgespeichert. Dazu sind keine weiteren Angaben mehr erforderlich. Das Programm kann dann ganz normal wieder geladen und gestartet werden. Wenn Sie nicht alles auf einmal tippen wollen, können Siejederzeit unterbrechen und den eingetippten Teil mit »CTRL-S« abspeichern. Wollen Sie weiterarbeiten, laden und starten Sie MSE wieder.

Geben Sie auf die Frage nach der Startadresse aber jetzt »L« ein, um Ihr Teilprogramm zu laden. Jetzt können Sie mit »CTRL-N« die Adresse eingeben, an der Sie weitertippen müssen. Wenn Sie sich nicht gemerkt haben, wie weit Sie gekommen sind, geben Sie nach dem Laden »CTRL-M« ein.

Auf die Frage nach der Startadresse antworten Sie mit der Anfangsadresse, die links in der Kopfzeile auf dem Bildschirm steht. Nun wird Ihr Programm aufgelistet. Mit »SPACE« wird das Listen fortgesetzt, mit »STOP« abgebrochen. Das Ende Ihres Programmteils erkennen Sie sehr einfach daran, daß nur noch der Wert »AA« in der Zeile steht. Die Adresse dieser Zeile müssen Sie anschließend mit »CTRL-N« eingeben. Das Programm ist nur mit »STOP/RESTORE« zu verlassen. Speichern Sie aber vorher unbedingt immer Ihren Text ab.

### Hinweise zum Abtippen

Vor dem Abtippen oder späteren Wiederladen des MSE-**Laders** müssen Sie unbedingt folgende Zeile eingeben:
**POKE 43,1:POKE 44,32:POKE 8192,0 NEW**

Starten Sie das Programm mit RUN. Fehlerhafte Zeilen werden angezeigt und müssen korrigiert werden, bis der Lader zum »READY« durchläuft. Jetzt müssen Sie das fertige MSE-Programm abspeichern. Dazu brauchen Sie nur »RETURN« zu drücken, weil die erforderlichen Angaben schon auf dem Bildschirm stehen. (Kassettenbesitzer müssen in Zeile 343 die letzte Zahl in »1«abändern). Abjetzt können Sie »MSE V1.0« direkt, also ohne den DATA-Lader, benutzen, MSE V1.0 wird ganz normal mit »,8« geladen (keine POKEs notwendig).

(N. Mann /D. Weineck/gk)

TODO TABELLE

MSE-Befehle:
DEL löscht die letzt Eingabe.
CTRL-S speichert das eingetippte Programm ab.
CTRL-L lädt ein Programm. Start- und Endadresse werden automatisch ermittelt.
CTRL-M listet den Speicherinhalt. Abbruch mit STOP-Taste, weiter mit Leertaste.
CTRL-N erlaubt die Eingabe einer neuen Adresse zum Weitertippen.
CTRL-P gibt ein MSE-Listing auf dem Drucker aus.

# Hier gibt’s Clubs

Um Euch und den Clubs unnötige Kosten und Zeit zu ersparen, einige Hinweise. Bei schriftlichen Anfragen an die Clubs, ist generell ein ausreichend frankierter Umschlag beizufügen. Bevor man einem Club beitritt, sollte man sich über dessen Status, Mitgliederzahl, Beitragssätzen (soweit nicht mit aufgeführt) und Gebühren für Lehrgänge informieren lassen. Aus Platzgründen und der Übersichtlichkeit wegen sind neben den Adressen nur einige zusätzliche Schwerpunkte mit angegeben. Die Adressen sind nach Postleitzahlen geordnet.

**Computerbox**, Eichenallee 61, 1000 Berlin 19,
2monatlich erscheinende Computerzeitschrift, Hardware-Berichte, Softwaretests, Basic-Kurs, Berichte zu aktuellen Anlässen, Rätsel;
**C 64-Club »Die Bit Teufel«**, Tel. Berlin 3618491,
Erfahrungsaustausch, Spiele, Anwendersoftware, Drucker, DFÜ, Gerätebörse;
**C 64 Programmer Club**, Martin Paff, Hammer Str. 69, 2000 Hamburg 70,
Clubzeitschrift, Treffen, Erstellung von Software, Bibliothek;
**C-64-INFO-Club L A W A**, T. H. Zibell, Wakendorferweg 32, 2000 Hamburg 62,Tel. (0 40) 5 29 2127
**Magicclub 64**, Arne Palke, Eichenbuchstr. 45, 2057 Reinbek b. Hamburg,
Clubzeitschrift, Softwarebibliothek, Treffen;
**C 64-Club ACCS**, Erlenweg 51, 2083 Halstenbek,
Clubzeitschrift, PRG-Bibliothek, verbilligte Disketten, Auslandskontakte, DFÜ;
**HBS-Computerclub**, Am Steingrab 45, 2150 Buxtehude,
Programmtausch, PRG-Biblio-thek, Softwareentwicklung, eventuell Eröffnung einer Mailbox;
**C 64-User-Club Lübeck**, Matthias Koerner, Fregattenstr. 60, 2400 Lübeck,
Clubzeitschrift, Unterstützung beim Programmieren, Akustikkoppler, Programmtausch, Tips, Tricks;
**Georg Körster**, Herm-Ehlers-Str. 8, 2903 Ofen,
Clubzeitschrift, PRG-Bibliothek, Meinungs-, Erfahrungs- und Adressentausch, Lösung von Soft- und Hardwareproblemen;
**SCORA-Computerclub Aurich**, Manfred Janßen, Dellingstr. 10, 2965 Ihlow/Riepe
Clubtreffen, Arbeitsgruppen, Erfahrungsaustausch, Bibliothek, Softwarebibliothek, Robotersteuerung;
**Sascha Troggler**, Kreuzfeld 20, 3250 Hameln 1, Mailboxnr. (05151) 63687,
Clubtreffen, Erfahrungsaustausch, DFÜ, Hilfestellung bei Problemlösungen, eigene Mailbox;
**Christian Hülsmann**, Fliederweg 10, 3380 Goslar 1, Tel. (0 53 21) 48 98, Softwareerstellung, bald eigene Mailbox;
**Christiane Canisius**, COMAL User Club, Freiheitsstr. 30, 4000 Düsseldorf 12,
COMAL-NEWS, COMAL-Lite-ratur, Problemhilfe;
**C 64-Softentwurf-Club**, Cedric Volkmer, Konkordiastr. 24, 4000 Düsseldorf 1,
Softwareentwurf, Spiele, Anwender und so weiter;
**Ghostbusters Dorsten**, Glückaufstr. 252,	4270 Dorsten 21,
Clubtreffen, Briefkastenonkel, Knacken von Adventures, Softwarebibliothek, etc.;
**64 User Club Osnabrück**, Ulf Henke, Am Gretescher Turm 6, 4500 Osnabrück,
Clubtreffen (14tägig), monatliche Zeitschrift, Clubbibliothek, Softwareentwicklung (Basic, Pascal, Maschinensprache), Hardware;
**Laborsoft & -Hardware**, J.U.Busch-mann, Schneiderstr. 80, 4600 Dortmund 50, Tel. 02 31/73 54 96 Mailbox, Clubzeitschrift, Clubtreffen, Ausflüge zu Computerveranstaltungen, gemeinsame Herstellung/Verkauf von Soft& Hardware, schnelles Erlangen von neuester Soft- und Hardware, wegen guter Auslandsverbindung, kein Clubbeitrag;
**CCR (Computer-Club Reschke)**, Hohe Str. 21A, 4600 Dortmund 1, Tel. (0231) 160014
Commodore C 64, Clubräume, Clubbeitrag 10 Mark, Basic-Programmierkurse;
**64'er Adventure Club**, Christian Paas, Nordring 54, 4630 Bochum, 2monatlich erscheinende Zeitschirft, 15 Mark Jahresbeitrag, Lösen von Adventures, schriftlicher Informationsaustausch;
**DATEX**
Commodore Software Club Uwe Thielker, Glückaufstr. 6, 4670 Lünen
Erfahrungsaustausch, Tips und Tricks, Hilfen für Einsteiger, spezielle Problemlösungen, evtl. Clubzeitschrift
**VC 20-User Club**, Ulf Kriewett, Thuermchenswall 71, 5000 Köln 1, Tel. (0221) 121634, Clubzeitschrift, Softwarebibliothek, Hardware, Tips und Tricks;
**C 64/Club Compy**
Clubmagazin etc., Aufbau einer Softwarebibl.
Thomas Spieler/D., Porzerfeld 20, 5000 Köln 90;
**Udo Künstler**, Geilenkirchener Str. 87, 5120 Herzogenrath, Tel. (0 24 06) 50 45,
monatliches Clubtreffen, Clubzeitschrift, Beratung und Hilfestellung, Tips & Tricks, immer neue Informationen;
**S.C.O.U.T.-Computerclub**, Martin Mirgel, Victoriastr. 20, 5400 Koblenz,
monatliches Clubtreffen, Kontakt zu Zeitschriften, Hardware, Elektronik-Kurse für Anfänger, DFÜ, Softwarebibliothek;
**C 64-Club Montabaur**, Michael Bromund, Saarstr. 13, 5430 Montabaur,
Clubzeitschrift, Clubtreffen, DFÜ, Software- und Literaturbibliothek, Hardware;
**Atomos-Soft**, Rene Klöckner, Klagenfurtstr. 19, 5800 Hagen 7, C 64, Clubtreffen, monatl. Zeitschrift, Software, etc.;
**Klaus-Dieter Friedrich**, DH1FAB, Ber-nadottestr. 3, 6000 Frankfurt 50, Tel. (069) 571381, Mailbox OTIS (06181) 48884 Nr. 222 und 1014, Amateurfunkthemen, Treffen, Clubzeitschrift, Informationsaustausch über das Mailboxsystem »OTIS«, Btx, Seitennummer *208247 #, Jahresbeitrag von 15 Mark;
**C 64-Weiterbildung**, c/o Albert Pflüger, Eckenheimer Landstr. 13, 6000 Frankfurt/Main 1,
Koordination von Informationen zu C 64-Anwendungen in der Weiterbildung, unregelmäßige Mitteilungen und Treffen;
**Futuresoft**, Wiesenstr. 49, 6090 Rüsselsheim, Tel. (0 6142) 5 33 20, Soft- und Hardware;
**Stefan Roos**, Pfarrgasse 6, 6097 Trebur 3,
Treff 2mal monatlich, Beitrag 10 Mark pro Jahr, Clubzeitschrift, Software- und Bücherbibliothek; Mark-Oliver Faßmann, Sudetenstr. 19, 6108 Weiterstadt 1, Programmbibliothek, Modem, Clubinfo, halbjährlicher Clubbeitrag (etwa 10 Mark);
**Deutsche Commodore-User**, Peters-wälderstr. 8, 6452 Hainburg,
Soft- und Hardwareentwick-lung/-Tausch, Problemlösungen für alle Computer, monatliche Clubzeitung, Programmbibliothek, Beitrag 80 Pfennig pro Monat + fünf Programme im Jahr;
**Heidelberger 64'er**, Wolfgang Agostini, Karl-Metz-Str. 11, 6904 Eppelheim,
Clubtreffen, Erfahrungs- und Programmtausch, jedes Semester wechselnder Schwerpunkt: Adventures, Assembler, kleine Hardware-Tricks;
**Commodore-User-Club**, Wend.-Berberich-Str. 3, 6968 Walldürn, Infoblatt (C 64), Programmaustausch (Floppy), schriftlicher Fragenaustausch;
**BNT e.V. — Öffentlichkeitsarbeit**, Postfach 40 08 46, Marktstr. 48, 7000 Stuttgart-Bad Cannstatt, Tel. (0711) 55 83 91, (Mo-Fr: 9-16), Mailbox: (0711) 55 83 92,
Jungendarbeit, Fortbildung, Zeitschrift, Schulungen und Kurse, Computercamps, Datenfernübertragung, Bildung von Gruppen und Treffen;
**64'er Club**, Michael Frieser, Hoffmannstr. 12, 7015 Korntal 1 (bei Stuttgart),
Clubtreffen, Zeitschift und Bibliothek in Vorbereitung, Hardware, Tips und Tricks, monatliche Software;
**Micro Computerclub Singen**, Emil Grass, Hauptstr. 34, 7709 Hilzin-gen, Tel. (0 77 31) 6 7819,
Clubtreffen, Assemblerkurs, Erfahrungs- und PRG-Tausch, DFÜ;
**Computerclub »New Line«**, Postfach 8007, 7910 Neu-Ulm 8,
Speziell für Anfänger;
**C 64 - ACM (e.V.)**, c/o Gerald Gerlich, Grasmeierstr. 25/220, 8000 München 40,
monatliche Clubzeitung, Buch-und Softwarebibliothek, Schulungen (Basic, Assembler), Hardwarebastelkreis, Sammelbestellungen, Kaufberatungen, Soft- und Hardwareentwicklungen, eigene Mailbox, Reparaturen;
**CBM-64-Userclub München**, Walliserstr. 13, 8000 München 71, Tel. (0 89) 76 24 24;
Treffen nach Vereinbarung, kein Beitrag, Maschinensprache, Hardware;
**C 64-User Club »Flanuk«**, O. Sahlmann, Irisstr. 1, 8000 München 45,
Softwaretausch, Clubzeitung (in Vorbereitung), Erfahrungsaustausch, gemeinsame Softwareproduktionen;
**Marathon-Soft(ware)**, c/o Raimund C. Ohnemus, Daiserstr. 49, 8000 München 70,
Gemeinsames Erlernen neuer Programmiersprachen (Maschinencode, Comal, Forth, Pascal), Austausch von Kenntnissen, Gemeinsamer Softwarekauf, kein Clubbeitrag, Aufnahme von Anfängern, Umbau von Commodore-Joysticks Uoyboards für Linkshänder, Dauerfeuer);
**C 64-Club PAF**, CCP, Jahnhöhe 33, 8068 Pfaffenhofen 1,
Clubtreffen, Software, Clubzeitschrift;
**Rüdiger Lang**, Obingerstr. 4, 8201 Aindorf,
Schulung, Software, Hardware, Steuern, DFÜ, Clubtreffen;
**Commodore-Club Lohr**, Christian Rosenkranz, Hauptstr. 6, 8770 Lohr/Main;

Sicher sind das noch nicht alle Clubs in Deutschland. Wir bitten daher die nicht aufgeführten Clubs, sich zu melden.
In der nächsten Ausgabe sind die Clubs aus dem benachbarten Ausland an der Reihe.

# Mini-Grafik VC 20

> Diese kleine Grafik-Hilfe läuft auf der Grundversion des VC 20.

Wie der Name schon sagt, handelt es sich um eine Grafik-Erweiterung im kleinen Stil. Damit wird Grafik-Programmierung auch ohne große Speichererweiterung oder (teures) Grafik-Modul möglich. Da in Maschinensprache geschrieben, ist diese Basic-Erweiterung überdies sehr schnell. Minutenlange Wartezeiten auf die Fertigstellung einer Bildschirmgrafik entfallen damit.

Zur Anwendung der Grafikhilfe: Man nehme das Programm-Listing, tippe es in den VC 20 und erfreue sich folgender Befehle und Funktionen:

@ON	schaltet den Bildschirm auf Grafikdarstellung um, wobei die momentane Zeichenfarbe zur Plotfarbe wird
@CLR	löscht den Grafik-Speicher
@f,x,y	setzt (f ^ 0) oder löscht (f=0) einen Punkt mit der Koordinate (x,y). Für f gilt: 0 < = f < 256, für x wie für y gilt: 0 < = x < 128. f, x und y können beliebige Variable oder Formeln sein
@(x,y)	ist eine Funktion, welche testet, ob der Punkt mit der Koordinate (x,y) gesetzt (Ergebnis = —1) oder nicht gesetzt(Ergebnis = 0) ist. Beispiel: »PRINT @ (5,7)«
@RETURN	schaltet den Bildschirm schließlich wieder auf normalen Print-Modus
TODO

Das Programm implementiert sich nach dem Start des einzugebenden Basic-Laders (Listing 1) von selbst und ist absolut absturzsicher. Es hat, man lese und staune, eine Länge von nur 256 Byte. Für eine Auflösungvon 128mal 128 Punkten sind 2 KByte RAM unerläßlich. Somit verbleiben in der Grundversion 1279 Byte und mit 3 KByte Erweiterung sage und schreibe 4351 Byte Basic-RAM. Zugegeben, das ist nicht die Welt, aber für den Anfang durchaus ausreichend, und dafür wurde die Routine schließlich konzipiert. Überdies wird der Kassetten-Puffer nicht benutzt, und man kann von einem Programm aus mit »LOAD« ein weiteres nachladen. Listing 2 ist ein kleines Demo-Programm, um die Fähigkeiten der »Mini-Grafik« einmal vorzuführen (siehe Bild).

(Wolfgang Wirth/ev)

# 6510 — Die Suche nach dem Prozessor

> Mit einem Raumschiff fliegen Sie durch ein Höhlenlabyrinth. Ihre Aufgabe: Finden Sie den Prozessor 6510 und setzen ihn in seinen Sockel.

Wem das HöhlerbSystem nicht gefällt, der kann sich selbst neue erstellen.

Ziel des Spiels ist es, einen IC am Ende eines Labyrinthes aufzunehmen, und diesen in seine Fassung einzusetzen.Es gehört viel Geschicklichkeit dazu, die sechs Labyrinthe zu durchqueren. Außerdem machen einem Hindernisse wie Laser, Gravitation und Fuel das Leben schwer. Mitden Funktionstasten kann man die Geschwindigkeit, die Stärke der Gravitation, Anzahl der Schiffe, sowie die Fuelabnahme einstellen. Zu Beginn befindet man sich in einem kuppelähnlichem Raum, in dem sich die IC-Fassung befindet. Durch Drücken des Feuerknopfes kann das Fahrwerk ein- beziehungsweise ausgefahren werden. Unfallfreies Landen ist jedoch nur auf den dafür vorgesehenen Fuel-Plattformen zum Auftanken möglich.

### Zum Eintippen:

Da das Lesen der Daten mit Prüfsummenroutine viel mehr Zeit beansprucht, als ohne diese, empfiehlt es sich, sämtliche »GOSUB3440« nach dem ersten einwandfreien Durchlauf zu entfernen. Ebenso ist es notwendig, alle Prüfsummen, das heißt DATAs über 255 zu entfernen. Durch das Entfernen des REMs aus Zeile 810, entfällt das blinde Eintippen von »POKE648,4« nach dem Drücken von »RUN/STOP + RESTORE«. Dieser »POKE« wäre notwendig, um wieder auf den normalen Bildschirm zu kommen. Falls jemandem die Labyrinthe zu schwierig sein sollten, können diese geändert werden.

Eine Besonderheit an »6510« ist unter anderem die Unterbringung der FuelsäuIe.Diese befindet sich außerhalb des Bildschirmfensters. Dieses wurde mit Hilfe des IRQ (Interrupt Request), des Rasterzeileninterrupts verwirklicht. Mit einer ähnlichen Interruptroutine wurde auch die Steuerung und der Ablauf der Melodie möglich.

Das Prinzip eines solchen Interrupts ist folgendes:

Das Bild, das man auf einem Fernsehgerät oder einem Monitor sieht, wird aus vielen einzelnen Zeilen zusammengesetzt (Rasterzeilen). Diese Zeilen werden beim Fernseher zirka 25 mal pro Sekunde aufgebaut, so daß ein flimmerfreies Bild entsteht. Beim C 64 übernimmt der VIC (Video-Interface-Chip) diese Aufgabe. Wird nun eine ganz bestimmte Zeile aufgebaut, verzweigt der Prozessor zu einer Interruptroutine. Bei »6510« wird in dieser Routine die Rahmenfarbe ab einer bestimmten Rasterzeile auf den Wert 5 (grün) beziehungsweise den Wert 0 (schwarz) gesetzt. Die Rasterzeile, ab der auf Grün geschaltet wird, ist von der Menge des vorhandenen Fuels abhängig. Mit dem Timer-Interrupt wird die Hauptschleife gesteuert. Dieser Interrupt wird unter anderem durch den in der Speicherstelle 56549 abgelegten Wert geregelt. Hierdurch besteht auch die Möglichkeit, die Geschwindigkeit des Cursors zu manipulieren (Tl$ wird ebenfalls beeinflußt). Der Timer-Interrupt wird von den CIAs (Complex Interface Adapter) ausgelöst. Diese zählen von dem in 56549 stehendem Wert auf Null herunter, wonach sie einen Interrupt auslösen und wieder mit dem Zählen beginnen.

Die Daten für die Melodie werden ab $C500 bis $C6FF abgelegt.

### Hinweise zum Ändern und Hinzufügen von Labyrinthen

Um überhaupt Labyrinthe ändern oder hinzufügen zu können, muß vor die POKEs in Zeile 810 ein »REM« gesetzt werden. Danach startet man das Programm. Sobald das Auswahlmenü erscheint, drückt man die RUN/STOP-Taste. Nun hat man den umdefinierten Zeichensatz zur Verfügung.

### Ändern von Labyrinthen

Die Labyrinthe liegen in den Zeilen 3530 bis 5170. Sollen Labyrinthe geändert werden, so listet man das zu ändernde Labyrinth (siehe Listing). Nun kann das Labyrinth wie ein normales Basic-Programm editiert werden.

Hinzufügen von Labyrinthen

Das Hinzufügen von Labyrinthen ist etwas komplizierter. Zuerst sind im Programm folgende Änderungen nötig (angegeben ist jeweils die gesamte Zeile):
1) Zeile 400:
400 RI=0:CO=0:CK=1:V=53248:SI = 54272:LM = 6 + Anzahl der hinzugefügten Labyrinthe
2) Zeile 1810:
1810 ON LA GOSUB 3520, 3750, Zeile1, Zeile2, ..., Zeile n,4020,4280,4550,4890

Dabei entspricht »Zeilel« der Anfangszeile des ersten hinzugefügten Labyrinths, »Zeile2« der Anfangszeile des 2. hinzugefügten Labyrinths und so weiter.
3) Zeile 2060:
2060 A=0:ON LA GOTO 2190,2070,...,2070,2070,2700, 2080

Nach der ersten »2070« müssen soviele »2070« eingefügt werden, wie neue Labyrinthe hinzugefügt wurden. Nicht vergessen, die »2070« durch Kommata zu trennen!

Jetzt können die neuen Labyrinthe an den Schluß des Programms (ab Zeile 8000) angefügt werden. Dabei ist folgendes Format einzuhalten:
22 PRINT-Zeilen, in denen das Labyrinth gePRINTet wird. In den nachfolgenden Zeilen müssen die Koordinaten des Raumschiffs, der Laser und der Fuel-Plattform gesetzt werden (Tabelle 1). DieX-Koordinatendürfen denWert255nichtüber-schreiten. Dies demonstrieren wir am besten an einem Beispiel.

Die Bedeutung der Variablen und POKEs ist in Tabelle 1 erläutert. Der Variablen MB muß immer derWert 15 zugeordnet werden.

Soll keine Fuel-Plattform erscheinen, so sind die Koordinaten auf 0 zu POKEn. Außerdem ist darauf zu achten, daß sich keine Sprites überschneiden, da sonst die Kollisionsabfrage nicht einwandfrei arbeitet.

### Hinweise zum Erstellen eines Labyrinths

Erst wird — wie bereits beschrieben — der Zeichensatz eingeschaltet. Dann löscht man den Bildschirm und baut das Labyrinth aus den umdefinierten Zeichen auf. Dabei istzu beachten, daß der Bildschirm nicht nach unten scrollt (dies kann passieren, wenn man ein Zeichen an die letzte Position der Zeile setzt). Dieses Scrollen kann verhindert werden, indem man das Zeichen an die vorletzte Position der Zeile setzt, den Cursor vor das Zeichen positioniert und mit der INSERT-Funktion um eine Stelle nach rechts verschiebt. Außerdem müssen die untersten drei Zeilen frei bleiben (SCORE, TIME...). Auch darf das Raumschiff weder den oberen noch den unteren Bildschirmrand verlassen, da dies nicht in der Hauptschleife überprüft wird. Ist das Labyrinth fertig erstellt, muß es in das Programm eingefügt werden. Dazu wird der Cursor in die linke obere Ecke des Bildschirms gebracht. Dann wird mit »INSERT« Platz für die Zeilennummer, ein Fragezeichen für »PRINT« und ein Anführungszeichen geschaffen. Nun wird die Zeilennummer, das Fragezeichen und das Anführungszeichen in den gerade geschaffenen Platz eingefügt. Nun drückt man »RETURN«. Jetzt fährt man mit dem Cursor vorsichtig an den unteren Rand des Bildschirms und läßt die obere Zeile aus dem Bildschirmfenster nach oben herausscrollen. Mit den verbliebenen Zeilen verfährt man genauso. Man sollte allerdings nicht vergessen, die Zeilennummer laufend zu erhöhen.

(Harald Beine/Arne Jansen/rg)

# Ordnung ist das halbe Leben

> Mit diesem Programm bringen Sie auf bequeme Weise Ordnung in die Directories Ihrer Disketten.

Ist Ihnen das auch schon mehrmals passiert: Sie hatten auf einer Diskette ein schön geordnetes Directory und beim Abspeichern eines weiteren Files stand dieses nicht sauber am Schluß des Directory, sondern mitten zwischen den anderen Programmen. Mit dem hier vorgestellten Directory-Sortierprogramm ist es nun möglich, diese »falsch hineingeratenen« Files herauszunehmen und an geeigneter Stelle wieder einzusetzen. Auch das Einfügen von Trennstrichen ist möglich. Bild 1 und Bild 2 zeigt Ihnen den Unterschied eines unsortierten zu einem sortierten Directory.

Nach dem Starten des Programms legt man die Diskette ein, die sortiert werden soll, und drückt eine Taste. In der linken oberen Ecke wird nun die Sektornummer des Directory-Blocks angezeigt, den der Computer gerade einliest, rechts daneben die Anzahl der in den Speicher eingelesenen Files. Nach beendetem Einlesen erscheint links vom obersten File ein schwarzer Pfeil, der sich mit den Funktionstasten F3 nach oben und F5 nach unten bewegen läßt. Mittels F1 kann nun ein mit diesem Pfeil gekennzeichnetes File nach rechts herausgeschoben und mit F3 und F5 verschoben werden. An gewünschter Stelle wird es mit F1 wieder eingefügt. Somit ist ein beliebiges Vertauschen aller Files im Directory möglich.

F8 schreibt das sortierte Directory wieder auf die Diskette zurück. Will man das gänderte Directory nicht abgespeichert haben, so kann statt dessen mit F6 noch einmal das alte oder ein anderes eingelesen werden.

Zur optischen Abgrenzung mehrerer Files dient der Trennstrich, den man mit F2 erzeugen, mit F3 und F5 verschieben und schließlich wieder mit F1 einfügen kann. Wem übrigens ein anderer Trennstrich besser gefällt, der kann in Zeile 500 für die Minuszeichen andere einsetzen, zum Beispiel SHIFT+*. SHIFT 4- C ist nicht zu empfehlen, da dieser Strich bei Groß-Kleinschrift-Umschaltung ein großes »C« ergibt. Der Trennstrich belegt keinen Block auf der Diskette und ist zur besseren Unterscheidung mit DEL im Directory gekennzeichnet. Ein versehentlich mit »F2« erzeugter Trennstrich kann, wenn er nach rechts gebracht wird, mit F4 wieder gelöscht werden. In gleicher Weise können auch Files aus dem Directory gelöscht werden. Dabei werden aber die von dem File belegten Blöcke nicht wieder freigegeben, so daß ein abschließendes »VALIDATE« der Diskette erforderlich ist, wenn man ein File gelöscht hat.

Nun zum Aufbau des Programms. Es istvorwiegend in Basic geschrieben und enthält zwei kurze Maschinensprache-Routinen. Die erste dient zum Einlesen der Filenamen und Fi-leparameterund wirdmit8YS52992, log. Filenummer, Länge, String aufgerufen. Das Lesen mit GET # in Basic wäre dafür viel zu langsam. Mit dem zweiten Maschinenprogramm werden die am Bildschirm angezeigten Files nach oben oder unten gescrollt. Aufgerufen wird es mit 8YS 53056,r,oz,ls,uz,rs.

Dabei haben die Parameter folgende Bedeutung:

r = Scrollrichtungen: 0 für nach oben und 1 für nach unten
oz = oberste Zeile,
ls = linke Spalte,
uz = unterste Zeile,
rs = rechte Spalte.

Durch Abspeichern des Speicherbereichs von $CF00 bis $CFFF kann diese Routine auch in andere Basic- oder Maschinenprogramme eingebunden werden.

(Edwin Göbel/hm)

# Basic-Befehle im Griff

> Gerade für den Anfänger ist es nicht immer leicht, sich alle Basic-Befehle zu merken. Man denke nur an ausgefallene Befehle wie CMD oder POS(X).

Exbasic Level II kennt als Abhilfe den Befehl HELP, mit dem eine Liste sämtlicher Exbasicbefehle auf den Bildschirm gebracht werden kann. Die folgenden kurzen Programme (drei Lösungsmöglichkeiten für dasselbe Problem), die sich als Hilfsprogramme (Utility) zum Einbau in ein zu entwickelndes längeres Hauptprogramm verstehen, simulieren diesen Befehl HELP für das reine Basic, das heißt, sie geben eine Liste aller Befehle auf dem Bildschirm aus.

Wie geschieht das nun im einzelnen?

Eine unmittelbare Ausgabe aller Basic-Befehle auf dem Bildschirm per PRINT-Anweisungen hätte zwar gegenüber den neuen zu besprechenden drei Methoden den Vorteil, daß man diese Liste alphabetisch ordnen könnte. Sie wäre aber viel zu langsam (in der Größenordnung 5 Sekunden) und das generierte Basic-Programm wäre viel zu lang: Eine Liste aller aneinandergereihten Basic-Befehle, mitTrennzeichen zwischen Befehl und Befehl, umfaßt 331 Bytes. Einschließlich PRINT-Be-fehle, Hochkommata und Zeilennumerierungen würde ein solches Programm also mindestens 375 Bytes benötigen.

Nun enthältaber das Betriebssystem bereits eine Tabelle aller Basic-Befehle: 49310-49565 ($C09E-$C19D). Diese hat lediglich den Nachteil, daß sie keine Trennzeichen verwendet, sondern das Ende eines Basic-Befehlswortes dadurch kennzeichnet, daß der ASCII-Code des betreffenden Zeichens um den Wert 128 (Bit 7 gesetzt) erhöht wird. Das Vorhandensein einer solchen Tabelle wollen wir in den folgenden drei Vorschlägen zur Simulation von HELP ausnützen.

## Methode 1: »HELP« in Basic

Das Basic-Programm nach Listing 1 ist der kürzeste unserer drei Vorschläge (nur 80 Bytes lang), es hat aber den Nachteil, daß es zum Aufbau der Basic-Befehlsliste mehr also vier Sekunden benötigt. Es wird (im Direktmodus oder vom Hauptprogramm aus) per GOSUB500 aufgerufen und PRINTet Zeichen für Zeichen der Tabelle 49310 — 49565, wobei es darauf achtet, daß immerwenn ein Befehlswortzu Ende ist, das betreffende Zeichen vor dem Ausdrucken (auf dem Bildschirm) zuerst normalisiert wird und daß dann zusätzlich noch ein Befehlsworttrennzeichen eingefügt wird (in Listing 1 an der Stelle X$=”. ”, welches Symbol vom Leser beliebig abgeändert und individuellem Geschmack angepaßt werden kann). Nachteilig ist bei allen drei zu besprechenden Vorschlägen, daß man sich sinnvollerweise mit der durch die CBM-Tabelle vorgegebenen Unordnung zufriedengeben muß.

## Methode 2: »HELP« per Maschinensprogramm

Das in Listing 2 aufgeführte Maschinensprogramm zur Ausgabe der Basic-Befehlsliste auf dem Bildschirm ist zwar ein wenig länger als das Basic-Programm in Listing 1, nämlich 106 Bytes lang. Dafür benötigt es aber zum Einlesen der Data-Zeilen deutlich weniger als % Sekunde und erzeugt die Basic-Befehlsliste nach dem Aufruf per SYS700 in einem kaum wahrnehmbaren Bruchteil einer Sekunde. Das eigentliche Maschinenprogramm ist nur 21 Bytes lang und kann (voll verschiebbar) überall abgelegt werden, wo es nicht stört, zum Beispiel in einem durch Herabsetzen der RAM-Grenzen geschützten Maschinensprachbereich oder im Kassettenpuffer oder eben auch dort, wo wir es hingelegt haben, nämlich in den für den Benutzer freien Bereich 678-767 (02A6-02FF). Wir haben es als mit SYS700 aufrufbar gestaltet. Bei Ablage an anderer Stelle aaaa müßte POKE700+I,X in Zeile 610 von Listing 2 durch POKEaaaa+l,X ersetzt und das Programm per SYSaaaa aufgerufen werden. Legt man das Programm nicht in den Kassettenpuffer, sondern wie hier vorgeschlagen, nach 7OOff., dann kann man das generierende Basic-Programm aus Listing 2 natürlich nach dem Einlesen des Maschinenprogramms wieder löschen (ein Maschinenprogramm für größere Löschvorhaben wurde im 64’er Ausgabe 5/84, Seite 85, veröffentlicht). Listing 3 gibt eine ausführlich kommentierte Darstellung des Maschinensprogramms in Assemblernotierung.

## Methode 3: Maschinenprogrammerzeuger ohne Datenzeilen

Will man das Maschinenprogramm in den Kassettenpuffer legen, so muß man es gegebenenfalls (bei zwischenzeitlicher Ausführung von LOAD, SAVE oder VERIFY) oder, wenn sich mehrere Hilfsprogramme den Kassettenpuffer teilen) vor jedem Aufruf neu generieren. Die Schwierigkeiten, die dadurch entstehen, daß der Basic-Datenzeiger per RESTORE nur immer an den Datenanfang gesetzt werden kann, lassen sich beispielsweise durch ein in Computer persönlich, Ausgabe 10/84, Seite 52, beschriebenes Hilfsprogramm beseitigen, mit welchem der Datenzeiger an beliebige Stellen gesetzt werden kann. Das nun noch zu beschreibende Programm nach Listing 4 vermeidet die Schwierigkeiten durch ausschließliche Verwendung von POKE-Anweisungen anstelle von DATA-Zei-len. Um den Aufwand so gering wie möglich zu halten, wurde angestrebt, mit möglichst weniger POKE-Anweisungen auszukommen. Das wurde mit einem Trick erreicht: Das für die Rückübersetzung derToken beim Ausdrucken nach dem LIST-Befehl zuständige Maschinenunterprogramm des Betriebssystems enthält fast alle Befehlssequenzen, die wir für unsere Zwecke benötigen. Das Programm in Listing 4 lädt den Maschinenprogrammabschnitt 50929 bis 51008 (C6F1 — C740), der zugegebenermaßen viel für unsere Zwecke überflüssigen Ballast enthält, mit einer einfachen FOR-NEXT-Schleife in den Kassettenpuffer, (Es wird mit GOSUB700 angesprungen). Jeder zweite und weitere Ansprung kann mit GOSUB730 erfolgen und wird dann in kaum wahrnehmbaren Bruchteilen einer Sekunde ausgeführt.

(Fred Behringer/ev)

# Genau betrachtet: RS232/V.24-Schnittstelle

> Eine kurze und bündige Beschreibung der RS232-Schnittstelle Ihres C 64. Was machen die Signale, wie sind die Pin-Belegungen?

Bei der RS232-Schnittstelle werden die Daten Bit für Bit übertragen, im Gegensatz zur Centronics- oder IEEE-488-Norm, bei der ganze Bytes übergeben werden. Die Bits werden als eine Folge von Spannungsimpulsen mit einer bestimmten Dauer übertragen. In der Praxis werden dabei Pakete von 5 bis 8 Datenbit übertragen, die von einem Startbit und 1 bis 2 Stop-Biteingerahmtsind(Bild 1). DasStartbithatgrundsätzlich logischen Low- und die Stop-Bits High-Pegel. Vor dem Stop-Bit kann ein sogenanntes Paritäts-Bit vereinbart werden, das die Anzahl der High-Zustände im Datenwort immer gerade oder ungerade macht.

Beispiel: Sind in einer 8-Bit-Übertragung 5 Bit gesetzt, wird das Paritäts-Bit ebenfalls gesetzt, wenn gerade Parität vereinbart wurde.

## Päckchenweise Übertragung

Um die Störungs-Anfälligkeit der Übertragung zu mindern, wird logisch »Eins« (gesetztes Bit) nicht durch +5V (TTL-Pegel) realisiert, sondern mit einer Spannung von —3 bis —12V und logisch »Null« mit + 3 bis +12V (RS232 nach DIN 66020). Eine andere Norm ist die RS232/TTY, die gegen äußere Störungen recht unempfindlich ist. Bei dieser Norm werden die logischen Zustände durch das Fließen oder Fehlen eines Stromes (20mA) dargestellt. Der C 64 hat zwar die nötige Software füreine RS232-Schnittstelle im Betriebssystem integriert, verfügt aber nicht über die entsprechenden Spannungspegel. Im C 64 gibt es nur zwei Spannungen: +5V (TTL) und 9V Wechselspannung. Es ist also ein Interface zur Spannungskonvertierung nötig. Links in Bild 2 finden Sie den Schaltplan eines solchen Interfaces (Bauanleitung in Ausgabe 3/85). Rechts im Bild die diskrete Lösung, für die Konvertierung von 0/5V auf ±12V (oben) und von ±12V auf 0/5V (unten). Beachten Sie, daß jede Sende- und Empfangsleitung die entsprechende Transistorschaltung braucht.

Mit einer Masse- und einer Datenleitung könnte schon eine Übertragung von Texten an einen Drucker erfolgen. Was ist aber, wenn die Datenübertragung schneller ist, als der Drucker die Zeichen zu Papier bringen kann? Der Drucker muß dem Computer sagen, wenn er zuviel Arbeit bekommt. Er kann dies auf drei verschiedene Arten tun:

### — Software-Protokoll mit XON/XOFF

Es wird eine zusätzliche Leitung zwischen Computer und Peripherie eingerichtet, über die das empfangende Gerät den Code $13 (XOFF) sendet, wenn es keine Daten mehr annehmen kann. Dieses Signal hat die gleiche Aufgabe wie die Busy-Leitung einer Centronics-Schnittstelle; es stoppt die Datenübertragung. Die Freigabe erfolgt mit dem Code $11 (XON). Die Codes $11 und $13 entsprechen den ASCII-Codes DC1 und DC2.

Die neue Leitung kann natürlich auch zur Übertragung von mehr Informationen verwendet werden. Sende- und Empfangsgerät müssen dann allerdings in der Lage sein, zwei Leitungen (XON/XOFF und die normale Datenleitung) gleichzeitig zu verwalten. Mit dieser zusätzlichen Leitung wird auch der sogenannte Vollduplex-Betrieb möglich. Vollduplex heißt, daß beide Geräte gleichzeitig senden oder empfangen können. Im Gegensatz zum Halbduplex-Betrieb, bei dem zur gleichen Zeit nur in eine Richtung übertragen werden kann.

### — Software-Protokoll mit ETX/ACK

Auch bei dieser Lösung kommt man nicht ohne eine zusätzliche Leitung aus. Sie heißt DTR (Data Terminal Ready). Ist zum Beispiel der angeschlossene Drucker bereit, Daten anzunehmen, aktiviert er die DTR-Leitung und sendet $06 (ACKnow-ledge). DerComputerschicktnun eine Reihe Datenworte über die Sendeleitung und schließt die Übertragung mit $03 zwischendurch immer wieder ab. Den nächsten Datenblock sendet er erst dann, wenn der Drucker sein ACK gegeben hat. Damit die Übertragung nicht in einem Chaos entartet, muß der Sende-Computer über das Puffervermögen des Empfängers informiert sein, um rechtzeitig ein ETX (End Of Text) senden zu können. Nur so kann ein Überlauf des Puffers und der damit einhergehende Datenverlust verhindert werden.

Hat das Empfangsgerät ein ETX festgestellt, werden die empfangenen Daten bearbeitet. Kann der Empfänger neue Daten aufnehmen, sendet er ein ACK an den Computer und die Übertragung beginnt von Neuem.

### — Hardware-Protokoll

Spätestens hier wird es unübersichtlich. Es hilft nur noch Tabelle 1 zur Erklärung der ganzen Signale. Als üblicher Stecker für V.24-Signale hat sich ein 25-poliger D-Sub-Stecker (im Laborslang Cannon gennant) durchgesetzt. Die Bezeichnung der Kontakte ist gleich dreimal genormt: DIN 66020, CCITT V.24 (Comite Consultatif International Telegraphique et Tele-phonique) und EIA RS232C (Electronic Industries Association). Die Bedeutung der Signale ist bei allen Normen gleich, nur die Signalpegel differieren. Die deutsche Norm verlangt, im Gegensatz zu den anderen, negative Logik.

Zum Anschluß einer RS232/V.24-Schnittstelle ist es in den allermeisten Fällen nicht nötig, alle Leitungen zu benutzen. So werden nur wenige unter Ihnen eine synchrone Datenübertragung mit zusätzlichem Clock-Signal realisieren, wie beim seriellen lEC-Bus des C 64. Normalerweise reichen die folgenden Leitungen aus:

1.	eine Masseleitung
2.	je Richtung eine Datenleitung
3.	je Richtung eine Busyleitung

Punkt 1 und 2 dürften klar sein. Punkt 3 kann auf vielfältige Art realisiert werden. In aller Regel werden die Kontakte S2 (RTS) und M2 (CTS) benutzt. Die Erklärung erfolgt am besten an einem Beispiel: Der Drucker zeigt seine Empfangsbereitschaft an, indem er M2 aktiviert. Dieses Signal fragt der Computer ständig am Anschluß S2 ab. Ist M2 inaktiv, stoppt der Computer die Datenübertragung. Nehmen wir an, anstelle des Druckers sei ein Meßgerät angeschlossen, das nur ab und zu Anweisungen vom Computer bekommt und ansonsten sich um interne Aufgaben kümmert. Dann wäre es wenig vorteilhaft, wenn das Meßgerät ständig Befehle vom Computer erwartet; für die eigentlichen Meßaufgaben bliebe zu wenig Zeit. In diesem Fall gestattet das einfache Abfragen des Kontaktes S1 (per Interrupttechnik) eine fast ungestörte Bearbeitung eines Programmes. S1 istmitRTS (RequestToSend) identisch. Aktiviert der Computer S1, »spitzt das Meßgerät die Ohren« und das Meßprogramm verzweigt in die Datenempfangsroutine.

### Nicht auf die Norm verlassen

Die Hersteller von V.24-Schnittstellen scheinen sich nicht immer völlig einig zu sein, wie die Belegung und Bedeutung der einzelnen Stecker-Pins ist. So sind diesem Beitrag hauptsächlich Praxiserfahrungen zugrunde gelegt. Besser als Normblätter ist die Überprüfung der Schnittstelle mit einem Speicheroszilloskop oder einem Digital-Analyzer. Zumal die Steuerleitungen ab und zu mit Fantasienamen belegt oder nicht eindeutig als Sende- oder Empfangsleitung gekennzeichnet werden. Zum störungsfreien Betrieb einer Schnittstelle sollten nichtbenutzte Leitungen auf ein festes Potential gelegt werden. Man verhindert dadurch, daß die Übertragung bei einer eventuellen Abfrage einer solchen Leitung, mit Undefiniertem logischen Zustand, nicht unterbrochen wird.

## V.24 beim C 64

Beim C 64 kann diese Schnittstelle als Gerät der Nummer 2 angesteuert werden. Zur Bestimmung der Kontrollparameter sind zwei Register vorhanden, die auch von Basic aus erreicht werden können.

### Einstellparameter

Mit Tabelle 2 können Sie die Werte bestimmen, die Sie in Kommando- und Kontrollregister schreiben müssen, um ein bestimmtes Übertragungsprotokoll zu bewerkstelligen. Eine »1« bedeutet ein gesetztes Bit.

Das Einschalten der RS232-Schnittstelle geschieht beim C 64 mit OPEN filenr.,2,0,CHR$(Kontrollreg.)+CHR$(Kommandoreg.).
Beispiel: OPEN20,2,0,CHR$(64 + 4 + 2)+CHR$(32 + 1).

Mit dieser Anweisung wird für Filenummer 20 vereinbart: 1 Stop-Bit, 6 Datenbit, 300 Baud, ungerade Parität, Vollduplex und Hardwareprotokoll.

Wird eine Filenummer größer als 128 verwendet, sendet der Computer (wie üblich) nach jedem Carriage Return ($0D) ein Linefeed ($0A). Sollten diese Einstellmöglichkeiten nichtaus-reichen, können Sie direkt in die RS232-Routine eingreifen. Einige Speicherstellen finden Sie in Tabelle 3.

Übertragungsraten größer als 2400 Baud, können nur mit eigenen Maschinenprogrammen realisiert werden.

### Fehlerabfrage

Das Betriebssystem des C 64 verfügt über eine Fehlerbehandlung der RS232-Schnittstelle. Der Status dazu kann entweder durch die Variable ST abgefragt werden, oder direkt mit Speicherzelle $0297. Die Bedeutung der einzelnen Bits von ST finden Sie in Tabelle 4.

(Jens Maßmann/hm)

# Longscreen VC20

> Diese kleine Utility wird sicher bei alien Anwendern Freude finden, die das unproportionale Breitschriftformat des VC 20 stört.

Die Routine dreht den kompletten Zeichen, Farb- und Bildschirmspeicher um 90 °. Das Ergebnis ist eine hervorragend lesbare Bildschirmmatrix mit herrlich schlanken Zeichen (siehe Bild). Natürlich sind nach wie vor beide Zeichensätze vorhanden.

Für das Programm benötigt man mindestens eine 8-KByte-RAM-Erweiterung. Nach dem Start wird folgende Speicheraufteilung vorgenommen:

Basic-RAM
	 $1d18(7448)
Maschinenprogramm
	 $1c00(7168)
Grafik-
RAM (2K)
	 $1400{5120)
Video-RAM
	 $1200(4608)
Print-RAM
	 $1000(4096)
TODO

Die Position des Speichers für Print-Operationen bleibt also. Falls in diesen Bereich gePOKEt wird, werden solche Zeichen auch übertragen. Der VIC zeigtjetzt allerdings nicht mehr das Print-RAM, sondern das Video-RAM, wo der Inhalt des PrintRAM um 90 Grad gedreht dargestellt wird. Die Routine wird über das IRQ-Signal gesteuert. Das Bild wird 12mal pro Sekunde aufgebaut.

Folgende RAM-Adressen werden benutzt:
$00/01	Zeiger in Video-RAM
$02/03	Zeiger in Print-RAM
$06/07	Zeiger in Video-Farb-RAM
$08/09	Zeiger in Print-Farb-RAM
$04	Y-Hilfsregister für Print-RAM
$05	Y-Zeiger in Video-RAM
TODO

Sollte die RESTORE-Taste betätigt worden sein, so befindet sich der Rechnerwieder im Normalmodus. Durch Eingabe des Befehls »SYS 7410« kann die Routine ohne Programm-Verlust wieder gestartet werden. Die Umschaltung in den Grafik-/ Großschrift-Modus erfolgt über »PRINT CHR$ (142)«, in den Textmodus zurück gelangt man über »PRINT CHR$ (14)«.

(Wolfgang W. Wirth/ev)

# C 16: HELP und TRACE verbessert

> Dieses kleine Programm implementiert eine wesentlich erweiterte TRACE-Funktion. Auch HELP wird damit um einiges übersichtlicher.

Nachteilig bei der bisherigen Fehlersuche durch »HELP« ist das entnervende Blinken der Fehlerstelle und aller nachfolgenden Zeichen. Eine konzentrierte Fehlersuche ist kaum möglich. Durch die Änderung dieser Routine wird die Fehlerstelle fortan nicht mehr blinkend, sondern in reverser Schreibweise ausgegeben und auch nur diese einzige Stelle, nicht mehr die gesamte Restzeile. Der Fehler ist somit mit einem einzigen Blick zu erfassen.

Das C16-Tracing mag etwas für Leute mit Facettenaugen sein, aber wohl nichts für die Mehrzahl der Anwender. In der durch dieses Programm erzeugten neuen Version werden nicht mehr wild die abgearbeiteten Zeilennummern ausgegeben, sondern die gesamte aktuelle Programmzeile gezeigt. Der Befehl, auf dem der Programmzeiger gerade steht, erscheint revers geschrieben. Nach jeder Zeilenausgabe stoppt das abzuarbeitende Programm, und die Trace-Routine wartet auf irgendeinen Tastendruck.

Danach wird die angezeigte Zeile bis zum folgenden Trennzeichen ausgeführt. Dieser Vorgang wiederholt sich bis zum Programmende. Der Programmablauf läßt sich wie gewohnt mit der STOP-Taste unterbrechen.

Vor allem für Basic-Anfänger ist dieses verbesserte Trace eine wertvolle Hilfe, da sich das Programm bei der Ausführung von Befehl zu Befehl direkt verfolgen läßt.

(Wolfgang W. Wirth/ev)

# Bücher

## Basic-Wegweiser für den Commodore 64

Hinter diesem eher bescheiden wirkenden Titel verbirgt sich mehr als ein bloßes Remake des C 64-Handbuchs, wie es zur Zeit leider allzu oft in der nahezu unüberschaubaren Fachbuchlandschaft anzutreffen ist. Vielmehr bietet dieses im Rahmen der »Wegweiser«-Reihe des Wiesbadener Vieweg-Verlags erschienene Buch auf 244 Seiten einen interessanten Einstieg in das weite Feld der Datenverarbeitung, der nicht nur dem Laien einiges Neue vermitteln mag.

Beginnend mit grundlegenden Begriffsklärungen wie »Was ist Hardware, Software, Firmware?« oder »Welche Unterschiede gibt es zwischen Großrechnern und Mikrocomputern?«, erläutert Autor Dr. Ekkehard Kaier dem Leser ausführlich die Funktion von Betriebssystem und Anwenderprogramm und stellt kurz die derzeit wichtigsten Programmiersprachen vor. Auch auf die fundamentalen Techniken des Anlegens von Programm- und Datenstrukturen wird in diesem ersten von drei Abschnitten des Buches eingegangen. Erst nachdem der Benutzer seinen Computer in den Gesamtrahmen der Informatik einzuordnen vermag, wird er von Expertenhand behutsam in die Welt seines C 64 geführt.

Dies macht sich der zweite Teil der Lektüre zur Aufgabe, an dessen Anfang eine gründliche Einweisung in Tastatur, Bildschirm und Diskettengerät steht. Anschließend lernt der Leser anhand kleiner Beispielroutinen den gesamten Basic-Wortschatz seines C 64 kennen und erstellt sein erstes Programm. In diesem Zusammenhang wird auch kurz auf die Spracherweiterungen Basic 4.0 und Simons Basic, sowie auf die Kompatibilität von C 64-Programmen zu Computern der anderen Commodore-Serien hingewiesen. Nach dem Studium dieses zweiten Abschnitts sollte der Benutzer seinen C 64 selbst bedienen und einfache Programme erstellen können.

Im dritten und mit 128 Seiten weitaus umfangreichsten Teil des »Basic-Wegweisers« erfolgt eine gründliche Einarbeitung in die Basic-Programmierung des C 64. Der Einsatz von Folge-Auswahl-, Wiederholungs- und Unterprogrammstrukturen, das Suchen, Sortieren und Mischen von Daten lehrt den Leser systematisch zu programmieren. Probleme der Stringverarbeitung werden hier erörtert, Wege zur Behandlung sequentieller und Direktzugriffsdateien aufgezeigt. Alle theoretisch erarbeiteten Inhalte erhalten durch aussagefähige Beispielprogramme praktischen Bezug. Bei einem abschließenden Ausflug in Simons Basic soll sich der Benutzer mit Musikprogrammierung, hochauflösender- und Spritegrafik vertraut machen. Unglücklicherweise ist dieses Kapitel für Nichtbesitzer von Simons Basic — vermutlich die Mehrzahl der Leser gänzlich nutzlos.

Von diesem geringfügigen Mangel abgesehen, präsentiert sich mit »Basic-Wegweiser für den Commodore 64« ein außergewöhnlich klar strukturiertes und inhaltsstarkes Buch, von dem selbst bei einem Preis von 38 Mark nicht nur der Verleger profitiert.

Die im Buch abgedruckten Lehrprogramme können gegen 42 Mark bei Vieweg auf Diskette angefordert werden.

(Jörg Veit)

Dr. E. Kaier, Basic-Wegweiser für den Commodore 64, Vieweg & Sohn Verlag GmbH, 244 Seiten, ISBN 3-528-04303-2, 38 Mark.

## Dienstprogramme VC 20, Commodore 64 und Executive

Im Verlauf der letzten 12 Monate hat es sich herumgesprochen, daß Computerliteratur ein Renner auf dem Büchermarkt ist. Das hat zu allerlei merkwürdigen »Buchblüten« geführt: Papier ist geduldig! Der durch Schulbücher und wissenschaftliche Werke renommierte Vieweg-Verlag hat die Zeichen der Zeit erkannt. Auf einen Vertrauensvorschuß beim Käufer bauend, bietet er inzwischen den 8. Band seiner Reihe »Anwendung von Mikrocomputern« an, wobei er großzügig auch Homecomputer wie den VC 20 oder den Commodore 64 einschließt.

Ernst-Friedrich Reinking wendet sich mit diesem Buch sowohl an den »weniger vorgebildeten« als auch an den »guten« Programmierer. Tatsächlich bietet er auch jedem etwas:

Ein Drittel des Inhaltes führt in die Assembler-Programmierung ein. Wer allerdings erwartet, hier auf knapp 32 Seiten wirklich Assembler-Programmierung lernen zu können, muß enttäuscht werden: Mehr als eine kleine Gedächtnisstütze ist auf so wenig Platz nicht unterzubringen. Ganz nett ist die Auflistung der Kernal-Routinen, die jeweils noch mit einem kleinen Beispiel gewürzt sind.

Danach geht’s erst richtig los: Wem noch Utilities wie AUTONUMBER, RENUMBER (mit GOTO, GOSUB,...), MERGE, TRACE oder SINGLE-STEP in seiner Programmsammlung fehlen, der findet diese Ergänzungen hier. Und das in Maschinensprache, sauber programmiert und sehr gut erklärt. Außerdem findet man noch eine DUMP-Funk-tion (für die einfachen Variablen), ein Programm zum Hervorheben von REM-Zeilen und SEARCH, was erlaubt, aus einem Basic-Programm beliebige Suchbegriffe mit Angabe der Zeilennummer herauszufinden. Die Eingabe des Gesuchten ist allerdings etwas eigentümlich: Eine Zeile 0 mit dem Suchbegriff muß vor das Basic-Programm gehängt werden.

Kritik finden muß auch eine ziemlich unsinnige Routine, die sich etwas hochtrabend »+ /-Scrolling« nennt, aber nichtswei-ter tut, als ein Programm auf reichlich unbequeme Weise Zeile für Zeile zu listen.

Und weil gerade das Negative dran ist: Warum kann Reinking die an sich ganz nützlichen Sortierroutinen HEAPSORT nicht auch in Maschinensprache anbieten? In Basic sind sie wirklich zu langsam! Außerdem ist es ein Jammer, daß er gerade hier von der Praxis alles sehr deutlich zu erklären abweicht und den Leser mit einem etwas undurchschaubaren Flußdiagramm abspeist. Durch ein Programm »Sortiertes Directory« (in Basic) und ein weiteres, »Unscratch«, welches — zwar auch langsam, weil in Basic — versehentlich gelöschte Files auf der Diskette wieder herstellt, wird man allerdings ganz gut entschädigt. Ein »UNNEW«, durch das mittels NEW oder Reset gelöschte Basic-Programm vom Interpreter wiedergefunden werden, eine Hardcopy-Routine, die den Inhalt des normalen Bildschirmes per Drucker für die Nachwelt fixiert (allerdings mit anderem Zeilenabstand, was sich bei Grafiken nachteilig auswirkt) fehlen ebensowenig wie ein kleiner Disassembler (ebenfalls in Basic).

Alle Programme sind sowohl für den VC 20, als auch den C 64 und den Executive (SX 64) ausgelegt. Lediglich zwei wurden speziell auf den VC 20 zugeschnitten: Ein Hardcopy-Pro-gramm, das einen selbstdefinierten Zeichensatz mitberücksichtigt und ein Programm zum Zeichnen von Funktionen auf dem Bildschirm, was alle VC 20-Besitzer ohne Supererweiterung freuen wird. Im Anhang findet sich noch eine Liste von nützlichen Interpreter-Routinen. Leider kann man aber ohne ROM-Listing nicht viel damit anfangen: Es fehlen alle Angaben darüber, wie man Parameter übergibt oder Ergebnisse abruft.

Resümee: Ein trotz der geschilderten Kritik empfehlenswertes Buch für den fortgeschrittenen Anfänger, der aus den vorgestellten Assembler-Routinen viel lernen kann.

(Heimo Ponnath)

Info: Ernst Friedrich Reinking, Dienstprogramme VC 20, Commodore 64 und Executive, Vieweg & Sohn 1984, ISBN 3-528-04299-0, 26,80 Mark.

## Grafik auf dem Commodore 64

Geht man in eine Buchhandlung und blickt in die Sammlung von Büchern über den Commodore 64, so sieht man auf den Titeln immer wieder zwei Wörter: Basic und Grafik.

Mit letzterem beschäftigt sich eine Veröffentlichung des durch seine Schulbücher bekannten Westermann-Verlags.

In »Grafik auf dem C 64« wird allerdings nicht, wie schon öfters geschehen, erklärt, wie man selbige mit viel POKEs und Tricks auf die heimische Mattscheibe bekommt. Vielmehr beschäftigt es sich mit den vielfältigen Anwendungsmöglichkeiten der Grafikbefehle von Simons Basic.

Und so wimmelt es denn auf den vorliegenden 210 Seiten nur so von Programmbeispielen. Dabei sind unter anderem ein hervorragender Funktionsplotter, der allerdings noch einiges mehr kann, oder ein Programm zum Zeichnen dreidimensionaler Funktionen ohne die sogenannten »verdeckten Linien«.

Doch bei alledem kommt auch die Theorie nicht zu kurz. So erfährt man beispielsweise wie man Kurven, also nicht einfach Kreise oder Ellipsen, sondern beliebig gekrümmte verschlungene Gebilde nach dem Bezier-Verfahren zeichnen kann, oder wie man ein Niveaulinienbild einer dreidimensionalen Funktion erhält. Manchmal wird allerdings über das Ziel hinausgeschossen, wenn es um Differentialgleichungen oder gar Differentialgleichungssysteme geht. Hier ist zum genauen Verständnis schon ein gehöriger Schuß Oberstufenmathematik notwendig. Insgesamt gesehen ist das Buch doch recht mathematisch gehalten, aber immer noch ganz gut lesbar.

Zu erwähnen wäre vielleicht noch, daß natürlich alle Programmbeispiele erklärt werden. Sogar der Befehlssatz von Simons Basic wird, sofern er die Grafik betrifft, verständlich gemacht.

Ein klares Fazit: Empfehlenswert für jeden, der Grafik nicht nur verstehen, sondern auch ausnutzen möchte.

(Boris Schneider)

Walter Bachmann, Grafik auf dem C 64, Westermann-Verlag 1984, 204 Seiten, ISBN 3-14-508811-4, 39 Mark.

# Der Ada-Trainingskurs auf dem C 64

> Ada wurde im Jahre 1975 vom amerikanischen Verteidigungsministerium in Auftrag gegeben, um die Schwierigkeiten und die hohen Kosten in den Griff zu bekommen, welche durch die Vielfalt konkurrierender Programmmiersprachen entstanden sind. Jetzt gibt es auch auf dem C 64 die Möglichkeit, mit dieser modernen Sprache zu arbeiten.

Nur einige wenige Programmiersprachen — sogenannte Hochsprachen — haben eine weite Verbreitung gefunden. Cobol in der Wirtschaft, Fortran und Pascal in der Naturwissenschaft und Basic in der Home-Computerei.

Im riesigen Anwendungsgebiet der Industrie und Technik aber sind Hochsprachen selten zu finden.

Warum? Nun, die meisten für Steuerungen eingesetzten Computer sind nur mit einer bestimmten Hochsprache ausgestattet, die aber spezielle Eigenschaften des Computers oft nicht oder nur umständlich ausnutzt. Eine solche Hochsprache ist daher für diese Zwecke in der Regel nicht genügend effizient, zu langsam und zu aufwendig im Speicherbedarf.

Industrie-Programmierer greifen deshalb viel lieber auf Assemblersprachen zurück, mit dem Ergebnis, daß Programme nicht auf andere Computer übertragbar sind, meistens nur vom Autor selber verstanden und verbessert und nicht zu größeren Programmblöcken zusammengefügt werden können.

Selbst dann, wenn Programmierer die gleiche Hochsprache benutzen, müssen sie oft den Umgang mit neuen Betriebssystemen und anderen Programmentwicklungsmitteln lernen, beispielsweise Text-Editoren, Grafiksysteme, Konfigurationskontrollen und Fehlersuchhilfen. Schließlich sind Programme, die es gestatten, von einem System in ein anderes zu übersetzen, sehr aufwendig und teuer, genauso wie das Um- und Dazulernen der Programmierer.

Kein Wunder also, daß ein so großer Auftraggeber und Selbstverbraucher von Software wie das Verteidigungsministerium in den USA eine Hochsprache forderte, die alle diese Mängel abstellen sollte. Ganz nebenbei sollte diese Sprache stark strukturiert sein, eine einfache Fehlerbehandlung ermöglichen, mit unterschiedlicher Hardware zusammenarbeiten und schließlich auch noch die parallele Bearbeitung von Prozessen erlauben.

Die Antwort auf diese Herausforderung ist Ada: eine neue Standardsprache, die alle anderen Hochsprachen ablösen soll.

Um das zu erreichen, oder besser gesagt, um zu verhindern, daß Ada auch nur wieder eine Hochsprache von vielen wird, wurden die begabtesten Sprachexperten aus Wissenschaft und Industrie zur Entwicklung herangezogen. Diese Entwickler haben der Sprache Ada viele erprobte und bewährte Elemente anderer Hochsprachen einverleibt, mit dem Ziel, »modern software practices«, das heißt also, moderne Methoden der Software-Entwicklung zu ermöglichen.

## Das Ada-Konzept

Die prinzipiellen Eigenschaften von Ada lassen sich in mehreren Gruppen zusammenfassen:
1. Definition von Datentypen, wie:
TAGE_IM_MONAT: INTEGER RANGE 20..31;
erzeugt hier eine Variable mit dem Namen »TAGE_IM_MONAT«, welche nur die ganzzahligen Werte von 20 bis 31 annehmen kann. Damit kann der Programmierer seine eigenen Datentypen erfinden und sie dann zur Benennung von Variablen hernehmen.

Die Datentypen können auch ihre eigenen Werte explizit benennen, wie zum Beispiel:
TYPE MONAT IS (JAN,FEB,MAR,APR);
DER_BESTE_MONAT : MONAT;
Dann kann man schreiben:
IF DER_BESTE_MONAT = APR THEN ....

Diese Eigenschaft von Ada erhöht nich nur die Lesbarkeit, sondern erleichtert es dem Programmierer, die Übersicht zu behalten und erlaubt anderen Leuten, das Programm zu verstehen.
2. Das Konzept der Programmstruktur stellt Befehle wie IF..THEN..ELSE..ENDIF und CASE..WHEN..END-CASE zur Verfügung, welche zusammen mit der Schleifenbildungjeden logischen Programmfluß ohne GOTO zulassen.
3. Um zu erreichen, daß mehrere Leute Programmteile schreiben können, die später zusammenfüg-bar sind, hat ein Programm getrennte Merkmale »nach außen« (specification) und »nach innen« (body). Zum Beispiel kann ein Programmierer ein Programm zur Quadratwurzel schreiben. Die »specification« definiert genau, was andere Benutzer wissen müssen (welche Angaben es braucht und welche Angaben es liefert). Im »body« können Methoden und Formeln verwendet werden, die niemanden außer den Autoren selbst interessieren.
4. Ada-Programme bestehen aus »Paketen«, das heißt sie sind blockstrukturiert. In einem Paket sind beliebige Daten und Anweisungen zusammengefaßt, die eine ganz bestimmte Aufgabe erfüllen. Ein Paket kann in verschiedenen Systemen verwendet werden. Es ist letztendlich möglich, Software-Pakete genauso in bestehende Systeme »einzustecken«, wie man das heute mit integrierten Chips macht.
5. Schließlich soll Ada auch Multitasking erlauben. Darunter versteht man die Möglichkeit, mehrere Programmteile gleichzeitig und unabhängig voneinander ablaufen zu lasen und sie nur an ganz bestimmten Stellen zusammenzubinden.

Soviel zur Sprache Ada selbst. Was aber ist der Stand der Entwicklung heute?

Ada wird jetzt gerade eingeführt, aber nicht nur vom Militär und nicht nur in den USA.

Europäische Aktivitäten konzentrieren sich auf Frankreich, Deutschland, Finnland und Großbritannien. Es haben sich schon User-Groups gebildet, Universitäten beschäftigen sich mit Anwendungsstudien und viele Organisationen bemühen sich um die Entwicklung von Lehr- und Trainingsprogrammen.

Eins haben alle diese Aktivitäten gemeinsam: sie beziehen sich ausschließlich auf große und mittlere Computeranlagen und beschränken auf diese Weise den Zugang zu Ada nur auf den exklusiven Kreis der Profis.

## Ada auf dem C 64

In dieser Situation bildet der Ada-Trainingskurs für den C 64 von Data Becker eine hochzulobende Ausnahme, denn er führt erstmalig Ada in die Welt der Home-Computer ein. Der Trainingskurs besteht aus einem Handbuch und einer Programmdiskette, mit deren Hilfe Ada so erklärt wird, daß komplette Programme in dieser Sprache geschrieben werden können.

Die Programmdiskette enthält fünf Programme:

* einen Editor
* einen Syntax-Prüfer
* einen Semantik-Prüfer plus Code-Generator
* einen Assembler (Übersetzer) — einen Disassembler

Für einen Hobby-Programmierer, der nur Basic kennt, ist das sehr verwirrend. Aber ich bitte zu bedenken, daß auch Basic nicht einfach so abläuft, wenn »RUN« eingetippt wird, sondern daß jede Basic-Zeile vom Computer intern in einen komplizierten Vorgang analysiert werden muß. Dieser Analyse-Vorgang ist in den Commodore-Computern fest eingebaut. Für Ada muß der Trainingskurs einen entsprechenden Übersetzer separat zur Verfügung stellen — eben den oben aufgelisteten Code-Generator und den Assembler.

Außerdem ist jedem Basic-Pro-grammierer geläufig, daß der Rechner merkt, wenn ein Befehl falsch geschrieben worden ist, ein Komma fehlt oder in einer Zeile sonst irgend ein Fehler gemacht worden ist. Die nicht immer verständlichen englischen Fehlermeldungen sind ja oft genug Grund zur Frustration.

Diese Überprüfung besorgt beim Ada-Trainingskurs das Syntax- und das Semantik-Prüfprogramm, welche auf Einhaltung der Rechtschreibung und der Grammatik von Ada achten.

Der Editor steht genau wie bei Basic am Anfang aller Aktivitäten. Bei Basic denken wir nicht lange nach und nehmen es als gegeben hin, daß wie per Tastatur Zeichen, Zahlen und Texte schreiben und eingeben können, daß der Cursor bewegt werden kann und daß uns alle möglichen Steuertasten zur Verfügung stehen. Das eingebaute Betriebssystem stellt uns diese Editor-Funktion zur Verfügung.

Für Ada muß das alles extra gemacht werden und dazu dient das Editor-Programm.

Der Disassembler schließlich ist ein Luxus, der zusätzlich zum Assembler angeboten wird, für ein Ada-Programm aber nicht unbedingt benötigt wird. Soviel sei zur Programmdiskette gesagt.

Meine Meinung über das Handbuch ist zweigeteilt. Einerseits finde ich die Einführung in Ada und die Programmierung sehr gelungen, verständlich und gut lesbar. Die Übungsbeispiele sind klar dokumentiert und erläutert.

Andererseits aber sind die Anweisungen, wie die Übersetzungsprogramme zu bedienen sind, vermischt mit einer sehr detaillierten Beschreibung der Arbeitsweise eben dieser Programme, die nur für Fachleute verständlich ist. Das hat zur Folge, daß der Ada-Anwender, der sich nur für die Sprache selbst interessiert, in Erklärungen ertrinkt, welche für das Verständnis und die Anwendung von Ada allein nicht notwendig sind.

Ich selbst habe mehrere Abende gebraucht, um ein erstes kleines Ada-Programm zum Laufen zu bringen und dafür — ich bin so frei — gebe ich dem Handbuch die Schuld.

Zusätzlich enthalten die Teilprogramme einige kleine Unzulänglichkeiten, auf die ich im folgenden noch eingehe.

### Das erste Ada-Programm

Zunächst aber möchte ich beschreiben, wie man zum ersten Ada-Erfolgserlebnis kommt.

Zuerst wird der Editor geladen. Er meldet sich nach kurzer Ladezeit von selbst und muß nicht — wie im Handbuch beschrieben — mit »RUN« gestartet werden.

Der Editor, und noch viel mehr die anderen Programmteile, haben zum Teil ziemlich lange Ladezeiten, die weder im Text noch auf dem Bildschirm angekündigt werden. So ist man häufig im Zweifel, ob man noch warten soll, oder ob das Programm abgestürzt ist, was leider zuweilen auch vorkommt.

Erfreulich, weil leicht verständlich und übersichtlich, sind die verschiedenen Menüs.

Abgesehen von anfänglichen Farbeinstellungen zeigt das Editor-Menü die Befehle für zwei Aktionsgebiete an:

* Schreiben beziehungsweise Ändern des Ada-Programmtextes
* Weiterverarbeiten des Ada-Programms, Ein- und Ausgabe

Beide Befehlssätze bedienen sich der Funktionstasten. Da jede Funktionstaste dadurch zwei Bedeutungen hat, muß der Lernende am Anfang ziemlich oft die Menüs aufrufen, um seinem Gedächtnis auf die Sprünge zu helfen.

### Der Editor

Das Schreiben und Ändern verfügt über sehr komfortable Hilfsmittel, wie automatische Zeilennumerierung, Einfügen von Zeilen, vor-und rückwärts.

Ein Programm, auch ein unfertiges, kann mit dem zweiten Befehlssatz ausgedruckt oder auf Diskette abgespeichert werden. Ein abgespeichertes Programm ist von Diskette wieder ladbar. Überhaupt stehen alle gängigen Anweisungen an die Diskettenstation zur Verfügung.

Wenn man schließlich glaubt, daß ein Programm fertig und natürlich fehlerfrei ist, wird es zum Übersetzen geschickt.

Die entsprechende Funktionstaste zaubert neue Anweisungen auf den Bildschirm, welche abfragen, ob man wirklich übersetzen will und wenn ja, ob das Programm zu allererst abgespeichert werden soll. Die erste Frage bietet eine belächelbare, die zweite Frage eine sehr sinnvolle Sicherung gegen Programmverlust.

Die dritte Frage nach einer »Spur« erscheint im Textbuch nicht. Ich habe weder sie noch ihre Auswirkungen irgendwo finden können. Natürlich ist es durch Experimentieren letztlich möglich, den Sinn der »Spur«-Entscheidung herauszutüfteln. Aber hier muß die Frage erlaubt sein, ob das im Sinne eines Lernprogramms ist? Für alle Interessierten: Mit der »Spur«-Option wird der Compiler angewiesen, zusätzliche Textangaben, die Auskunft über die gerade abgearbeiteten Zeilen geben, in den erzeugten Code einzucompilieren. Es handelt sich also um eine Art »Trace«-Funktion für Maschinensprache.

Doch weiter: Immer noch als Teil des Editors erfolgt jetzt eine »lexikalische Analyse«, welche (Zitat) »die einzelnen Worte des Programms erkennen und Worte, die in Ada keinen Sinn ergeben, ausfiltert«.

Bevor mitgeteilt wird, ob diese Analyse erfolgreich war oder Fehler aufgespürt wurden, wird erst einmal die Programmdiskette verlangt, von welcher der nächste Programmteil, nämlich der Syntax-Prüfer eingelesen und nach einer längeren angsterfüllten Wartezeit gestartet wird.

Die Syntax-Analyse prüft, ob ein Programm den grammatischen Regeln von Ada entspricht.

Ein »lexikalischer« Fehler (»kroce-dure« statt »procedure«) führt prompt zu einer Fehlermeldung, gefolgt von der Frage, ob der »Stack« ausgegeben werden soll. Im Handbuch ist zwar, eingebettet in eine ausführliche, an den Fachmann gerichtete Beschreibung der Arbeitsweise des Syntax-Prüfers, diese Ausgabemöglichkeit erwähnt aber nicht, wie sie herbeigeführt wird. Mehrfaches Drücken der RETURN-Taste brachte in der Tat Zahlenreihen auf den Schirm, deren Bedeutung zwar im Detail beschrieben wird, dem Laien aber nicht weiterhilft.

Ausgezeichnet dagegen ist die nachfolgende Fehlerdiskussion, welche die fehlerhafte Zeile, den Fehler und mögliche Abhilfen und Korrekturen aufzeigt.

Die Syntax-Prüfungwird abgebrochen, und es kommt die Aufforderung, wieder die Programmdiskette einzulegen. Es leuchtet natürlich ein, daß von ihr wieder der Editor eingelesen wird, um den Fehler beheben zu können. Was nicht einleuchtet, ist, daß nach dem Laden das Programm hängen bleibt: Absturz!

Bei Entdeckung eines syntaktischen Fehlers (zum Beispiel ein fehlendes Semikolon) läuft dieselbe Prozedur ab, jedoch mit zwei großen Ausnahmen. Zum ersten wird nach der Fehlerdiskussion die Syntax-Prüfung fortgesetzt, um noch das restliche Programm zu analysieren. Zum zweiten stürzt das Programm beim Wiedereinladen des Editors jetzt erfreulicherweise nicht ab. Natürlich kann in beiden Fällen das fehlerhafte Ada-Programm wieder geladen werden. Aber ein Absturz ist halt einfach ärgerlich.

Sind alle lexikalischen und syntaktischen Fehler ausgemerzt, folgt die Aufforderung, von der Programmdiskette den dritten Teil, nämlich den Semantik-Prüfer, einzulesen. Dieser prüft, ob das Programm vom Aufbau her korrekt ist. Zum Beispiel ist eine Anweisung an den Drucker, die das fehlerhafte Wort »Dricker« verwendet, lexikalisch und syntaktisch richtig, wird aber von der semantischen Analyse erwischt.

Trotz eventueller Fehler übersetzt der Code-Generator des Semantik-Prüfers in einem ersten Durchgang das Ada-Programm in ein Assemblerprogramm. Dieses kann entweder mit dem Assembler endgültig in ein Maschinenprogramm übersetzt werden, oder es muß mit dem Editor erst noch korrigiert werden. Für Assemblercode-Spezialisten kann auch das Assemblerprogramm geladen und direkt verbessert werden. Nur eins, die Befolgung der Aufforderung, eine dieser drei Optionen zu benützen, führt unweigerlich zum Absturz. Es hat einige Versuche gekostet, bis als einzige Vorgehensweise feststand, den Computer zuerst durch Ausschalten zurückzusetzen — wahrhaft keine elegante Methode in einem Trainingskurs.

Ist das Ada-Programm endlich fehlerfrei, wird der Assembler geladen. Er fragt nach dem Namen des vorläufigen Assemblerprogramms — und wehe, Sie denken nicht daran, unaufgefordert die Datendisket-'te einzulegen, auf der das besagte, zu übersetzende Programm gespeichert ist. Diese kleine Unaufmerksamkeit wird wieder mit Absturz des Programms bestraft.

Wenn Sie es aber richtig machen, übersetzt der Assembler in einem zweiten Durchgang das Programm in echten Maschinencode, der mit »RUN« gestartet und sonst wie ein normales Maschinenprogramm behandelt werden kann.

Wie eingangs erwähnt, braucht man den Programmteil Disassembler für Ada nicht, es sei denn, der Kursteilnehmer will, was der Autor empfiehlt, gleich die Gelegenheit nutzen und Maschinensprache lernen. Dann allerdings kommt ihm die ausführliche Beschreibung von Assembler und Disassembler, die unabhängig von Ada auf eigenen Füssen stehen, sehr zugute.

## Zusammenfassung

Ich bin begeistert von der Möglichkeit, die Sprache Ada zu lernen, und in ihr auf dem C 64 programmieren zu können.

Die Lehrmethode einer schrittweisen Einführung in die Sprache ist auch für Laien geeignet, die bisher nur in Basic gearbeitet haben.

Die Übersetzungsmethode ist zwangsläufig etwas langwierig, die vielen Diskettenwechsel lassen sich durch den begrenzten Speicher des C 64 nicht vermeiden. Und wenn man einmal den Dreh gefunden hat, ist das nicht mehr störend.

Bis dahin allerdings ist es ein steiniger Weg. Die Programme sind leider nicht laiensicher. Ein Lernprogramm muß einfach dem dümmsten Bedienungsfehler Rechnung tragen und nicht, wie in diesem Trainingskurs, immer wieder zum Absturz führen.

Der begreifliche Stolz des Autors auf die für meine Begriffe fantastische Leistung, die Prüf- und Übersetzungsprogramme geschrieben zu haben, drängt die Beschreibung derselben zu sehr in den Vordergrund. Auch das Argument, daß dadurch wichtige Grundkenntnisse der Assembler- und Maschinensprache erlernbar sind, zieht meines Erachtens nicht. Denn mit dem Trainingskurs — für den stolzen Preis von 198 Mark — will ich Ada lernen und nicht Assemblersprache.

Es wäre Data Becker dringend zu empfehlen, sowohl das Handbuch als auch die Programme zu revidieren und davon eine zweite Version herauszugeben. Die kritisierten Mängel sind alle leicht korrigierbar, wenn man sich die Zeit nimmt und die Bedürfnisse von Laien vor Augen hält.

Dieses ausgezeichnete Unterfangen, die Zukunftssprache Ada den Home-Computern zu eröffnen, darf einfach nicht an ärgerlichen Programmiermängeln und inkonsequenten Erklärungen scheitern.

## Ada — für wen?

Der Ada-Trainingskurs kann allen an modernen Programmiersprachen interessierten Anwendern empfohlen werden. Auch wer sich für Compilerbau interessiert, ist mit diesem Kurs gut beraten, da das Handbuch sehr ausführlich auf allgemeine Prinzipien der Compilierung eingeht. Allerdings sollte man die Fähigkeiten dieser Ada-Trai-ningsversion nicht überschätzen. Der Ada-Trainingskurs eignet sich entschieden besser zum Lernen von Ada als für größere Programmierungsprojekte.

Nicht verschwiegen werden soll auch, daß eine Ada-Version für einen Heimcomputer immer nur die wichtigsten Aspekte der Sprache unterstützen kann. So unterstützt Ada als Trainingskurs beispielsweise kein Multitasking, also keine Parallelverarbeitung bestimmter Programmabschnitte. Doch damit kann man leben. Entscheidend ist die Möglichkeit, eine moderne Sprache wie Ada mit dem C 64 lernen zu können.

(Dr. Helmuth Hauck/ev)

# Protext-Textprofi mit 80 Zeichen

> Einen entscheidenden Schritt in Richtung professionelle Textverarbeitung macht Protext. Wichtigstes Hauptmerkmal: 80 Zeichen ohne Kompromisse.

Textverarbeitungsprogramme für den C 64 gibt es inzwischen wie Sand am Meer. Und fast alle haben eines gemeinsam: Will man den Text in seiner endgültigen Form sehen, so muß man ihn ausdrucken. Es gibt bisher keine befriedigende Lösung, mit den beschränkten Fähigkeiten des VIC-Chips eine saubere 80-Zeichen-Darstellung auf dem Bildschirm zu erhalten, um die-gesamte Textbreite vor Augen zu haben. Horizontales Scrolling oder softwaremäßig simulierte 80 Zeichen sind nur Kompromisse. Das einzig Wahre ist eine 80-Zeichen-Karte; eine Hardwarelösung also. Doch leider vertragen sich die meisten Textverarbeitungsprogramme nicht mit diesen Karten.

Doch damit ist jetzt Schluß. Zumindest, wenn man es übers Herz bringt, rund 500 Mark auf den Tisch zu blätternund die 80-Zeichen-Karte »80-ZK-plus« sowie das dafür geschriebene Programm »Protext« zu erwerben. Nicht nur die 80 Zeichen sind es, die dem Ganzen das Prädikat »Textprofi« verleihen. Auch die enorme Vielfalt an Funktionen hebt Protext aus der Masse der Textverarbeitungsprogramme heraus.

## Befehlsvielfalt

Wer klein anfangen will, der tippt nach dem Laden des Programmes seine Texte so ein, wie er sie später auf dem Papier sehen will und nimmt etwaige Formatierungen und Einrückungen von Hand vor. Dann nur noch zwei Tasten berührt (Fl und A) und schon wird gedruckt. Kurze Zeit später hält man schwarz auf weiß genau das in Händen, was auf dem Monitor stand.

Besonders angenehm bei der Texteingabe ist das Word-Wrapp-ing: Wörter, die nicht mehr in die aktuelle Zeile passen, werden automatisch in die nächste Zeile übernommen. Diese Funktion kann auch abgeschaltet werden. Zur Texteingabe steht ein sehr umfangreicher Befehlssatz zur Verfügung. So lassen sich zum Beispiel einzelne Buchstaben, Wörter, ganze Bereiche oder der gesamte Text löschen. Auch das Gegenteil, das Einfügen von Textstücken ist möglich, die Handhabung aber etwas kompliziert: Hat man den Einfügemodus eingeschaltet, so darf maximal eine Zeile (80 Zeichen) eingefügt werden. Für längere Einfügungen muß der Einfügemodus entsprechend oft ein- und wieder ausgeschaltet werden. In diesem Fall besteht auch die Möglichkeit, einige Leerzeilen zu setzen und dort den Text nachzutragen. Anschließend können alle überflüssigen Leerzeichen aus dem aktuellen Absatz entfernt werden. Das kann über die Optimierungsfunktion automatisch geschehen.

Sehr nützlich sind auch die von Schreibmaschinen bekannten Tabulatoren. Es sind beliebig viele setzbar und es gibt drei verschiedene Typen: normale Text-, Zahlen-und Spaltentabulatoren. Die Zahlentabulatoren helfen, Zahlen untereinander zu setzen, so daß der Dezimalpunkt (oder wahlweise Komma) immer sauber untereinander steht. Mit den Spaltentabulatoren läßt sich der Arbeitsbereich in senkrechte Spalten einteilen, in denen voneinander unabhängig die Texteingabe erfolgt. Da von Spalte zu Spalte gesprungen werden kann, ist ein problemloses Erstellen von Tabellen und Gegenüberstellungen möglich.

Komplette Textbereiche kann man im Speicher kopieren oder verschieben. Einzelne Buchstabengruppen lassen sich im Text suchen und gegen andere ersetzen. Schließlich besteht die Möglichkeit, mit dem Cursor bestimmte Zeilen direkt anzuspringen.

Sehr praktisch ist die Scroll-Funktion. Möchte man sich einen Überblick über den schon geschriebenen Text verschaffen, so kann man ihn mit enormer Geschwindigkeit (über 20 Zeilen pro Sekunde) scrollen. Die Position des Cursors wird dabei nicht verändert, so daß auch schnelle RichtungS-wechsel möglich sind. Soweit die Befehle, die ständig benötigt werden. Der Rest des Befehlssatzes dient Spezialanwendungen. Erwähnt werden soll hier nur noch, daß jederzeit beliebige Texte auf Diskette, ohne Textverlust, eingesehen werden können. So auch ein mitgelieferter Hilfstext mit einer Kurzbeschreibung der vorhandenen Befehle.

### Exzellente Formatierung

Neben den vielen Befehlen zur Texteingabe gibt es eine Gruppe von Befehlen, die sich erst beim Ausdruck bemerkbar machen: die Anweisungen zur Formatierung des Textes. Neben den fast schon simplen Einstellungen für linken oder rechten Rand kann der Text im Blocksatz, also mit glattem rechten und linken Rand gedruckt werden. Zusätzlich kann Protext bei der Textausgabe lange Wörter trennen. Es werden alle deutschen Trennregeln und die wichtigsten Ausnahmen berücksichtigt. Allerdings können auch unsinnige Trennungen entstehen, die der Benutzer selber abfangen muß, indem er Protext anweist, die entsprechenden Wörter nicht oder anders zu trennen.

Die bedruckbare Länge einer Seite und die Anzahl der Zeilen, die tatsächlich bedruckt werden sollen, können einzeln angegeben werden. Der Text wird dann auf jeder einzelnen Seite automatisch vertikal zentriert. Zusätzlich kann ein Seitenumbruch jederzeit oder bedingt erzwungen werden. Bedingt erzwungen bedeutet, daß ein Seitenumbruch stattfindet, wenn beispielsweise nur die Überschrift eines Absatzes auf die vorherige Seite kommen würde. Außerdem können Kopf- und Fußzeilen definiert werden, die am Anfang und am Ende jeder Seite gedruckt werden. Eine automatische Seitenzählung ist vorhanden, so daß die Kopf- oder Fußzeile jederzeit die aktuelle Seitenzahl enthalten können. Einspaltige Ein- und Ausrückungen, beispielsweise für Überschriften oder Kapitelnummern, sind ebenso möglich wie die horizontale Zentrierung einzelner Textzeilen.

Die Formatierung kann in einem Text beliebig oft geändert oder zeitweise ganz abgeschaltet werden.

Die Möglichkeiten sind damit noch nicht ganz erschöpft. Diese umfangreiche Übersicht soll aber genügen. Will man die Formatierung überprüfen, kann man den Ausdruck am Bildschirm simulieren. Hier macht sich der Kauf der 80-Zeichen-Karte bezahlt; spart man doch Unmengen von Druckerpapier für Probedrucke.

### Jeder Drucker ist geeignet

Bleiben wir beim Thema Drucker, dem wunden Punkt vieler Textverarbeitungsprogramme. Entweder arbeiten sie nur mit wenig Druckern zusammen oder sie nutzen deren Möglichkeiten nicht aus. Protext hat variable Druckertreiber, die sich auf fast jeden erhältlichen Drucker zurechtschneidern lassen. Dadurch kann der Text nicht nur vernünftig ausgedruckt, sondern auch sämtliche Möglichkeiten des Druckers ausgenutzt werden. Das Erstellen des Treibers ist allerdings etwas kompliziert und langwierig, aber nur ein einmaliger Vorgang.

Im Druckertreiber-Menü werden zuerst einmal alle »normalen« Druckerparameter eingestellt. Dazu gehören die Geräte- und Sekundäradresse des Druckers sowie Werte für Zeilenabstand, Papierlänge, Einzelblatteinzug und automatischen Zeilenvorschub.

Als nächstes folgt eine Code-Wandlungs-Tabelle. Jedem der 255 C 64-ASCII-Codes wird ein Druk-kercode zugeordnet. Diese Tabelle ist äußerst wichtig, da ja der C 64-ASCII-Code, den auch die 80-Zeichen-Karte verwendet, unterschiedlich zum Standard-ASCII-Co-de der meisten Drucker ist. Es können auch Steuersequenzen angegeben werden, die zu Beginn und am Ende des Textes sowie für jede einzelne Druckzeile gesendet werden.

Weitere Optionen im Treiber-Me-nü beziehen sich auf die von Protext »serienmäßig« unterstützten Schrifttypen »Unterstreichen« und »Fettdruck«, deren Steuercodes ja auch für jeden Drucker anders sind. Schließlich lassen sich noch Codes für die verschiedensten druckerspezifischen Eigenschaften definieren. So ist beispielsweise das Hoch-und Tiefstellen von Zeichen möglich, indem man entsprechende Steuercode-Sequenzen auf bestimmte Tasten legt (beispielsweise CTRL + S). Auch frei definierbare Zeichen des Druckers können angesprochen werden. Der erstellte Druckertreiber wird auf Diskette gespeichert und kann jederzeit benutzt werden.

### Unterstützung von Floppy und Modem

Die Bedienungeiner Diskettenstation gestaltet sich ebenso komfortabel wie die des Druckers. Es werden sowohl die 1541 wie auch das 4040-Doppellaufwerk am IEC-Bus unterstützt. Texte können gespeichert und geladen oder in den aktuellen Text eingefügt werden. Zusätzlich ist das Lesen von Daten aus einem sequentiellen File beim Ausdruck von Serienbriefen und das Arbeiten mit Textbausteinen (Modulen) möglich. Längere Texte, die nicht mehr in den Arbeitsspeicher passen, können direkt miteinander verkettet oder in einem Jobfile zusammengefaßt werden. Daß Directories angezeigt und Befehle an die Floppy gesandt werden können, ist fast schon selbstverständlich.

Einen weiteren Pluspunkt handelt sich Protext durch seine Kommunikationsfähigkeiten ein: Terminalbetrieb wird voll unterstützt. Einerseits kann ein Datenverkehr mit Mailboxen aufgenommen werden, indem man Mitteilungen mit Protext erstellt und danach an die Mailbox sendet. Weiterhin können zwei Computer mit Protext über Telefon Texte austauschen. Dazu ist sogar eine automatische Fehlerkorrektur vorhanden.

Nachdem wir die wichtigsten der vorhandenen Funktionen beleuchtet haben, wollen wir Ihnen noch einige Punkte mitteilen, die uns positiv oder negativ aufgefallen sind. Besonders gut gefallen hat uns der mit 40000 Zeichen wirklich großzügig bemessene Arbeitsspeicher. Überzeugen konnte auch die sehr hohe Arbeitsgeschwindigkeit in allen Funktionen. Weniger gefallen haben uns aber die teilweise recht umständliche Bedienung und besonders die exotische Tastaturbelegung. Die Umlaute und das »ß« befinden sich an total unüblichen Stellen, an die man sich nur sehr schwer gewöhnen kann. Dies ist zwar nicht durch das Textprogramm bedingt, sondern durch die 80-Zeichen-Karte, aber trotzdem ein großes Minus. Hier sei nochmals daraufhinge-wiesen, daß der Betrieb von Protext nur mit der Decam-80-Zeichen-Kar-te und sonst keiner möglich ist.

Einige Worte noch zum Handbuch: Dies ist ein umfangreiches und hervorragendes Nachschlagewerk. Zum Einarbeiten für einen Textverarbeitungs-Neuling ist es allerdings weniger geeignet, da die Befehle stur in alphabetischer Reihenfolge und nicht gerade didaktisch günstig erklärt werden.

Wer sich nicht scheut, etwas mehr Geld auszugeben und sich die ungewöhnliche Tastaturbelegung gefallen läßt, der wird in Protext einen zuverlässigen und äußerst vielseitigen Partner zur Textverarbeitung finden.

(Boris Schneider/hm)

Info:
Decam, Postfach 12 32, 7505 Ettlingen, Tel. 0 72 43/6 92 64 Preis: 198Markohne80-Zeichen-Karte. 80-ZK-plus: 298 Mark

# Logo — die Sprache für Einsteiger

> Bekanntgeworden ist Logo in erster Linie als Grafik-Programmiersprache für Anfänger. Spektakuläre Fotos von Vorschulkindern, die in Logo programmieren, gingen bereits durch die Fachpresse. Wir zeigen, was Logo wirklich kann.

Eigentlich sollte man meinen, daß der C 64 auch softwaremäßig endgültig ausgereizt ist. Dennoch gibt es immer wieder Leute, die weder mit dem C 64-Basic, noch mit der massenhaft vorhandenen Software so recht zufrieden sind. Vor allem die von Basic schlecht unterstützte Grafik macht gerade den Einsteigern, die mit Maschinensprache nicht umgehen können, immer wieder Kummer.

Nun bietet Commodore eine Version der Sprache Logo für den C 64 an. Entwickelt vom renommierten Massachusetts Institute of Technology ermöglicht Logo, so das Handbuch, eine sehr einfache und dabei höchst wirkungsvolle Handhabung von Grafik und Listen (Wort- und Zahlenreihen). Grund genug, einmal festzustellen, was Logo wirklich leistet.

Logo wird auf zwei Disketten, einer Programm- und einer Utility-Disk, geliefert. Was nach dem Laden des Programms sofort auffällt, ist die Tatsache, daß Logo im Interpreter-Modus arbeitet, was seine Vor- und Nachteile hat. Einerseits ist es dadurch möglich, im Direktmodus Befehle einzugeben und Fehler sofort festzustellen. So lernt man den richtigen Umgang mit der Sprache und erspart sich das bei Compilersprachen umständliche Verbessern und erneute Compilieren. Andererseits kann ein Interpreter nie die Geschwindigkeit eines compilierten Programmes erreichen.

Logo arbeitet mit der sogenannten Turtle-Grafik, manchem vielleicht bekannt aus der Sendereihe »Mikroelektronik«. Dabei erscheint auf dem Hires-Bildschirm ein Dreieck, eben die Turtle (Schildkröte). Diese kann nun auf dem Bildschirm bewegt werden und hinterläßt dabei eine Spur. Die Befehle FORWARD, BACK, RIGHTTURN, LEFT-TURN, denen jeweils eine Zahl folgen muß, lassen die Turtle auf dem Bildschirm herumwandern oder eine Drehung ausführen. Der eingegebene Parameter bestimmt dabei die Anzahl der Schritte. Wer sich schon einmal mit dem Ausrechnen von Koordinaten bei anderen Gra-fik-Erweiterungen herumgequält hat, wird die Turtle-Methode bestimmt als Erleichterung empfinden.

Die Turtle kann aber auch durch Koordinaten-Eingabe bewegt werden. Mittels der Befehle SETX, SETY und SETXY verändert man den Standpunkt der Turtle, die Befehle XCOR und YCOR liefern die Koordinaten der momentanen Turtle-Position. So bekommt einerseits der Anfänger bereits nach den ersten Tippversuchen sichtbare Ergebnisse (Bild 1), andererseits kann man mit der Turtle bei Anwendung der entsprechenden mathematischen Formeln auch komplizierte Darstellungen realisieren. Die so erstellten Grafiken lassen sich mit SA-VEPICT direkt abspeichern, beziehungsweise mit READPICT wieder einlesen.

Das Erstellen von Programmen birgt für den Basic-gewohnten C 64-Benutzer einige angenehme Überraschungen. Um in den Edit-Modus zu gelangen, tippt man TO und einen Programmnamen. Der Name kann frei gewählt werden und dient später zum Aufrufen des Programms. Es empfiehlt sich, Namen zu wählen, die den Zweck des Programms erkennen lassen; durch die besondere Speicherart von Logo hat die Länge des Namens keinen Einfluß auf den Speicherplatzverbrauch. Logo-Programme haben keine Zeilennummern. Sie werden, wenn sie getippt sind, durch das Verlassen des Editors definiert (abgespeichert).

Das grundliegende Konzept von Logo-Programmen ist folgendes: Ein Logo-Programm kann sowohl im Direktmodus, als auch von anderen Programmen aus jederzeit aufgerufen werden. Dadurch ist es möglich, ein Programm in viele Einzelprogramme zu zerlegen und gesondert zu programmieren. Diese Einzelprogramme können unabhängig voneinander abgespeichert werden. Solche »Bausteine« lassen sich auch problemlos in andere Programme einbauen. Ein Logo-Programm besteht also immer aus einer Reihe von Einzelprogrammen.

Die wohl interessanteste Neuerung beim Programmieren ist die Möglichkeit, neue Befehle selbst zu definieren. Nehmen wir an, Sie haben ein Programm zur Errechnung beliebiger Hochzahlen geschrieben, dessen Name »HOCH« ist. Sie haben nun ein anderes Programm, in dem häufig Hochzahlen zu berechnen sind. Es ist möglich, in Ihrem zweiten Programm an den betreffenden Stellen einfach das Programm »HOCH« aufzurufen, das dann die Hochzahl berechnet und an Ihr zweites Programm übergibt. Sie rufen das Hochzahlenprogramm auf, indem Sie »HOCH«, gefolgt von Basis und Exponent als Parameter tippen; der Programmname wird also regelrecht als Befehl benutzt.

## Rekursionen

Wer sich im Grafik-Kapitel des Handbuches nach vorne arbeitet, wird bald auf den Begriff »Rekursion« stoßen. Grundlage der Rekursion ist ein Programm, das sich so lange selbst aufruft, bis eine Abbruchbedingung erfüllt ist.

Um nun wieder zum Toplevel, nämlich in den Direktmodus zu gelangen, muß das Programm nach Erfüllung der Abbruchbedingung die Stufen, die es sich hinabgearbeitet hat, wieder hochsteigen. Dabei werden alle Befehle, die nach dem Selbstaufruf stehen, ausgeführt. Sicher ist das zu Anfang kompliziert, aber was sich damit anstellen läßt, zeigt Bild 2. Dabei handelt es sich um einen Binärbaum, vereinfacht gesagt um ein »V«, an dessen Spitze jeweils ein kleineres »V« sitzt etc., bis eine bestimmte Minimallänge erreicht ist. Das Bild wurde mit einem nur wenige Zeilen umfassenden Programm erstellt, das einfach einen Zweig zeichnet und sich jeweils selbst wieder aufruft, um einen weiteren (kleineren) Zweig zu zeichnen.

Ein weiterer Schwerpunkt der Logo-Anwendung liegt in der Listenverwaltung. Listen sind für Logo alle Zahlen, Buchstaben oder Zeichen, die zwischen eckigen Klammern stehen. Logo kann nun mit insgesamt 15 Listenbefehlen einzelne Listen und Wörter miteinander vergleichen, kombinieren und verändern. Wenn man die Befehle miteinander kombiniert, läßt sich schon einiges anstellen: Denkbar sind Grammatik-Übungsprogramme, Adreßdateien mit den unterschiedlichsten Suchkriterien, Text-Adven-tures oder einfache Dolmetscher-Programme. Die Befehle FIRST, LAST, BUTFIRST, BUTLAST und ITEM ermöglichen beispielsweise ein Herausnehmen einzelner Wörter oder Listenteile aus Listen. Mit den Befehlen SENTENCE und WORD lassen sich Listenteile und Buchstaben zu neuen Wörtern und Sätzen zusammenbauen.

Neben Listenbehandlung und Grafik bietet Logo auch verschiedene Befehle für Musik und Sprites. Der Hersteller macht dabei ausgiebigen Gebrauch von der Möglichkeit, Befehle von Logo aus zu definieren: Für den Umgang mit Sprites sind die Dateien SPRITES und SPRED, für die Musikprogrammie-rung die Datei MUSIC von der mitgelieferten Utility-Diskette einzulesen. Danach steht dem Benutzer neben den verschiedenen Sprite-Be-fehlen ein durchschnittlicher Sprite-Editor zur Verfügung. Die entworfenen Kobolde (so werden die Sprites im Logo-Handbuch bezeichnet) können mit SAVESHAPES abgespeichert und mit READSHAPES wieder eingelesen werden. Für Musikprogramme kann man mittels der vordefinierten Befehle Tondauer, Tonhöhe, Attack, Decay, Sustain und Release bestimmen.

## Logo — ein vorbildlich dokumentiertes Programm

An dieser Stelle muß ein Wort zur Dokumentation von Logo verloren werden, die wirklich hervorragend ist. Ganz im Gegensatz zur sonst üblichen Commodore-Hauspolitik, nach der der Anwender mit Informationsmengen versorgt wird, die zum Leben zu wenig und zum Sterben zuviel sind, ist diesmal im Lieferumfang ein 351 DIN-A4-Seiten starkes Handbuch enthalten. Es erklärt verständlich und ausführlich die Logo-Befehle; didaktisch gut sind die Programmieraufgaben in jedem Kapitel, die im Anhang gelöst und besprochen werden. Anhand dieses Leitfadens kann man sich ziemlich schnell und gut in Logo einarbeiten. Abgesehen davon, daß sich der Befehl SAVESHAPES nicht in der Datei SPRITES befindet, wie das Handbuch angibt, sondern in der Datei SPRED und die Datei MUSIK sich nur laden läßt, wenn man aus dem »k« ein »c« macht, sind keine Fehler aufgefallen. Ebenfalls nicht selbstverständlich ist die mitgelieferte Utility-Diskette, auf der sich neben zahlreichen Programmierhilfen und Beispielprogrammen, auch ein Drucker- und ein Plotter-Ansteuerungsprogramm und sogar ein Assembler befindet. Da aber der Speicherplatz für Maschinenroutinen mit 447 Byte nicht gerade exzessiv ausgefallen ist und außerdem auch noch von Sprites benutzt wird, so daß man in Sprite-Programme keine Maschinenroutinen einbauen kann, wird der Assembler wohl nicht so häufig benutzt werden.

Neben vielen Vorteilen hat Logo aber auch einige Nachteile. Bedingt durch den Interpreter weist Logo Zeichen- und Ladegeschwindigkeiten auf, die manchmal an das Tempo einer Wanderdüne erinnern. Zum Zeichnen eines Vollkreises (genauer: eines 360-Ecks) brauchte Logo 31 Sekunden; Simons Basic erledigte das in annähernd drei Sekunden. Auch die Ladegeschwindigkeit der Diskette ist mit etwa 2,5 Sekunden pro Block nicht gerade ein neuer Rekord (gerechnet wurde die Zeit vom Ladebefehl bis zur Meldung des Interpreters oder Programmes).

Ein Hindernis für umfangreiche Anwendungen ist wohl der zur Verfügung stehende Speicherplatz. Von ausschlaggebender Bedeutung sind hier die sogenannten »Speicherknoten«. Jeder Gebrauch eines Wortes belegt einen dieser Knoten, und auch ein Programm benötigt eine bestimmte Anzahl davon. In den Arbeitsspeicher kann man 35 Blocks, also etwa 9 KByte laden. Läßt man dann ein Programm laufen, so sind die wenigen übriggebliebenen Knoten durch die Benutzung von Wörtern bald aufgebraucht und Logo meldet »No storage left!« Der vorhandene Speicherplatz mag für Grafikprogramme, selbst für umfangreichere, noch hingehen; ein wirklich brauchbares Dolmetscherprogramm mit ausreichendem Wortschatz beispielsweise, läßt sich so aber kaum erstellen.

Alles in allem ist Logo eine Sprache, die wirklich eine Menge bietet. Turtle-Grafik und Rekursion ermöglichen vielseitige Bildschirmgrafiken, die leicht abzuspeichern sind, und auch die anderen Besonderheiten von Logo sind zum Teil beeindruckend. So kann man die Sprache sicherlich allen empfehlen, die Grafik besser nutzen wollen, sich aber nicht auf Assembler verstehen. Auch die Listenbehandlung in Logo bietet mit etwas Übung interessante Möglichkeiten. Wer dann noch die genannten Einschränkungen in Kauf zu nehmen bereit ist, wird mit Logo bestimmt zufrieden sein.

(Christof Bachmair/ev)

Info: Logo gibt’s bei Ihrem Commodore-Händler zum Preis von 159 Mark nur auf Diskette für den Commodore 64.

# Assembler ist keine Alchimie — Teil 9

> Multiplizieren und Dividieren größerer Zahlen ist weder mit dem Taschenrechner noch in Basic ein Problem. Mit Assembler sieht die Sache anfangs schon nicht mehr so einfach aus. Doch auch diese Hürde wird genommen. Einige Betriebssystemroutinen des C 64 nehmen uns dabei erhebliche Arbeit ab, man muß sie nur kennen.

Einige Versprechen sollen diesmal eingelöst werden:

Die restlichen Bit-Verschiebe-Befehle werden Ihnen vorgestellt und auch gleich ein paar Anwendungen wie die 16-Bit-Multiplikation und auch die 16-Bit-Division. Außerdem soll endlich das Programmprojekt weitergeführt werden. Diesmal erzeugen wir einen Hilfsbildschirm und legen ihn abrufbereit unter den oberen ROM-Be-reich. Bei der Gelegenheit lernen Sie auch gleich noch ein paar Interpreter-Routinen kennen.

### Die restlichen Bit-Verschiebe-Operationen

Da wäre zunächst einmal das Gegenstück zu ASL. Den Befehl haben wir in der letzten Ausga-.be kennengelernt. Dort ging es ja um das Nach-Links-Schieben. Jetzt schieben wir nach rechts. LSR heißt der dazu nötige Befehl. Das kommt von »logical shift right« und heißt zu deutsch »logisches Rechtsschieben«. Fragen Sie mich bitte nicht, weshalb »logisches«. Jedenfalls ist LSR ebenso für logische Bitprüfungen geeignet wie ASL.

Mittels LSR wird jedes Bit der adressierten Speicherstelle um einen Platz nach rechts geschoben. An die Stelle des Bit 7 tritt eine Null und Bit 0 wandert in das Carry-Bit (siehe Bild 1).

Erinnern Sie sich noch an das dezimale Linksschieben mit ASL aus der letzten Folge? Wir hatten festgestellt, daß jedes Linksschieben einer Dezimalzahl einer Multiplikation mit 10 entspricht. Hier im umgekehrten Fall, also beim Rechtsschieben, muß jedes LSR einer Division durch 10 entsprechen:

TODO

Geht man von der Ausgangszahl (25000) aus, dann ergibt sich der erste rechts verschobene Wert durch Division mit

TODO

Es wird also durch Potenzen der Zahlenbasis 10 geteilt. Haben wir es — wie im Computer — mit Binärzahlen zu tun, deren Basis die 2 ist, dann teilen wir mitje-dem LSR durch 2. Je nachdem, wie oft hintereinander das LSR auf eine Zahl ausgeübt wird, teilt man dann durch 2^2, 22 = 4, 23 = 8, etc. Das konnte man sich alles ja schon vorstellen, nachdem ASL zur Multiplikation verwendet wurde. Auch hier muß man immer das Carry-Bit abfragen, denn die Division kann ja unter Umständen nicht aufge-hen, wie das folgende Beispiel der Division von 3 durch 2 zeigt:

(3) 0000 0011 ergibt durch LSR: 0000 0001 und 1 im Carry-Bit. Das Ergebnis ist schon richtig, nämlich 1. Im Carry steht der Rest dieser Division, die 1. Weil der Rest für manche Berechnungen von Bedeutung ist, muß das Carry-Bit irgendwie erfaßt werden. Wie man das erreicht, lernen wir später noch. Leider ist diese Art der Division mittels LSR nicht so einfach verwendbar wie die Multiplikation mittels ASL. Während man dort durch geschicktes Aufteilen des Faktors ASL auch bei anderen Multiplikatoren als reine Zweierpotenzen anwenden konnte, ist das hier nicht so ohne weiteres möglich. Bei Divisionen geht man deshalb lieber andere Wege. Die zeige ich Ihnen ebenfalls etwas später.

LSR kann auf die gleiche Weise adressiert werden wie ASL:

TODO

Im ersten Fall steht das Ergebnis im Akku, in den anderen Fällen in der jeweils adressierten Speicherstelle. Außer der N-Flagge, die in jedem Fall 0 wird, beeinflußt LSR auch die Carry-Flagge und unter Umständen die Z-Flagge. Je nach Adressierungsart liegt LSR als l-Byte-, 2-Byte- oder 3-Byte-Befehl vor.

Sowohl bei ASL als auch bei LSR hatten wir festgestellt, daß man herausgeschobene Bits, falls sie noch von Bedeutung sind, irgendwie aus dem Carry-Bit (dort sind sie ja gelandet) an einen sinnvollen Ort schaffen muß. Das ist natürlich möglich über eine Befehlskette, in der zunächst das Carry-Bit abgefragt wird:
zum Beispiel:

6000 BCC 6007
6002 LDA #01
6004 STA 8000
6007 etc.
TODO

Wenn das Carry-Bit frei ist, wird alles weitere übersprungen. Wenn da drin etwas aufge-taucht ist, lädt man eine 1 (die ist ja im Carry-Bit) an die benötigte Speicherstelle (hier zum Beispiel 8000). Das kostet aber einige Bytes Speicherplatz und einige Taktzeiten Rechendauer. Außerdem erschwert sich die Programmierung, wenn man eine Zahl öfter verschiebt und dann nach 8000 alle Carry-Inhalte packen will. So kompliziert brauchen wir auch gar nicht zu arbeiten, denn unsere CPU kennt zwei Befehle, die das Bit-Verschieben und das Carry-Ver-schieben für uns machen. Das sind:
ROL rotate left Linksrotieren ROR rotate right Rechtsrotieren

Sehen wir uns zunächst mal ROL (Bild 2) an:

Wie bei ASL wandert jedes Bit um eine Position nach links. Das Bit 7 wird dabei in das Carry-Bit verschoben. In Bit 0 gelangt aber hier nicht eine 0 (wie bei ASL), sondern der Inhalt des Carry-Bit (wohlgemerkt der Inhalt, der dort war, bevor dort hinein Bit 7 geschoben wurde). Bevor wir auf den praktischen Nährwert dieses Befehls eingehen, sollen erstmal die Adressierungsmöglichkeiten aufgeführt werden:

TODO

Je nach Adressierung kann es sich dann wieder um einen l-Byte- bis 3-Byte-Befehl handeln. Die N-, Z- und natürlich die Carry-Flagge sind beeinflußt und das Ergebnis des Befehls ist im Akku zu finden (erste Adressierungsart) oder in der angesprochenen Speicherstelle.

Wozu das Ganze? Abgesehen von der Möglichkeit, einzelne Bits auf diese Weise ohne Verlust aus einem Byte durch das Carry-Bit herausschieben zu können, um sie Prüfungen zu unterziehen, gibt es noch die Möglichkeit, einen Überlauf bei Rechenoperationen aufzufangen. Erinnern Sie sich an die letzte Folge, wo wir mittels ASL Multiplikationen durchgeführt hatten? Dort kann es unter gewissen Umständen ja leicht geschehen, daß ein Byte für das Ergebnis nicht mehr ausreicht. Wir haben in den Beispielen schon die Überlegung durchgeführt, daß man mittels BCC oder BCS prüfen sollte, ob man eine signifikante Stelle (also eine führende 1) aus dem Byte herausgeschoben hat. Ist das der Fall, dann gibt es zwei Wege:
1)	Man veranlaßt den Ausdruck eines OVERFLOW ERROR, wenn nur l-Byte-Zahlen zulässig sind, oder
2)	man schaltet um auf 2-Byte-Zahlen.

Sehen wir uns das mal an dem Schritt 7 des Beispiels aus der letzten Folge an. Dort hatten wir die Zahl 192 (binär 1100 0000) vorliegen (zum Beispiel in Speicherstelle 7000). Im Computer werden 2-Byte-Integers in der Form LSB/MSB verarbeitet. Wir schaffen also die Speicherstelle für das MSB von 192 in 7001. Jetzt muß dort noch 0 drin stehen. Um bei nochmaliger Multiplikation mit 2 eine 16-Bit-Zahl als Ergebnis zu erhalten, verfährt man wie folgt:

TODO

Die Funktion dieser Befehlssequenz können Sie aus Bild 3 entnehmen.

Diesem Befehl werden wir später bei der 16-Bit-Multiplika-tion und Division noch häufig begegnen.

Sehen wir uns nun noch den letzten der Bit-Verschiebebefeh-le an: ROR. In Bild 4 ist schematisch gezeigt, wie rotiert wird.

Jedes Bit wandert, wie bei LSR, um eine Stelle nach rechts. Als Bit 7 kommt (im Gegensatz zu LSR) der Inhalt des Carry-Bit herein. Bit 0 wird ins Carry-Bit geschoben. Adressiert werden kann ROR ebenso wie ROL:

TODO

Auch für die Byteanzahl, den Ort des Ergebnisses und die Flaggenbeanspruchung gilt dasselbe wie für ROL.

Die Einsatzmöglichkeiten für ROR sind allerings geringer. Bei 16-Bit-Divisionen kann man zwar ROR einsetzen, um einen Unterlauf des MSB ins LSB aufzufangen. Weil man aber meist ohnehin andere Divisionsverfahren verwendet als das oben gezeigte mit LSR, erübrigt sich diese Anwendung in den meisten Fällen. Gut kann man ROR zu Bitprüfungen einsetzen. Das soll im nächsten Abschnitt an einem kleinen Beispiel gezeigt werden.

Zuvor aber noch eine Bemerkung: Wir sind nun durch den Befehlssatz des 6502-Assem-blers fast hindurchgedrungen. Es fehlen uns nur noch — wenn ich mich nicht versehen habe — vier Befehle. Die allerdings hängen eng mit dem sogenannten Interrupthandling zusammen, das uns wohl einige Zeit beschäftigen wird.

### Schneller Joystick

Vor einiger Zeit (64’er, Ausgabe 2/85) veröffentlichte P. Siepen eine Routine zur Abfrage des Joystickports, die eine interessante Leserbrief-Reaktion hervorrief. M. Hartig sandte nämlich einen Verbesserungsvorschlag, in dem der uns interessierende Befehl ROR die Hauptrolle spielt. Bevor ich die allerdings vorstelle, muß erst noch geklärt werden, was und wie abgefragt wird.

Signale vom Joystick landen in den DATA-Ports A oder B des CIA 1. CIA heißt »Complex Interface Adapter« und ist die Institution unseres Computers, die den Verkehr mit der Außenwelt erlaubt. Wir haben zwei Stück davon (CIA 1 und CIA 2). Je nachdem, in welchen Port der Joystick gesteckt wurde, laufen die Signale in den Registern DC00 oder DC01 (dezimal 56320 oder 56321) ein. Wir nehmen im weiteren mal DC00 an. Die Bits 0 bis 4 beziehen sich auf den Joystick:

Bit 0	oben
Bit 1	unten
Bit 2	links
Bit 3	rechts
Bit 4	Feuerknopf
TODO

Wenn keine dieser Möglichkeiten angesprochen ist, enthalten diese Bits den Wert 1. Drückt man beispielsweise den Feuerknopf, dann wechselt der Inhalt von Bit 4 zum Wert 0. Man muß also ständig diese Bits überprüfen und reagieren, sobald eines davon 0 wird. Die Lösung von P. Siepen, diese Abfrage in das Interruptprogramm einzubauen, ist sehr brauchbar. Dadurch hat der Computer die Möglichkeit, trotzdem an anderen Aufgaben weiterzuarbeiten. Wir werden in den nächsten Folgen auf diese Programmiertechnik eingehen. Die Verbesserung von M. Hartig besteht darin, daß er nicht durch CMP-Befehle den Inhalt von DC00 prüft (was Zeit und auch Speicherplatz kostet), sondern mittels ROR Bit für Bit nach rechts in das Carry-Bit schiebt und dieses dann mit BCC abfragt. Sobald die Carry-Flagge nämlich frei ist, ist die zu dem Bit gehörige Joystickfunktion gefragt.

Nun die Abfrageroutine:

TODO

Der Vorteil dieser nur 18 Byte langen Unterroutine liegt in ihrer Schnelligkeit: Sie braucht nur 24 Taktzyklen, wenn nicht verzweigt wird, beziehungsweise 25, wenn verzweigt wird. Natürlich wäre anstelle von ROR auch die Verwendung von LSR möglich gewesen, denn die herausgeschobenen Bits werden nicht mehr benötigt. Im Falle, daß man nach einer solchen Abfrage wieder den Ausgangszustand des Akku oder der Speicherstelle herstellen will, muß man eine entsprechende Anzahl ROR-Anweisungen anschließen, bis Bit 0 wieder in seine Ausgangslage rotiert ist.

### Die 16-Bit-Multiplikation

Wir haben in der letzten und in dieser Folge gelernt, wie man 8-Bit-Zahlen miteinander malnehmen kann um 8- oder 16-Bit-Zahlen zu erhalten. Dabei ist unbefriedigend, daß man sich über jede Zahl Gedanken machen muß, wie man sie am besten multipliziert. Was fehlt, ist ein allgemein gültiges Programm, das in der Lage ist, jede Zahlenkombination (solange es sich um 2-Byte-Integers handelt und das Ergebnis als 16-Bit-Zahl darstellbar ist) zu verarbeiten. Und da haben wir mal wieder Glück: Gut versteckt befindet sich so etwas bereits fertig in unserem Computer. Ab dez. 45900 ($B34C) liegt im Interpreter solch eine Routine und ihr Einsprungspunkt ist für uns bei dez. 45911 ($B357). Bevor wir aber detailliert darauf eingehen, soll noch das Prinzip erklärt werden, das dabei genutzt wird.

Jeden Tag rechnen Sie wahrscheinlich völlig automatisch Multiplikationsaufgaben, ohne noch Gedanken daran zu verschwenden, wieviel Schweiß das Erlernen dieser Technik früher mal gekostet hat. Könnten Sie heute nochjemandem genau erklären, warum man da was wie macht? Genau das müssen wir aber tun, damit der Binärautomat (unser C 64) multiplizieren lernt. Nehmen wir mal eine Multiplikation von 16x15:

TODO

Daß wir nicht so genau wissen, was wir da tun, liegt am ziemlich komplizierten Zehnersystem. Damit das alles einfacher und überschaubarer wird, wechseln wir mal ins Binärsystem: 16 = 10000, 15 = 1111. Die Aufgabe sieht dann so aus:

TODO

Jetzt wird schon deutlicher, was wir getan haben. Der Faktor auf der rechten Seite wurde vom MSB an Bit für Bit durchgesehen. Jedesmal, wenn wir auf eine 1 gestoßen sind (hier waren nur Einsen), haben wir den links stehenden Faktor notiert. Dabei sind wir von mal zu mal um eine Stelle nach rechts gerückt, was zu tun hat mit dem Stellenwert des im rechten Faktor gerade betrachteten Bits. Das geschah so lange, bis alle Bits des rechten Faktors durchgearbeitet waren. Die sich auf diese Weise ergebene Kolonne wird dann addiert und führt zum Ergebnis. Vergleichen Sie, 240 ist wirklich binär 1111 0000.

Genauso wie hier beschrieben, arbeitet das Multiplikationsprogramm. Ein Unterschied tritt auf, nämlich daß nicht bis zum Schluß mit der Addition gewartet, sondern jede neue Zwischenzahl sofort addiert wird. Bild 5a zeigt die Beschreibung der Interpreterroutine:

Diese Routine hier abzudrucken, wäre reine Platzverschwendung. Schalten Sie einfach den SMON ein und verlangen Sie von ihm ein Disassemblerlisting ab B357. Dort haben Sie dann für die weitere Besprechung alles parat. In Bild 5 finden Sie noch ein Flußdiagramm der UMULT-Routine.

Das Ergebnis der Multiplikation befindet sich in LSB/MSB-Form in den X/Y-Registern. Programm und Flußdiagramm wollen wir an einem Beispiel nachspielen. Dazu sollen die beiden Zahlen 321 und 65 (binär 0000 0001 0100 0001 und 0100 0001) miteinander multipliziert werden, was bekanntlich 20865 (binär 0101 0001 1000 0001) ergibt. Was Ihnen im Bild 6 als undurchdringlicher Bit-Dschungel entgegenstrahlt, ist das schrittweise Verfolgen des Programms in Computerformat, also binär.

In Bild 6 sind die Speicheradressen alle dezimal angegeben. Dort finden Sie zunächst die Ausgangslage. In Speicherstelle 40/41 steht die ganze Operation über unverändert die Zahl 321. In 113/114 finden Sie (wegen des LSB/MSB-Formates umgedreht als 114/113) unseren Faktor 65. Akku und Speicherstelle 93 stehen auf 16, dem Bitzähler. In das X- und Y-Register wurde eine Null eingelesen. Im Flußdiagramm ist diese Situation mit einer 1 gekennzeichnet. Ganz unten im Diagramm sehen Sie, daß der Bitzähler 93 erniedrigt und danach geprüft wird, ob er schon gleich Null sei. Daraus folgt, daß die große Schleife 16mal durchlaufen wird. Den ersten Durchlauf (gekennzeichnet durch kleine Buchstaben) verfolgen wir im einzelnen.
a)	X-Register wird zur Bearbeitung in den Akku geschoben.
b)	Mittels ASL wird das Bit 7 in die Carry-Flagge geschoben, was einen Carry-Inhalt von 0 bewirkt.
c)	Der solchermaßen bearbeitete Akku-Inhalt (der sich hier nicht weiter verändert hat) geht wieder zurück ins X-Register.
d)	Nun ist das Y-Register zur Bearbeitung dran. Es gelangt in den Akku.
e)	Mittels ROL wandert nun das MSB des X-Registers aus dem Carry-Bit in die O-Bit-Position des Akku
f)	und alles zusammen wieder ins Y-Register. Insgesamt wird dadurch die 16-Bit-Zahl im X/Y-Register um eine Stellenzahl erhöht, was der Vorbereitung zur Addition dient. (Erinnern Sie sich bitte: Die Kolonne der Einzelergebnisse wird ja addiert). Im Diagramm (ohne Buchstabenkennzeichnung) schließt sich hier noch einePrüfung auf einen eventuellen Überlauf an, der dann mit einer Fehlermeldung beantwortet wird.
g)	Nun wird das MSB der Speicherstelle 113 nach links ins Carry geschoben. Das ist auch hier noch eine Null.
h)	Anschließend wandert dieser Carry-Inhalt als Bit 0 in Speicherstelle 114. Bit 7 von 114 landet dafür im Carry. Auch hier wird auf diese Weise die ganze 16-Bit-Zahl 113/114 um ein Bit nach links geschoben und im nächsten Schritt — im Flußdiagramm wieder ohne Buchstabe — geprüft, ob da eine 1 oder eine 0 ins Carry-Bit geshiftet wurde. Wenn lediglich eine Null auftrat — wie hier —, dann springt das Programm sofort zum Herabzählen des Bitzählers 93. Tritt aber eine 1 auf, dann addiert sich der Inhalt von 40/41 zu X/Y.
i)	Hier wird der Zustand der betroffenen Speicherstellen und Register nach dem ersten Schleifendurchlauf gezeigt.

Römisch II bis XVI zeigen nun jeweils den Zustand nach dem 2. bis 16. Durcharbeiten der großen Schleife. Wenn Sie verstehen möchten, was da passiert, sollten Sie versuchen, Bild 6 nur als Kontrolle zu verwenden und ansonsten mal selbst alle Schritte nachzuvollziehen.

### 16-Bit-Division

Beim umgekehrten Weg, nämlich der Teilung von zwei 16-Bit-Zahlen, haben wir nicht so viel Glück: Ich konnte keine derartige Routine im Interpreter entdecken. Nun gibt es aber fast in jedem Lehrbuch der Maschinensprache die Vorstellung eines solchen Programms, so daß man sich das schönste aussuchen kann. Das Prinzip ist auch da dasselbe, wie wir es von der normalen Division gewohnt sind: Der Divisor wird Schritt für Schritt vom Dividenden abgezogen. In der Literatur [1] fand ich eine sehr kurze Routine, die ich Ihnen leicht modifiziert als Programm 1 vorstellen will.

In Bild 7 ist ein Flußdiagramm dieser Routine gezeigt und in Bild 8 lacht Ihnen wieder das Bit-Gewirr entgegen, das Sie schon von der Multiplikation her kennen, hier aber für die Division.

Damit Sie wissen, wo was hinein- oder herauskommt:

TODO

An dem folgenden Beispiel soll der Programmverlauf getestet werden: Wir teilen 20867 durch 321. Dabei kommt nach Adam Riese heraus: 65, Rest 2.

In folgender Weise wird in die Speicherzellen die Aufgabe eingespeist:

TODO

Als Bit-Zähler dient hier das Y-Register.
b)	Erstes Linksschieben des LSB mittels ASL. Dabei gelangt die 1 in das Carry-Bit.
c)	Hineinrotieren der 1 aus dem Carry in das MSB mittels ROL. d), e) Linksrotieren der 16-Bit-Zahl in $5C/5D, die jetzt noch 0 ist.
f) Situation am Ende der ersten Schleife. Der Bitzähler ist um 1 reduziert.

Im folgenden wird dann jeweils die Situation am Ende der Schleife gezeigt. Beim Berechnen der Differenz muß jeweils darauf geachtet werden, daß die Subtraktion einer Zahl als Addition des Zweierkomplements ausgeführt wird. Das haben wir in den Folgen 3 und 4 der Serie kennengelernt. Allerdings muß an dieser Stelle nochmal gesagt werden, daß die 1, die zum Einerkomplement hinzuaddiert wird, um das Zweierkomplement zu erhalten, das gesetzte Carry-Bit ist. Nun dürfte es für Sie eigentlich keine Probleme mehr geben, was das Nachvollziehen der Divisionsroutine betrifft.

Damit dürfen wir getrost die 16-Bit-Arithmetik abschließen. Alle vier Grundrechnungsarten können Sie jetzt programmieren. Weitere Rechenarten, wie Potenzieren, das Ziehen von Wurzeln, Logarithmen etc. bedingen ohnehin, daß die Argumente oder Ergebnisse keine Integerzahlen sind. Hier werden wir dann mit Fließkommaarithmetik arbeiten und den dazu vorgesehenen Interpreterroutinen.

### Das Programmprojekt wird fortgeführt

Im 6. Teil dieser Serie haben wir ein Projekt gestartet, das dort eine Kopfzeile rückholbar unter den oberen ROM-Bereich verschob. Unser Wissen ist seither gestiegen und damit auch unsere Ansprüche. Eine Kopfzeile reicht nicht mehr, jetzt soll es ein ganzer Hilfsbildschirm sein, den wir erst in aller Ruhe erstellen wollen, um ihn dann jederzeit abrufbar unter das Betriebssystem zu packen. Den Aufruf wollen wir wieder mit der USR-Funktion steuern. Diesmal soll aber so programmiert werden, daß der Hilfsbildschirm erhalten bleibt, man ihn also mehrfach einblenden kann. Über die Nützlichkeit einer solchen Routine braucht man sicherlich nicht viele Worte zu verlieren: Denken Sie da nur mal an Programme, die irgendwelche Tasten mit besonderen Funktionen belegen, für die Sie eine Gedächtnisstütze brauchen, oder ...

Als Programm 2 ist ein kleines Demo-Programm abgedruckt, welches zuerst einen Bildschirm erstellt, dann die Routine »Verschieben« aufruft, den Bildschirm löscht und neu beschreibt und schließlich mit einem weiteren USR den alten Bildschirm einblendet (vorher Programm 3 und 4 laden).

Von nun an können Sie immer — auch im Direktmodus — durch ein USR-Kommando diesen Bildschirm abbilden. Zum Programm in der Folge 6 sind noch zwei Dinge zu bemerken, die hier geändert werden sollen. Erstens eine Frage: Ist Ihnen der Computer mal abgestürzt beim Aufruf des Programms? Die Wahrscheinlichkeit dafür ist ungefähr 1 : 60, wenn nämlich ein Interrupt stattfindet, während die Speicherstelle 1 geändert wird. Obwohl wir erst in den nächsten Folgen auf Interrupts eingehen werden, wollen wir die Wahrscheinlichkeit für so einen Absturz auf Null reduzieren. Eine andere Sache ist der Ort, an dem sich das Programm befand. Es hat sich nämlich herausgestellt, daß anscheinend die Nutzung dieses dort gewählten Speicherbereichs nicht ganz so problemlos ist. Bei einigen Anrufen wurde mir erzählt, daß zumindest der Anfang ab $02A7 bei bestimmten Konstellationen überschrieben wird. Deswegen packen wir unser Programm ganz unkonventionell nach $6000, von wo Sie es — das beherrschen Sie ja mit dem SMON inzwischen sicher — dorthin schieben können, wo es Ihnen gefällt. Allerdings müssen dann auch die USR-Adressen geändert werden. Aber auch das dürfte für Sie inzwischen kein Problem mehr sein.

Um diese immerhin schon 2 000 Byte (1000 für den Bildschirm und nochmal 1000 für das Farb-RAM) zu verschieben, bedienen wir uns einer Interpre-ter-Routine, die seit Ausgabe 3/85 des 64’er auch beim Checksummer verwendet wird — der Blockversc^ebe-Routine (Bild 9a).

Wieder besteht unser Programm aus zwei Teilen. Im ersten wird der aktuelle Bildschirm nach oben geschoben. Dieser Teil speist lediglich zuerst die Adressen des Bildschirms und des Betriebssystem-ROM in die Abholspeicherstellen der danach aufgeru-fenen Routine BLTUC und wiederholt diesen Vorgang für die Bildschirmfarbspeicheradressen. Danach verstellen wir noch den USR-Vektor und kehren mit TRS ins Basic-Programm zurück (siehe Programm 3).

Komplexer ist der zweite Teil. Um nämlich die Informationen unter dem ROM lesen zu können, muß dieses ausgeschaltet werden. Leider läßt sich das Betriebssystem-ROM nur zusammen mit dem Basic-Interpre-ter ausschalten. $A3BF ist aber eine Interpreter-Routine! Da bleibt uns nichts anderes übrig, als diese Routine in unser Programm einzubauen, was uns die Gelegenheit gibt, sie uns mal etwas anzusehen. Als Bild 9 ist sie im Flußdiagramm abgebildet.

Programm 4 zeigt den zweiten Teil unseres Hilfsbildschirm-Programms.

Von $6040 an, wohin wir am Ende des ersten Teils den USR-Vektor gerichtet haben, wird zunächst wieder Quell- und Zielbereich in den Abholspeicherstellen spezifiziert und jeweils danach zuerst für den Bildschirm, dann für das Farb-RAM, das übernommene Unterprogramm angesprungen. Ab $6077 liegt dann das modifizierte Unterprogramm. Die Befehle SEI und CLI gehören zu den wenigen, die Sie erst noch kennenlernen. Sie sind es, die die Absturzwahrscheinlichkeit auf Null bringen. Jedenfalls wird zuerst das ROM aus und dafür RAM eingeschaltet. Ab $607F bis $60B9 befindet sich die Interpreter-Routine **BLTUC**. Darin wird zunächst die Länge des zu verschiebenden Bereichs berechnet, dann festgestellt, ob nur ganze Pages (Seiten) oder auch ein Restbereich verschoben werden soll. Falls ein solcher Restbereich vorhanden ist, wird auch seine Länge berechnet und zuerst dieser verschoben. Daran schließt sich das Verschieben der ganzen Pages an. Das X- und das Y-Register dienen dabei als Zähler.

Ab $60BB schließt sich wieder unsere eigene Routine an, in der wir die ROMs wieder einschalten. Auf diese Weise lassen sich noch mehrere Hilfsbildschirme unter ROM-Bereiche packen. Vielleicht überlegen Sie sich mal dazu einen Weg?

### Die ROM-Bereiche als Datenquelle

Die ROM-Bereiche enthalten nicht nur ausgeklügelte Maschinenprogramme, sondern auch eine Menge Daten. Sollten Sie mal in die Verlegenheit kommen, beispielsweise die Zahl Pi im MFLPT-Format verwenden zu müssen, dann erfordert das einen ganz schönen Aufwand an Rechen- und Programmarbeit, oder Sie möchten bestimmte Texte wie beispielsweise eine Fehlermeldung verfügbar halten .... und so weiter. Viele von diesen Daten sind schon in der Firmware enthalten und wir werden im folgenden festhalten, wo sie sich befinden und welches Format man vorfindet. Sehen wir uns zunächst Zahlen an (Tabelle 1). Es existieren noch weitere Zahlentabellen in den ROM-Be-reichen, die aber selten von Interesse sind. Ebenso wie Zahlen, findet man auch Texte im ROM als ASCII-Werte abgelegt (Tabelle 2):

Sollten Sie mal in die Verlegenheit kommen, solche Texte ausgeben zu wollen, dann legen Sie sie nicht nochmal in einer eigenen Texttabelle ab, sondern schöpfen Sie aus dem Fundus, den wir im ROM-Bereich fix und fertig haben.

Diese Folge soll nicht abgeschlossen werden, ohne eine Korrektur. Auf einen Fehler, dem ich aufgesessen bin (in der Literatur befinde ich mich aber in guter Gesellschaft, andere sind auch davon betroffen), haben mich zwei aufmerksame Leser hingewiesen. Es dreht sich um die Flaggensetzung bei Compare-Befehlen. Die N-Flagge ist nämlich nicht nur vom Ergebnis des Vergleichs, sondern auch noch von den aktuellen Akku- beziehungsweise Registerinhalten bestimmt.

Bild 1 in der 5. Folge muß deshalb korrigiert werden:
(A,X,Y) größer als die Daten: N kann 0 oder 1 sein
(A,X,Y) = Daten N = 0
(A,X,Y) kleiner als die Daten: N kann 0 oder 1 sein.

Das stammt aus dem offziel-len MOS-Technology-Handbuch und entspricht somit hoffentlich der Wahrheit [2]. Das bedeutet, daß man bei den Abfragen durch Branch-Befehle nach den Vergleichsbefehlen etwas vorsichtig sein sollte, was die N-Flagge angeht.

Zum Schluß noch, wie üblich, die Tabelle 3 mit den neuen Assembler-Befehlen.

(Heimo Ponnath/gk)

[1]	»Computerspiele und Wissenswertes Commodore 64«, Haar bei München: Markt & Technik Verlag, 1984. Das ist die von P. Lücke besorgte Übersetzung des amerikanischen Buches »More on the sixtyfour« und ist jedem Assembler-Programmierer warm zu empfehlen.
[2]	»MOS Microcomputers Programmier-Handbuch«, Frankfurt: Commodore MOS Technology

# Tips & Tricks gesucht

Jeder Computer und jedes Programm hat seine speziellen Schwachstellen und Unzulänglichkeiten. Allerdings ist kaum ein Programmierer oder Anwender auf Dauer bereit, sich damit abzufinden. Wo auch sorgfältigste Lektüre von Handbüchern nicht weiterhilft, da wird so manche Stunde experimentiert, um eine Lösung zu finden (die oft in einer Basic-Zeile Platz hat).

Wir suchen solche Tips und Tricks, um sie allen Lesern zugänglich zu machen. Schließlich ist es wenig sinnvoll, sich wochenlang mit Problemen herumzuschlagen, die andere bereits gelöst haben.

Wenn Sie also interessante Tips für den Umgang mit Computer, Floppy, Drucker oder sonstiger Hardware haben, wenn Sie bei kommerzieller Software einige Kniffe kennen, die nicht in der Anleitung stehen, oder wenn Sie interessante Problemlösungen statt in vier Seiten Listing in ein oder zwei Basic-Zeilen untergebracht haben, dann sollten Sie uns auf jeden Fall einmal schreiben.

Bitte geben Sie genau den Computertyp und die Gerätekonfiguration oder die Software an, und senden Sie Ihren Tip oder Trick an die
Redaktion 64’er
Markt & Technik Verlag Aktiengesellschaft
Hans-Pinsel-Str. 2
8013 Haar bei München

# In die Geheimnisse der Floppy eingetaucht _ Teil 6

> Formatieren einer Diskette ist für jeden Floppy-Besitzer das erste, was er mit ihr macht. Was beim Formatieren passiert und weshalb die Floppy so nervig rattert, warum es so lange dauert und wie es schneller geht, erfahren Sie in folgendem Artikel.

Wie jedem Floppy-Besitzer bekannt ist, muß eine Diskette vor dem ersten Speichern von Daten formatiert werden. Wie eine Diskette nach einem solchen Formatiervorgang aussieht, wurde schon besprochen.

Uns soll nun interessieren, was während des Formatierens so alles in der Floppy passiert und warum die 1541 so lange für einen eigentlich sehr einfachen Vorgang benötigt.

Zur Wiederholung: Beim Formatieren werden vom DOS alle wichtigen Markierungen auf die Diskette gebracht und außerdem sämtliche Sektoren in ihrer späteren Form angelegt.

Der Vorgang des Formatierens verwendet zu seiner Ausführung einen uns schon bekannten Jobcode, nämlich $E0.

Bevor das DOS den eigentlichen Formatiervorgang startet, wird ab $0600 (also im Puffer 3) ein Sprungbefehl abgelegt: JMP $FAC7.

Dieser Sprungbefehl ist eine Art Vektor, der im RAM liegt und somit verändert werden kann. Er bietet dem Benutzer die Möglichkeit, eine eigene Routine einzubauen, die dann bei jedem Trackwechsel angesprungen wird, um so einige wirksame Manipulationen an der Formatierung vorzunehmen, indem zum Beispiel Werte in der Zeropage verändert werden, doch dazu später. Üblicherweise zeigt dieser Vektor direkt auf eine Jobroutine, die für das Formatieren zuständig ist. Diese Routine wird nun vom Hauptprogramm mit dem Jobcode $E0, der in Speicherstelle $03 geschrieben wird, aufgerufen.

### Formatieren in der Jobschleife

Am Anfang der Jobroutine steht nun die Abfrage, ob schon mindestens ein Track formatiert wurde oder ob dieser Einsprung der allererste ist. Ist dieser Einsprung der erste, so werden alle Parameter für den Steppermotor gesetzt; danach erfolgt ein Rücksprung in die Jobschleife. Hier wird der Tonkopf nun 45 (!) Tracks zurückgefahren, was sich in jenem charakteristischen Rattern der Floppystation äußert.

Nun, können Sie sagen, es würde auch reichen, wenn der Kopf nur 35 oder 40 Spuren zurücktransportiert würde. In der Tat ist der Wert 45 sehr hoch. Man muß aber bedenken, daß es passieren kann, daß der Schreib-/Lesekopf der Floppy durch eine defekte Diskette oder einen Programmierfehler zu weit nach innen gefahren und beispielsweise auf Track 42 am Anschlag gelandet ist, daß ein Zurückfahren um 40 Tracks einfach nicht ausreicht, um den Tonkopf richtig zu positionieren.

Der Wert von 45 Tracks enthält also eine Sicherheitsreserve, die ein Positionieren auf Spur 1 mit Sicherheit ermöglicht.

Wurde der Kopf also aufTrack 1 positioniert, so erfolgt erneut ein Einsprung in die Formatierungsroutine; eine Speicherstelle zeigt jetzt an, daß der Kopf auf Track 1 positioniert wurde und das Formatieren starten kann.

Jetzt wird noch geprüft, ob auf die nächste Spur umgeschaltet werden soll, da die aktuelle bereits formatiert wurde (wenn ja, erfolgt wieder ein Einsprung in die Jobschleife, um das Nötige zu tun).

Diese Abfragen am Anfang der Formatierungsroutine scheinen umständlich und überflüssig zu sein; das Gefühl täuscht jedoch. Wir dürfen ja nicht vergessen, daß die Routine immer nur jeweils einen Track formatiert und danach zur Jobschleife zurückkehrt, damit der Tonkopf weitergeführt werden kann. Wir haben also gewissermaßen eine Endlosschleife, die nur durch die Feststellung, daß Spur 35 fertig formatiert wurde, beendet wird.

### Ausmessen einer Spur

Jetzt haben wir aber endlich alle Voraussetzungen zum Formatieren eines Tracks erfüllt und wollen an die Arbeit gehen. Der Abschnitt, der jetzt besprochen wird, ist übrigens für die langwierige Formatierung verantwortlich und sorgt für die ausgedehnten Wartezeiten.

Bevor die SYNC-Markierun-gen und Sektoren auf eine Spur geschrieben werden, wird diese Spur vom DOS »ausgemessen«.

Das Betriebssystem der 1541 »weiß« im Normalfall genau, wie-viele Bytes für die SYNC-Markierungen und Sektoren einer Spur benötigt, beziehungsweise verbraucht werden.

Jetzt ist es aber so, daß die Sektoren nicht genau auf jede Spur abgemessen sind; vielmehr hat die Diskette pro Spur eine etwas höhere Kapazität, als eigentlich benötigt wird. Aus dieser Tatsache folgt natürlich, daß zwischen den einzelnen Sektoren »Leerstellen« entstehen, die keine Daten enthalten.

Da jetzt aber die Länge der Tracks von außen (Track 1) nach innen (Track 35) kontinuierlich abnimmt, werden diese Leerstellen immer kleiner; wir haben also unterschiedliche Anzahlen von »Leerbytes« zwischen den Sektoren.

Das DOS ist nun bestrebt, die Sektoren jeder Spur möglichst symmetrisch anzuordnen, also immer den gleichen Abstand zwischen zwei Sektoren eines Tracks zu haben. Bild 1 zeigt, was passiert, wenn keine vorhe-rige Ausmessung stattfindet.

Um das Ziel einer »symmetrisch« formatierten Diskette zu erreichen, stellt das DOS durch einige komplizierte Schreib- und Lesevorgänge das Verhältnis zwischen benötigtem und vorhandenem Platz einer Spur fest. Aus diesem Verhältnis kann nun anhand einer einfachen Rechnung festgestellt werden, wieviel Platz zwischen den einzelnen Sektoren freigelassen werden muß.

Nachdem diese komplizierte Vermessung stattgefunden hat, die mehrere Diskettenumdrehungen und damit Zeit erfordert, beginnt nun das eigentliche Formatieren der Diskette, das mit allem Drum und Dran normalerweise nicht mehr als eine y3 Sekunde für eine Track benötigt.

### Das Anlegen der Sektoren im Puffer

Bevor geschrieben werden kann, müssen die Sektoren erst einmal im Pufferspeicher der 1541 hergestellt werden. Da sich die einzelnen Sektoren nur durch deren Header unterscheiden, reicht das Anlegen der Blockheader; die Inhalte der Datenblöcke sind bei jedem Sektor gleich und bestehen aus dem schon bekannten Muster $4B gefolgt von 255 $01-Bytes.

Die Blockheader werden alle in einem Pufferspeicher ($0300-$03FF) abgelegt; der Inhalt der Datenblöcke steht ab $0500 bis $05FF.

### Schreiben eines Tracks auf Diskette

So, alle Vorarbeiten wären jetzt abgeschlossen. Wir können mit dem Schreiben auf Diskette beginnen. Zuerst wird der Disk-Controller auf Schreibmodus gestellt und die Spur der Diskette gelöscht.

Der gesamte Spurinhalt wird nun während einer einzigen Diskettenumdrehung (% Sekunde) auf die Diskette gebracht, wobei zuerst die SYNC-Markierung für den Blockheader, danach der Blockheader selbst geschrieben werden. Nach einer Lücke von 9 Byte folgt die SYNC-Markierung des Datenblocks mit den zugehörigen Datenbyte. Den Abschluß eines Sektors bildet der schon erwähnte »Leerraum«, der aus der vorher errechneten Anzahl von Byte besteht.

Zur Sicherheit erfolgt nach dem Schreiben eine Verify-Routine, die auf eventuelle Disketten- oder Schreibfehler kontrolliert und bei deren Auftreten einen »24, READ ERROR« ausgibt.

Mit dieser letzten Maßnahme ist eine Spur einer Diskette fertig formatiert worden, und es wird auf Erreichen der Spur 35 abgefragt. Wurde Spur 35 formatiert, so werden alle Flags für das Formatieren zurückgesetzt, die Jobschleife verlassen und ins Hauptprogramm zurückgekehrt.

### Formatieren ohne ID

Im Hauptprogramm wird nun auf Track 18 positioniert. Die BAM der Diskette wird hergestellt und in Block 18,0 abgelegt. Anschließend wird noch der erste Directory-Block (18,1) mit Nullen vollgefüllt und ebenfalls abgespeichert, womit das Formatieren abgeschlossen wäre.

Formatiert man eine Diskette nur kurz, das heißt ohne Angabe einer ID beim N-Befehl, so werden alle anfänglichen Schritte weggelassen. Es wird in diesem Fall nur auf das richtige Formatkennzeichen in der BAM ($41/ 65/A) kontrolliert und danach der eben beschriebene Vorgang aufTrack 18 durchgeführt.

### Formatieren mit »Variationen«

Nun wäre unser Floppykurs natürlich kein Floppykurs, wenn wir unsere neu gewonnenen theoretischen Kenntnisse nicht sofort in die Praxis umsetzen wollten.

In der Tat kann man mit Hilfe der Formatierroutine im DOS einige nette »Scherze« auf eine Diskette bringen, die entweder dem Spieltrieb oder dem Softwareschutz dienen können.

Ich habe vorhin schon erwähnt, daß die Formatierroutine jeweils über einen Sprungbefehl bei $0600 im RAM der Floppy aufgerufen wird.

Diese Adresse wird beijedem neuen Track angesprungen und bietet so die Möglichkeit, Tracks zu erzeugen, die in ihrem Aufbau voneinander abweichen, wenn entsprechende Eingriffe vorgenommen werden.

Diese Möglichkeit eines Eingriffes wollen wir an dieser Stelle aber gar nicht erst weiter diskutieren, da es ziemlich aussichtslos ist, hier ohne dokumentiertes DOS-Listing an die Arbeit zu gehen.

Daß wir kein DOS Listing besitzen, soll aber noch lange nicht heißen, daß wir nicht in der Lage sind, auf anderem Weg, Eingriffe in die Formatierung vorzunehmen. Wenn wir nicht effektiv mit der fest eingebauten Routine zusammenarbeiten können, dann schreiben wir uns eben ein vollständig eigenes Programm, das im RAM der Floppy abgelegt wird und uns für Abänderungen unendlich viele Möglichkeiten bietet.

### Formatierung »selbst gebaut«

Sehen Sie sich einmal Listing 1 an. Ich habe hier ein Formatiersystem entwickelt, das einfacher und schneller arbeitet als die DOS-Routine und trotzdem ein paar zusätzliche Möglichkeiten bietet.

Da das Gesamtprinzip aber fast 100prozentig mit der im DOS eingebauten Routine übereinstimmt, können Sie sich anhand des Source-Code-Listings einmal die »praktische Ausführung« einer Formatierroutine ansehen.

Um Ihnen die Eingabe des Programms zu erleichtern, habe ich einen DATA-Lader als Listing 2 beigefügt, wobei ich Ihnen empfehlen möchte, diesen gleich einmal einzutippen.

Das Programm wird nur aktiviert, wenn alle DATAs richtig eingetippt wurden. Haben Sie alles richtig gemacht, so steht nach der Ausführung des Laders ein Maschinenprogramm am Basic-Anfang, dem eine Basic-Zeile beigefügt ist. Das Programm sollten Sie sich jetzt mit SAVE auf eine Diskette speichern und danach mit RUN starten.

Nach einer winzigen Verzögerung erscheint die READY-Meldung und der Cursor wieder. Das Formatierungsprogramm wurde jetzt in den Bereich ab $C000 (49152) geschoben und der SAVE-Vektor abgeändert.

Tippen Sie jetzt einfach den Befehl SAVE — ohne Anführungszeichen und Filenamen — ein und drücken Sie RETURN. Es erscheint nun die Startmeldung des Formatprogrammes. Sie könnenjetzt einen Namen für eine Diskette eingeben (maximal 16 Zeichen werden angenommen). Danach erwartet der Computer eine zweistellige ID. Schließlich, und das ist das besondere an diesem Programm, können Sie noch den ersten und letzten zu formatierenden Track eingeben. Diese Eingabe muß hexadezimal erfolgen und erlaubt einen Bereich von $01 bis $FF.

**Achtung!** Wird eine Zahl größer als $29 (41) eingegeben, wird es in der Regel kritisch. Der Kopf ist dann nämlich am oberen Anschlagpunkt angelangt.

Etwas ist noch zu beachten: Ein Nachformatieren einer Spur auf einer gefüllten Diskette ist mit dem Programm ohne Änderung nicht möglich, da das Directory auf jeden Fall neu geschrieben wird. Wird die Diskette nicht vollständig formatiert, so ist darauf zu achten, daß die gleiche ID eingegeben wird, wie sie schon für die übrige Diskette Gültigkeit hat, da es sonst einen »29, DISK ID MISMATCH ERROR« gibt.

Wollen Sie dennoch einen Einzeltrack neu formatieren, ohne das Directory zu zerstören, so könnenSie das durch eine einfache Änderung im Floppy-Programm erreichen. Sie gehen in Listing la an die Adresse $06B5. Den Befehl JSR $EE40 und das nachfolgende RTS ersetzen Sie durch lauter NOPs.

Eine Änderung des Directory-Track unterbleibt jetzt, sofern Sie die Tracknummern zur Formatierung entsprechend wählen, da dieser Befehl die Routine zum kurzen Formatieren im DOS aufgerufen hätte.

In jedem Fall gilt aber: Bei Formatieren von Einzeltracks müssen diese die gleiche ID wie die übrige Diskette erhalten.

Eine weitere Möglichkeit dient der Schonung des Laufwerks. Wenn Sie sich das Floppy-Programm noch einmal betrachten, dann finden Sie bei Adresse $0696 den Befehl an den Disk-Controller, einen BUMP auszuführen. Wenn Sie hier das $C0 durch ein $00 ersetzen, dann unterbleibt dieses Anschlagen des Tonkopfes am Anfang des Formatierens. Diese Maßnahme ist immer dann nützlich, wenn mehrere Disketten hintereinander formatiert werden sollen.

Zur Zeitdauer ist noch zu sagen, daß das Programm für eine Diskette zirka 30 Sekunden benötigt und damit um einiges schneller ist als das Programm im DOS der 1541. Warum das so ist, wollen wir gleich erfahren.

### Geschwindigkeit; aber wie?
In meinem Formatierprogramm wurde die Berechnung der Lücke zwischen zwei Sektoren weggelassen. Wir können nämlich davon ausgehen, daß diese Lücken auf jeder Diskette in etwa gleich sind. Aus diesem Grund verwende ich einfach einen Erfahrungswert für die Länge der Lücke, der zusätzlich noch einen Sicherheitsbereich enthält. Diesen Wert sehen Sie in Listing la an der Adresse $05DF.

Wenn Sie mit dem Programm Disketten formatieren, werden Sie feststellen, daß die Datensicherheit auch weiterhin voll gewährleistet ist.

Im Gegensatz zu anderen schnellen Formatierprogrammen habe ich aber nicht auf ein Verify verzichtet, da das Formatieren die einzige Möglichkeit bietet, defekte Disketten rechtzeitig zu erkennen, ohne daß dabei wichtige Daten verlorengehen. Einmal ganz davon abgesehen, macht das Verifizieren außerdem nur einen sehr kleinen Teil am Geschwindigkeitsverlust aus, so daß die Sicherheit vor einigen Sekunden Zeitgewinn Vorrang haben sollte.

Wollen Sie die Zeit dennoch einmal ohne Verify messen, so »klemmen« sie den Rest der Formatierungsroutine ab $05FD ganz einfach ab, indem Sie an dieser Stelle nach JMP $FE00 ein JMP $FD9E einfügen. Eine weitere Verbesserung gegenüber dem DOS 2.6 der 1541 hat eigentlich mehr kosmetischen Charakter.

Es geht hier um den Leerinhalt von Datenblöcken, nachdem eine Diskette neu formatiert wurde. Den Inhalt werden Sie höchstwahrscheinlich schon kennen: Es steht am Anfang des Datenblocks ein $4B gefolgt von 255 $01-Bytes.

Dieser Inhalt ist eigentlich auf einen Fehler im DOS zurückzuführen; er müßte, wie auch bei den großen Commodore-Flop-pies aus 256 $00-Bytes bestehen.

In meinem Programm fülle ich alle Sektoren mit dem üblichen Wert $00.

Noch ein paar Hinweise zur Benutzung des Formatierprogramms.

Nach RUN wird automatisch der SAVE-Vektor auf den Programmstart der Formatierroutine gestellt. Wird kein Filename angegeben, so erfolgt ein Sprung in das Formatierprogramm. Durch Drücken von RUN STOP/RESTORE läßt sich der SAVE-Vektor wieder richtig »hinbiegen«. Hierzu dürfte jedoch kein Anlaß bestehen, da bei fehlendem Filenamen kein Programm gestartet wird.

Mußten Sie dennoch einmal RESTORE drücken, so läßt sich das Formatier-System mit SYS 49664 ($C200) erneut starten; nach Beendigung wird unter anderem auch der SAVE-Vektor wieder auf das Programm zurückgestellt.

Wollen Sie sich den Disk-Status anzeigen lassen, so tippen Sie SYS49962. Es erscheint danach auch die Frage nach einem weiteren Formatiervorgang, die Sie entsprechend beantworten. Nach dieser Anzeige wird der SAVE-Vektor ebenfalls wieder hergestellt.

Ich möchte Sie an dieser Stelle auf ein paar Speicherstellen in der Zeropage der 1541 aufmerksam machen. Wie Sie wissen, werden dort nach einem RESET ein paar Konstanten abgelegt, die vom Benutzer (beliebig) verändert werden können. Mit den Konstanten meine ich zum Beispiel $08 als Kennzeichen eines Blockheaders oder $07 als Kennzeichen eines Datenblocks.

Wie Sie aus der Zeropage-Belegung in der 64’er-Ausgabe 1/1985, Seite 151 entnehmen können, werden diese beiden Werte in den Speicherstellen $38 (Wert 07) und $39 (Wert 08) abgelegt und können nun abgeändert werden. Der neue Wert, den Sie vielleicht in diese Speicherstellen eintragen, sollte sich jedoch im Bereich von $00 bis $0F bewegen, da es sonst Schwierigkeiten beim Lesen geben kann. Die Folge eines Leseversuchs mit normalen Werten, wenn eine Diskette anders formatiert wurde, sind entweder ein »20, READ ERROR« oder ein »22, READ ERROR«.

Der Vorteil dieser Errors ist jedoch die Möglichkeit, den Blöcken auch Inhalte mitzugeben, womit ein sehr wirkungsvoller Kopierschutz konstruiert werden kann.

Zum Lesen oder Beschreiben der Diskette müssen die Werte in den beiden Speicherstellen nur jeweils richtig gestellt werden; dann kann ein ganz normaler Zugriff stattfinden.

Mit Hilfe des Formatierprogramms können Sie jetzt auch noch zusätzlich illegale Spuren beschreiben. Hierbei müssen Sie allerdings, wie in der letzten Folge besprochen, auf Jobschleifenebene arbeiten, um die Begrenzung auf die Spuren 1 bis 35 zu umgehen.

In der nächsten Folge möchte ich Ihnen etwas vorstellen, das sich GCR-Codierung nennt. Wir werden dann erfahren, daß Daten keineswegs so auf Diskette geschrieben werden, wie sie im Puffer vorliegen, sondern, daß vorher eine Codierung erfolgt.

(Karsten Schramm/gk)






































































