
# Der C 64 lebt weiter \[8]

Als Einsteigermodell, so sagt man bei Commodore, habe er noch zwei bis drei Jahre seine Berechtigung. Dann könnte — wegen des branchenüblichen Preisverfalls — der 128 die Rolle des Billig-Modells übernehmen. Dafür spricht eine einfache Überlegung: Es ist wenig wahrscheinlich, daß der Absatz in diesem Jahr schlagartig zusammenbricht, nachdem 1984 allein in Deutschland knapp eine halbe Million 64er verkauft wurden und es im Frühjahr schon wieder Lieferprobleme gab. Nach einer Umfrage der Marktforschungsfirma Basisresearch lag Commodore im Bekanntheitsgrad von Computerherstellern hinter IBM und Nixdorf im Dezember 84 auf Platz drei. Zum gleichen Zeitpunkt galt Commodore als der Hersteller, der die preiswertesten und leistungsfähigsten Heim-/Kleincomputer baut und die besten Anwendungsprogramme im privaten Bereich hat. Ein solches Image geht auch nicht mir nichts, Dir nichts verloren — selbst wenn Konkurrenten wie Schneider oder Atari im Lauf dieses Jahres bei derartigen Umfragen aufholen sollten.

Es dürfte auch noch einiges an neuen Programmen, an Peripherie und Zubehör für den 64er auf den Markt kommen — weil seine Leistung für viele Anwendungen ausreicht und weil der Markt so groß ist, daß die Anbieter laufende Entwicklungen nicht »einstampfen« werden. Entwicklungen, die ganz neu in Angriff genommen werden, dürften sich meines Erachtens allerdings eher am 128 orientieren — was sich für die Benutzer erst ab 1986 auswirken dürfte. Der Abstand im Anschaffungspreis dürfte aber nächstes Jahr noch so groß sein, daß der 64er für einen großen Käuferkreis interessant bleibt. Ich glaube auch, daß das Massenprodukt für Commodore interessant genug bleibt, daß es nicht kurzfristig im Trend zu höherwertigen Systemen (PC 10/20; CBM 900) untergeht.

(Michael Pauly, Chefredakteur)

# Hannover-Messe '85 \[8-9]

> Neue Besucher- und Ausstellungsrekorde konnte die Hannover-Messe 1985 verbuchen. Viel Neues gab es bei den Computer- und Druckerherstellern zu sehen.

An erster Stelle muß hier natürlich Commodore genannt werden. Der Stand dieser Firma in der CeBIT-Halle 1 war eigentlich nie zu verfehlen. Hinter den größten Menschenansammlungen waren die heißen Produkte kaum auszumachen. Commodore präsentierte gleich drei neue Computersysteme. Den PC 128 (und den Plus/4 übrigens auch) wird es in diesem unserem Lande mit deutscher Tastatur und Umlauten auf dem Bildschirm geben. Commodore scheint sich in der Entwicklung der Computer nun tatsächlich an den nationalen Anwender orientiert zu haben. Für das europäische Ausland soll der PC 128 nämlich mit den jeweiligen Standardtastaturen ausgeliefert werden. Eine erfreuliche Nachricht für Franzosen, Engländer, Dänen und Deutsche. Auch konnten bereits neue Programme für den 128-Modus bewundert werden. Darunter Superscript, ein Textverarbeitungsprogramm mit für diese Preisklasse (198 Mark, von Commodore) außergewöhnlichen Leistungsmerkmalen, wie Textfenstern und Berechnungsmöglichkeiten bei Tabellen innerhalb der Textverarbeitung. Mit Superbase (298 Mark) für den C 128 soll dieses Programm die Daten austauschen können. Der Commodore 128 wird voraussichtlich 1200 Mark kosten (Listenpreis). Ein ausführlicher Testbericht in dieser Ausgabe zeigt Ihnen die Fähigkeiten dieses Computers auf. Als Liefertermin wird Ende Juni oder Juli genannt.

Vom PC 10 (IBM-kompatibler Personal Computer) konnten seit Einführung im Februar nach Aussagen von Commodore bereits 5000 Stück abgesetzt werden. Nun ist auch der PC 20 mit einem 10-MByte-Festplatten-Laufwerk für 7950 Mark erhältlich.

Den Markt der Personal Computer nach oben hin will Commodore mit dem neuen CBM 900 abdecken. Er arbeitet mit dem Betriebssystem Coherent (Unix-kompatibel). Modell 1 dient als Personal Workstation mit Schwerpunkten in CAD (Computer aided design) mit einer Auflösung von 1024 x 800 Punkten, 15 Zoll monochromem Monitor mit 72 MHz, Video-Controller-Karte, Maus, 20 MByte Harddisk und Software für Fenstertechnik. Das Modell 2 ist mehrplatzfähig mit bis zu sieben Terminals. Das Floppy-Laufwerk hat eine Kapazität von 1,2 MByte, der Arbeitsspeicher beträgt 512 KByte RAM (bis 2 MByte ausbaufähig). Mit dieser Modellpalette deckt Commodore wohl als einziger Hersteller das gesamte Leistungsspektrum vom billigen Heimcomputer bis zum mehrplatzfähigen Personal Computer ab.

## Was macht die Konkurrenz?

Als schärfster Konkurrent im Heimcomputermarkt tritt zur Zeit Atari auf. Nachdem Jack Tramiel im Januar 1984 zu Atari wechselte, versucht er mit dieser Firma wieder die Nummer Eins zu werden. Die auf der Hannover-Messe vorgestellten Computer 130 XE und 520 ST lassen einiges erhoffen. Kennzeichnend für Tramiel war von je her die herausfordernde Taktik mit einem überzeugenden Preis-/Leistungsverhältnis und neuer Technologie Marktanteile zu gewinnen (siehe PET, VC 20, C 64). Dadurch zeichnen sich auch die neuen Modelle von Atari aus. Der 130 XE weist 128 KByte RAM aus, ist aber ansonsten mit dem Vorgängermodell 800 XL identisch. Der 520 ST (auch Jackintosh genannt) soll dem Macintosh von Apple das Leben schwer machen. Die Leistungen lassen sich durchaus mit dem »Mac«vergleichen, der Preis ist jedoch ein Hammer, 2795 Mark. Neueste Meldungen, so der Rückzug von Atari von der Consumer Electronics Show in Chicago, gaben allerdings Gerüchten, das Atari Qack Tramiel) in Schwierigkeiten sei, neuen Nährstoff. Auch die Verschiebung der Auslieferungstermine für die neuen Computer gibt Anlaß zum Nachdenken. Zu wünschen wäre, daß Atari es dennoch schafft, denn mit diesen Computern zu solch einem Preis dürfte einiges im Preisgefüge der Heim- und Personal Computer in Bewegung geraten.

Schneider hat sich mittlerweile zum zweitgrößten Computervertreiber in Deutschland hochgearbeitet. Das Produkt ist gut, der Preis stimmt auch. Entsprechend gut war der Stand besucht.

Apple setzt weiterhin voll auf den Macintosh. Der Fat-Mac mit 512 KByte kostet zirka 8000 Mark.

Sinclair glänzte wieder einmal durch Abwesenheit.

## Die Druckerflut ist im Anrollen

Eine Artenvielfalt sondergleichen gab es auf der Hannover-Messe bei den Druckern zu bewundern. Jeder große Druckerhersteller wartete mit neuen Modellen, nicht zuletzt speziell für den C 64, auf. So kündigte Epson den GX-80 an, ein 9-Nadel-Matrixdruckermit 100 Zeichen/Sekunde (cps), NLQ-Schrift (Near Letter Quality), l-KByte-Puffer und natürlich ein auswechselbares ROM-Modul für den C 64. Die Einführung auf dem Markt soll im Juni erfolgen, der Preis wurde mit unter 1000 Mark angegeben.

Seikosha (Vertrieb in Deutschland durch microscan) ist dafür bekannt, daß fast die gesamte Druckerpalette an alle gängigen Heim- und Personal Computer anschließbar ist. Noch verbleibende Lücken wurden geschlossen. So gibt es den GP-500 und den GP-700 (Farbdrucker) jetzt auch mit dem Zusatz VC was bedeutet, daß diese Drucker direkt an den VC 20, C 16, Plus/4, C 64 und C 128 anschließbar sind. Neu hinzugekommen ist der extrem leise 9-Nadel-Matrixdrucker SP-1000VC mit einer Druckgeschwindigkeit von 100 cps, NLQ (32 x 18 Matrix), einstellbaren Tabulatoren, automatischem Papiereinzug, zehn internationalen Zeichensätzen (und den Commodore-Zeichensatz) und FX-80-Kompatibilität. Der Preis liegt um die 1000 Mark.

Anpassungen an den C 64 hat der Speedy 100-80 (Preis 1099 Mark) von Macrotron erfahren. Komplettiert hat Macrotron die Speedy-Familie. Der Nachwuchs besteht aus dem Speedy 130-80 mit 130 cps und 80 Spalten Breite und den Speedy 130-136 mit 136 Spalten. Die' Speedy-Drucker zeichnen sich durch quadratische Nadeln (9x9), multistrike Karbonbänder, standardmäßigem Friktions- und Traktorantrieb sowie elektronisch umstellbare Schriftvarianten aus. Mit dem Speedy thermo gibt es jetzt auch einen billigen Thermodrucker (560 Mark) von Macrotron.

Quen-Data bietet mit dem DMP 1100 VC einen 9-Nadel-Matrixdrucker mit 100 cps, deutschem Zeichensatz und C 64- und Centronics-Interface für 1048 Mark an. Die Schreibmaschine Excellence 70 VC mit eingebautem C 64-Interface kostet 899 Mark.

Star präsentierte zum erstenmal die SG-, SD- und SR-Serie in Europa. Alle diese Drucker verfügen über einen dem Typenradschriftbild angepaßten Modus (NLQ), zudem wurde die Grafikfähigkeit der neuen Generation erweitert. Neben normal-, hoch- und ultrahochauflösender Grafik sind drei zusätzliche Grafikmodi vorhanden: zwei CRT-Modi mit 640 beziehungsweise 720 Punkten pro Zeile sowie ein Plot-Modus mit einer Auflösung von 576 Punkten und gleichem Punktabstand in der Horizontalen und Vertikalen.

Ausführliche Informationen über das Geschehen auf der Hannover-Messe erhalten Sie in der nächsten Ausgabe.

(aa)

# Schule braucht Computer \[9-10]

> Es erscheint angesichts der Verbreitung des Heimcomputers in Deutschland schon merkwürdig, daß in einigen Bundesländern der Informatikunterricht noch nicht einmal im Lehrplan aufgenommen ist. Computer in die Schulen zu bringen ist on immer noch Sache engagierter Schüler, Lehrer oder Eltern.

Mit diesem Problem hatte auch das Aloisius Kolleg (kurz Ako genannt) in Bonn zu kämpfen. Kein Computer stand den computerbegeisterten Schülern im Unterricht zur Verfügung. Angeregt durch diese Misere und dem Wissen, daß auch in den unteren Klassen viele Jugendliche und Kinder privat mit dem C 64 arbeiteten, entschlossen sich zwei Schüler, den Computerunterricht selbst in die Hand zu nehmen. Zunächst war geplant, mit eigenen, privaten Geräten einen Kurs im Rahmen des Ako-Proseminars (begleitende Kursangebote der Schule nach dem regulären Unterricht) zu starten. Dies hätte bedeutet, daß bei 10 bis 12 Kursteilnehmern (die Meldungen waren wesentlich höher) nur zwei Arbeitsplätze zur Verfügung gestanden hätten. Ein unhaltbarer Zustand. Um die lobenswerte Eigeninitiative der Schüler nicht im Sande verlaufen zu lassen, erklärte sich der VAM (Verein zur beratenden Aufklärung über die Mikrocomputertechnologie eV.) bereit, kostenlos acht C 64 mit Floppy-Laufwerk und Farbmonitor zur Verfügung zu stellen. Dieser Verein sicherte auch den Service für während des Unterrichts aufgetretene Schäden an den Computern. Die Kurse waren ein voller Erfolg, und die Teilnehmer haben sich alle für einen Fortsetzungskurs angemeldet. Dieses positive Ergebnis bewog dann auch die Schulleitung dazu, sich auf dem Gebiet der Informatik zu engagieren.

Der VAM stellte dafür eigens entwickelte Schulcomputer »Leibniz I« (C 64 mit flacher Tastatur, Floppy-Laufwerk und Farbmonitor in einem Gehäuse integriert, siehe Bild) zur Verfügung. Außerdem wurde ein Computerraum eingerichtet und für das nächsteJahr ein Informatikunterricht geplant.

## Neue Ideen braucht das Land

Dieses kleine Beispiel zeigt deutlich, wie erst durch private Initiative der Computer Eingang in den Schulunterricht findet. Der VAM hat sich dabei Gedanken gemacht, wie für Schulen, die bisher ohne Computer auskommen mußten, weil die Mittel fehlten, der Anreiz geschaffen werden kann, sich eine Anlage zu besorgen. Als Ergebnis kam das Modell der Mietpatenschaften heraus. Dabei werden der Schule durch den VAM die erforderlichen Computer kostenlos zu Verfügung gestellt. Es werden Firmen, Banken, Versicherungen in der Umgebung der Schule gesucht, die auf freiwilliger Basis die monatlichen Mieten für jeweils einen dieser Computer übernehmen. Nach ein paar Jahren sind die Geräte dann »abgezahlt« und gehen in den Besitz der Schule über. Der VAM übernimmt den Service bei anfallenden Reparaturen. So haben alle Seiten etwas davon, die Schüler kommen endlich zum Informatikunterricht, der Schule entstehen keinerlei Kosten und die Firmen der Umgebung können mit Schulabgängern rechnen, die mit hervorragenden Kenntnissen beim Umgang mit Computern ausgestattet sind. Fürwahr eine Idee die Schule machen könnte.

(aa)

# Aktuell \[9-10]

## Computer ohne Kabelsalat

Ein alter Bekannter im neuen Gewand stellt sich mit dem VAM »Leibniz I« vor. Der C 64 wurde zusammen mit einem Floppy-Laufwerk 1541 und einem Farbmonitor in einem Gehäuse von Knürr untergebracht. Der Monitor ist in allen Richtungen schwenkbar. Die Tastatur ist mit dem Gehäuse durch ein Spiralkabel verbunden. Resettaster an den Seiten für Floppy und Computer runden das Bild ab.

Neue Modelle mit Turboladesystem und Mehrplatzfähigkeit sind in Planung.

Für genauere Informationen über folgende Themen:

* Wie kommen Schulen an den VAM »Leibniz«?
* Gibt es den »Leibniz« auch als Bausatz (kann ich meinen alten C 64 mit Laufwerk und Monitor einschicken und bekomme einen neuen »Leibniz«)?
* Was kann der Leibniz heute, was schafft er morgen?
* Wie ist der Service gewährleistet?

wenden Sie sich bitte an
VAM e.V
Rathausgasse 30,
5300 Bonn 1

## Adressenänderung — Oxford-Pascal

In der Ausgabe 5/85 haben wir als Bezugsquelle des neuen Oxford-Pascal CPL Computer plus Soft in Dinslaken angegeben. Diese Firma hat in der Zwischenzeit Konkurs angemeldet und ist nicht mehr lieferfähig. Eine neue Bezugsquelle in Deutschland existiert noch nicht. Interessenten können sich an die Adresse in England wenden:

Oxford Computer Systems (Software) Ltd.
Hensington Road
Woodstock
Oxford 0X7 lJR, England

## Competition Pro mit Microschaltern

Der Joystick »Competition Pro« mit Microschaltern wird jetzt von der Dynamics Marketing GmbH angeboten. Erkennbar ist dieser Joystick an dem roten Griff. Er ist im Fachhandel für zirka 72 Mark erhältlich.

## Aktualität vor Kontinuität

Liebe Leser, in letzter Minute haben wir den gesamten Aufbau der 64’er umorganisiert. Es erschien uns wichtiger, Sie mit einem ausführlichen Testbericht über den neuen Commodore 128 zu informieren. Diesem zusätzlichen Platzbedarf sind leider einige Beiträge zum Opfer gefallen. So müssen Sie in dieser Ausgabe auf die beiden Kurse »Assembler ist keine Alchimie, Teil 10« und »Dem Klang auf der Spur, Teil 7« verzichten. Ebenso nicht dabei ist die Anwendung des Monats. All diese Artikel werden in der nächsten Ausgabe wieder zum gewohnt vollständigen Bild des 64’er-Magazins beitragen.

An dieser Stelle möchte ich Sie auch auf zwei Wettbewerbe hinweisen, bei denen insgesamt Preise im Wert von über 25000 Mark zu gewinnen sind. Am Umfragewettbewerb sollte jeder 64’er-Leser teilnehmen, der aktiv an der zukünftigen Gestaltung »seiner« Zeitschrift mitwirken möchte. Ein Personal Computer PC 10 und 10 Disketten-Laufwerke 1541 von Commodore sowie jede Menge Buchgutscheine sind die Belohnung für Ihre Mühen.

Beim zweiten Wettbewerb sind wieder Ihre Programmierkünste gefragt. Schreiben Sie die erste C 64-Telesoftware für Btx. Zu gewinnen sind dabei 2 Btx-Fernseher, eine Reise nach Berlin und zwei MPS-802-Drucker. Mitmachen lohnt sich diesmal also wirklich.

(aa)

## Die Kuriositätenecke \[10]

Diesmal geht’s wieder querfeldein durchs Gemüsebeet mit interessanten, seltsamen und anderen Ereignissen der Computerszene. — In früheren Zeiten wurden Automatenspiele auf den Computer umgeschrieben, mittlerweile läuft dieser Prozeß schon fast in umgekehrter Richtung ab. Nachdem der Hyper-Olympics-Automat gemäß dem IBM-PC-Vorbild entstand, wurden jetzt auch die Heimcomuterspiele »Boulder Dash«, »Flip & Flop« und »Loderunner« für Automatenhersteller lizenziert. — Die amerikanische Firma Suncom hat den Vertrieb ihres »AeorbicJoystick« (richtig gelesen, nicht Aerobic sondern Aeorbic) aufgegeben. Das Gerät wurde auf ein Trainingsfahrrad aufgesteckt. Je schneller man in die Pedale trat, desto schneller bewegte sich das gewünschte Objekt auf dem Bildschirm. Das war gut für Pitstop II, bei Pacman-Fans stellte sich aber ein großer Haßeffekt ein. Auch schien es nicht genug sportliche Heimcomputerbesitzer zu geben.

* Jerry LeMaitre (18 Jahre) aus Collingwood in Kanada hat einen Babysitter-Job, den er allerdings mit Hilfe des Computers ausübt. Er zeigt den Kindern, wie man lädt, druckt, Programme startet etc., und in kürzester Zeit haben diese Kinder durch ihren Forscherdrang Basic fast wie von selbst gelernt. Als er seine Lehrkünste an Erwachsenen ausprobieren sollte, hatte er allerdings weniger Erfolg. Sein Kommentar dazu: »They think that the Computer is gonna blow up, when they touch it!« (Sie denken, der Computer explodiert, wenn sie ihn berühren).
* Die Zeitschrift »Computer Games« ist für den Leser wesentlich interessanter, wenn er eine Lupe zur Hand nimmt: Am Rand der Seiten stehen immer wieder kleine Bemerkungen in Miniaturschrift. Der Inhalt: »Catch ya later« oder »Print is dead. We helped to kill it!«.
* Die Anzahl der alternativen Computerzeitschriften Deutschlands nimmt immer mehr zu. Nachdem in München der »Computertrottel« als regionales Blatt schon länger Erfolg hat, versucht sich jetzt eine neue, überregionale Zeitschrift namens »Source« zu etablieren. Themen der Zeitschrift: Allgemeine Informationen ohne Zensur, Programmierkurse mit »Raumschiff Kenterbrise mit Commander Captain Crack«-Szenen, Berichte über das Verhältnis eines seltsamen Völkchens (das man Amerikaner nennt) zu Computern (Computertrottel) und ähnliches mehr.
* Nachruf in einer Mailbox: In tiefer Trauer geben wir den Tod unserer geliebten NUI DATENKLO z8va8v bekannt.<br>SIE war uns von ALLEN die Liebste, denn SIE gehörte dem GROEHAZ (GROEssten Hacker Aller Zeiten), Wau Holland vom CCC (Computer Capitalizing Company). Wau durch den »Congress« und den Auftritt bei Frank Elstner finanziell gesundgestoßen, gab nun uns Hackerprolos ca. 3 Wochen DATEX-P aus.<br>Danke, Wau, große Gesten stehen Dir gut! Weitere Nui-Spenden bitte als allgemeine msgs in dieser Box.<br>gez. LSD<br>Liga für subversive Datenkommunikation.
* Eine Studie eines amerikanischen Forschungsinstituts ergab, daß Computerspiele weniger Aggressivität verursachen als Fernsehen oder Darts-Werfen. Dieselbe Studie ergab aber auch, daß Computerspiele die sogenannte »eye-hand-coordination« (Auge-Hand-Koordination) **nicht** verbessern.
* Die Zeitschrift »Electronic games« brachte einen zwei Seiten langen Artikel über mögliche Freizeitbeschäftigungen während des Ladens eines Programms vom 1541-Diskettenlaufwerk. Vorschläge waren zum Beispiel, ein Musikinstrument zu erlernen, ein Buch zu lesen oder gar (während des Ladens von One on One, das immerhin drei volle Minuten benötigt) zum Surfen zu gehen.
* Verschiedene Computerfirmen bekommen ihre Namen auf recht seltsame Art. »Penguin Software« z.B. basiert auf dem »Penguin on the telly«-Sketch der Monty-Python-Gruppe, die in England so etwas ist, wie den Deutschen ihr Otto Waalkes. — Die University of Montana führte ein wissenschaftliches Experiment durch, in dem Rhesus-Affen das Pac-Man-Spielen beigebracht bekamen. Je besser sie spielten, desto mehr Marshmallow-Früchte bekamen sie. Jetzt sind die Affen so perfekt, daß die Automaten schwerer eingestellt werden mußten.

# Leserforum \[12-14]

## RUN = Syntax Error?

Läßt sich beim C 64 der Basic-Start verändern? Das Vorhandensein der Routine $A68E läßt mich dieszwar vermuten, es gelingt mir aber nicht ganz. Nach dem Heraufsetzen des Basic-Starts wird »RUN« mit »Syntax Error« beantwortet, ebenso »NEW«. Germann Podest

Der Syntax Error bei RUN ist schon ziemlich symptomatisch. Sie haben wahrscheinlich nicht bedacht, daß das erste Byte im Basic-Bereich immer ein Nullbyte sein muß. Vor dem SYS-Befehl müssen Sie also unbedingt einen POKE <Anfangsadresse>, O-Befehl geben.

## Kreuzworträtsel auf MPS-8O1?

Ich habe das fantastische Kreuzworträtsel-Programm von Gert Büttgenbach aus der Ausgabe 12/84 abgetippt. Allerdings ist es mirnicht gelungen, dieses für den Epson-Drucker geschriebene Programm für den MPS-801 umzuschreiben. Vielleicht findet sich ein versierter Leser, der dieses Problem gelöst hat?
Karl Kipping

## Chemie per User-Port

Wie kann man über den User-Port am C 64 chemische Messungen durchführen?

Ausgabe: 3/85

Joachim von Neuenkirchen

Die Zeitschrift »CLB — Chemie für Labor und Betrieb« hat seit einiger Zeit eine Rubrik mit Software für den Laborbereich. In einer der letzten Ausgaben erschien ein Artikel über die Soft- und Hardware bei der Erfassung von titrimetrischen Bestimmungen mit einem Commodore 64. Werner Geitner Info: CLB — Chemie für Labor und Betrieb, Stuttgarter Str. 18-24, Postfach 110262, 6000 Frankfurt 1

## Fragen Sie doch

Selbst bei sorgfältiger Lektüre von Handbüchern und Programmbeschreibungen bleiben beim Anwender immer wieder Fragen offen. Viel mehr Fragen ergeben sich bei Computer-Interessenten, die noch keine festen Kontakte zu Händlern, Herstellern oder Computerclubs haben. Sie können der Redaktion Ihre Fragen schreiben oder Probleme schildern (am einfachsten auf der Karte »Lesermeinung«). Wirveranlassen, daß sie von einem Fachmann beantwortet werden. Allgemein interessierende Fragen und Antworten werden veröffentlicht, die übrigen brieflich beantwortet.

## Teilstrings in Comal?

Wie kann man in Comal 0.14 Teilstrings analog zu den Basic-Funktionen MID$, LEFT$ und RIGHT$ gewinnen?

Detlef Grittner

Teilstrings werden in Comal 0.14 sehr einfach durch Angabe der linken und rechten Begrenzung erzeugt. Ein Beispiel:
DIM TEXT$ OF 20
TEXT$ := "BASIC, COMAL ODER PASCAL?"
PRINT TEXT$ (7:11)

Es wird als Antwort der Teil von Textstring vom 7. bis zum 11. Zeichen gedruckt, also »COMAL«. Mit der Vereinbarung L : = LEN(X$) werden die Basic-Stringfunktionen in Comal also folgendermaßen erzeugt:
LEFT$(X$,N) ... X$(1:N)
RIGHT$(X$,N) ... X$(L-N + 1,L)
MID$(X$,N,A) ... X$(N:N + A-1)
MID$(X$,N) ... X$(N:L)

## Zufallszahlen mit Wiederholung?

Beim Arbeiten mit der »Zufallsformel« X=INT(RND(1)\*N) +1, durch die Zufallszahlen von 1 bis N erzeugt werden, habe ich festgestellt, daß die so erzeugten »Zufallszahlen« gar keine solchen sind. Zumindestens wiederholen sie sich nach einiger Zeit in gleicher Folge. Nun meine Fragen:

Kann man überhaupt von Zufallszahlen reden, wenn sie sich nach einer gewissen Zeit in gleicher Folge wiederholen?

Kann man diese Tatsache umgehen, vielleicht durch Änderung der Formel?

Wie funktioniert eigentlich die Auswahl der Zufallszahlen?

Marco Hesselbart

Entscheidenden Einfluß auf die erzeugten Zufallszahlen hat die Wahl des oft als unwichtig betrachteten Argumentes der RND-Funktion. Generell sind drei Fälle zu unterscheiden:

Fall 1. Die Funktion wird mit einem positiven Argument aufgerufen, also beispielsweise mit RND(1). Anstelle der 1 kann eine beliebige andere Zahl oder Variable größer als Null stehen. In diesem Falle werden die Zufallszahlen nach einem bestimmten mathematischen Algorithmus, also nach einer bestimmten Rechenvorschrift, ermittelt. In diesem Falle kommen die Zufallszahlen (oder besser die Pseudo-Zufallszahlen), die nach dem Einschalten des Computers erzeugt werden, jedesmal in genau der gleichen Reihenfolge wieder vor, was sicherlich als nachteilig zu bewerten ist. Der Vorteil dabei ist jedoch die sehr gute Gleichverteilung der erzeugten Zahlen. Es werden weder Zahlen bevorzugt noch benachteiligt.

2.	Die Funktion wird mit einem negativen Wert aufgerufen (Beispiel: RND(-1) oder RND(X), falls X < 0). In diesem Fall ergibt jede einzelne negative Zahl einen speziellen Zufallswert, aber eben für jede Zahl stets wieder denselben. Probieren Sie ruhig zehnmal hintereinander RND(-1) aus, Sie erhalten stets die gleiche Zahl. Haben Sie aber einmal einen als zufällig geltenden Anfangswert X, dann können Sie mit der Folge »10 X = RND(-X): PRINTX:GOTO 10« eine beliebige Kette von zufälligen Zahlen erzeugen. Jeder verschiedene Anfangswert für X liefert bei dieser Methode eine eigene, ganz spezielle Zufallszahlenreihe.

Als Startwert kommen alle möglichen Werte in Betracht, sinnvoll ist in vielen Fällen eine Initialisierung über die Zeitvariable TI. Der Startwert ist dann von der seit dem Einschalten vergangenen Zeit abhängig und kann in den meisten Fällen wohl als ausreichend zufällig angesehen werden.

Fall 3: Die Funktion wird mit dem Argument Null aufgerufen. In diesem Falle wendet der Basic-Interpreter eine weitere Methode an: Er nimmt die Zeiten verschiedener interner Zeitgeber, verknüpft sie durch eine mathematische Formel miteinander und bildet so ebenfalls eine Zufallszahl.

Diese Zahlen sind wirklich alle paar Mikrosekunden völlig anders und liefern keine vorhersehbare Folge von Zahlen. Allerdings ist bei dieser Methode die Gleichverteilung der Zahlen um einiges schlechter, jedenfalls wenn die Zufallszahlen in einer festen Programmschleife, also in einem festgelegten Zeittakt gebildet werden. In diesem Falle werden fast unweigerlich bestimmte Zahlenwerte häufiger vorkommen als andere.

Die effektivste Methode für möglichst zufällige, aber eben auch möglichst gleichverteilte Zahlen ist die zweite. Besonders bei Initialisierung mit TI, womöglich noch durch Multiplikation oder Division mit irgendwelchen Zeropage-Inhalten verknüpft, erreicht man die besten Ergebnisse.

## Adventure-Tips gesucht

1.	Bei dem Adventure »Time Machine« komme ich nicht weiter als bis zum Haus. Alle anderen Wege führen früher oder später in den Treibsand. Wie komme ich ins Haus hinein?
2.	Wie komme ich bei »Pitfall II« an die Schatulle (es kann auch ein Ring sein)? Ich habe zwar schon einmal alle Schätze, Wölfe, Mäuse, Ratten und Mädchen aufgesammelt, aber an diese Schatulle kam ich bisher einfach nicht heran.
3.	Wie komme ich bei dem Adventure »The Fabulous Wanda...« an die richtigen Informationen; wo muß ich mein Geld investieren? Manfred Wilke

## Hardcopy mit Hindernissen?

Das Hardcopyprogramm für Text und Grafik»X-Graf« des CP 80 X-Druckers druckt bei Hardcopies immer eine Leerzeile zwischen den Datenzeilen. Dadurch kann man keine Grafiken ausdrucken. Ich bitte um einen Ratschlag.

Klemens Millonig

Stellen Sie an Ihrem Drucker den Auto-Line-Feed-Schalter auf die Aus-Stellung. Näheres darüber steht in Ihrem Drucker-Handbuch.

## Multiplan mit 80 Zeichen?

Kann man Multiplan auf einem C 64 mit 80-Zeichen-Karte laufen lassen?

Klaus Grütling

Nein, das kann man nicht. Multiplan für den C 64 ist für den 40-Zeichen-Bildschirm ausgelegt. Eine 80-Zeichenkarte, die mit Multiplan zusammen läuft, konnten wir außerdem auch nicht entdecken.

## 3.5-Basic für den C 64?

Kann man das Commodore 3.5-Basic des C 16 auch in den C 64 »einpflanzen«?

Patrick Dohmen

Direkt aus dem Basic-Interpreter des C 16 kann man die Routinen für diese Befehle nicht übernehmen, da er mit völlig anderer Hardware arbeitet (Betriebssystem und Basic arbeiten mit Bank-Switching, das heißt, eskönnentheoretischweit mehr als nur 64 KByte Speicher verwaltet werden); eine Übernahme der Befehle ist jedoch schon möglich. Allerdings wird Basic 3.5 noch von keiner einzigen Firma für den C 64 angeboten (aus Copyrightgründen).

Sie müssen sich dafür also selbst eine Befehlserweiterung schreiben.
C 16-Sprites?
Ich besitze einen C 16 mit Datasette und wollte wissen, ob ich Spritesim Textmodus simulieren kann oder ob jemand ein Programm dafür geschrieben hat. Frank Karner
Der C 16 besitzt die Shape- beziehungsweise Sprite-Fähigkeit nur im Hires-Modus, weil im TED (der Chip, der am C 16 auch für die Video-Ausgabe zuständig ist) Sprites nicht hardwaremäßig vorgesehen sind wie beim Videochip des C 64.
Falls man aus Speicherplatzgründen auf Hires-Shapes verzichten will oder muß, kann man sich immer noch, ähnlich wie beim VC 20, mit einem selbstdefinierten Zeichensatz helfen, der nur 2 KByte vom RAM abknappst und dennoch schon beachtliche Grafikmöglichkeiten bietet. Ein entsprechendes Listing dazu mit Zeicheneditor und ausführlicher Beschreibung wie’s funktioniert, finden Sie demnächst in dieser Zeitschrift.
»Magic Desk« gesucht
In der Ausgabe 7/84 befindet sich ein Bericht über das Programm »Magic Desk«. Da ich großes Interesse an dem Steckmodulhabe, bitte ich Sie um Anschrift der Firma, die das Modul vertreibt.
Dr. med. Karl Vigano
Das Programm wurde von Commodore selbst entwickelt und sollte demzufolge eigentlich über jeden Commodore-Händler zu beziehen sein. Da der Programmierer allerdings mit dem ehemaligen Commodore-Chef Jack Tramiel zu Atan gegangen ist, ist nicht sicher, ob Commodore das Modul noch vertreibt. Erkundigen Sie sich am besten bei Ihrem Commodore-Händler, ob der Ihnen das Modul noch besorgen kann.

TODO ASIDE
TODO H1!

## Leser fragen - Willi Brechtl antwortet

> Hallo liebe Leser, hier bin ich wieder, um Eure Fragen zu beantworten.

Ich werde mich hauptsächlich um Leserbriefe kümmern, die nicht in das sachliche Einerlei des Leserforums passen. Zum Beispiel Fragen, die sich aus dem einen oder anderen Grund n ur ganz subjektiv bean tworten lassen. Oft genug tauchen auch Probleme auf, die sich nicht mit einem kurzen Antwortsatz abhandeln lassen. Und wenn selbst eine längere Antwort im Rahmen des Leserforums nicht mehr ausreichen würde, dann ist das ganz klar ein Fall für Willi Brechtl.
Also: Wenn Sie als Anfänger Probleme mit Computer, Software oder Handbuch haben, dann wenden Sie sich in Zukunft doch einfach vertrauensvoll direkt an mich.

## Unsichtbar Nachladen?

Wie schaffe ich es, in Basic ein Nachlade-Programm zu konzipieren, dasbei entsprechender Menüwahl ein Teilprogramm nachlädt — und zwar ohne Ausgabe der Meldungen »Seraching for« und »Loading«?

Ipek Cüneyt

Beim Nachladen von Programmen müssen Sie folgendes speziell beachten: Der Befehl »LOAD« in einem Programm bewirkt nicht nur, wie im Direktmodus, das Laden eines Programms, sondern gleichzeitig einen Autostart. Falls das nachgeladene Programm größer ist als das ursprüngliche Programm, dann werden alle Variablen gelöscht. Sie sollten daher dafür sorgen, daß Ihr Hauptprogramm immer größer ist als das nachzuladende. Auch sollten Sie beachten, daß Strings in der Regel nicht mit übernommen werden. Wollen Sie Stringvariable dennoch ins nächste Programm übernehmen, dann müssen Sie beispielsweise im ersten Programm schreiben: A$ = ”HALLO” + ””

Dies ist deshalb nötig, weil nur Stringvariable, die mit irgendeiner Stringoperation ( + , LEFT$, MID$, RIGHT$) verknüpft wurden, ihren Wert auch im nachgeladenen Programm behalten. Um die manchmal unerwünschtes Systemmeldung wie »Searching for« am Bildschirm nicht sichtbar werden zu lassen, gibt es eine sehr einfache Methode: Setzen Sie vor den LOAD-Befehl im Programm einfach die Schreibfarbe auf die Hintergrundfarbe. Sie verhindern damit zwar nicht die Ausgabe dieser Meldung, sie erscheinen aber nicht sichtbar auf dem Bildschirm.

## Atari-Module auf dem C 64?

Wie bringt man Atari Telespiel-Module (Atari VCS 2600) auf dem C 64 zum Laufen?

Robert Wölfert

Atari-Module bringt man auf dem C 64 überhaupt nicht zum Laufen, da die VCS 2600-Module und der C 64 über eine völlig unterschiedliche Hardware verfügen. Außerdem ist die VCS 2600-Konsole inzwischen schon ab 60 Mark im Ausverkauf erhältlich, so daß sich irgendwelche eventuell möglichen aufwendigen Hardware-Basteleien auch beim besten Willen nicht lohnen.

## Diskette versehentlich formatiert?

Ich habe versehentlich eine Diskette mit vielen Programmen darauf formatiert. Wie kann ich diese Programme wieder zurückholen?

Hinnerk Behn

Wenn Sie die Diskette ohne Angabe einer ID formatiert haben (die Formatierung kann dann nur einige Sekundenbruchteile gedauert haben), dann ist nur das Directory gelöscht. Mit einem Diskettenmonitor (und unserem Floppy-Kurs) könnten Sie bei etwas Erfahrung in der Lage sein, das Inhaltsverzeichnis wieder zu restaurieren. Da in der Regel aber mit ID formatiert wird, sind Ihre Programme wohl verloren. Das 1541-Laufwerk beschreibt nämlich beim normalen Formatieren alle Sektoren der Diskette mit Null Bytes. Die ursprünglich darin enthaltene Information geht dabei genauso verloren wie beim Überspielen einer normalen Musik-Kassette.

## Timing-Probleme?

Wenn ich eine selbstprogrammierte Melodie ständig wiederholen möchte, indem ich hinter die DATA-Zeilen einen RESTORE-Befehl schreibe und mit GOTO wieder an den Anfang springe, dann hat der Computer einige Timing-Schwierigkeiten, besonders bei schnellen Melodien.

Frank Herbert

Abhilfe: Lesen Sie die Musikdaten zu Anfang in eine Feldvariable ein (Dimensionierung nicht vergessen). Der Zugriff auf Feldelemente ist schneller als auf DATAs. Außerdem sollten Sie anstelle des GOTO-Befehls den entsprechenden Programmabschnitt durch eien FOR...NEXT-Schleife wiederholen lassen, auch das bringt einen Geschwindigkeitsvorteil. Und natürlich sollten Sie alle Zahlenwerte schon in der Form »Low-Byte, High-Byte« im Programm stehen haben und diese Berechnungen nicht dem Computer während der Programmausführung aufbürden.

## Zeichensatz verschwunden?

Aus welchem Speicherblock kann man die Daten eines geänderten Zeichensatzes PEEKen, wenn der Zeichensatz nach $E000 und das Video-RAMnach $CC00 verlegt worden ist? Ich habe den ganzen Speicher durchsucht, aber nichts gefunden.

Jens Schlingmann

Ab Adresse $E000 sind die 8 KByte ROM des Betriebssystems dem RAM-Bereich überlagert. Während man mit POKE auch in diesem Bereich ins »unter« dem ROM liegende RAM schreiben kann, ergibt jedes PEEKen hier nur den Inhalt des Betriebssystem-ROMs. Abhilfe ist hier nur über Maschinensprache möglich, da zum Auslesen dieses Speicherbereichs das Betriebssystem und der Basic-Interpreter abgeschaltet werden muß.

## MSE-Probleme?

Es gelingt mir nicht, mit dem MSE eingegebene Programme nach dem Abspeichern und Wiederladen laufen zu lassen. Es ist überha upt kein Programm mehr vorhanden: Nach LIST erscheint sofort »Ready«, ebenso nach RUN.

Stafan Gass

Der MSE dient zur Eingabe von Programmen, die in Maschinensprache geschrieben sind. Maschinenprogramme lassen sich von Basic aus nicht listen und müssen mit dem SYS-Befehl statt mit RUN gestartet werden. Allerdings muß man dazu die Startadresse kennen. Diese Startadresse müssen Sie der Anleitung zum Programm entnehmen. Lesen Sie sich bitte zu jedem Maschinenprogramm die Anleitung sehr genau durch.

## Druckeranschluß ohne Software?

Ich besitze seit kurzer Zeit einen VC 20 und den Drucker GP 80A von Seikosha. Wie kann ich diesen Drucker an den VC 20 anschließen, ohne daß ich ein Programm benötige?

Wilhelm Halla

Den GP80 gibt es in einer speziellen Version zum direkten Anschluß an den VC 20 als GP 80 VC von Seikosha oder als VC 1515 im Commodore-Vertrieb. Bei Ihrer Version (A) handelt es sich um das Standardmodell mit internationalem (ASCII-) Zeichensatz und Centronics-Schnittstelle. Sie benötigen zum Anschluß entweder ein VC-Interface (seriell auf Centronics) oder einfach ein Centronics-Kabel zum Anschluß an den User-Port. Ein VC-Interface ist allerdings nicht ganz preiswert (etwa von 100 Mark aufwärts), während ein Centronics-Kabel nur ein paar Mark kostet, dafür aber ohne zusätzliche Software nicht zu betreiben ist. Ihr Seikosha-Fachhändler kann Ihnen nähere Auskünfte geben.

## Steckmodul abschalten?

Ich besitze einen C 64 und seit einiger Zeit ein Steckmodul für die Spracherweiterung Simons Basic. Leiderlaufen einige Programme nicht mit dieser Erweiterung. Durch ständigen Wechsel des Moduls sind bereits Leiterbahnen auf der C 64-Platine beschädigt worden.

Ist es möglich, durch Einbau eines Schalters in die Leiterbahn des Pin 2 am Expansion Port (+5V) das Modul abzuschalten ohne eine Beschädigung herbeizuführen?

Dieter Kothe

Eine entsprechende Bastelanleitung erscheint demnächst unter der Rubrik Tips & Tricks.

## Wollen Sie antworten?

Wii veröffentlichen auf dieser Seite auch Fragen, die sich nicht ohne weiteres anhand eines guten Archivs oder aufgrund der Sachkunde eines Herstellers beziehungsweise Programmierers beantworten lassen. Das ist vor allem der Fall, wenn es um bestimmte Erfahrungen geht oder um die Suche nach speziellen Programmen. Wenn Sie eine Antwort auf eine hier veröffentlichte Frage wissen — oder eine andere, bessere Antwort als die hier gelesene, dann schreiben Sie uns. Antworten publizieren wir in einer der nächsten Ausgaben. Bei Bedarf stellen wir auch den Kontakt zwischen Lesern her.

## Merge-Problem

Wie kann ich zwei Programme im Speicher zu einem einzigen zusammenfügen?

Ausgabe 4/85

Martin Hossdorf

Auch ohne Basic-Erweiterung kann man beim C 64/VC 20 Programme relativ einfach »mergen«:

Erstes Programm laden und danach »POKE 43, PEEK(45)-2 : POKE 44, PEEK(46)« eingeben. Dies schützt den ersten Programmteil. Jetzt kann man ein zweites Programm laden, nochmals die gleichen POKE-Befehle geben, ein drittes Programm laden und so fort. Nach »POKE 43,1 : POKE 44,8« stehen alle Programme zu einem einzigen zusammengefaßt im Speicher. Man sollte allerdings darauf achten, daß die nachgeladenen Programme höhere Zeilennummern haben, da es sonst zu Problemen kommen kann.	Michael Aßfahl

## Schreibmaschine am Computer lernen

Wo gibt es ein Programm, das Schreibmaschinenkenn tnisse am Bildschirm vermittelt?

Ausgabe 4/85

Christian van der Linde

Ich habe einen Schreibmaschinenkurs für den Commodore 64 entwickelt. Das Programm wurde auf der Hannover-Messe 1984 von Bundesforschungsminister Dr. Riesenhuber als bestes Lernprogramm mit der »Goldenen Diskette« ausgezeichnet.

Der Schreibmaschinenkurs ist in deutscher Sprache geschrieben und führt in 27 Lektionen auf unterhaltsame Weise in das Zehn-Finger-System ein. Es verwendet den normalen C 64-Zeichensatz. Einige grafische Einlagen lockern den Lernprozeß auf und sorgen für notwendige (Entspannungs-)Pausen.

Das Programm ist in der Reihe Chip-Soft des Vogel-Verlags auf Diskette und Kassette erschienen.	Nils Rode

Info: Chip-Soft, Vogel-Verlag, Postfach 6740, 8700 Würzburg 1

## Nochmals Simons Basic und Turbo Tape

Wer kennt eine Möglichkeit, um gleichzeitig Simons Basic und Turbo Tape benutzen zu können?

Ausgabe 8/84, 12/84, 2/85

Rolf Lehr

Dieses Problem ist eigentlich schon seit Mitte 1984 gelöst. Das zu Turbo Tape kompatible Fast Tape von H. Reichert gestattet auch bei Simons Basic eine schnelle Kassette. Interessenten mögen sich bitte bei mir melden.

Jürgen Atrott

In der amerikanischen Computerzeitschrift »Compute!« wurde im Januar ein Turbo Tape zum Abtippen veröffentlicht, das man ans jeweilige Ende des Basic-RAM setzen kann. Dieses Turbo Tape ist kompatibel mit Simons Basic und anderen Erweiterungen. Ich bin gerne bereit, Interessenten gegen Einsendung einer Leerkassette und eines frankierten Rückumschlages eine Kopie zu senden.

Marcus Maier

## Fortran Compiler für C 64

Gibt es für den C 64 einen Fortran-Compiler ?

Ausgabe 3/85

Bernhard Pöttinger

Commodore selbst bietet in Amerika einen Fortran Compiler für den C 64 mit CP/M-Modul an. Dieser Compiler (»Nevada Fortran«) ist jedoch leider in Europa nicht erhältlich. Es handelt sich dabei um eine bemerkenswert starke Fortran IV-Version mit ausgezeichneter Dokumentation. Tom V. Segalstad Info: Commodore Business Machines, Inc., 1200 Wilson Drive, West Chester, PA 19380

## Mikrofon am C 64

Wie kann ich ein Mikrofon an den C 64 anschließen, und wie läßt sich das Tonsignal dann beeinflussen?

Ausgabe 3/85

Roland Feichtinger

Der Anschluß eines Mikrofons an den C 64 ist über den Audio-In-Pin an der Audio-Video-Buchse möglich. Das Signal muß allerdings vorverstärkt werden. Dies geht am besten über die heimische Stereo-Anlage. Man schließt also das Mikrofon an den entsprechenden Eingang der Stereo-Anlage an und verbindet den Kopfhörer-Ausgang mit Audio-In am C 64. Natürlich darf auch die Masseleitung nicht vergessen werden (GND). Die Pinbelegung von C 64 und Stereoanlage entnimmt man dem C 64-Handbuch beziehungsweise dem Schaltplan der Stereoanlage.

Achtung: Bei nicht sachgemäßer Ausführung der Verbindung können sowohl der C 64 als auch die Stereoanlage beschädigt werden. Elektronik-Laien sollten daher vom Nachbau absehen. Und noch eine Warnung: Hüten Sie sich davor, den Verstärker zu weit aufzudrehen. Durch zu hohen Eingangspegel kann der SID im C 64 zerstört werden.

Der Ton vom Mikrofon kann durch POKEn der Lautstärke hörbar gemacht werden. Weiterhin stehen alle Filtermöglichkeiten des SID zur Verfügung.

Holger Riedelbauch

## Schreibmaschine am C 64

Wie kann ich eine Olivetti Praxis 30 an den C 64 anschließen? Ausgabe 8/84 und 3/85

Josef Hauk

Leider enthält die in Ausgabe 3/85 gegebene Übersicht über die für die Brother CE-Reihe (50, 51, 60, 70)erhältlichenInterfaces eine interessante Variante nicht, und zwar das Modul Robotext der Schweizer Firma Märki & Lenz. Robotext ist ein komplettes Textsystem (Textverarbeitung, Adressenverwaltung, Interface) und wird in der BRD durch C.M. Hacker Consult vertrieben.

Dr.-Ing. Winfried Staib

Der Anschluß der Brother CE-50 bis CE-70 sowie der Olivetti P-30 bis P-40.ist mit dem Tri-Interface von Märki und Lenz direkt und ohne Probleme möglich. Außerdem ist ein EPROM erhältlich, mit dem das Interface voll zu Vizawrite kompatibel wird.	Alfred Theiler

Info: Märki, Lenz & Co., Bernstr. 15, CH-3114 Wichtrach
C.M. Hacker Consult, Paulinenstraße 4, 7107 Neckarsulm

## Software für Lichtgriffel gesucht

Wer hat ein Lichtgriffel-Programm für den VC 20, mit dem man auch in hochauflösender Grafik zeichnen kann?

Andreas Hattemer

## Elektrische Schreibmaschine am C 64

Ich suche Bausätze, Anleitungen, Soft- und Hardware zum Anschluß einer alten elektrischen Triumph Schreibmaschine an den C 64.

Hellmut Korndörfer

## Q-Bert für Grundversion

Das in der Ausgabe 2/85 veröffentlichte Spiel Q-Bert für den VC 20 gefällt mir ausgezeichnet. Leider wurde vergessen zu erwähnen, daß es nur mit der 3-KByte-Erweiterung läuft. Es ist mir nun gelungen, das Programm so weit zu komprimieren, daß es auch in die Grundversion paßt. Gegen Erstattung der Unkosten für Porto und Datenträger sende ich das Programm gerne jedem Interessierten zu.

Fred Behringer

## Hier gibt’s Comal-Software

Der Comal-User-Club C. Canisius bietet seit Anfang Mai in Comal geschriebene »Public Domain« Software für den C 64 auf Diskette an. Jede Diskette ist doppelseitig bespielt, kostet 25 Mark und enthält in der Regel 20 bis 40 Programme.

Christiane Canisius Info: Comal-User-Club C Canisius, Freiheitsstr. 30, 4000 Düsseldorf 12

# Erster ausführlidier Test PC 128 (Teil 1) \[16-24,26-28]

> Der PC 128 war bei Commodore noch im Vorbereitungsstadium für den deutschen Markt, da hat die 64'er-Redaktion sich eines der ersten Geräte über die Osterfeiertage besorgt, um den PC 128 für Sie auf Herz und Nieren zu testen. In diesem Teil beschreiben wir ausführlich die Hardware, das Basic 7.0 und die Kompatibilität zum C 64.

Nicht nur die 6510-Programmmierer kommen mit dem PC 128 auf ihre Kosten. Der PC 128 hat nämlich zusätzlich einen Z80-Prozessor eingebaut, der einen wesentlich komfortableren Befehlssatz als die 65xx-Familie besitzt, zu der auch der 8502-Prozessor im PC 128 gerechnet werden muß. Der Z80 wird im PC 128 mit 4 MHz getaktet. Dadurch, und mit dem neuen 1571-Laufwerk, das auch CP/M-Disketten lesen kann, werden endlich CP/M-Programme wie Wordstar auf einem preiswerten Computer verwendbar.

Der PC 128 unterscheidet sich vom C 64 in folgenden Punkten:

### 1.	Geschwindigkeit

Der 8502-Prozessor des PC 128 kann mit zwei wählbaren Frequenzen getaktet werden; mit 1 MHz oder mit 2 MHz. Zur Umschaltung braucht in einem Basic-Programm nur der SLOW-(1 MHz) oder der FAST-(2 MHz-)Befehl gegeben werden.

## Slow und Fast

Im SLOW-Modus werden Programme etwas langsamer als beim C 64 (auch 1 MHz) verarbeitet. Das kommt durch die komplizierte Verwaltung des 128 KByte-Speichers des PC 128 zustande. Diese Verlangsamung ist aber kein Grund, den PC 128 als lahmen Computer zu verdammen, hat man doch sehr leistungsfähige Basic-Befehle zur Verfügung. Und gerade diese können den PC 128 schneller als den C 64 machen. Denn man muß nicht mehr mit Unmengen von POKE-, PEEK- und SYS-Befehlen arbeiten, die in einem Programm viel Zeit »fressen« können. Der Prozessor braucht nun mal wesentlich mehr Taktzyklen, wenn beispielsweise der Grafik-Modus mit POKEs, anstelle mit einem einzigen Maschinenprogramm eingeschaltet wird. Denn jeder einzelne POKE-Befehl muß erst vom Basic-Interpreter erkannt und ausgewertet werden, bevor an eine Ausführung zu denken ist.

Der FAST-Modus läßt jedes Programm um das Doppelte schneller werden. Mit einem Haken allerdings: Es ist ein RGB- oder Schwarz-Weiß-Monitor erforderlich.

Während für den SLOW-Modus der Video-Interface-Chip (VIC) aus dem C 64 noch ausreicht, muß im FAST-Modus ein anderer, schnellerer Baustein verwendet werden, denn der VIC aus dem C 64 »schafft« maximal 1 MHz Taktfrequenz. Der neue Video-Controller hat die Bezeichnung 8563. Er übernimmt im FAST- und 80-Zeichen-Modus die Bilderzeugung. Im Unterschied zum VIC (er liefert ein Composite-Videosignal) stellt der 8563 leider nur ein genormtes RGB-(IBM-kompatibel) und Luminanz-(Helligkeits-)Signal bereit.

Die RGB-Norm sieht für jede Grundfarbe ein eigenes Intensitäts-(Helligkeits-)Signal vor. Dadurch wird eine wesentlich größere Bildauflösung (Punktschärfe) als bei der Composite-Norm möglich. Die Composite-Norm kennt nur zwei Signale: ein Farb- und ein Luminanzsignal.

Für den Benutzer bedeuten die zwei verwendeten Normen, daß er zwei Monitore braucht. Einen Composite-Monitor für den SLOW- und C 64-Modus (ein Fernseher reicht notfalls auch) und einen RGB- oder Schwarzweiß-Monitor (mit Luminanzeingang) für den FAST- und 80-Zeichen-Modus.

Eine einfachere Lösung bietet der neue für den PC 128 lieferbare Commodore-Monitor 1902, der mit einem Schalter von RGB auf Composite umgeschaltet werden kann.

### 40/80-Zeichendarstellung und Grafik

Wie bei Personal Computern schon immer üblich, kann der PC 128 auch achtzig Zeichen darstellen. Allerdings nur auf einem RGB-Monitor; unabhängig vom SLOW- oder FAST-Modus.

Ein großer Nachteil ist allerdings der fehlende Grafik-Modus bei FAST oder 80-Zeichen-Darstellung. Der dazu benötigte Video-Controller kann nämlich nur 80 Zeichen (und keine Hires-Grafik!) in einer Auflösung von 640 x 200 Punkten in 16 Farben darstellen und sonst nichts. Ein Zeichen besteht dabei aus 8 x 8 Punkten, Zeilen- und Zeichenabstand mitgerechnet. Hochauflösende Grafik, Sprites (bewegbare Objekte, die selbst definiert werden können) und zweifarbige Buchstaben sind in dieser Auflösung (620 x 200 Punkte) nicht möglich. Grafikbefehle wie DRAW, CIRCLE und BOX sind im 80-Zeichen-Modus ebenfalls nicht funktionsfähig, da eben der Video-Controller keinen eigenen Grafikprozessor wie der Video-Interface-Chip hat. Ein Grafik-Modus existiert bei 2 MHz also nicht.

Im 40-Zeichen- und SLOW-Modus übernimmt der aus dem C 64 bekannte Video-Interface-Chip (VIC) das Regiment. Für den PC 128 wurde er überarbeitet und heißt 8564. Das bedeutet, daß die grafischen Fähigkeiten des 40-Zeichen- und SLOW-Modus denen des C 64 entsprechen.

Wir haben teilweise mit zwei gleichzeitig angeschlossenen Monitoren gearbeitet, einem RGB-Farbmonitor und einem Commodore 1701. Es war schon ungewöhnlich, am 80-Zeichen-RGB-Bildschirm Grafik-Befehle zu programmieren und zu starten und auf dem 1701 (Composite-Monitor) den Grafikaufbau zu beobachten. Schaltet man nämlich im 80-Zeichen-Modus auf Grafik-Modus, wird der für die Darstellung von 80 Zeichen benötigte 8563-Video-Controller abgeschaltet und dafür der 8564-VIC mit seinem Grafikprozessor aktiviert. Alle Bildausgaben gehen dann über den Composite-Ausgang. Da der 8563-Video-Controller dann zwar nicht mehr vom Prozessor angesprochen wird, das zuletzt gesendete RGB-Bild aber nicht gelöscht wird, bleibt auf dem RGB-Monitor das 80-Zeichen-Textbild weiterhin zu sehen.

## Zwei in Einem

Wie anfangs erwähnt: Der PC 128 besteht aus zwei oder eigentlich aus drei Computern. Einem C 64, einem PC 128 und einem CP/M-Computer. Für diese drei Betriebsarten stehen zwei Prozessoren zur Verfügung: ein 8502 und ein Z80. Der 8502 ist vollständig kompatibel zu dem 6510 im C 64, kann aber mit 2 MHz getaktet werden. Der Zilog Z80 bedarf eigentlich keiner Erklärung. Er wird seit vielen Jahren in vielen großen und kleinen Computern eingesetzt, sowohl im ZX-81 als auch in großen CP/M-Maschinen.

Schon beim Einschalten des PC 128 macht sich der Z80 bemerkbar. Er versucht das CP/M-Betriebssystem von Diskette zu booten (zu laden und zu starten). Ohne irdendeinen Befehl beginnt dabei das angeschlossene Diskettenlaufwerk zu laufen und versucht das Programm zu laden. Wird kein entsprechendes Programm gefunden, aktiviert der Z80 den 8502-Prozessor und der PC 128-Modus wird eingeschaltet.

## Geteilte Datenschienen

Beide Prozessoren, Z80 und 8502, sind in der Lage miteinander zu kommunizieren, was auch im Betriebssystem vorgesehen ist. Reicht nämlich für bestimmte I/O-Operationen der BIOS-(Betriebssystem-) Befehlssatz der CP/M nicht aus, übernimmt der 8502 diese Aufgaben. Wie weit man sich das zunutze machen kann, bleibt abzuwarten. Wir werden genaueres über den Z80 und das CP/M-Betriebssystem in der nächsten Ausgabe berichten.

Z80 und 8502 teilen sich im PC 128 die Adreß- und Datenleitungen. Da der Z80 schneller arbeitet als die übrigen Bausteine, paßt eine Interface-Schaltung die Geschwindigkeit des Z80 an das System an, was natürlich die Arbeitsgeschwindigkeit des Z80 verringert. Diese Interface-Schaltung sorgt dafür, daß der Z80 bei Buszugriffen nur mit 2 MHz anstelle der angegeben 4 MHz getaktet wird. Das bedeutet, daß CP/M-Programme auf dem PC 128 nicht ganz so schnell laufen, wie auf einem 4 MHz-CP/M-Computer.

### Schneller 8502

Der auffälligste Unterschied des 8502 zum 6510 im C 64 liegt in seiner Geschwindigkeit. Der 6510 »verträgt« nämlich nur Taktfrequenzen bis 1 MHz, der 8502 aber bis zu 2 MHz. Der 8502 kann also doppelt so schnell arbeiten. Jedes Programm, sei es Basic oder Maschinensprache, kann demnach auf dem 8502 doppelt so schnell gefahren werden wie auf dem 6510.

### PC 128 — der Grafikbeschleuniger?

Diese Frage ist nur mit »Jein« zu beantworten. Einerseits schaltet, wie erwähnt, der VIC im Fast-Modus einfach ab. Der Bildschirm sieht dann genauso aus, wie beim Laden von Datasette. Andererseits werden alle Grafikbefehle im Speicher ausgeführt, so daß nach Zurückschalten aufSLOW die fertige Grafik sichtbar wird. Das gleiche gilt generell, wenn Sie nur einen Fernseher oder 1701/1702-Composite-Monitor besitzen und trotzdem mit 2 MHz Taktfrequenz arbeiten möchten. Sie müssen vor jeder Bildschirmausgabe mit dem SLOW-Befehl den l-MHz-Modus einschalten, denn der VIC ist ja bei 2 MHz abgeschaltet. Erst nach der Umschaltung kann der VIC dann wieder Ihren Fernseher oder 1701/1702 ansteuern. Nach der Ausgabe können Sie dann mit FAST wieder den 2-MHz-Takt aktivieren. Das Programm läuft dann wieder mit doppelter Geschwindigkeit — allerdings mit abgeschalteten Composite-Bildschirm, da bei 2 MHz wieder der »simple« RGB-Video-Controller das Bild erzeugt.

Bild 1 zeigt die Speicherorganisationen der möglichen Betriebsarten. Die Speicheraufteilung im C 64-Modus ist mit der Memory Map des C 64 vollkommen identisch: im Bereich von$A000 bis $BFFF liegt das Basic-ROM und von $E000 bis $FFFF das Kernal-ROM mit dem

## Die Speicherlandschaft

40-Zeichen-Editor. $D000 bis $DFFF belegen die I/O-Bausteine (CIA und VIA) und das Character-ROM. Beide ROM-Bereiche, Basic und Betriebssystem für den C 64-Modus, sind beim PC 128 in einem 16-KByte-ROM-Baustein abgelegt, im Gegensatz zum C 64, wo Basic und Betriebssystem in je einem 8-KByte-ROM untergebracht sind.

Im PC 128-Modus wird die Aufteilung komplizierter; ist doch ein wesentlich umfangreichers Basic (Version 7.0) und ein zusätzlicher 80-Zeichen-Editor unterzubringen.

Das Basic-ROM gliedert sich in zwei Teile ä 16-KByte: Basic Teil 1 und Teil 2 in der Memory Map (Bild 1 und 2). Der erste Teil liegt zwischen den Adressen $4000 und $7FFF, der zweite geht von $8000 bis $BFFF. Insgesamt sind das 32 KByte Basic-ROM. Zum Vergleich: die Basic-Version 2.0 des C 64 ist nur 8 KByte lang.

Das Betriebssystem (Kernal) des PC 128 befindet sich zwischen den Adressen $E000 und $FFFF, wie beim C 64. Das Betriebssystem enthält ein Monitorprogramm. Die Routinen für den 40/80-Zeicheneditor liegen von $C000 bis $CFFF.

Für Basic-Programme hat der PC 128 etwa 81,5 KByte mehr Platz als der C 64. Möglich wird das durch Bank-Switching zwischen zwei 64 KByte großen RAM-Bänken.

### Was ist Bank-Switching?

Es ist nicht möglich, mit einem Prozessor, der 16 Adreßleitungen hat, wie alle 65xx und der 8502, mehr als 216 = 65536 Speicherzellen (64 KByte) direkt zu adressieren. Will man mehr Speicher als 64 KByte »haben«, gibt es nur eine Möglichkeit, will man keinen leistungsfähigeren Prozessor verwenden: Das Bank-Switching.

Bank-Switching heißt soviel wie Speicherblock-Umschaltung.

Die 128 KByte Speicher des PC 128 werden dazu in zwei Teile mit je 64 KByte gespalten. Mit einem Trick wird dafür gesorgt, daß der Prozessor abwechselnd die eine oder die andere 64-KByte-Bank »sieht«. Der Trick heißt Memory Managment Unit (MMU). Wie der Name schon sagt, managt diese Schaltung die Speicherkonfiguration. Die MMU bestimmt, auf welche RAM-Bank der Prozessor »sehen« darf, also wo Schreib-/Lesezugriffe im Speicher erfolgen sollen. Aber nicht nur das. Die MMU gibt auch die ROM-Konfiguration an, sie sagt also dem Prozessor, aus welchem ROM er seine Befehle zu holen hat. Entweder aus dem Kernal oder aus einem EPROM einer Erweiterungskarte.

Die MMU ist kein toter Baustein, an dem nichts verändert werden kann. Im Gegenteil. Bei unserem Test kamen wir auf die interessantesten Ideen, die man mit diesem Baustein realisieren könnte, angefangen von einem Interruptgesteuerten Kopierschutz, der sich auf verschiedene Bänke verteilt, bis zu mehreren Programmen, die auf verschiedenen Bänken »sitzen«.

## 122365 Basic Bytes Free

Im PC 128 wird der Basic-Speicher so verwaltet, daß die RAM-Bank 0 (64 KByte) für Basic-Programme und Bank 1 (64 KByte) für Basic-Variable reserviert ist. Für den Basic-Programmierer bedeutet das, daß er je etwa 60 KByte Speicher für das Programm und die Variablen zur Verfügung hat. Es nicht möglich, größere Programme auf Kosten des Variablenspeichers anzulegen. Die vollen 64 KByte pro Bank können auch nicht vollständig genutzt werden, da ein Bereich in beiden Bänken für die Zeropage, den Stack und den Bildschirmspeicher reserviert ist. Der Bereich geht bis $0400. Während ein Basic-Programm läuft, regelt die Memory Managment Unit, auf welche Bank zugegriffen werden soll. Die Informationen darüber, ob gerade eine Variable oder Befehle zu verarbeiten sind, erhält die MMU vom Basic-Interpreter.

Aber nochmal zurück zu dem Bereich von $0000 bis $0400 der für das System reserviert ist. Die Besonderheit daran ist, daß in diesem Bereich nur Bank 0 existiert. Bank 1 kann dort nicht angesprochen werden. Auf diese Weise ist sichergestellt, daß der Prozessor immer auf dieselbe Bank zugreift und nicht deshalb abstürzt, weil in Bank 1 vielleicht ein anderer Stack steht als in Bank 0.

Zusätzlich kann man sich selbst Bereiche von 1 bis 16 KByte in beiden Bänken reservieren, die am Speicheranfang oder Speicherende liegen können (Bild 2).

Man kann diesen Bereich beispielsweise in eigenen Maschinenroutinen als Stack oder Speicher verwenden, wenn zwischen den Bänken umgeschaltet werden muß und die gleichen Daten zur Verfügung stehen sollen.

Zur Bereichswahl hat die MMU das RAM-Configuration-Register (RCR, Bild 3). Bit 0 und 1 des RCR bestimmen die Größe des gemeinsamen Speicherbereichs von Bank 0 und Bank 1: 1, 4, 8, oder 16 KByte. Sind beide Bits »0«, beträgt der gemeinsame Speicher 1 KByte, oder wenn beide »1« sind, 16 KByte.

Bit 2 und 3 des RCR bestimmen die Bereichslage. Ist Bit 2 gesetzt, liegt der gemeinsame Bereich an der Speicheruntergrenze, ist Bit 3 gesetzt liegt er an der Speicherobergrenze. Wenn beide Bits »1«, gesetzt sind, wird sowohl am Anfang und am Ende des Speichers der angegebene Bereich reserviert. Der Bereich kann also entsprechend zum jeweiligen Programm angelegt werden. Wie schon erwähnt, liegt der gemeinsame Speicher immer in Bank 0. Aber die MMU weiß durch das RCR, bei welcher Adresse die Bank gewechselt werden soll, ohne daß der Wechsel explizit im Programm angegeben werden muß.

## Der Organisator — Die Memory Managment Unit

Die MMU regelt den Aufbau des Speichers. Sie bestimmt, welche RAM-Bank aktiv ist oder beim nächsten Zyklus aktiviert werden soll. Die interessantesten Register der MMU sind das schon erwähnte RAM Configuration Register (RCR, Bild 3) und das Configuration Register (CR). Das CR kontrolliert die ROM-, die RAM- und die I/O-Konfiguration des PC 128. Das Register hat die Adresse $D500 im I/O- und $FF00 im Kernal-Bereich. Das CR bei $D500 wird nur bei I/O-Zugriffen benötigt. Die MMU stellt sich dann das Register selbst ein. Findet kein I/O-Zugriff statt, ist das CR, mit den gesamten I/O-Routinen, in der Memory Map nicht vorhanden. Im Gegensatz zum CR bei $FF00, das ständig in der Memory Map präsent ist.

Bit 0 des Configuration Register (CR) regelt im PC 128-Modus den Prozessorzugriff; entweder auf den I/O-Bereich ($D000-$DFFF, High) oder auf das ROM/RAM (Low).

Bit 2 und 3 bestimmen im PC 128-Modus den Speichertyp, zwischen den Adressen $8000 und $BFFF. Sind beide Bits »0«, wird auf Basic-High in der Memory Map, also dem zweiten Basic-ROM-Teil, zugegriffen. Ist Bit 2 »1«, wird ein internes ROM eingeblendet. In unserem Testgerät war noch ein Stecksockel auf der Platine für dieses ROM frei. Es ist jedoch geplant, dort einen deutschen Zeichensatz unterzubringen. Auch die Tastatur soll dann eine DIN-Belegung besitzen.

Interessant wird es erst richtig, wenn nur Bit 3 »1« ist, dann wird nämlich im Bereich von $8000 bis $BFFF ein Steckmodul eingeblendet. Sind beide Bits »1« sieht der PC 128 in diesem Bereich nur RAM.

Die nächsten beiden Bits, 4 und 5, haben die gleiche Funktion wie Bit 2 und 3, nur bestimmen sie den Speicheraufbau im Bereich von $C000 bis $FFFF. Zu bemerken ist, daß der Speicherbereich von $D000 bis $DFFF ein »ROM-Loch« darstellt. Man kann die Bits 4 und 5 setzen wie man will, der Computer entscheidet, ob I/O-Bereich oder das Zeichensatz-ROM in diesem Bereich eingeblendet wird.

Es ist also bei einem Steckmodul zu berücksichtigen, daß der Bereich von $D000 bis $DFFF tabu ist. Es können bis zu 32 KByte ROM eingeblendet werden, doppelt soviele wie beim C 64.

Bit 6 und 7 schließlich selektieren die RAM-Bank. Für die 128-KByte-Version des PC 128 ist nur Bit 6 wichtig. Ist es »0«, ist Bank 0 ausgewählt, ist es »1«, Bank 1.

## Verbindung nach draußen

Wie der C 64 hat der PC 128 einen Expansion-Port, der von beiden Betriebsmodi angesteuert wird (Bild 4).

Im C 64-Modus entspricht die Pin-Belegung genau der des C 64.

### Speicherzugriff erlaubt

Im Gegensatz zum C 64 erlaubt der Expansion-Port des PC 128 einen direkten Speicherzugriff(DMA, Direct Memory Access). Direkter Speicherzugriff bedeutet, daß ohne Umwege über den Prozessor in den Speicher des PC 128 geschrieben oder der Speicher ausgelesen werden kann. Das wichtigste, um einen DMA realisieren zu können, ist, daß der Prozessor während des Zugriffs abgeschaltet bleibt. Beim PC 128 macht das der 8564-VIC. Er steuert den Daten- und Adreßbus so, daß Prozessor und DMA sich nicht ins Gehege kommen, was beim C 64 nicht immer sichergestellt ist. Bei einem gleichzeitigen Bus-Zugriff von Prozessor und externen Gerät erweist sich der Prozessor meist als der Schwächere, was zu ernsthaften Problemen führen kann.

Daß ein direkter Speicherzugriff ohne weiters machbar ist, eröffnet dem PC 128 gegenüber dem C 64 zusätzliche Einsatzgebiete in der Meßwerterfassung. Ein Meßgerät kann dadurch beispielsweise Meßwerte so schnell direkt in den Speicher schreiben, daß eine Echtzeiterfassung eines Meßvorganges möglich ist. Eine andere Möglichkeit wäre der Anschluß eines Festplatten-Laufwerkes. Die Daten könnten dann viel schneller in den RAM-Bereich geladen oder aus dem Arbeitsspeicher geholt werden, als wenn der Prozessor vorher jedes Bit ein paar mal »umdreht«.

### Der serielle Bus

Der serielle Bus und der Kassetten-Port des PC 128 sind von den Anschlüssen her identisch mit denen des C 64. Die Bedienung des seriellen Bus wurde überarbeitet, so daß der PC 128 zusammen mit dem neuen Commodore Laufwerk 1571 wesentlich schneller speichern und laden kann als der C 64 (Bild 5).

TODO ASIDE

In der nächsten Ausgabe berichten wir über das neue Floppy-Disk-Laufwerk 1571 und den CP/M-Modus. Ferner erfahren Sie, was die deutsche Version des C 128 mehr bietet.

TODO END ASIDE

## GO 64-Wie kompatibel ist der PC 128?

Kompatibilität war schon immer ein Reizwort für Commodore. Deswegen war Skepsis angesagt, ob der PC 128 wirklich kompatibel zum C 64 ist.

Also haben wir eine Zahl von Programmen ausprobiert, die direkt oder indirekt über einen Kopierschutz im Betriebssystem herumpfuschen oder sonstige Gemeinheiten anstellen, die jeden Nicht-C 64 sofort zum Aussteigen bewegen würden. Erster Testkandidat war Hypra-Load. Einige Probeläufe zeigten, daß sich hier in Verbindung mit der 1541 überhaupt keine Probleme ergeben. Damit dürfte gesichert sein, daß alle Programme mit geänderten Busroutinen einwandfrei funktionieren.

Ein Blick ins Innere des PC 128 (Bild 6 und 10) zeigte auch, daß immer noch dieselben Bus-Bausteine verwendet werden. Gleichzeitig entspricht die Taktfrequenz des PC 128 im C 64-Modus der des C 64, so daß hier eigentlich auch keine Probleme erwartet wurden. Nächstes Testobjekt war ein Kopierprogramm, das intensiven Gebrauch von illegalen Opcodes macht. Mit Opcodes bezeichnet man den Befehlssatz des Prozessors. Illegale Opcodes sind Befehle, die der Hersteller des Prozessors eigentlich gar nicht vorgesehen hat. In Wirklichkeit bewirken aber manche von ihnen auch beim C 64 schon etwas. Und einige Programme nutzen sie. Es hätte also sein können, daß der 8502-Prozessor einige dieser beim 6502 an sich undefinierten Opcodes benutzt. Doch traten hier keine Probleme auf. Auch alle anderen kopiergeschützten (und nicht kopiergeschützten) Diskettenprogramme konnten wir ohne Schwierigkeiten laden und benutzen.

Wir verwendeten bei unserem Test das bekannte 1541-Floppy-Laufwerk (Bild 13). Wie es sich mit dem Nachfolgemodell, der 1571, verhält, berichten wir im zweiten Teil unseres PC 128-Tests.

Getestet wurden von uns diverse Spiele wie Ghostbusters und Pit Stop II. Auch hier ein eindeutiges Ergebnis: Grafik und Musik stimmen mit dem C 64 überein. Da auch die Datasette an den PC 128 angeschlossen werden kann, standen als nächstes Kassettenprogramme auf dem Plan: Diverse Spiele, zum Teil mit Turboladern und Autostart versehen, liefen genauso problemlos wie die Diskettenprogramme.

Letzter, und unserer Ansicht nach härtester Prüfstand: Module im Expansionport. Auch hier, wie fast schon erwartet, keine Probleme, egal ob Soccer oder GBasic. Insbesondere das GBasic-Modul, das ja im Modul selbst noch eine Bank-Switching-Elektronik enthält, also zwischen zwei Speicherbausteinen hin und herschaltet, wie der PC 128 selbst, dürfte derletzte Beweis dafür sein, daß der PC 128 im C 64-Modus vollkommen softwarekompatibel zum C 64 ist. Wie es mit diversen Hardwareerweiterungen, beispielsweise Turbo Access oder Speeddos aussieht, ist noch ungewiß. Sicher ist, daß hier zumindest die Platinen dieser Erweiterungen geändert werden müssen, da beim PC 128 das Kernal und das Basic in einem einzigen 16 KByte ROM und nicht, wie beim C 64, in 2 ROMs zu je 8 KByte enthalten ist.

Klares Fazit unseres Kompatibilitätstests: Wer schon einen C 64 mit Floppy 1541 hat, der kann zumindest seinen Computer beruhigt weiterverkaufen, steigt er auf den PC 128 um. Es gibt keinen Programmtyp, den wir nicht getestet haben; wir versuchten es mit Programmen, die auf übelste Art im Betriebssystem herumspringen: keine Chance. Der PC 128 ist voll kompatibel zum C 64, selbst wieder bei den Joystickanschlüssen (Bild 7).

## Super-Basic 7.0

Beim Basic-Interpreter zeigt sich der PC 128 und der PC 128D (Bild 8) ohne Zweifel von einer seiner stärksten Seite: Das Basic 7.0 enthält alle Befehle und Funktionen der Basic-Versionen 2.0 (C 64), 3.5 (C 16 und Plus/4) und 4.0 (CBM 80xx). Damit stehen bereits leistungsfähige Grafikbefehle wie DRAW, BOX oder CIRCLE sowie viele Diskettenkommandos zur Verfügung. Doch damit nicht genug. Zusätzlich enthält das 7.0-Basic eine Reihe spezieller Befehle zur Steuerung von Sprites und zur einfachen Programmierung des Synthesizer-Bausteins (SID). Die zusätzlich zum 2.0-Basic vorhandenen Befehle und Funktionen sind in Tabelle 1 beschrieben.

Schon eine erste, oberflächliche Betrachtung dieser Tabelle läßt eine neue Dimension der Basic-Programmierung erahnen. Endlose DATA-Orgien und wüster GOTO-Dschungel gehören mit diesem Basic endgültig der Vergangenheit an.

Formatierte Zahlenausgabe mittels PRINT USING ist dabei ebenso selbstverständlich wie Befehle zur Abfrage von Joystick, Lightpen und Paddles.

Mit WINDOW läßt sich ein Bildschirmfenster definieren, auf das sich anschließend alle PRINT- und INPUT-Befehle beziehen. Der Befehl mit dem beziehungsreichen Namen SLEEP läßt den PC 128 denn auch tatsächlich für die angegebene Zeit schlafen: »SLEEP 5« hält das Programm fünf Sekunden lang an. So spart man sich das umständliche Hantieren mit leeren FOR...NEXT-Schleifen für oftmals sinnvolle Verzögerungen im Programmablauf. Zeiten zwischen einer Sekunde und 18 Stunden (!) sind programmierbar, womit sich die Frage aufwirft, wer seinen Computer während eines Programms wohl für mehr als eine Minute anhalten will. Zwei weitere ungewöhnliche Befehle fallen sofort auf, nämlich SLOW und FAST. Mit diesen Befehlen kann der PC 128 zwischen 1 MHz Taktfrequenz (SLOW) und 2 MHz umgeschaltet werden. Nach dem Einschalten läuft der Computer mit einem Takt von 1 MHz, also mit ähnlicher Geschwindigkeit wie der C 64. Durch die komplizierte Art der Speicherverwaltung mit den verschiedenen Speicherbänken für Programme, Variablen und Betriebssystem/Basic ist das PC 128-Basic prinzipiell geringfügig langsamer als das C 64-Basic. dies wird jedoch, wie schon erwähnt, einerseits durch den wesentlich leistungsfähigeren Befehlssatz mehr als aufgewogen, zum anderen kann durch den FAST-Befehl die Abarbeitungsgeschwindigkeit exakt verdoppelt werden.

So schön das im Prinzip auch ist, die Geschwindigkeitsvorteile des FAST-Modus muß man sich mit dem bereits erwähnten Nachteil erkaufen.

Doch wenden wir uns wieder dem Basic selbst und damit erfreulicheren Dingen zu.

Eine Reihe von Befehlen dient ausschließlich der bequemeren Programmentwicklung: AUTO gibt bei der Programmeingabe automatisch die Zeilennummern vor, mit TRON kann in der Testphase eines Programms eine Trace-Funktion eingeschaltet werden. Es werden dann auf dem Bildschirm die Zeilennummern der gerade abgearbeiteten Basic-ZeiIen angezeigt. Dies bewährt sich insbesondere bei Fehlern in der Programmlogik. Eine falsch gesetzte IF-Abfrage wird damit zum Beispiel schnell erkannt — man sieht ja, wohin das Programm springt. Zu Testzwecken kann TRON natürlich auch im Programm verwendet werden. Am Anfang eines »verdächtigen« Programmteils fügt man einfach den TRON-Befehl ein, am Ende dieses Abschnittes wird die Trace-Funktion mit TROFF wieder außer Betrieb gesetzt.

Der RENUMBER-Befehl dient zum Umnumerieren des gesamten Programms oder auch nur einzelner Teile davon. Während jedoch RENUMBER beim bekannten Simons-Basic für den C 64 weder GOTO- noch GOSUB-Adressen ändert (und mithin eher ein Problem als ein Hilfsmittel darstellt), korrigiert das 7.0-Basic automatisch alle Zeilennummern hinter GOTO, GOSUB, THEN, ELSE, RESTORE und RESUME und sogar bei Abfragen von Fehlerzeilen mittels der Spezialvariablen EL in einer Fehlerbehandlungsroutine. Wobei wir gleich bei einem weiteren interessanten Aspekt des 7.0-Basic wären.

## Fehlerbehandlung ohne Programmabbruch

Während der C 64 bei jedem auftretenden Fehler unerbittlich sein Programm mit einer entsprechenden Meldung beendet, bietet der PC 128 hier einiges mehr an Flexibilität. Mit der TRAP-Anweisung können alle auftretenden Fehler während des Programmlaufes abgefangen werden. Zum Beispiel wird nach der Anweisung »TRAP 500« beim Auftreten eines Fehlers das Programm nicht unterbrochen, sondern es wird in eine Fehlerbehandlungsroutine (hier ab Zeile 500) verzweigt. Alle wichtigen Daten über den Fehler werden in Systemvariablen gespeichert und können von der (vom Programmierer zu schreibenden) Basic-Routine ab Zeile 500 ausgewertet werden: EL enthält die Zeilennummer, in der der Fehler auftrat, ER enthält die Fehlernummer und ERR$ liefert die Fehlermeldung im Klartext. Die Fehlerbehandlungsroutine kann diese Variablen auswerten, um gezielt Maßnahmen zu ergreifen. Anschließend sollte das Programm natürlich weiter fortgesetzt werden können. Dazu dient die RESUME-Anweisung, die eine Fehlerbehandlung abschließt (vergleichbar mit RETURN bei Unterprogrammen). RESUME kann auf drei verschiedene Arten verwendet werden. RESUME ohne weitere Parameter kehrt zu der Anweisung zurück, die den Fehler verursacht hat und setzt das Programm dort ganz normal fort. In diesem Falle muß natürlich in der Fehlerbehandlungsroutine die Fehlerursache behoben worden sein, sonst tritt der Fehler sofort wieder auf. Ein gutes Beispiel ist der Test, ob der Drucker eingeschaltet ist:

10 TRAP 90 : OPEN 1,4
20 PRINT # 1,"Drucker OK "
30 END
90 IF ER = 5 AND EL = 10 THEN PRINT "Bitte Drucker einschalten und Taste drücken" : GETKEY A$
95 RESUME

Dieses kleine Demo-Programm gibt den Text »Drucker OK« auf einem angeschlossenen Drucker aus. Falls der Drucker nicht eingeschaltet sein sollte, würde der OPEN-Befehl in Zeile 10 normalerweise zur Fehlermeldung »Device not present« führen. Diese Meldung wird aber durch den TRAP-Befehl im Falle eines Falles abgefangen und statt dessen zur Zeile 90 verzweigt, wonach Überprüfung auf Fehlernummer und -zeile der Benutzer höflich aufgefordert wird, doch bitteschön den Drucker einzuschalten. Der Befehl GETKEY wartet anschließend auf einen Tastendruck, worauf das Programm durch den RESUME-Befehl wieder zum OPEN-Kommando zurückkehrt.

Soll das zum Fehler führende Kommando nicht nochmals ausgeführt werden, dann muß die Fehlerbehandlungsroutine mit RESUME NEXT abgeschlossen werden, wodurch mit dem nächsten Befehl nach der Fehlerursache weitergemacht wird. In besonderen Fällen kann es nach einem Fehler nützlich sein, ganz woanders im Programm fortzufahren. In einem solchen Falle kann hinter RESUME eine Zeilennummer angegeben werden, an der das Programm fortgesetzt werden soll.

Mit diesen Möglichkeiten zur Fehlerbehandlung im Programm selbst steht dem Programmierer ein leistungsfähiges Werkzeug zur Verfügung. Und sollte in der Entwicklungsphase eines Programms doch einmal ein Fehler auftreten, dann genügt ein Druck auf die HELP-Taste, um die fehlerhafte Zeile aufzulisten. Der Teil der Zeile, der den Fehler verursachte, wird dabei revers dargestellt.

Natürlich lassen sich auch von der Diskettenstation gemeldete Fehler in ähnlich eleganter Weise abfragen. Statt umständlich die Zeile 1 OPEN 1,8,15 : INPUT#1,A,B$,C,D : PRINT A,B$,C,D : CLOSE 1 : END einzugeben (und dabei womöglich sein Programm zu überschreiben) tippt man beim 7.0-Basic einfach »?DS$« und erhält die gleiche Meldung. Die Systemvariable DS$ enthält nämlich den Fehlerstatus der Diskettenstation als Klartext, die Systemvariable DS den entsprechenden Fehlercode.

Überhaupt stehen beim PC 128 alle Diskettenbefehle als Basic-Kommandos zur Verfügung. SCRATCH beispielsweise löscht ein File von der Diskette, DIRECTORY oder CATALOG listen das Inhaltsverzeichnis ohne Programmverlust, mit DLOAD, DSAVE und DVERIFY spart man sich das lästige »,8«. BLOAD und BSAVE dienen zum Laden/Abspeichern beliebiger Speicherinhalte (Maschinenprogramme, Grafik etc.). Neu sind auch eine Reihe von Befehlen zur komfortablen Verwaltung sequentieller und relativer Dateien. Mit RECORD kann beispielsweise direkt auf einen Datensatz einer relativen Datei zugegriffen werden, APPEND ermöglicht das Anfügen weiterer Datensätze bei sequentiellen Dateien.

## Programmieren ohne GOTO

Das 7.0-Basic bietet eine ganze Reihe spezieller Schleifen- und Strukturbefehle zur GOTO-freien, strukturierten Programmierung. Da wäre zunächst einmal die Erweiterung der IF...THEN — Abfrage um die ELSE-Klausel. Bisher mußte man beispielsweise alternative Entscheidungen wie folgt programmieren:
10 IF A$="N" THEN PRINT "NEIN" : GOTO 30
20 PRINT "JA"
30 REM Hier geht’s weiter

Im 7.0-Basic reicht dazu eine Zeile, und die ist noch um einiges leichter verständlich:
10 IF A$="N" THEN PRINT "NEIN" : ELSE PRINT "JA"

Wenn A$ gleich »N« ist, dann wird »nein« gedruckt, sonst »ja«.

Leider ist die ELSE-Anweisung in dieser Form auf eine Zeile beschränkt. Abhilfe schafft hier die Klammerung mit BEGIN...BEND.

Alle zwischen BEGIN und BEND stehenden Basic-Zeilen stellen einen Block dar, der vom Basic-Interpreter genauso wie eine einzelne Zeile behandelt wird. Deshalb wird BEGIN...BEND besonders vorteilhaft bei IF-Abfragen benutzt:
10 INPUT "HEISST DEIN COMPUTER COMMODORE ODER SCHNEIDER?";C$
20 IF C$= "COMMODORE" THEN BEGIN
30 : PRINT "PC 128 KAUFEN !" 40 : BEND : ELSE BEGIN
50 : PRINT "VERRAETER !" 60 BEND

Man beachte, daß sich die IF-Anweisung insgesamt von Zeile 20 bis Zeile 60 erstreckt. In diesem Beispiel erhält man den Ratschlag, sich einen PC 128 zu kaufen, falls der Computer »Commodore« heißt. Hat man jedoch »Schneider« (oder etwas anderes) als Namen angegeben, wird man sofort als »Verräter« tituliert.

Natürlich können derartige IF...THEN...ELSE-Abfragen mit BEGIN...BEND auch geschachtelt werden, das heißt, man kann sowohl in den THEN- als auch in den ELSE-Teil weitere IF-Abfragen einbauen.

Somit lassen sich auch größere Programmblöcke ohne GOTO programmieren. Der Verzicht auf GOTO erhöht nicht nur die Übersichtlichkeit, sondern auch die Geschwindigkeit beim Programmlauf. Bei jedem GOTO-Befehl muß der Basic-Interpreter nämlich erstens die Zeilennummer, die im Programm ja als Dezimalzahl steht, in das interne binäre Format umrechnen und zweitens dann auch noch die angegebene Zeile suchen. Ein weiterer Vorteil: In den Programmbefehlen selbst kommen keine weiteren Zeilennummern mehr vor, das Beispielprogramm kann unverändert in allen möglichen Zeilenbereichen laufen.

Aber nicht nur Verzweigungen lassen sich derart elegant programmieren, besonders bei Schleifen, also bei Wiederholungen von bestimmten Programmteilen, spielt das 7.0-Basic seine Stärken erst richtig aus. Es ist ja vom C 64 her bekannt, daß eine FOR...NEXT-Schleife um einiges schneller ist als die gleiche Schleife mittels IF und GOTO programmiert. Nachteilig bei der FOR...NEXT-Schleife ist, daß die Anzahl der Schleifendurchläufe schon bei Eintritt in die Schleife bekannt sein muß. Dieser Nachteil wird durch die neue, schnelle DO. ,.LOOP-Schleifenstruktur behoben. Wie FOR...NEXT umklammert auch DO.. .LOOP einen beliebig großen Programmteil. Die Wirkung des DO-Befehls besteht einfach darin, daß der Basic-Interpreter sich den Anfang der Schleife »merkt«. Bei Erreichen des zugehörigen LOOP wird dann sehr schnell, ohne Suchzeiten, zum DO zurückgesprungen. Es ergibt sich also eine »unendliche Schleife« zwischen DO und LOOP. Um diese Schleife dennoch verlassen zu können, ist der EXIT-Befehl vorgesehen. Die Wirkung von EXIT besteht einfach darin, die Programmausführung hinter LOOP ganz normal fortzusetzen. Normalerweise wird EXIT daher von einer Bedingung abhängig gemacht. Beispiel:
10 X=1
20 DO
30 : X = X\*2 : PRINT X
40 : IFX>1500 THEN EXIT
50 LOOP

Der Wert X wird hier solange verdoppelt und ausgedruckt, bis der Wert 1500 überschritten wird.

Neben dieser unbedingten DO... LOOP-Schleife sind noch zwei von Bedingungen abhängige Formen vorgesehen. DO WHILE ... LOOP wird so lange ausgeführt, wie eine nach WHILE stehende Bedingung wahr ist:
10 DO WHILE A$= " " : GET A$ : LOOP

Solange keine Taste gedrückt wird, ist A$ immer leer, die WHILE-Bedingung also erfüllt. Die Schleife wird daher erst verlassen, wenn eine Taste gedrückt wird.

Die DO UNTIL-Schleife wird dagegen nicht ausgeführt, solange die Bedingung wahr ist, sondern im Gegenteil so lange, bis die hinter UNTIL angegebene Bedingung wahr wird.

Natürlich können auch bei DO WHILE oder DO UNTIL zusätzliche EXITs in die Schleife eingebaut werden, was die Leistungsfähigkeit dieser Anweisungen noch erhöht.

## Die Grafik ist für alle da

Um hochauflösende Grafik auf dem C 64 zu realisieren gibt es außer dem Kauf diverser Basic-Erweiterungen (oder dem Abtippen von 64'er-Listings) im wesentlichen nur die Alternative, selbst zum Maschinensprache-Profi zu werden — ungefähr so, als wenn man Radio- und Fernsehmechaniker werden müßte, um an seinem Farbfernseher die Farbe einstellen zu können. Ein sicherlich unhaltbarer Zustand, dessen Änderung Commodore allerdings bereits mit dem 3.5-Basic des C 16 in Angriff genommen hatte. Die hochauflösende Grafik des PC 128 ist genauso wie die des C 64/C 16 aufgebaut. Insgesamt 64000 Einzelpunkte können getrennt angesprochen werden, was einer Auflösung von 320 x 200 Punkten entspricht. Daneben ist ein Mehrfarbenmodus mit einer Auflösung von 160 x 200 Punkten vorgesehen, bei dem jeder Einzelpunkt eine von vier Farben haben kann.

Der große Unterschied zum C 64 liegt darin, daß die PC 128-Grafik voll vom Basic unterstützt wird. Befehle wie DRAW, BOX oder CIRCLE ermöglichen schnelles und unkompliziertes Zeichnen geometrischer Figuren von Linien über Drei-, Vier- und Mehrecke bis hin zu Kreisen und Ellipsen. Alle Figuren können beliebig vergrößert, verkleinert und sogar gedreht oder ausschnittsweise dargestellt werden. PAINT füllt geschlossene Flächen aus, SCALE dient zur Skalierung der Zeichenfläche und SCNCLR löscht den Grafikbildschirm.

Alle Grafikbefehle arbeiten sowohl im Hochauflösungs- wie auch im Mehrfarben-Modus. Mit dem Befehl GRAPHIC wird der gewünschte Grafik-Modus eingestellt. Zur Wahl stehen Text mit 40 Zeichen Text, Hochauflösung, Hochauflösung mit Textfenster, Mehrfarbengrafik, Mehrfarbengrafik mit Textfenster und schließlich Text mit 80 Zeichen pro Zeile.

Commodore spricht zwar von einer Auflösung von 640 x 200 Punkten, die im 80-Zeichen-Modus möglich ist, an wirklich doppelt auflösende Grafik ist dabei aber nicht zu denken: Die 640 Punkte ergeben sich als reines Rechenexempel aus 80 x 8, also 80 Zeichen mal 8 Punkte je Zeichen (Zeichenmatrix 8 x 8). Die uns beim Test vorliegende Vorab-Version des Handbuchs schweigt sich völlig über eine doppeltauflösende Grafik aus, ebenso das Hardware-Manual. Versuche ergaben, daß der GRAPHIC-Befehl tatsächlich nur mit den genannten sechs Parametern (40-Zeichen-Text, Hochauflösung, Hochauflösung mit Textfenster, Mehrfarben, Mehrfarben mit Textfenster, 80-Zeichen-Text) funktioniert, alles andere ergibt einen »Illegal Quantity Error«. Um es ganz deutlich zu sagen: Wirkliche Grafik mit einer Auflösung von 640 x 200 Punkten ist nach unseren bisherigen Erfahrungen mit dem PC 128 zumindest ohne ausgiebiges Tricksen nicht möglich. Insbesondere beziehen sich alle Grafikbefehle des 7.0-Basic ausschließlich auf die vom C 64 her bekannte 320 x 200 Punkte-Auflösung (und natürlich wahlweise auf den Mehrfarbenmodus mit 160 x 200 Punkten).

Ein weiterer Wermutstropfen: Die ganze schöne Grafik, Sprites und 40-Zeichen-Text sind ausschließlich über einen Composite-Monitor verfügbar, auf einem RGB-Monitor tut sich überhaupt nichts. Andersherum ist die 80-Zeichen-Textdarstellung nur über RGB (oder natürlich einen monochromen Monitor) möglich.

Der verblüffte Anwender stellt spätestens jetzt fest, daß er einfach einen Monitor zu wenig hat. Damit dürfte Commodore sich die Urheberrechte am ersten Zwei-Monitor-Heimcomputer der Welt gesichert haben. Wohlgemerkt, man hat nicht die Wahl zwischen Composite und RGB, sondern braucht unbedingt einen Composite-Monitor für 40-Zeichen, Grafik und Sprites und ebenso unbedingt entweder einen RGB- oder einen SW-Monitor für 80 Zeichen (Bild 9 und 12). Abhilfe schafft hier der neue 1902-Monitor von Commodore, der speziell zum PC 128 entwickelt wurde und sowohl über einen Composite- als auch über einen RGB-Eingang verfügt. Zwischen beiden Betriebsarten des Monitors wird mit einem kleinen Schalter an der Frontseite hin- und hergeschaltet — eine softwaremäßige Umschaltung ist nicht vorgesehen. Man kann daher nur wünschen, daß der Umschalter stabil genug gebaut ist — er wird oft betätigt werden müssen.

Als Fazit zur PC 128-Grafik bleibt festzuhalten, daß sie von der Auflösung her dem durch den C 64 gesetzten Standard (320 x 200 Punkte) entspricht und wie beim C 16 vorbildlich durch das Basic unterstützt wird.

## Shapes, Sprites und Sprite-Editor

Wenn von Grafik die Rede ist, dürfen natürlich Shapes und Sprites nicht fehlen. Hinsichtlich dieser beweglichen Grafikobjekte ist beim PC 128 eine gelungene Synthese von C 64-Hardware und C 16-Software zu verzeichnen. Vom C 64 stammen die acht Sprites, freiprogrammierbare, bewegliche Grafikobjekte, die von der Hardware (VIC-Chip) erzeugt und in den Bildschirm eingeblendet werden. Sprites können sowohl im 40-Zeichen-Textmodus als auch in den verschiedenen Grafik-Modi erzeugt werden, nicht allerdings im 80-Zeichen-Modus, denn der VIC, der sie erzeugt, ist nicht RGB-fähig.

Aus dem 3.5-Basic des C 16 wurde das Konzept der softwaremäßig erzeugten Shapes übernommen. Shapes sind rechteckige Ausschnitte aus der hochauflösenden oder der Mehrfarben-Grafik, die in Stringvariablen abgespeichert werden und daraus auch wieder auf den Bildschirm gebracht werden können. Da es sich um reine Grafikelemente handelt, können sie weder im 40- noch im 80-Zeichen-, sondern nur im Grafik-Modus dargestellt werden. Mit »SSHAPE X$, 100, 100, 150, 120« wird beispielsweise der Inhalt des Rechtecks mit linker oberer Ecke (100, 100) und rechter unterer Ecke (150, 120) aus der hochauflösenden Grafik in der Stringvariablen A$ abgelegt. Mit »GSHAPE A$, X, Y« wird die in A$ enthaltene Grafik-Information an der Grafikposition X, Y wieder auf den Bildschirm gebracht. Neben den Sprites sind die Shapes also eine zweite, leistungsfähige Möglichkeit zur Darstellung grafischer Objekte und eröffenen in Zusammenhang mit der hohen Speicherkapazität des PC 128 völlig neue Möglichkeiten für Spiele in hochauflösender Grafik.

## Integrierter Sprite-Editor

Das Basic 7.0 enthält sogar einen integrierten Sprite-Editor, mit dem man direkt am Bildschirm das Punktmuster des gewünschten Sprites entwerfen kann. Mit dem SPRITE-Befehl werden für jedes Sprite folgende Attribute gesetzt: Aktivität, Farbe, Priorität, Dehnung in X- und Y-Richtung und Modus (hochauflösend oder Mehrfarben).

Mit »SPRITE 4,1,6,1,1,0,0« wird zum Beispiel das Sprite Nr. 4 aktiviert (1). Es wird in der Farbe Grün (6) angezeigt, hat Priorität über bereits angezeigte Bildschirmdaten (1), ist in X-Richtung gedehnt (1), in Y-Richtung nicht gedehnt (0) und wird im Hochauflösungs-Modus angezeigt (0).

Um umgekehrt die Attribute eines bereits definierten Sprites zu bestimmen, kann die RSPRITE-Funktion verwendet werden.

Mit dem SPRSAV-Kommando können die Daten eines Sprites in einer Stringvariablen abgelegt werden oder umgekehrt aus einem String ausgelesen werden.

Die Steuerung der Sprites erfolgt über den MOVESPR-Befehle mit dem ein Sprite an eine bestimmte Bildschirmposition gesetzt werden kann. Die Positionsangabe kann entweder in absoluten Koordinaten oder auch relativ zur bisherigen Position erfolgen. Doch damit noch nicht genug. Gibt man zusätzlich noch eine Geschwindigkeit als Zahlenwert zwischen 1 und 15 an, so gleitet das Sprite automatisch an die angegebene neue Position. Durch Setzen von Plus- oder Minuszeichen vor die Koordinatenangaben werden aus den absoluten Koordinaten relative Koordinaten. Ohne Geschwindigkeitsangabe erscheint das Sprite sofort an der neuen Position. »MOVESPR 7,-30, + 40« versetzt Sprite 7 augenblicklich um 30 Punkte nach links und um 40 Punkte nach oben. Beim C 64 kann man durch PEEKen in die Sprite-Kollisionsregister des VIC feststellen, ob ein Sprite mit einem anderen Sprite oder mit Hintergrunddaten kollidiert ist. Beim PC 128 bedient man sich für den gleichen Zweck um einiges eleganter der COLLISION-Anweisung. Damit kann eine automatische Programmunterbrechung bei Eintritt entweder einer Sprite/Sprite- oder einer Sprite/Hintergrund-Kollision programmiert werden. »COLLISION 1,500« hat beispielsweise folgende Bedeutung: Falls im weiteren Verlauf des Programms eine Sprite-Sprite-Kollision (Kennziffer 1) auftritt, dann wird das laufende Basic-Programm unterbrochen, und es wird ein Unterprogramm ab Zeile 500 ausgeführt. Nach dem RETURN wird das Programm an der Unterbrechungsstelle fortgesetzt.

COLLISION und MOVESPR sind leistungstarke Befehle, die ein Basic-Programm hinsichtlich der Sprite-Steuerung sehr stark entlasten. Um ein Sprite quer über den Bildschirm zu bewegen, muß man beim C 64 noch mit einer FOR... NEXT-Schleife arbeiten; um Kollisionen festzustellen, war daneben noch ein ständiges PEEKen in die Kollisionsregister des VIC nötig. Beim PC 128 reichen zwei Basic-Befehle, die zudem noch interruptgesteuert arbeiten, so daß das Basic-Programm während der Bewegung der Sprites weiterlaufen kann, bei einer eventuell auftretenden Sprite-Kollision dagegen automatisch unterbrochen wird, um schnell darauf reagieren zu können.

## Musikalisches Basic

Ein ähnlicher Komfort ist auch bei der Programmierung des aus dem C 64 übernommenen Synthesizer-Bausteins, des SID, zu finden. Alle Musik-Parameter müssen nicht mehr aus DATA-Wüsten in den SID hineingePOKEt werden, sondern können elegant und leichtverständlich per Basic-Befehl gesetzt werden.

VOL regelt zum Beispiel die Lautstärke, mit dem SOUND-Kommando wird einer der Tongeneratoren gestartet. Dabei kann über entsprechende Parameter nicht nur die Frequenz, sondern auch die Dauer des Tones sowie das an- und abschwellen festgelegt werden.

Mit ENVELOPE wird jeweils eine von zehn möglichen Tonhüllkurven für Musikinstrumente definiert. Attack, Decay, Soustain, Release werden damit ebenso festgelegt wie Wellenform und Impulsbreite. Jede der zehn möglichen Hüllkurven bleibt gespeichert, bis sie durch einen weiteren ENVELOPE-Befehl zur gleichen Hüllkurvennummer überschrieben wird.

Nach dem Einschalten des PC 128 sind bereits alle zehn Hüllkurven mit der Klangstruktur verschiedener Musikinstrumente vordefiniert: Klavier, Akkordeon, Zirkusorgel, Trommel, Flöte, Gitarre, Cembalo, Orgel, Trompete und Xylophon. Damit steht auch dem musikalisch wenig bewandertem Einsteiger sofort eine Fülle einfach anwendbarer Klangeffekte zur Verfügung. Mit der FILTER-Anweisung können zudem alle Filtermöglichkeiten des SID zur Klangverfremdung ausgeschöpft werden.

Der PLAY-Befehl ermöglicht das automatische Abspielen von in Strings gespeicherten Musiknoten. In dem als Parameter angegebenen String können Informationen über Hüllkurve, Oktave, Lautstärke, Tonkanal und Filter enthalten sein, in der Hauptsache aber natürlich die zu spielenden Noten. Die Noten werden einfach durch Angabe des Notennamens (A,B,C,D,E,F,G) ausgewählt, wobei das B der in Deutschland üblichen Notenbezeichnung H entspricht. Natürlich können die einzelnen Noten um Halbtöne erhöht oder erniedrigt werden, es sind ganze, halbe, viertel, achtel und sechzehntel Noten, jeweils auch punktiert, möglich.

## Musik per Warteschlange

Auch der PLAY-Befehl wird interruptgesteuert ausgeführt, das heißt die zu spielenden Noten gelangen in eine Ton-Warteschlange, was nichts anderes bedeutet, daß sie in einem reservierten Speicherbereich abgelegt werden. Während des Interrupts stellt das Betriebssystem fest, ob Tondaten in der Warteschlange stehen. Wenn ja, wird der erste Wert aus der Schlange geholt und, vereinfacht gesprochen, an den Synthesizer-Chip (SID) zum Abspielen übergeben. Alle anderen in der Warteschlange stehenden Tondaten rücken jetzt einen Platz vor. Bei jedem weiteren Interrupt wird überprüft, ob die vorgesehene Tondauer bereits erreicht ist. Wenn dies schließlich der Fall ist, wird wieder nach wartenden Tondaten Ausschau gehalten, und das ganze Spiel setzt sich fort.

Wie gesagt läuft dies alles jeweils während des System-Interrupts ab. Das Basic selbst »merkt« davon nichts. Es stellt nur fest, ob noch Platz in der Tonwarteschlange ist oder nicht. Falls noch Plätze frei sind, könne weitere Tondaten angefügt werden und das Programm fährt anschließend normal fort, während die Musik automatisch abgespielt wird. Nur dann, wenn zuviele Töne zum Abspielen anstehen, muß das Programm tatsächlich anhalten und warten, bis wieder Plätze in der Warteschlange freigeworden sind.

Obwohl Dank des leistungsstarken Basics nur selten nötig, gibt es natürlich auch beim PC 128 den Zugriff auf die Maschinenebene. Allerdings ist es hier nicht einfach mit POKE, PEEK und SYS getan. Vielmehr ergibt sich aus dem Konzept der verschiedenen Speicherbereiche, die mittels Bank-Switching umgeschaltet werden, das Problem, in welche Speicherbank der POKE-, PEEK- oder SYS-Befehl gehen soll. Das PC 128-Basic löst dieses Problem ebenso einfach wie elegant: Mit dem BANK-Befehl kann die gewünschte Speicherbank ausgewählt werden. Damit erfolgt natürlich nicht wirklich eine Bankumschaltung (während ein Basic-Programm läuft, muß natürlich immer der Basic-Interpreter eingeschaltet sein), sondern Basic merkt sich nur, in welcher Speicherbank beispielsweise ein POKE-Wert abgelegt werden muß, oder aus welcher Bank die Daten für PEEK stammen müssen.

## Die Verbindung zur Maschinensprache

So kann man nach Belieben entweder in den Programm- oder in den Variablenspeicher POKEn und PEEKen. Betriebssystem- und Basic-7.0-Routinen können nach »BANK 15« einfach mit SYS aufgerufen werden.

Daneben gibt es noch die Möglichkeit, von Basic aus ganze Speicherbereiche zwischen Bank 1 (Basic-Arbeitsspeicher) und anderen Speicherbänken hin- und herzuladen. Hierzu dienen die Befehle FETCH, STASH und SWAP. »FETCH 2000,50000,4,35000« holt beispielsweise 2000 Byte ab Adresse 35000 aus Speicherbank 4 und legt diese ab Adresse 50000 im Basic-Arbeitsspeicher (immer Bank 1) ab. STASH ist die Umkehrfunktion zu FETCH: Es wird eine Anzahl Bytes aus dem Arbeitsspeicher in eine andere Speicherbank gebracht. SWAP schließt tauscht die angegebenen Speicherbereiche in beiden Bänken gegeneinander aus.

Diese drei Befehle sind hauptsächlich für den Einsatz im Zusammenhang mit Speichererweiterungen (RAM-Floppy) gedacht.

Es können damit Datenmengen verwaltet werden, die ein mehrfaches von 64 KByte im Speicher belegen, und das mit Geschwindigkeiten, wie sie mit einer Floppy niemals zu realisieren sind.

## Maschinensprache-Monitor eingebaut

Wem trotz allem die Möglichkeiten des 7.0-Basic noch nicht reichen, der kann mit dem MONITOR-Kommando das Basic verlassen und landet im fest im ROM eingebauten Maschinensprachemonitor.

Dieser dem C 16-»Tedmon« nachempfundene Monitor enthält neben den üblichen Funktionen zum Listen und Beschreiben des Speichers und einem Disassembler auch einen kleinen Assembler, mit dem Maschinenprogramme sehr komfortabel eingegeben werden können.

Statt der sonst üblichen vierstelligen hexadezimalen Adresseneingabe verlangt dieser Monitor allerdings fünf Stellen:

Die erste Stelle gibt an, welche von 16 möglichen Speicherbänken ausgewählt werden soll. Allerdings sind in der Grundversion des PC 128 natürlich nicht alle 16 Bänke belegt, einige sind für ROM-Module, andere für die RAM-Floppy reserviert.

Zurück ins Basic gelangt man mit dem X-Kommando. Und wer schließlich genug hat von komfortabler Basic-Programmierung und lieber wieder mit POKEs und DATAs arbeiten will, dem steht schließlich für alle Fälle noch der C 64-Modus offen: GO 64.

(ev/hm)

TODO ASIDE

## In letzter Minute

haben wir den Erlkönig für den deutschen Markt zu Gesicht bekommen. Der »deutsche« PC 128 überrascht mit einem kleinen, aber sehr wichtigen Detail: er verfügt über eine deutsche Tastatur und kann auch Umlaute auf dem Bildschirm darstellen. Mehr darüber in der nächsten Ausgabe.

TODO END ASIDE

# So lernt Ihr Drucker lesen \[30-31]

> Die Zeit mühsamer Grafikpinselei ist vorbei: Eine Hardware-Erweiterung für Epson-Drucker macht aus Ihrer Computer-Anlage den billigsten Scanner den es je gab. Beliebige Vorlagen werden damit in wenigen Minuten digitalisiert, und zur Weiterverarbeitung dem Anwender zur Verfügung gestellt.

Der Druckerzusatz von Scanntronic besteht aus einer Fotozelle, die zusammen mit der benötigten Elektronik in einem kleinen Gehäuse untergebracht ist. Eine einfache Federklammer hält den »Abtaster« auf dem Druckkopf eines Epson RX-80F/T fest. Die Verbindung zum C 64 wird über den User-Port und das Druckerinterface hergestellt. Die mitgelieferte Software steuert die Bewegung des Druckkopfes und das Abtasten der Vorlage auf schwarz und weiß. Der Abtaster wird dazu mit dem Druckkopf horizontal über die Vorlage geführt und eine Punktreihe »gelesen«. Danach erfolgt ein punktweiser Zeilenvorschub — das Papier wird um
\[
  \dfrac{1}{256}
\]
Zoll vertikal weiterbewegt — und die nächste Zeile wird gescannt. Eine präzise Druckermechanik ist also sehr wichtig.

## Auflösung: 180000 Punkte

Ein Abtastpunkt hat einen Durchmesser von 0,25 mm. Diese Auflösung erlaubt sogar das »Lesen« von Schreibmaschinentext und normalgroßer Handschrift. Zum Abtasten können zwei Auflösungsstufen gewählt werden, die sich durch die Punktdichte und Bildgröße unterscheiden. In der Standardauflösung können Vorlagen der Größe DIN A5 quer und bei Hochauflösung Vorlagen der Größe DIN A6 hoch erfaßt werden. Pro Bild werden dabei etwa 180000 Punkte abgetastet. Damit der Motivkontrast voll genutzt wird, kann der Scanner mit einem Regler an die Hell- und Dunkelwerte der Vorlage angepaßt werden.

Anstelle des Druckerpapiers spannen Sie beispielsweise eine Kopie von einem Malbuch in den Drucker ein und wählen den Programmpunkt »Bilderfassung«. Kaum 12 Minuten später ist das Bild in den Computer übertragen und kann beispielsweise mit HI-EDDI (64'er, Ausgabe 1/85) bearbeitet werden. Die Steuersoftware erlaubt auch das Speichern und Laden der Bilder auf Diskette. Ebenso können die Grafiken auf dem Bildschirm betrachtet werden. Da der Scanner mit einer höheren Auflösung arbeitet als der C 64, wird eine Grafik über vier Bildschirmseiten verteilt. Man sieht genau, welche Punkte bei einer späteren Hardcopy gesetzt sind. Das Einsatzspektrum des Scanners ist vielfältig; es reicht vom Fernkopierer bis zum Malprogramm-Ersatz.

## Einfache Handhabung

Zusammen mit einem Akustikkoppler können Sie Ihre Computeranlage als Fernkopierer einsetzen, um Skizzen, Schaltpläne oder handschriftliche Texte zu übertragen. Dazu spannen Sie die Vorlage in den Drucker ein und speichern die Hell/Dunkelwerte auf Diskette. Mit einem geeigneten Terminalprogramm können dann die Daten übers Telefonnetz gesendet werden. Der Empfänger kann sich dann die Grafik auf dem Bildschirm ansehen und ausdrucken lassen. Vorausgesetzt er hat die nötige Software.

Eine andere Anwendung ist das Anfertigen von Bildschirmgrafiken, das zu einem Kinderspiel wird. Das langwierige und zittrige Zeichnen mit dem Joystick oder Lichtgriffel gehört der Vergangenheit an.

## Scanner statt Joystick

Anstelle dessen greift man auf die bewährte Methode mit Bleistift und Papier zurück und digitalisiert einfach die Zeichnung. Wie bereits erwähnt ist eine Weiterbearbeitung der Grafiken mit HI-EDDI möglich. Gegenüber bekannten Malprogrammen mit Joystick-Steuerung reduziert sich dadurch die Zeit für das Erstellen von Grafiken um ein Vielfaches.

Mit einem kleinen Basic-Programm können Sie die gespeicherten Bilder laden und in eigenen Spielen verwenden. Im professionellen Bereich soll mit entsprechender Software sogar eine Auswertung von Fragebögen und Barcode-Symbolen möglich sein.

Doch damit sind die Anwendungsmöglichkeiten noch lange nicht erschöpft: Ein denkbar fantastischer Einsatz wäre es, den Scanner zum Lesen von Listings herzunehmen.

Sie fotokopieren beispielsweise die Listings aus dem 64'er, spannen die Kopien in den Drucker ein und scannen sie. Ein Schrifterkennungs-Programm übernimmt dann die Auswertung der Grafik und erzeugt das Programm im Speicher des C 64 und auf Diskette oder Kassette.

Der Scanner arbeitet mit dem Epson Drucker RX-80F/T in Verbindung mit einem Wiesemann- oder Data-Becker Interface. Ausführungen für weitere Drucker- und Interfacetypen sind in Vorbereitung.

Zum Lieferumfang gehört die Optoelektronik, eine Programmdiskette sowie eine deutsche Bedienungsanleitung. Für den Preis von 348 Mark ist der Superscanner von Scanntronik ein sehr interessantes Gerät. Und das, wegen der vielseitigen Verwendbarkeit, nicht nur für den Computer-Grafiker.

(hm)

# Hammerwerke mit sehr schöner Schrift \[32-33]

> Wo liegen die Stärken von Typenraddruckern? Was können sie und wie schnell sind sie wirklich? Lohnt sich der Kauf? Diese Fragen wollen wir beantworten und Ihnen eine Entscheidungshilfe geben.

In der letzten Ausgabe haben wir Matrixdrucker unter die Lupe genommen. Diesmal sind die Schönschreiber, die Typenraddrucker, an der Reihe.

Um es gleich vorwegzunehmen: Typenraddrucker sind eigentlich nur zur Textverarbeitung gut. Für Listingsdruck sind sie zu teuer und zu langsam. Für Grafik sind sie nur sehr bedingt geeignet.

## Unschlagbares Schriftbild

Zu den Typenraddruckern sollen hier auch die Typenradschreibmaschinen gezählt werden. Gerade die Schreibmaschinen, mit entsprechendem Interface ausgestattet, sind als Typenraddrucker im Heimbereich verbreitet. Das ist einerseits mit dem Preis und andererseits mit der Vielseitigkeit dieser Maschinen zu begründen. »Reine« Typenraddrucker waren bis vor einiger Zeit für den Heimgebrauch unerschwinglich, im Gegensatz zu den elektrischen Schreibmaschinen. Wobei die Schreibmaschinen noch den Vorteil haben, auch als »Schreibmaschine« verwendbar zu sein. Soll nämlich nur mal schnell ein kurzer Brief geschrieben oder eine Postkarte ausgefüllt werden, ist es sehr zeitraubend, wenn erst der Computer eingeschaltet und das Textverarbeitungsprogramm geladen werden muß. Für jemanden, der die DIN-Tastenanordung einer Schreibmaschine kennt und nicht mit dem »Adler-Suchsystem« (erst kreisen und dann abstürzen) tippt, ergibt sich mit den Schreibmaschinen-Druckern noch ein weiterer Vorteil: Mit einem geeigneten, bidirektionalen Interface können die Texte auch mit der Schreibmaschine in den Computer eingegeben und dort bearbeitet werden.

Die bekanntesten drei Eigenschaften eines Typenraddruckers sind: schön, langsam und laut. Die Eigenschaften können mit der Funktionsart relativ einfach begründet werden.

## Wie funktionieren Typenraddrucker?

Typenraddrucker besitzen, wie der Name schon sagt, ein Typenrad. Das ist eine Plastikscheibe mit 96 oder mehr Segmenten, auf denen die einzelnen Zeichen (Typen) untergebracht sind (Bild 1 und 2). Die Scheibe hat einen Durchmesser von 8,5 cm. Wird nun das »A« gedrückt, dreht ein Schrittmotor das Typenrad so, daß die »A«-Type an der Schreibstelle zu liegen kommt. Ein Elektromagnet schlägt dann einen Bolzen von hinten auf die Type, die das Farbband auf das Papier drückt, und dort ein »A« hinterläßt (Bild 3). Ein Schrittmotor ist im Prinzip ein Elektromotor, dessen Achse mit einem Stromstoß um einen bestimmten Winkel gedreht werden kann.

## Langsame Mechanik

Nach dem Einschalten eines Typenraddrucker, dreht die Steuerelektronik für den Schrittmotor das Typenrad so lange, bis eine Lichtschranke die »Nullposition« feststellt. Der Lichtstrahl geht dann durch eine Bohrung in der Plastikscheibe hindurch und trifft auf einen Fototransistor. Wird nun auf einer Schreibmaschine eine Taste gedrückt, dreht die Steuerelektronik über den Schrittmotor das Rad so, daß die entsprechende Type sich in Anschlagposition befindet. Die heutige Elektronik ist dabei so »intelligent«, daß immer die günstigste Drehrichtung (rechts oder links) gewählt wird.

Das Positionieren der Typen ist aber nicht nur ein elektronisches Problem, sondern erfordert auch mechanisch einen recht großen Aufwand. Das Typenrad muß nämlich sehr schnell gedreht und sehr exakt positioniert werden und der Bolzenhammer muß im richtigen Moment zuschlagen.

Um das nächste Zeichen zu drucken, muß die gesamte Mechanik einen Schritt weiter nach rechts transportiert werden. Die Mechanik ist dazu auf einem Wagen untergebracht, der auf einer Schiene nach links und rechts bewegt werden kann. Das Positionieren des Typenrades ist der geschwindigkeitsbestimmende Schritt. Die Kräfte, die beim Beschleunigen und Abbremsen auftreten, setzen die mechanischen Grenzen. Die Druckgeschwindigkeit liegt bei Typenraddruckern unter 2000 Mark in der Regel bei 10 bis 20 Zeichen pro Sekunde. Teure Exemplare schaffen mit dem entsprechenden mechanischen Aufwand auch 80 cps (character per second). Die Zeit für den Anschlag sollte aber auch nicht vernachlässigt werden. Der Bolzenhub, der nötig ist, um die Type auf das Papier zu schlagen, beträgt ein Vielfaches des Nadelhubs eines Matrixdruckers. Außerdem ist der Schlagbolzen noch wesentlich schwerer, womit der maschinengewehrartige Klang beim Druck erklärt werden kann.

## Wozu ist ein Typenraddrucker geeignet?

Wegen der langsamen Druckgeschwindigkeit eignet sich ein Typenraddrucker nicht für Massen-Rundschreiben und Listingsdruck. Bei Listingsdruck können auch keine Steuer- oder Grafikzeichen des C 64 gedruckt werden. Teilweise werden solche Zeichen sogar ignoriert.

Bevor man also einen Drucker kauft, sollte man dessen Einsatzgebiet genau kennen. Tabelle 1 zeigt deshalb in knapper Form die Möglichkeiten der Druckertypen. Es wurde nicht nur das Ergebnis berücksichtigt, sondern auch die benötigte Zeit, um beispielsweise einen Grafikdruck zu erhalten.

Wie Sie aus der Tabelle ersehen können, ist der Matrixdrucker einer der Vielseitigsten. Er beherrscht fast alle anfallenden Druckprobleme mit recht guter Qualität. Berücksichtigen Sie aber, daß die Schrift billiger Matrixdrucker keine Briefqualität hat. Teure Stücke, etwa ab 1500 Mark, mit NLQ (Schönschreibmodus), kommen dem Schriftbild eines Typenraddruckers jedoch recht nahe.

Was Hardcopy-Fähigkeiten angeht, ist der Matrixdrucker mit Einzelnadelansteuerung unschlagbar. Einige Typenraddrucker sind zwar grafikfähig, benötigen aber für eine 320x200 Punkt Hardcopy zwischen einer halben und einer ganzen Stunde. Pro Grafikpunkt wird einmal das Punktzeichen angeschlagen. Also bis zu 64 000mal pro Grafik — ein erheblicher Verschleiß für das Typenrad und die Anschlagmechanik. Außerdem ist dazu ein Programm erforderlich, das völlig anders als herkömmliche Hardcopy-Routinen aufgebaut sein muß. Zusätzlich muß ein Typenraddrucker für Hardcopy-Druck noch punktweisen Zeilen- und Spaltenvorschub ermöglichen, was nur selten der Fall ist.

## Eingeengtes Anwendungsspektrum

Sie sehen also, ein Typenraddrucker hat ein sehr eingeengtes Anwendungsspektrum. Unserer Meinung nach lohnt er sich nur, wenn es auf sehr schöne Schrift oder mehr als zwei Durchschläge ankommt. Etwas anders verhält es sich mit Schreibmaschinen, die als Drucker verwendet werden. Hat man doch neben einem Drucker noch eine komplette Schreibmaschine für kurze Texte zur Verfügung. Außerdem kann die Schreibmaschine auch als alternative Eingabetastatur verwendet werden kann.

(hm)

# Big Brother druckt für Sie \[34-35]

> Sehr gute Leistungen versprechen die Brother Schreibmaschinen CE 51 bis 61. Über ein Interface können sie an den C 64 angeschlossen werden und ersetzen dann einen »normalen« Typenraddrucker.

WWersuchen Sie einmal, ein Be-U hördenformular mit einem W Drucker auszufüllen. Sie werden sehen, es ist beinahe unmöglich genau die richtige Spalte und Zeile zu treffen. Für diesen Anwendungszweck sind Schreibmaschinen noch am besten geeignet. Gleichzeitig hat eine Typenradschreibmaschine meistens ein wesentlich besseres Schriftbild als ein Matrixdrucker. Aber warum sollte man nicht beide Vorteile miteinander verbinden können? Eine herkömrplich zu bedienende Schreibmaschine, die bei Bedarf von einem Computer gesteuert werden kann, bietet somit doppelten Nutzen. Natürlich hat diese universelle Einsetzbarkeit ihren Preis. Die drei Brother-Schreibmaschinen, die wir Ihnen vorstellen möchten, kosten 1098 Mark (CE 51, Bild 1) 1298 Mark (CE 60) und 1398 Mark (CE 61, Bild 2). Dabei wurde ein in jedem Fall notwendiges Interface zum Anschluß an den Computer noch nicht mitgerechnet. Hierfür fallen nochmals zwischen 400 und 500 Mark, je nach verwendetem Modell an. Zum Test verwendeten wir das bidirektionale Witte WI-60 (549 Mark) und das unidirektionale IF-CBM-Interface von Brother (399 Mark).

### C 64 mit neuer Tastatur

Gut ausgewogen ist der Tastenwiderstand, der ein Auflegen der Finger ermöglicht. Nur der Druckpunkt beim Betätigen einer Taste könnte etwas deutlicher sein.

Da mit dem WI-60 ein bidirektionaler Datenaustausch möglich ist, kann die Schreibmaschine auch als Eingabegerät genommen werden. Das funktioniert nicht nur mit Basic-Programmen, sondern sogar mit Vizawrite, Textomat und SM-Text. Für alle anderen Programme ist es möglich, sich eine eigene Tastaturtabelle zu erstellen, um die Tastenbelegung dem Programm anzupassen. Wir haben das WI-60 zusammen mit Vizawrite getestet. Hat man sich erst einmal an die unterschiedlichen Tastenfunktionen gewöhnt, macht das Arbeiten richtig Freude. Die Sondertasten des C 64 (Fl — F8, STOP, CBM-Taste, Cursor-Tasten) wurden übrigens sinngemäß auf die Schreibmaschinentastatur übertragen. Falls neben der Brother-Schreibmaschine noch ein Matrixdrucker mit Centronics-Schnittstelle betrieben werden soll, bietet das WI-60 auch dafür einen passenden Anschluß. In einigen Fällen kann es allerdings passieren, daß das eine oder andere Spiel nicht mehr funktioniert. In diesen Fällen muß das Interface aus dem Computer genommen werden.

### Langsam aber bedienungsfreundlich

Die umfangreichen Funktionen aller drei Brother-Schreibmaschinen können auf zwei verschiedene Arten eingestellt werden. Entweder über die Schreibmaschine oder durch den Computer. Die Syntax dieser Befehle entspricht dabei den von Matrixdruckern her gewohnten ESC-Befehlen.

Trotz der einfachen Bedienung erfüllen die Brother CE-Modelle fast alle Anforderungen, die an einen Textdrucker zu stellen sind. In Tabelle 1 haben wir deshalb alle Leitungen der einzelnen Maschinen zusammengestellt.

Die Tabelle macht auch die Unterschiede zwischen den Maschinen deutlich. Die wesentlichsten Differenzen zwischen den einzelnen Modellen sind aber der Umfang der Ausstattung, die Schreibgeschwindigkeit und natürlich der Preis.

Das Schriftbild aller drei Maschinen kann eigentlich nur als exzellent bezeichnet werden (Bild 3). Verwendet man ein Carbonband, sind die Buchstaben wahrlich schöner als gedruckt. Besonders gut gefallen hat uns der Doppeldruck, der den Buchstaben ein räumliches Aussehen verleiht.

## Schrift ohne Makel

Je nach dem verwendeten Typenrad sind so die verschiedensten Schriftvariationen bis hin zur Proportionalschrift zu erreichen. Eines sollte der Besitzer einer Typenradschreibmaschine allerdings haben — nämlich Zeit. Mit 13 oder 15 Zeichen/Sekunde (CE-51, CE-60) dauert es schon eine ganze Weile, bis ein Schriftstück fertig ist. Einzige Abhilfe ist hier ein Druckpuffer, der möglichst groß sein sollte, damit der Computer nicht zu lange an den Drucker gebunden ist. Das WI-60-Interface hat beispielsweise einen 8 KByte, das IF-CBM-Interface einen 2 KByte (optional 6 oder 8 KByte) großen Pufferspeicher.

Da die Schreibgeschwindigkeit eines Druckers nicht nur von der Anzahl der geschriebenen Zeichen pro Sekunde abhängig ist, sondern auch von anderen Faktoren, haben wir einen über drei Seiten langen Probetext entwickelt, der in Zukunft bei allen Druckertests verwendet wird. Er ist so konzipiert, daß auch Druckwegoptimierung, Papiertransport, Positionierungsgeschwindigkeit des Typenrades und Druckkopfgeschwindigkeit mit berücksichtigt werden. Als Textverarbeitungsprogramm für diesen Geschwindigkeitstest dient Vizawrite.

Unsere drei Testkandidaten waren die ersten, die diese Teststrecke absolvieren mußten. Sie schafften es mit relativ guten Ergebnissen. Die gemessenen Werte entnehmen Sie bitte der Tabelle 1. Erstaunlich ist aber, daß alle drei Maschinen, trotz unterschiedlicher Schreibgeschwindigkeit fast genau gleich schnell waren. Der Unterschied zwischen der langsamsten und schnellsten Maschine betrug nur sechs Sekunden.

## Einfache Handhabung

Das Typenrad wird beim Einsetzen automatisch justiert. Der Farbbandwechsel (Carbon- oder Nylonband) ist so einfach, daß er nicht einmal 10 Sekunden dauert. Nur das Einsetzen des Korrekturbandes dauert etwas länger. Wer aber mit dem Computer schreibt, kann sich das Korrekturband ohnehin sparen, denn Fehler werden einfach am Bildschirm berichtigt.

### Problemloser Anschluß

Das Brother IF-CBM-Interface ist mit dem ganz normalen C 64-IEC-Bus ausgestattet. Es wird einfach zwischen Computer (beziehungsweise Floppy-Laufwerk) und Schreibmaschine geschaltet. Damit fehlt dem Interface zwar die Fähigkeit bidirektional arbeiten zu können, dafür treten aber mit keinen käuflichen Softwareprodukten Probleme auf. Außerdem paßt das Interface auch zum VC 20 beziehungsweise dem PC 128. Die Schreibmaschinen werden einfach wie bei einem Commodore-Drucker über die Geräteadresse 4 angesprochen. Ein Funktionieren mit Vizawrite 64, SM-Text und Textomat ist sichergestellt. Sollten dennoch einmal Schwierigkeiten auftreten, bietet der Hersteller bereitwillig seine Hilfe an.

Die drei getesteten Geräte, aber auch die Interfaces von Witte und Brother, haben sich im Test durchweg gute Noten verdient. Je nach Anwendung (und Geldbeutel) kann sich der Interessierte mit ihnen ein leistungsfähiges und flexibles Textsystem zusammenstellen. Der Vorteil liegt vor allem darin, daß die bekanntesten Textverarbeitungsprogramme problemlos angewendet werden können.

(Arnd Wängler/hm)

Info: Brother, Rosengarten 14, 6368 Bad Vilbel, Tel. 06101/ 8050

# Rendezvous mit der Schreibmaschine \[36]

> Für knappe 1000 Mark ist die Triumph-Adler Gabriele 8008 L eine der billigsten Typenradschreibmaschinen mit eingebautem Commodore-Interface.

Wer für 898 Mark die Triumph-Adler Gabriele 8008 L als Typenradschreibmaschine kauft, weil er eine Schreibmaschine braucht, kann tatsächlich für nur 100 Mark Zuzahlung die Maschine mit Interface zum Anschluß an die Commodore-Computer C 16, VC 20, C 64 und Plus/4 bekommen! Wenn man die Notwendigkeit der Anschaffung einer Schreibmaschine voraussetzt, ist das eine der billigsten Methoden, einen soliden Schönschreibdrucker für den Computer zu bekommen.

Die Typenradschreibmaschine (Bild 1) macht äußerlich einen robusten Eindruck. Geliefert wird sie in einem sehr stabilen Koffer, aber ohne Abdeckung. Auch sonst ist bei vielen nicht unbedingt nötigen Ausstattungsmerkmalen gespart worden. Der Papiereinzug erfolgt nur mechanisch und erfordert zunächst einige Übung, funktioniert dann aber problemlos. Es fehlen eine Halbschrittaste und ein Andruckregler.

Nach dem Einschalten herrscht wohltuende Ruhe, das bei manchen Konkurrenzmodellen zu hörende leichte Summen des Elektromotors ist nicht da. Leider vergibt die Maschine diesen Vorteil durch ein recht lautes Geräusch beim Schreiben. Ursache ist sicher die einfache Walze, auf die das Typenrad unbarmherzig schlägt. Unangenehm fällt zusätzlich ein Klacken vor dem Zurückkehren des Typenträgerwagens auf.

Das DIN-Tastenfeld enthält 46 Schreibtasten für 92 Zeichen. Weitere 8 Zeichen sind mit der Mehrfachbelegungstaste erreichbar. In Abhängigkeit vom verwendeten Typenrad kann in Picaschrift oder Eliteschrift (serienmäßig ist Prestige-Cubic, Bild 2) geschrieben werden. Fünf programmierbare Tabulatorstopps und ein Dezimaltabulator erleichtern die Arbeit. Beim Ausschalten werden die neuen Randpositionen und Tabulatoreinstellungen gelöscht. Auch große Umschläge und querliegende DIN-A4-Bogen lassen sich einspannen. Automatisches Unterstreichen und rechtsbündiges Schreiben sind leider nicht möglich. Typenrad und Farbbandkassette lassen sich leicht wechseln.

Die Gabriele 8008 L wird mit V.24-Schnittstelle und mit VC-Interface zum Anschluß an Commodore-Computer angeboten. In der getesteten Ausführung war das VC-Interface eingebaut. Verbunden werden Computer und Gabriele 8008 L mit einem 120 cm langen Kabel, das im Lieferumfang enthalten ist. Der Drucker wird über die Geräteadresse 4 angesprochen. Aber auch eine Änderung auf Adresse 5 ist möglich. Durch die Sekundäradressen können Cursor-up-, Cursor-down- und Original-Modus eingestellt werden. Die 8 zusätzlichen Zeichen der Schreibmaschine lassen sich leider nicht ansteuern. Selbstverständlich können auch die Grafikzeichen und die Steuerzeichen nicht ausgedruckt werden. Für den persönlichen Gebrauch haben die Konstrukteure aber für die Kontrollcodes im Cursor-up-Modus eine recht brauchbare Ersatzlösung gefunden (Bild 3). Warum fehlt eine entsprechende Lösung für die Cursorsteuerzeichen? Es wird nicht einmal ein Zwischenraum für nachträgliche Einfügungen ausgedruckt.

Zu beanstanden ist auch, daß ein Ändern der Zeilenlänge, genauer gesagt des rechten Randes, nicht vom Computer aus möglich ist. Das hat schlimme Folgen, wenn man versucht, über diesen Rand hinweg drucken zu wollen: Diese Zeichen werden einfach verschluckt. Das gilt auch für Listings, deren Basic-Zeilen länger als 65 Zeichen sind. Abhilfe schafft man nur, indem der rechte Rand manuell über die Schreibmaschinentastaturgeändert wird. Die Gabriele 8008 L zeigt hier also das typische Verhalten einer Schreibmaschine.

Ansonsten arbeiten Schreibmaschine und Interface mit den gängigen Textverarbeitungsprogrammen problemlos zusammen. Natürlich kann das Interface nicht mehr als das Textverarbeitungsprogramm. Wenn die Umlaute im Programm fehlen, muß man eben darauf verzichten!

Zu den schnellen Druckern gehört die Gabriele mit 10 Zeichen pro Sekunde ganz sicher nicht. Entsprechend seiner Herkunft von einer Schreibmaschine ist dem Drucker der bidirektionale Druck verwehrt. Eine engbeschriebene Seite im DIN-A4-Format braucht so schon ihre zehn Minuten, genug Zeit für eine Kaffeepause im Nebenraum, um so dem lästigen Lärm zu entgehen. Von Nachteil ist auch, daß das Interface nicht über einen Puffer verfügt. Der Computer ist also für die Zeit des Druckens blockiert!

Zusammengefaßt läßt sich sagen, daß die Gabriele 8008 L mit Interface wegen der doppelten Nutzbarkeit als Schreibmaschine und als Schönschreibdrucker ein sehr günstiges Preis/Leistungsverhältnis bietet. Die aufgeführten Komfortmängel kann man unter Berücksichtigung des relativ niedrigen Preises und des hervorragenden Schriftbildes akzeptieren.

(Dieter Hein/gk)

Info: Triumph-Adler AG, Fürther Straße 212, 8500 Nürnberg, Tel. 0911/333-0

# Uchida DWX 305—Klappern gehört zum Handwerk \[37-38]

> Der Typenraddrucker, der nicht mehr zu hören ist, muß erst noch erfunden werden. Dennoch überrascht der DWX 305 mit relativ niedrigem Geräuschpegel und einer Schriftqualität, die jenseits von Gut und Böse liegt.

Den Eindruck, den der DWX 305 (Bild 1), nicht nur auf dem Papier, hinterläßt, ist bestechend. Kein Wunder, denn als Typenraddrucker braucht er sich im Gegensatz zum Matrixdrucker keine Gedanken darüber zu machen, wie ein Buchstabe aussieht. Die ihm zur Verfügung stehenden 96 Zeichen sind alle auf einem runden Ty penrad angeordnet. Zusammen mit dem nur einmal verwendbaren Carbonband aus der Farbbandkassette (zirka 25 Mark) verleihen sie dem DWX 305 eine gestochen scharfe Schrift (Bild 2).

## Der Spezialist

Als typischer Spezialist hat der DWX 305 seine Stärken und Schwächen. Während Schönschrift seine Domäne ist, sind ihm Begriffe wie Grafik oder Zeichnen fast vollkommen unbekannt. Er wurde für die Textverarbeitung konstruiert. Dafür ist er allerdings bestens ausgestattet. Er verarbeitet sowohl Papier im DIN-A4-Längsformat, als auch solches mit einer Breite bis zu 33 Zentimetern (DIN A4 quer). Auf dieser Papierbreite lassen sich, je nach Zeichendichte, 120, 144 oder sogar 180 Zeichen unterbringen. Leider bleibt es dem Anwender überlassen, dem Drucker mitzuteilen, wann er in eine neue Zeile springen soll. Verwendet man nämlich Papier, das kleiner als die Druckwalze ist, kann es leicht passieren, daß der Druckkopf plötzlich ins Leere hämmert. Es gibt beim DWX 305 keine Möglichkeit, die Papierbreite einzustellen. Manche andere Drucker verwenden hierzu einen speziellen Schalter oder besitzen zumindest einen Steuercode zum Einstellen des rechten Randes. Die praktikabelste Lösung dieses Problems ist es, schon beim Anfertigen des Textes darauf zu achten, nicht mehr Zeichen zu schreiben, als auf dem Papier unterzubringen sind. Wird der DWX 305 zusammen mit einem Textverarbeitungsprogramm eingesetzt (was der Regelfall ist), braucht man sich darüber glücklicherweise keine Gedanken machen, denn die Kontrolle der Textbreite wird vom Programm übernommen. Die Druckgeschwindigkeit beträgt dabei höchstens 18 Zeichen pro Sekunde, wenn keine Sonderfunktionen wie Fettdruck, Schattenschrift oder das Unterstreichen gewählt werden.

## Drucker für Geduldige

Mischt man allerdings mehrere dieser Druckfunktionen, beispielsweise, um wichtige Textpassagen hervorzuheben, reduziert sich die Druckgeschwindigkeit erheblich. Da bei einem Zeichen dann bis zu viermal angeschlagen wird, braucht man sehr viel Geduld. Zum Vergleich: Ein guter Matrixdrucker schafft in der Regel mehr als hundert Zeichen pro Sekunde, allerdings mit meist wesentlich schlechterem Schriftbild. Als Papierantrieb dient dem DWX 305 in der Standardausführung ein Friktionsantrieb (Papiertransport durch Gummiwalze). Zusätzlich erhältlich sind ein Einzelblatteinzug (799 Mark) und ein aufsetzbarer Traktor für Papier mit Lochrand (299 Mark). Der Einbau beider Zusatzgeräte ist, ebenso wie die gesamte Handhabung des Druckers, einfach und kann auch vom technisch Ungeübten vorgenommen werden. Damit eine Fehlbedienung ausgeschlossen ist, befinden sich am DWX 305 zwei Schalter und eine Lichtschranke auf dem Druckkopf. Es ist somit schwer möglich, mit falsch eingelegtem Papier, geöffnetem Gehäusedeckel oder verbrauchtem Farbband zu arbeiten. Der Drucker zeigt alle Fehlfunktionen durch die ERROR-Taste auf der Gehäusevorderseite an. Mit ihr macht man den Drucker nach einer Störung auch wieder betriebsbereit. Neben der ERROR-Taste und den drei üblichen Tasten für ON/ OFF-Line, Zeilen- und Seitenvorschub findet man auch eine Taste mit dem Namen SET PAGE. Mit ihr kann der Beginn einer Seite neu eingestellt werden (das interne Zeilenzählregister wird gelöscht). Der Selbsttest des DWX 305 wird durch eine separate Taste im OFF-Line-Modus ausgelöst.

## Anschluß am C 64

Die Hersteller haben den DWX 305 ab Werk mit einer Centronics-, oder wahlweise mit einer RS232-Schnittstelle ausgestattet. Für den Anschluß an den C 64 empfiehlt sich die Centronics-Version. Zum einen ist sie mit 1349 Mark etwas billiger als die serielle Version (1499 Mark). Zum anderen genügt ein einfaches Userport-Kabel und eine Software-Schnittstelle, wie sie beispielsweise in Vizawrite 64 einprogrammiert ist. Wer den DWX 305 gerne am seriellen Port betreiben möchte, kann sich mit dem einfachsten Interface begnügen, denn Sonderfunktionen wie Grafik oder eine Umsetzung der Commodore-Steuerzeichen sind bei einem Typenraddrucker ohnehin sinnlos. Trotzdem stehen dem Besitzer eines DWX 305 eine Reihe verschiedener Schriften zur Verfügung — durch Austausch des Typenrades. Zur Auswahl steht ein weites Spektrum verschiedenster Schriftarten, denn die weit verbreiteten Qume-Typenräder passen ausgezeichnet.

Obwohl der Befehlssatz des DWX 305 nicht gerade üppig ist, besitzt er, mit Ausnahme der rechten Randeinstellung, alle wichtigen Steuercodes. In Verbindung mit manchen Textverarbeitungsprogrammen ist sogar ein Ausdruck in proportionalem Zeichenabstand möglich, denn die vertikale Druckposition eines Zeichens läßt sich vom Computer aus genau festlegen. Eine bisher bei anderen Druckern wenig verbreitete Besonderheit des DWX 305 ist seine variable Anschlagstärke. Durch zwei DIL-Schalter auf der Gehäuserückseite kann zwischen weichem, mittleren und hartem Anschlag selektiert werden. Damit wird nicht nur die Geräuschentwicklung des Druckers maßgeblich beeinflußt, sondern auch die Qualität der drei möglichen Durchschläge.

## Profi für zu Hause

Obwohl der DWX 305 sicherlich auch manchem kleineren Unternehmen bei seinen täglichen Schreibarbeiten dienlich sein könnte, macht ihn sein relativ günstiger Preis (1349 Mark inklusive MwSt) auch für die private Nutzung interessant. Dabei sollte natürlich beachtet werden, daß auch der DWX 305, wie alle Typenraddrucker, zur ausschließlichen Textwiedergabe geeignet ist. Wer nicht all zu hohe Ansprüche an die Schreibgeschwindigkeit stellt, findet im DWX 305 einen zuverlässigen Drucker zu günstigem Preis.

(Arnd Wängler/gk)

Info: Synelec Datensysteme GmbH, Postfach 1517 27, 8000 München 15, Tel. 0 89/7 25 30 81

# Marktübersicht: Typenraddrucker und Schreibmaschinen \[38-39]

> Die »Schönschreibdrucker« werden ständig billiger. Grund für uns, Ihnen mit einer Marktübersicht eine Einkaufshilfe zu geben.

Typenraddrucker funktionieren ähnlich einer elektrischen Schreibmaschine — einige sind sogar komplette Schreibmaschinen. Über eine Magnetspule mit einem Bolzen werden die einzelnen Typen aufs Papier geschlagen. Eine laute und langsame Angelegenheit also. Die Schriftqualität ist aber dafür hervorragend. Auch sind mehr Durchschläge als bei Matrixdruckern möglich.

### Worauf sollte man achten?

Einmal auf das Einsatzgebiet des Druckers. Ein Typenraddrucker lohnt sich erst dann, wenn Sie ständig Briefe mit Ihrem Computer schreiben wollen und die Korrespondenz über ein ausgezeichnetes Schriftbild verfügen soll. Denn für den Ausdruck nur von Listings sind diese Drucker zu teuer und für HiRes-Bilder nur bedingt geeignet. Meist verwenden sie sogar ein Plastik-Carbonband, das nach einem Durchlauf gegen ein neues ersetzt werden muß. Der Druck einer Punktgrafik des C 64 dauert mit einem Typenraddrucker etwa eine halbe bis eine ganze Stunde (320x200 Punkte). Vorausgesetzt, punktweiser Zeilen- und Spaltenvorschub ist möglich und man hat ein entsprechendes Programm. Die Abnutzung der Punkt-Type dürfte dabei allerdings sehr groß werden. Zusammenfassend kann man sagen, daß Sie mit einem Typenraddrucker richtig beraten sind, wenn Sie fast ausschließlich Texte mit ausgezeichneter Qualität drucken wollen.

In der folgenden Marktübersicht stellen wir Typenraddrucker und Schreibmaschinen vor, die sich auch als Drucker eignen. Die Preisgrenze haben wir bei 2 000 Mark inklusive Interface gezogen.

(hm)

# Der erste Kontakt mit DFÜ \[40-42]

> Daten durch das Telefon zu schicken, ist einfacher als man denkt. Ein Neuling in Sachen DFÜ schildert seine Erfahrungen.

Viele Mailboxen setzen Wissen voraus, das derjenige, der beabsichtigt, sich mit der Datenfernübertragungzu beschäftigen, in der Regel nicht hat. Hinzu kommen noch Anleitungen für Hard- und Software, die ebenfalls etwas Neues darstellen. Jeder kennt das Problem: Alles ist richtig angeschlossen, aber nichts funktioniert. Der Grund ist, daß neue Programme unzureichend bekannt sind.

## Der erste Kontakt mit einer Mailbox

Deshalb las ich mir die Anleitung zum Terminalprogramm genau durch und notierte mir die CTRL-Sequenzen, die für die Kommunikation mit einer Mailbox wichtig sind. Bevor das Terminalprogramm geladen werden konnte, mußte ich den C 64 hardwaremäßig für die Datenfernübertragung vorbereiten, indem ich ihn über em RS232-Interface am User-Port mit dem Akustikkoppler verband, der laut Anleitung auf »originate« einzustellen ist. Es war mir nicht möglich, eine Erklärung für das Wort »originate« zu finden. In dem Handbuch zum Terminalprogramm (Terminal 64) stand nur folgendes:

»In der Betriebsart »Vollduplex« verwenden Sender und Empfänger unterschiedliche Bereiche (Originate/Answer). Für den Benutzer ist hier nur wichtig zu wissen, daß sein Modem jeweils entgegengesetzt der Einstellung seines Verbindungspartners sein muß.« Zitat Ende.

Nach dem Laden und Starten des Terminalprogramms erschien dessen Hauptmenü auf dem Bildschirm. Im Untermenü »Parameter einstellen« überzeugte ich mich davon, daß die Parameter mit denen des Handbuches übereinstimmten. Das heißt:
**Baudrate: 300 (300 Bit/Sekunde)**
**Anzahl der Daten-Bits: 7**
**Übertragungsmodus: Vollduplex**

Vollduplex bedeutet: Alle über die Tastatur eingegebenen Zeichen werden nicht unmittelbar, wie üblich auf dem Bildschirm dargestellt, sondern über den Akustikkoppler an die Mailbox gesendet, die dann ihrerseits jedes Zeichen wieder zurückschickt. Erst die zurückgeschickten Zeichen erscheinen auf dem Bildschirm. Dadurch kann der Sender kontrollieren, ob die gesendeten Zeichen richtig beim Empfänger angekommen sind.
**Parität: keine**

Das Paritäts-Bit entfällt. Wenn Parität auf gerade gestellt wird, werden alle Bits, die auf Eins stehen, addiert. Ist die Summe gerade, wird das Paritäts-Bit auf Null gesetzt, so daß die Quersumme des Datenwortes plus Paritäts-Bit immer eine gerade Zahl liefert.

Wird dem Empfänger eine ungerade Zahl angeboten, so schließt er daraus, daß die Übertragung fehlerhaft war.
**Stop-Bit: 1**

Jedem Datenwort wird ein Bit als Anhängsel angefügt, um Sender und Empfänger zu synchronisieren. Fehlt das Stop-Bit, so kann das Ende und der Anfang eines Datenwortes nicht erkannt werden.

Nachdem das Terminalprogramm geladen und die Parameter richtig eingestellt waren, stand dem ersten Datentransfer nichts mehr im Weg. Durch die Tastenkombination CTRL-← kam ich wieder zurück ins Hauptmenü und wählte durch das Untermenü »online« den Sende- und Empfangsbetrieb. Der Bildschirm wurde bis auf eine Informationszeile, in der Angaben über den momentanen Betriebszustand stehen, gelöscht. Weiter war nichts zu sehen. Auch der vertraute blinkende Cursor war verschwunden. Voller Zuversicht wählte ich die erste Mailboxnummer. Im Telefon war nur das Besetztzeichen zu hören. Ich wählte die nächste Mailboxnummer. Wieder war besetzt. Dieses wiederholte sich etwa 10 Minuten lang, bis ich bei einer Mailbox durchkam. Daß ich mit einer Mailbox verbunden war, erkannte ich daran, daß im Telefon ein langanhaltender Piepton zu hören war. Schnell legte ich den Hörer in die dafür vorgesehenen Gummimuffen des Akustikkopplers. Kaum war das geschehen, da rasten die ersten Zeichen mit einer Geschwindigkeit von 300 Baud über den Bildschirm. Nur mit Mühe konnte ich den an mir vorbeiflitzenden Text lesen, der Informationen über die Benutzeranweisungen der Mailbox enthielt. Ich versuchte mir diese Informationen zu notieren, mußte jedoch schnell feststellen, daß es unmöglich ist, bei einer Übertragungsgeschwindigkeit von 300 Baud (Bit pro Sekunde) mitzuschreiben. Um die Benutzerhinweise nicht zu verpassen, machte ich von der Möglichkeit Gebrauch, den Datentransfer mit der Taste CTRL-S anzuhalten, notierte mir das, was mich interessierte und nahm den Datentransfer mit der Taste CTRL-Q wieder auf. Nachdem die Benutzeranweisungen an mir vorbeigerauscht waren, erwartete die Mailbox die Eingabe einer Benutzernummer, über die ich als Anfänger nicht verfügte. Ich versuchte es mit dem Wort »gast«. Als Gast war es mir im Gegensatz zu einem Anwender mit Benutzernummer, also einem eingetragenem Benutzer, nicht immer möglich, über die im System gespeicherten Programme zu verfügen. Auch ist der eingetragene Benutzer in der Lage Informationen abzurufen, die nur für ihn bestimmt sind. Ich tippte also das Wort »gast« ein. Kaum war es eingegeben, da ging die Post ab und das Hauptmenü der Mailbox erschien auf dem Bildschirm, was nicht immer der Fall ist. Häufig muß man, um ins Hauptmenü zu gelangen, RETURN, HELP, oder ein Fragezeichen eingeben. Ich wurde aufgefordert eines der zahlreichen Untermenüs anzuwählen und entschied mich für den Programm-Service, gab die entsprechende Zahl ein und sollte aus einigen aufgeführten Terminalprogrammen mein eigenes angeben. Leider war mein Programm nicht dabei. Da mich aber gerade der Programm-Service interessierte, gab ich ein anderes Terminalprogramm an. Der Erfolg war, daß mein Computer nichts mehr von sich gab. Ich versuchte die Verbindung ordnungsgemäß mit der Taste CTRL-X abzubrechen. Aber es passierte nichts. Auch der Versuch mit der Tastenkombination CTRL-←, mit der man bei vielen Ter-

## Lassen sich Mailboxen überlisten?

minalprogrammen zurück ins Hauptmenü gelangt, scheiterte. Offenbar war der C 64 abgestürzt. Ich war gezwungen, die Verbindung mit Gewalt abzubrechen, indem ich den Hörer auflegte, den Computer ausschaltete und das Terminalprogramm neu lud. Die weiteren Versuche, eine Mailbox anzurufen, verliefen mehr oder weniger erfolgreich.

Hin und wieder kam es vor, daß Mailboxnummern, die aus einer Mailbox stammten, Privatanschlüsse waren. Deshalb sind diese Telefonnummern mit Vorsicht zu genießen. Es ist für die Betroffenen nun einmal sehr unangenehm, mitten in der Nacht aus dem Bett geklingelt zu werden.

## Lehrreiche Erfahrungen

Die Praxis hat gezeigt, daß sich Mailboxen nach dem ersten Freizeichen melden. Wenn die Leitung frei ist und die Mailbox meldet sich nicht nach dem ersten Freizeichen, handelt es sich entweder um eine Box die nur zeitweise betrieben wird oder man hat einen Privatanschluß vor sich.

Die meisten Terminalprogramme haben einen Modus, mit dem sich die empfangenen Daten auf Diskette abspeichern lassen. Leider verfügt nicht jede Mailbox über diese dem Anfänger sicherlich zu empfehlende Einrichtung.

Der Grund dafür ist, daß der C 64 die ankommenden Daten bis zu einer Länge von 5 KByte speichert und sie dann als Block auf Diskette schreibt. Während dieses Schreibvorgangs können keine Daten empfangen oder gesendet werden. Dieser Zustand wird der Mailbox über ein Stoppzeichen mitgeteilt. Einige Boxen können dieses Stopp-Zeichen nicht interpretieren und ignorieren es.

Daher kann es leicht passieren, daß der sogenannte Timeout erreicht wird, eine Zeitspanne, die bei den meisten Mailboxen zwischen 30 Sekunden und einer Minute liegt. Ist diese Zeitspanne überschritten, bricht die Mailbox die Verbindung ab, da sie annimmt, daß der Kommunikationspartner aufgelegt hat.

Ist eine bestimmte Mailbox besser bekannt, bietet sich eine Möglichkeit an, Gebühren zu sparen. Mit der Tastenkombination CTRL-C können bei einigen Mailboxen Systembeschreibungen und Menüunterpunkte übersprungen oder abgebrochen werden.

Auch beim Schreiben in die Mailbox (Briefkasten) kann man viel Zeit und Geld sparen, indem man nicht im Online-Modus (Sende-/Empfangsbetrieb) Texte eintippt, sondern den Editor des Terminalprogramms benutzt. Er gleicht von seiner Bedienung her einem Textverarbeitungsprogramm. Die fertigen Texte werden auf Diskette abgespeichert und können im Online-Modus direkt von der Diskette in die Mailbox geschrieben werden.

Jedes Terminalprogramm verfügt über die Möglichkeit, die Funktionstasten mit Texten zu belegen. Hier können zum Beispiel häufig benötigte Benutzernummern oder Adressen abgelegt werden.

Tauchen während einer Verbindung mit einer Mailbox Schwierigkeiten und Probleme auf oder werden Mängel an der Mailbox festgestellt, bieten die meisten Mailboxen ein Untermenü an, mit dem man sich direkt über den Computer mit dem Systemoperator in Verbindung setzen kann. Der Systemoperator ist derjenige, der für die Mailbox verantwortlich ist. Kann man ihn nicht direkt erreichen, besteht die Möglichkeit, ihm in einer Art Briefkasten Nachrichten zu hinterlassen. Auch Anfänger sollten nicht davor zurückschrecken, sich bei auftretenden Problemen an den Systemoperator zu wenden. Denn nur durch solche Nachrichten und Informationen kann man erreichen, daß die Mailboxen, die sich bis jetzt noch im Versuchsstadium befinden, oder für Anfänger (und auch für Profis) »Stolpersteine« darstellen, sprich über eine unklare Benutzerführung verfügen, verbessert und optimiert werden. Es gibt sogar Mailboxen, die erst nach der richtigen Beantwortung grundlegender Fragen zur Mailboxbenutzung den Zugang zur eigentlichen Mailbox erlauben.

## Datenfernübertragung ohne Mailbox

Jeder der über einen Computer mit RS232-Interface und Akustikkoppler verfügt, kann per Telefon mit anderen Computern ähnlicher Gerätekonfiguration über eine geeignete Treibersoftware (Terminalprogramme) kommunizieren. Dazu ist einer der Akustikkoppler auf »originate«, der andere auf »answer« einzustellen. Es spielt dabei keine Rolle, welcher von beiden auf »answer« und welcher auf »originate« steht. Der Akustikkoppler, der auf »answer« eingestellt ist, sendet nach Zustandekommen einer Verbindung einen Ton. Der Akustikkoppler, der auf »originate« eingestellt ist, antwortet mit einer Folge von Impulsen, die Informationen über die Parametereinstellungen enthalten. Dadurch ist zum Beispiel eine Mailbox in der Lage, sich an die Parametereinstellung (Baudrate, Parity, Stop-Bit etc.) eines Akustikkopplers anzupassen. Zwei miteinander kommunizierende Computer können dies nicht, da Terminalprogramme die Folge von Impulsen, die Informationen über die Parametereinstellungen enthalten, nicht auswerten. Deshalb ist, wenn zwei Computer miteinander verbunden sind, besonders darauf zu achten, daß die Parameter übereinstimmen. Sonst kann es leicht passieren, daß plötzlich wirre, zusammenhanglose Zeichen auf dem Bildschirm erscheinen. Es ist dann aber nicht erforderlich, den Computer auszuschalten, oder die Verbindung abzubrechen. Denn während man sich im Online-Modus befindet, kann man bei vielen Terminalprogrammen mit der Tastenkombination CTRL—← ins Hauptmenü gelangen, von dort das Menü »Parametereinstellen« anwählen, die Parameter ändern und dann in umgekehrter Reihenfolge wieder in den Online-Modus gelangen. Wenn zwei Computer über das Telefon miteinander verbunden sind, bietet es sich natürlich auch an, Programme oder Listings auszutauschen. Um diesen Datentransfer zeitlich zu verkürzen, sollte versucht werden, den Austausch mit einer höheren Baudrate abzuwickeln. Bei 1200 Baud ist laut Aussage von Experten eine fehlerfreie Übertragung noch gewährleistet, vorausgesetzt, die Verbindung ist einwandfrei oder der Kommunikationspartner ist nicht allzuweit entfernt. Während man zum Beispiel für ein 30 KByte langes Programm bei 300 Baud etwa 18 Minuten benötigt, verkürzt sich die Übertragungszeit bei 1200 Baud auf etwa 4,5 Minuten.

Die Datenfernübertragung befindet sich heutzutage noch im Anfangsstadium. Sicherlich hat sie in Zukunft einen hohen gesellschaftlichen Stellenwert und auch ihren Nutzen sowohl im privaten als auch im kommerziellen Bereich. Aber schon heute ist der Entwicklungsstand der Mailboxen so weit fortgeschritten, daß es Spaß macht mit ihnen zu arbeiten. Jeder der über die entsprechende Soft- und Hardware verfügt, kann dort reichlich Informationen abrufen und das häufig 24 Stunden am Tag. Das Angebot der Mailboxen reicht von Mailboxzeitungen bis hin zu fertigen Programmen. In sogenannten Briefkästen können Nachrichten geschrieben und von jedem abgerufen werden. Für den Computerfreak stellen sie eine reiche Fundgrube dar. Hier wird alles angeboten, was in irgendeiner Form etwas mit dem Computer zu tun hat. Mich als Anfänger hat dieses Medium von Anfang an fasziniert.

(ah)

# Terminalprogramme \[42-43]

> Wie überall braucht man auch in der Datenfernübertragung gute Werkzeuge. Ein solches Werkzeug ist für die DFÜ das Terminalprogramm.

Das richtige Terminalprogramm auszuwählen, ist nicht so einfach, wie es auf den ersten Blick scheint. Für den Anwender ist es oft sehr schwer, die Spreu vom Weizen zu trennen. Eine Hilfe bieten bei der Entscheidung unsere Tests und unsere Marktübersicht. Nicht immer werden sich Fachausdrücke umgehen lassen. Für alle, die noch einmal genauer nachlesen wollen, haben wir auf Seite 44 ein kleines DFÜ-Lexikon abgedruckt.

Ein Terminalprogramm steuert die Kommunikation zwischen zwei Computern. Es ist in den meisten Fällen nicht von einem bestimmten Akustikkoppler oder Modem abhängig. Eine Ausnahme stellt zum Beispiel der »Ascom-Akustikkoppler« dar. Er wird nicht wie andere Koppler über den User-Port angeschlossen. Der Anschluß erfolgt über den Expansion-Port und erfordert deshalb eine andere Ansteuerung. Ein Terminalprogramm für dieses Gerät ist im Kaufpreis inbegriffen.

Gute Terminalprogramme bieten dem Benutzer die Möglichkeit, bestimmte Übertragungsparameter einzustellen. Der DFÜ-Neuling wird von diesen Einstellmöglichkeiten aber meist überfordert. Er sei an dieser Stelle auf den Artikel »DFÜ für Anfänger« hingewiesen.

Bevor wir jetzt zu den Tests kommen, noch ein wichtiger Hinweis: Achten Sie beim Kauf von Terminalprogrammen immer darauf, um welche Version es sich handelt! In der Vergangenheit sind einige dieser Programme innerhalb kurzer Zeit mehrmals verbessert oder erweitert worden. Dies wird von den Programmierern meist durch eine Erhöhung der »Versionsnummer« gekennzeichnet. Erkundigen Sie sich also möglichst vor dem Kauf bei Freunden oder beim Hersteller, welche Version die aktuellste ist. So sind Sie sicher, kein »veraltetes« Programm zu erwischen. Nun zu der Vorstellung zweier neuer Terminalprogramme.

Bei dem Programm »Dataterm 64« können Sie, wie bei den meisten Terminalprogrammen, zwischen deutscher und englischer Bedienerführung wählen. Nachdem die gewählte Sprache geladen ist, werden Sie aufgefordert, eine formatierte Datendiskette einzulegen. Diese wird für zwei Funktionen benötigt. Zum einen wird auf ihr, soweit man dies wünscht, der Dialog mit dem anderen Computer, zum anderen die Funktionstasten-Belegung abgespeichert.

## Dataterm 64

Die Grundeinstellung des Programms weist folgende Parameter auf: 300 Baud, 7 Datenbits, 1 Stop-Bit, 3-Draht-(Line-)Handshake und Vollduplex-Betrieb.

Der Pufferspeicher für übertragenen Text beträgt zirka 5 000 Byte. Ist dieser gefüllt, wird zum Abspeichern automatisch ein »CTRL S« an die Gegenstelle gesendet, um den Datenfluß zu stoppen. Besitzt die Gegenstelle keine solche Stopp-Funktion, so wird dies dem Benutzer durch Dataterm 64 mitgeteilt. Nach dem Speichervorgang wird der Gegenstelle mit »CTRL Q« das Signal zum weiteren Senden gegeben. Während des Online-Betriebes kann der Speichervorgang mit der Pfeil-hoch-Taste abgebrochen und wieder aufgenommen werden.

Weitere Angaben zum Programm entnehmen Sie bitte unserer Marktübersicht.

Im Testbetrieb hat sich Dataterm 64 bewährt. Die Benutzerführung ist einfach zu bedienen und schnell erlernbar. Bei der Datenübertragung tratenkeine vom Programm bedingten Übertragungsfehler auf. Der Preis ist mit 49,90 Mark als äußerst günstig zu bezeichnen.

## Multicom 64 Version 1.3

Multicom 64 von Software Express gilt als der Nachfolger der Teleterm-Reihe. Es ist komplett in Maschinensprache geschrieben. Besonders erwähnenswert ist die ausführliche, gut verständliche Beschreibung, obwohl es sich derzeit noch um eine Vorversion handelt.

Die Parametereinstellung ist folgende: 300 Baud, 7 Datenbits, ein Stop-Bit, gerade Parität. Fürden Fall, daß diese Parametereinstellung nicht die richtige ist (erkennbar an unverständlichen Zeichen auf dem Bildschirm), bietet Multicom 64 eine Besonderheit. Mit dem Befehl »Auto-Logon« können Sie automatisch Übertragungsparameter ausprobieren. Das Programm sucht sich dann die passenden Parameter und stellt sie ein.

## Automatische Parametereinstellung

Das Haupt- und die Untermenüs bieten 47 einzelne Menüpunkte an. Zusätzlich gibt es noch sechs weitere Hilfsbefehle, die nicht in den Menüs aufgeführt werden. Unter diesen Befehlen befindet sich ein komfortabler Text-Editor, der fast schon einer Textverarbeitung gleicht. So verfügt er zum Beispiel auch über einen Zeilenumbruch. Das bedeutet, daß ein Wort, das nicht mehr in eine Zeile paßt, automatisch in die nächste Zeile geschoben wird.

Auch bei Multicom sind die Funktionstasten belegbar. Die Belegung kann auf der Datendiskette abgespeichert werden. Weiterhin verfügt das Programm über UPLOAD (Senden von Basic-Programmen) und DOWNLOAD (Empfangen von Basic-Programmen).

Zu erwähnen bleibt noch, daß der Benutzer sich von diesem Programm eine Telefonnummerndatei anlegen kann, die vom Programm aufrufbar ist. Der relativ hohe Preis von 198 Mark (inklusive Interface) für dieses Programm kann wegen seiner guten Leistungsmerkmale gerade noch als gerechtfertigt angesehen werden.

Negativ ist allerdings zu bemerken, daß dieses Programm nur zusammen mit der Software Expreß-Schnittstelle arbeitet. Wer also schon im Besitz einer RS232-Schnittstelle ist, sollte sich für ein anderes, mit ähnlichen Leistungsmerkmalen ausgestattetes Programm (zum Beispiel »Terminal 64«, Test 64'er Ausgabe 2/85) entscheiden.

(rg)

TODO ASIDE

HSV-Streber
Pettenkoferstr. 24
8000 München 2
(0 89) 53 49 03

Stockem Computertechnik
Berghausen 13
5778 Meschede
(0291) 1221

Software Express GmbH
Hugo-Viehoff-Straße 84
4000 Düsseldorf 30
(0211) 42 43 23)

CTK Computer-, Text- und Kommunikations-Systeme GmbH
Langenbrück 20
5060 Bergisch Gladbach 1
(02204)63061

Electronic Universe A. Voigt-U Wenk
Hindenburgstr. 98
2120 Lüneburg
(0 4131) 3 27 60 + 3 78 76

Computer Related Products
Claus F. Erbrecht
Lappenbergsallee 37
2000 Hamburg 20

Dynamics Marketing GmbH
Große Bäckerstr. 11
2000 Hamburg 1
(0 40)36 6147

Fotoelektronik Immo Drust
Landwehrstr. 5
6100 Darmstadt

TODO END ASIDE

# DFU — Was ist das? \[44]

### Modem

Datenübertragungseinrichtung, die direkt an das Telefonnetz angeschlossen wird, also nicht über den Telefonapparat.

### Akustikkoppler

Datenübertragungseinrichtung, die über das Telefon an das Postnetz angeschlossen wird. Erkennbar sind Akustikkoppler an den Gummimuffen für die Aufnahme des Telefonhörers.

### Handshaking

»Handshaking« bezeichnet den Vorgang des Aussendens von Daten und des Wartens auf die Empfangsbestätigung des Computers, mit dem man den Datenaustausch vornimmt.

### Simplex

Wenn auf einer Datenübertragungsleitung Daten nur in einer Richtung übertragen werden können, bezeichnet man dies als Simplexbetrieb. Dieses Verfahren wird wegen der fehlenden Rückmeldemöglichkeiten jedoch selten angewandt.

### Halbduplex

Im Halbduplexbetrieb bestätigt der empfangende Computer den Empfang der Daten.

### Vollduplex

Im Vollduplexbetrieb können beide Computer gleichzeitig senden. Weiterhin wiederholt der empfangende Computer die Daten und sendet sie an den ersten Computer zurück. Stimmen diese Daten überein, wird das nächste Byte gesendet. Sind sie nicht korrekt, werden sie wiederholt.

### Baud-Rate

Die Baud-Rate bezeichnet die Geschwindigkeit mit der Daten übermittelt und empfangen werden. 300 Baud bedeutet, daß 300 Bits pro Sekunde übertragen werden.

### Paritätsbit

Um die Übertragungssicherheit zu erhöhen, wird jedes Byte durch ein zusätzliches Bit ergänzt. Die Ergänzung erfolgt so, daß die Summe der gleichartigen Binärzustände (0 oder 1) eine ungerade oder gerade Zahl ergibt. Wird kein Bit ergänzt, so hat die Übertragung keine Parität.

### Start/Stop-Bits

Einige Computer verlangen die Übertragung einer bestimmten Anzahl von Null-Bits nach jedem Byte. Die Benutzung von je einem Stop-Bit und einem Start-Bit ist am häufigsten.

### Treibersoftware, Terminalprogramm

Mit Treibersoftware oder Terminalprogramm bezeichnet man die Programme, die die Datenübertragung steuern. Mit ihnen wird zum Beispiel die Übertragung von Stop-, Start- und Paritäts-Bits eingestellt und gesteuert.

### Mailbox

Eine Mailbox ist eine Art elektronischer Briefkasten. Es wird zwischen drei Kategorien unterschieden:

1.	Öffentliche Mailboxen (Zutritt für jedermann)
2.	Private Mailboxen (Zutritt nur für eingetragene Benutzer)
3.	Gemischte Mailboxen (öffentlicher und privater Bereich).

Alle drei Kategorien können gewerblichen Charakter haben. Im gewerblichen Bereich dienen Mailboxen oft zur Aufnahme von Bestellungen.

### Sysop

Der System-Operator ist der Betreiber einer Mailbox oder die Aufsicht am Mailbox-Computer.

### Übertragungs-/Eingangsprotokoll

Mit diesem Protokoll werden die Regeln festgelegt, die dem Übertragungsverfahren zugrunde liegen. Erst wenn beide Computer manuell oder automatisch auf das gleiche Übertragungsprotokoll eingestellt sind, kann eine sinnvolle Datenübertragung beginnen.

### Timeout

Der Timeout ist die Zeitspanne, die eine Mailbox auf die Eingabe des Benutzers wartet, bevor sie annimmt, daß der Benutzer die Verbindung beendet hat. Die Telefonverbindung wird dann auch von der Mailbox beendet, damit die Leitung für den nächsten Anrufer zur Verfügung steht.

### Gesamtzeitlimit

Das Gesamtzeitlimit ist das Zeitkonto des Benutzers innerhalb des Computersystems, mit dem er Kontakt aufgenommen hat. Erreicht der Anrufer sein Zeitlimit, wird die Verbindung automatisch beendet. Es soll verhindert werden, daß einzelne Benutzer einen Computer stundenlang blockieren. Das Zeitlimit von »eingetragenen Benutzern« ist meist größer bemessen, als das von »Besuchern«.

### Answer/Originate

Wenn Sie mit einem Computer Verbindung aufnehmen, muß Ihr Modem oder Akustikkoppler auf »Originate« gesetzt sein. Dadurch wird das »Einführungsprotokoll« begonnen. Kommunizieren Sie direkt mit einem Computer, muß der eine im »Originate-«, der andere im »Answer-Modus« sein. Ist die Verbindung aufgebaut, spielt der Modus keine Rolle mehr.

### Datex-P

Datex-P ist ein Verbindungsnetz der Bundespost. Über zentrale Vermittlungsstellen kann meist über große Entfernung zum Orts-Tarif kommuniziert werden. Siehe auch »Die Netze der Post«, Seite 46.

### Btx

Service-Netz der Bundespost. Ausführlicher siehe auch »Die Netze der Post«, Seite 46.

### Telebox

Die Telebox ist eine von der Bundespost betriebene Mailbox. Sie ist nur für eingetragene Benutzer konzipiert. Siehe auch »Die Netze der Post«, Seite 46.

### ISDN

Mit ISDN (Integrated Services Digital Network) wird der bis 1988 geplante Netzausbau der Bundespost bezeichnet. Siehe auch »Die Netze der Post«, Seite 46.

### 7-Bit-, 8-Bit-Übertragung

Um den ASCII-Code darzustellen, benötigt der Computer nur sieben Bits. Mit dem Ausdruck 7-Bit, 8-Bit-Ubertragungwird angegeben, ob in einem übertragenen Byte sieben Datenbits (also der ASCII-Wert) und ein »Füllbit« (7-Bit-Übertragung) oder sieben Datenbits und ein Paritätsbit (8-Bit-Übertragung) enthalten sind.

### Wortlänge

Die Wortlänge bezeichnet die Anzahl der Bits in einem »Übertragungsbyte« beziehungsweise einer Übertragungseinheit. Sie besteht aus den Datenbits, dem Paritätsbit, dem Startbit und den Stop-Bit(s). Bei acht Datenbits, einem Paritätsbit, einem Startbit und zwei Stop-Bits ist die Wortlänge = 12. Aus »Schlampigkeit« wird in der DFÜ in diesem Fall oft von einem »Byte« gesprochen, obwohl es 12 Bits beinhaltet.

### Datenendeinrichtung

Mit »Datenendeinrichtung« wird das Gerät »am Ende« einer Ubertragungsleitung bezeichnet. Wird die Datenübertragung mit einem C 64 vorgenommen, so ist dieser die Datenendeinrichtung. Ein Modem oder Akustikkoppler ist dagegen ein Datenübertragungsgerät.

(rg)


TODO ASIDE

Sollten Ihnen Begriffe nicht klar geworden sein, oder sollten Sie Begriffe vermissen, die wir in dieser Übersicht nicht berücksichtigt haben, so schreiben Sie uns bitte.

TODO END ASIDE

# Die Netze der Post \[46-51]

> Die Datenfernübertragung mit Computern steckt in Deutschland eigentlich noch in den Kinderschuhen. Deshalb informieren wir Sie umfassend, wasninter den Begriffen Datex-P, Btx und Telebox steckt, und wie Sie diese Einrichtungen nutzen können. Auch die Route für die Zukunft hat die Bundespost schon festgelegt.

Am 31. Dezember 1975 wurde von der Bundespost die FTZ-Prüfnummer 1813138000 an einen Teakholzkasten vergeben. Klappte man diesen Kasten auf, wurden zwei Mulden sichtbar, die einen Telefonhörer aufnehmen konnten. Dieser Kasten war ein Akustikkoppler. Genauer gesagt, der erste Akustikkoppler, der eine FTZ-Prüfnummer bekam.

Der Akustikkoppler im Holzkasten ist heute fast schon ein Museumsstück. In den letzten zehn Jahren haben ihn modernere und billigere Geräte abgelöst. Auch neue DFÜ-Netze sind mittlerweile von der Bundespost eingerichtet worden. So wurde 1980 das Datex-P-Netz eingeführt, 1983 Btx und 1984 die Telebox. Das Gesamtkonzept des weiterhin geplanten Netzausbaus bis 1988 wird mit ISDN bezeichnet. Was sich hinter den Begriffen Datex-P, Btx, Telebox und ISDN verbirgt, und wie man sich an diesen Netzen beteiligt, erfahren Sie im folgenden.

## Datex-P

Am 26. August 1980 begann im gesamten Bereich der Deutschen Bundespost ein zwölfmonatiger Probebetrieb für den Datex-P-Dienst. Direkt im Anschluß an den Probebetrieb wurde Datex-P dann in das feste Angebot der Bundespost übernommen. Doch was ist Datex-P eigentlich?

Datex-P ist ein öffentliches Datenübertragungsnetz, das binäre Daten (zum Beispiel von Computern; andere binäre Daten siehe ISDN) »in Paketen vermittelt«. Bei der Paketvermittlung werden die zu sendenden Daten zu Abschnitten (Paketen) zusammengefügt. Ein Paket kann bis zu 512 Bits enthalten. Ein Datenpaket wird gesendet, sobald es vollständig ist oder es nur noch den »Rest« einer Übertragung enthält. Es wird also nicht jedes Zeichen für sich übertragen, sondern die Zeichen werden zu kleinen Paketen gebündelt. Ist ein Datenpaket gesendet worden, wird die Übertragungsleitung für andere Benutzer freigegeben, bis das nächste Paket des gleichen Benutzers vollständig vorliegt. So wird eine Übertragungsleitung von mehreren Benutzern gleichzeitig verwendet. Man spricht hierbei von einer virtuellen Verbindung. Der Datex-P-Benutzer spürt von der virtuellen Verbindung jedoch überhaupt nichts. Er hat das Gefühl, daß er die Übertragungsleitung ständig zur Verfügung hat.

Berechnet wird jeweils nur die Datenmenge, die im Datex-P-Netz übertragen wird, und die Zeit, während der sich ein Benutzer in das Netz einschaltet. Die Entfernung spielt keine Rolle. So ist es zum Beispiel egal, ob Sie Daten von München nach Nürnberg oder von München nach Hamburg übertragen.

### Bedienung


Um Datex-P zu nutzen, brauchen Sie nur einen Computer, einen Akustikkoppler oder ein Modem und ein Terminalprogramm. Über das Telefon wird dann die nächste Datex-P-Vermittlungsstelle angewählt (Rufnummern siehe Tabelle 1.). Ist die Verbindung hergestellt (der Akustikkoppler oder das Modem schaltet auf READY), muß ein ».«(Punkt) und RETURN eingegeben werden (Dienstanforderungssignal). Die Vermittlungsstelle meldet sich zur Kontrolle dann mit: »Datex-P: 44 xxxx xxxxx«. Hierbei bezeichnet 44 xxxx xxxxx die Datex-P-Rufnummer des erreichten Anschlusses in der Vermittlungsstelle. In München könnte diese Meldung zum Beispiel »Datex-P: 44 8900 49130« lauten.

Die Vermittlungsstelle erwartet jetzt die Eingabe einer NUI (**N**etwork **U**ser **I**dentification) oder NUA (**N**etwork **U**ser **A**dress). Die NUI ist ein Code, der dem System mitteilt, daß Sie die Gebühren der Datenübertragung übernehmen. Die NUI muß bei der Bundespost beantragt werden. Die Eingabe würde lauten: NUI Dxxxxx, wobei xxxxx die Teilnehmerkennung ist. Nach dieser Eingabe wird noch Ihr Passwort abgefragt.

Die NUA ist die Datex-P-Rufnummer des Teilnehmers, den Sie anwählen wollen. Besitzen Sie keine NUI, muß die Gegenstelle bereit sein, die Gebührenzuübernehmen. Hierzu müssen Sie der Rufnummer (NUA) ein »R« (Reverse Charging) voranstellen. Die Datex-P-Vermittlungsstelle prüft dann, ob die Gegenstelle mit der Gebührenübernahme einverstanden ist. Die NUA kann wie folgt aussehen (dies ist eine Fantasienummer):
45 8900 12345 (Rufnummer)
R 45 8900 12345 (Rufnummer mit der Bitte um Gebührenübernahme)
C(xxx) 45 8900 12345 (Rufnummer mit Teilnehmerklasse, durch den Index xxx gekennzeichnet. Die Teilnehmerklasse kennzeichnet die Bereiche einer Datenbank, die benutzt werden können).

### Gebühren

Bei Datex-P gibt es, abweichend vom Telefontarif, drei Zeitabschnitte mit unterschiedlichen Verbindungsgebühren (Tabelle 2):
Tag — von 8 bis 18 Uhr
Nacht 1 — von 6 bis 8 Uhr und von 18 bis 22 Uhr
Nacht 2 — von 22 bis 6 Uhr und Samstag 14 Uhr bis Montag 6 Uhr, sowie an bundeseinheitlichen Feiertagen von 0 bis 24 Uhr.

Die Gebühren setzen sich aus verschiedenen Einzelpositionen zusammen, die Sie dem »Bundespost Informationsblatt Nummer 146« entnehmen können. An dieser Stelle seien nur zwei kleine Beispiele aus dem »Informationsblatt Nummer 145« der Bundespost angeführt:

Für eine Verbindung mit einer Datenbank von 30 Minuten Dauer bei zirka 7500 übertragenen Zeichen ist eine Gebühr von rund 0,75 Mark an die Post zu zahlen.

Bei einer Reisebuchung im Dialog einschließlich der Ausgabe der Reiseunterlagen von zwei Minuten Dauer mit zirka 2500 übertragenen Zeichen fällt eine Gebühr von etwa 0,20 Mark an.

In beiden Fällen kann diese Gebühr unter Berücksichtigung der mengenabhängigen Gebührenstaffel und der Tageszeit noch geringer ausfallen (siehe Tabelle 2). Eine NUI kostet 15 Mark im Monat.

Anträge für einen Datex-P-Hauptanschluß und die Erteilung einer NUI sind bei Ihrem örtlichen Fernmeldeamt erhältlich.

Wer sich noch weiter über Datex-P informieren will, kann bei der Bundespost die Informationsblätter Nummer 93,145, 146, 166und 189 bestellen.

## Bildschirmtext

Bildschirmtext, kurz Btx, wurde von der Deutschen Bundespost im September 1983 als allgemeiner Fernmeldedienst eingeführt. Allerdings lief Btx bis zur Inbetriebnahme einer neuen Systemtechnik Mitte 1984 nur mit Einschränkungen.

Btx soll in Zusammenarbeit von Telefon und Fernseher einen Dialog mit Computern ermöglichen. Dazu benötigen Sie als Grundgeräte einen Fernseher, einen Decoder, eine Tastatur und ein Telefon. Der Fernseher muß mit einem Btx-Decoder ausgestattet sein. Der Decoder wandelt die über die Anschlußbox ankommenden Signale in Bildschirmseiten um. Verbunden werden Telefon und Fernseher über die Btx-Anschlußbox. Diese erfüllt die Funktion eines Modems. Zusätzlich brauchen Sie jetzt noch eine Tastatur, um Eingaben machen zu können. Die Tastatur wird über den Decoder an den Fernseher angeschlossen.

Doch wo bleibt bei dieser Gerätekonfiguration der Computer?

Eine Btx-Tastatur kostet zum Beispiel bei einem großen Versandhaus zirka 400 Mark. Eine Tastatur hat unser Computer jedoch auch! Man muß sie nur an das Btx-Netz anschließen können. Hierzu bietet Commodore für den C 64 ein Btx-Modul an, das diesen Anschluß ermöglicht. Zusätzlich erlaubt das Modul das Speichern und Laden von Bildschirmseiten, was bei Btx sonst nicht möglich wäre. Bei einem Preis von 298 Mark für das Modul spart man also 100 Mark.

### Was leistet Btx?

Neben den Datenverarbeitungsanlagen der Bundespost steht das Btx-Netz mit zur Zeit 89 externen Datenverarbeitungsanlagen in Verbindung (übrigens über Datex-P). Zu diesen gehören zum Beispiel Computer von Versandhäusern, Banken, Reiseveranstaltern etc. Der Benutzer kann unmittelbar mit Bestell-Buchungs- und Reservierungssystemen Kontakt aufnehmen. Man kann also, rund um die Uhr bequem vom Wohnzimmersessel aus, die Kontoführung mit der Bank bearbeiten, die nächste Urlaubsreise buchen oder einen neuen Kühlschrank bestellen.

Über Btx können umfangreiche Datenbanken abgerufen und von Rechenzentren angebotene Datenverarbeitungsprogramme für Berechnungen genutzt werden.

Es gibt unter den Anbietern von Bildschirmseiten auch Zeitungsverlage, die zum Beispiel die neuesten Nachrichten, Lokalberichte oder den Wetterbericht anbieten.

Und noch eine weitere Nutzungsmöglichkeit wird zur Zeit in den Bildschirmtext integriert: Die Telesoftware. Unter diesem Namen wird in Zukunft Software für Home- und Personal Computer abrufbar sein. (Siehe auch unseren »Btx-Wettbewerb« in dieser Ausgabe.) Die Gebühren für diesen neuen Service stehen zur Zeit noch nicht fest.

### Btx-Übertragungsstandard

Seit September 1983 gilt für Bildschirmtext ein neuer, internationaler Darstellungsstandard, der von der CEPT (Konferenz der Europäischen Verwaltungen für Post und Fernmeldewesen) festgelegt wurde. Er umfaßt ein Basisrepertoire von 335 lateinischen Buchstaben, Ziffern und Zeichen. Zusätzlich erlaubt der CEPT-Standard bis zu 94 frei gestaltbare Zeichen in den Decoder zu laden. Dieser Punkt macht es zum Beispiel erst möglich, Programme mit den Grafikzeichen des C 64 zu übertragen, da diese nicht im bisherigen Basisrepertoire von Btx enthalten sind. Dieser frei definierbare Zeichensatz wird mit DRCS (Dynamically redifinable character set) bezeichnet.

Grafiken werden aus »Mosaikfeldern« zusammengesetzt. Mosaikfelder bestehen aus einem zwei mal drei Felder großen Raster. Die Mosaikelemente werden in dieses Raster eingesetzt, wobei insgesamt 64 Kombinationsmöglichkeiten zur Verfügung stehen. Dieses Darstellungsverfahren wird allgemein als das »Alphamosaikverfahren« bezeichnet. Zusätzlich enthält der neue Standard 64 Schrägflächen- und 32 Linienzeichen (Tabelle 3).

Den Unterschied zwischen dem alten und dem neuen Standard können Sie in Bild 1 und Bild 2 erkennen. Bild 1 verdeutlicht anschaulich die hochauflösende Grafik des neuen Standards. Bild 2 zeigt den der Blockgrafik des C 64 entsprechenden alten Standard.

### Wie funktioniert Btx ?

Wählt man das Btx-Netz über Telefon an, wird man mit einem »Teilnehmerrechner« verbunden. Dieser kann jeweils bis zu 100 Btx-Verbindungen gleichzeitig bearbeiten. Im Teilnehmerrechner sind über 50000 Bildschirmseiten gespeichert. Steht die von Ihnen gewünschte Bildschirmseite hier nicht zur Verfügung, wird die Anfrage an den dem Teilnehmerrechner übergeordneten Datenbankrechner weitergeleitet. In diesem sind 90000 Bildschirmseiten gespeichert. Erst wenn auch hier die gewünschte Bildschirmseite nicht vorliegt, wird eine Verbindung mit der Btx-Leitzentrale in Ulm hergestellt. Dies soll nach Aussage der Bundespost jedoch nur in zwei Prozent aller Fälle notwendig sein.

Die Auswahl der im Teilnehmerund Datenbankrechner angebotenen Bildschirmseiten richtet sich nach der Häufigkeit der diese Seiten betreffenden Aufrufe. Wird zum Beispiel eine im Teilnehmerrechner gespeicherte Seite neunmal verlangt, eine im Datenbankrechner gespeicherte aber 40mal, so werden diese ausgetauscht. Das heißt die wenig verlangte Bildschirmseite wird im Datenbankrechner gespeichert, die häufig verlangte im Teilnehmerrechner. So ist immer ein schneller Zugriff auf die meist verlangten Bildschirmseiten gewährleistet.

### Gebühren

Die Gebühren für den Bildschirmtext setzen sich aus drei Einzelpositionen zusammen. Die Grundgebühr für den Btx-Hauptanschluß kostet 8 Mark pro Monat. In dieser Gebühr ist die Miete für die Anschlußbox enthalten. Hinzu kommen die Verbindungsgebühren im Fernsprechnetz. Ab Mitte 1985 soll für alle Fernsprechanschlüsse der Ortsbeziehungsweise Nahtarif zu Bildschirmtext gewährleistet sein. Das bedeutet, daß Sie von jeder Stelle der Bundesrepublik aus zum Ortstarif am Btx teilnehmen können.

Als letzter, aber auch größter Posten, kommen die Gebühren für die im allgemeinen kostenpflichtigen Bildschirmseiten dazu. Die Gebühren schwanken zwischen 0,00 und 9,99 Mark pro Bildschirmseite. Die Gebührenhöhe bleibt in diesem Spielraum dem Anbieter der Bildschirmseite überlassen. Auf diese Gebühren muß vom Anbieter bei einem Aufruf hingewiesen werden. So kann der Btx-Benutzer immer noch entscheiden, ob er diese Gebühren akzeptiert.

Alle, die sich weiter über Bildschirmtext informieren wollen, können den Sonderdruck aus dem Dokumentarband Bundespost '84 »Die Technik des Bildschirmtextdienst« bei der Bundespost bestellen.

### Ist Btx nicht sicher?

Ende 1984 machte eine Nachricht in der Presse Schlagzeilen. Der Hamburger Chaos Computer Club (CCC) hatte nach eigenen Angaben das Btx-Sicherheitsnetz umgangen und einen »Bankraub« durchgeführt. Was genau war passiert? Der CCC hatte einen Softwarefehler der Btx-Steuerung entdeckt und sich das Passwort der Hamburger Sparkasse beschafft. Erst mittels dieser Kombination war es dem CCC möglich, durch ein Programm, das auf einem Personal Computer lief, eine gebührenpflichtige Bildschirmseite über 10000mal innerhalb einer Nacht abzurufen. Da das Passwort der Bank verwendet wurde, wurden dieser die Gebühren berechnet. In diesem Fall zirka 135 000 Mark.

Dazu die Bundespost: »Wie der CCC bei dieser Aktion im einzelnen vorging, ist bis heute noch nicht geklärt. Der Softwarefehler lag tatsächlich vor, ist heute aber behoben. Dieser Fehler konnte aber nur im Zusammenhang mit einem Passwort ausgenutzt werden. Das Passwort der Hamburger Sparkasse, so nimmt man an, hat sich der CCC wohl bei einer öffentlichen Vorführung in der Bank besorgt. Die Hintergründe der Vorgehensweise bleiben aber im dunkeln«.

Es bleibt noch zu erwähnen, daß diese Gebühren nicht erhoben worden sind. Wer Gebühren erhebt, muß auf Verlangen nachweisen, daß diese berechtigt sind. Aber wer ruft über 10000mal dieselbe Bildschirmseite in einer Nacht auf, wenn sich die Information nicht ändert. Ein Nachweis der berechtigten Gebühren wäre in diesem Fall zumindest fraglich gewesen.

## Telebox

Die Telebox ist eine von der Bundespost eingerichtete Mailbox. Sie ist ausschließlich für eingetragene Benutzer konzipiert.

Installiert ist der Telebox-Computer in Mannheim. Zur Zeit läuft die Telebox noch in einem zweistufigen Testbetrieb. Die erste Stufe begann Juni 1984 und endete am 31.09.84. Unterbrechungsfrei ging sie am 01.10.84 in die zweite Stufe über. Der Testbetrieb wird am 30.09.85 abgeschlossen sein.

### Benutzung

Der Telebox-Computer ist unter folgenden Rufnummern erreichbar:
Telefonnetz: 0621/413091, 300 Baud
0621/412071, 1200 Baud
Datex-P (NUI erforderlich):
45 6210 40000
45 6210 90000.
Wird die Telebox angewählt, erhalten Sie die Aufforderung »Bitte vorstellen«. Wer sich nur über das Telebox-System informieren will, beantwortet diese Aufforderung mit: ID INF100 TELEBOX

Sie können dann auf umfangreiche Informationsdateien zugreifen, die Sie über das Leistungsangebot der Telebox unterrichten.

Eingetragene Benutzer oder Anrufer, die einem Benutzer eine Nachricht hinterlassen wollen, melden sich mit einer Benutzerkennung. Diese ist mit einer Telefonnummer im Fernsprechnetz vergleichbar. Ein Verzeichnis der Benutzernummern finden Sie in den Informationsdateien. Die Benutzernummer wird wie folgt eingegeben: ID ABC123

ABC ist das Kürzel des eingetragenen Benutzers. 123 gibt die Nummer des Speicherbereiches (Adresse) an, in dem eine Nachricht gelesen oder geschrieben werden soll. Ein eingetragener Benutzer kann mehrere solcher Adressen haben. Die Adressen eines Benutzers sind dann aufsteigend durchnummeriert. Hat ein Benutzer zwei Adressen, so lauten die Kennziffern 001 und 002. Nach der Eingabe der Benutzerkennung wird ein Passwort verlangt. Erst dieses Passwort ermöglicht Ihnen Nachrichten zu lesen. Mit der Benutzeradresse allein können Sie nur Nachrichten hinterlassen. Wird das Passwort akzeptiert, so erscheinen folgende Meldungen:
Ausgeschaltet um/am:
12.00/21.06.85

Diese Meldung bezeichnet den Termin, an dem die letzte Nachricht in die Mailbox eingegeben wurde. Letzter Zugang um/am:
17.01/20.06.85

Hiermit wird angegeben, wann zum letzten Mal Nachrichten gelesen wurden.
Vorliegende Meldungen:
3 ungelesen

Diese Meldung besagt, daß drei Nachrichten bisher vom Benutzer noch nicht gelesen wurden. Hierin liegt ein großer Vorteil des Telebox-Systems, denn Sie können gleich an der Eingangsmeldung erkennen, ob neue Nachrichten für Sie vorliegen. Sie müssen also nicht erst weiter in das System vordringen.

Will man das System verlassen, so muß »ENDE« eingegeben werden.

### Gebühren

Ab 01.10.84 kostet jede Adresse 40 Mark Grundgebühr plus 40 Mark pauschale Nutzungsgebühr.

Nach Ende der Testphase am 30.09.85 werden folgende Gebühren fällig:

- Belegungsgebühr je Minute 0,30 Mark
- Speichergebühr je Tag und Einheit (2 KByte) 0,03 Mark
- Adressiergebühr je Adresse 0,10 Mark

Mindestnutzungsgebühr sind 40 Mark pro Monat.

Um die Gebühren der Telebox zu erläutern, und um sie dem Briefverkehr gegenüberzustellen, ein kleines Beispiel:

Ein Verkäufer einer Hamburger Firma hat in Frankfurt einen Verkaufsabschluß getätigt. Er möchte den Text und die Daten an seine Firma übermitteln. Diese hat eine Telebox-Adresse. Daten und Text umfassen 10 KByte; der Verkäufer benutzt einen 300 Baud Akustikkoppler. Der Text und die Daten sind vorbereitet und werden gesammelt übertragen.

<table class="plain">
<tr>
<td>Gebühr für Ortsgespräch</td><td align="right">0,23 Mark</td>
</tr><tr>
<td>Datex-P-Gebühr</td><td align="right">0,33 Mark</td>
</tr><tr>
<td>Belegungsgebühr Telebox</td><td align="right">0,30 Mark</td>
</tr><tr>
<td>Speichergebühr (1 Tag)</td><td align="right">0,15 Mark</td>
</tr><tr>
<td>Adressierungsgebühr</td><td align="right">0,10 Mark</td>
</tr><tr>
<td>Übermittlung Verkäufer zur Firma</td><td align="right">1,11 Mark</td>
</tr><tr>
<td>Gebühr für Ortsgespräch</td><td align="right">0,23 Mark</td>
</tr><tr>
<td>Datex-P-Gebühr</td><td align="right">0,33 Mark</td>
</tr><tr>
<td>Abruf der Daten</td><td align="right">0,56 Mark</td>
</tr><tr>
<td>Anfallende Kosten für die Firma gesamt:</td><td align="right">1,67 Mark</td>
</tr>
</table>

Die Daten sind für die Firma sofort verfügbar.

Stellen wir jetzt die Übermittlung per Brief gegenüber:

<table class="plain">
<tr>
<td>Porto</td><td align="right">0,80 Mark</td>
</tr><tr>
<td>Einschreibgebühren</td><td align="right">2 Mark</td>
</tr><tr>
<td>Eilbrief</td><td align="right">3 Mark</td>
</tr><tr>
<td>Gesamt:</td><td align="right">5,80 Mark</td>
</tr>
</table>

Die Firma muß je nach Uhrzeit und Verbindungsweg (Flugzeug oder Bundesbahn) drei Stunden oder bis zum nächsten Morgen warten.

Wenn Sie eine eingehende Beratung über das Teleboxsystem wünschen, wenden Sie sich bitte an folgende Adresse:
Fernmeldetechnisches Zentralamt
Referat T 21
Postfach 5000
6100 Darmstadt
Tel. 06151/83-4641

Den Antrag für die Teilnahme am Telebox-Betrieb erhalten Sie beim:
Fernmeldeamt
Anmeldestelle für Fernmeldeeinrichtungen
Postfach 7300
6800 Mannheim 1
Tel. 06 21/2 48 53

## ISDN-Digitalisierte Zukunft

»ISDN — die Antwort der Deutschen Bundespost auf die Anforderungen der Telekommunikation von Morgen«, so wird von der Bundespost das Konzept für die Zukunft bezeichnet.

ISDN (Integrated Services Digital Network) heißt also unsere »fernmeldetechnische Zukunft«. Die kurze Umschreibung der Bundespost sagt nicht gerade viel aus. Äußerungen wie »Die Deutsche Bundespost wird künftig auch Fernmeldedienstleistungen über Satelliten anbieten, mit denen die terrestrischen Netze schnell und flächendeckend ergänzt werden« scheinen einem Science Fiction-Roman entnommen. Doch so steht es in einer Informationsbroschüre der Deutschen Bundespost.

Was hat die Bundespost nun wirklich geplant? Uns allen dürfte klar sein, daß die Technik in vielen Teilen des Fernmeldedienstes überaltert ist. Noch heute ist das Rattern der Relais in den Vermittlungsstellen der Fernmeldeämter zu hören, wenn eine Telefonverbindung hergestellt wird.

1976 wurde mit dem Aufbau des IDN (Integriertes Text- und Datennetz) begonnen. Zum IDN gehören auch Telex und Datex-P. Zur Zeit sind an das IDN über 300 000 Teilnehmer angeschlossen.

Es handelt sich hierbei um ein Fernmeldenetz, in dem die digitale Übertragungs- und Vermittlungstechnik angewandt wird.

### Das Digitale Fernsprechnetz

Was bedeutet »Digitalisierung«? Nehmen wir als Beispiel ein Telefongespräch. Wie sieht das bisher aus? Man wählt eine Rufnummer. Die Verbindung wird dann durch einzelne Relais in der Vermittlungszentrale geschaltet. Dies dauert seine Zeit. Ist die Verbindung hergestellt, wird die Sprache, die das Mikrofon im Telefonhörer aufnimmt, in elektromagnetische Signale umgesetzt. Diese werden dann übertragen und müssen, da sie bei der Übertragung über die jetzigen Leitungen der Post schnell an Intensität abnehmen, oft verstärkt werden. Die ankommenden Schwingungen werden vom Lautsprecher des Telefonhörers wieder in Töne verwandelt.

Im digitalisierten Fernsprechnetz funktioniert dies anders.

Alle Signale werden im Binär-Code übertragen. Als erstes erreicht die codierte Rufnummer den Vermittlungscomputer, der die Funktion der Relais erfüllt. Wie beim Datex-P-Netz stellt der Computer jetzt die Verbindung her. Im Gegensatz zur Relais-Vermittlung ist die Computervermittlung erheblich schneller und zuverlässiger, da die mechanische Vermittlung wegfällt.

## Gespräch im Binär-Code

Als nächstes werden die akustischen Signale, also die Sprache, in digitale Signale (wir kennen dies von den Spracheingabemodulen des C 64) umgesetzt. Diese digitalen Signale werden dann über eine virtuelle Verbindung ähnlich Datex-P übertragen.

Dieser Binärcode wird dann von der Vermittlungsstelle bei der Gegenstelle wieder in verständliche akustische Signale umgesetzt.

Wer nun meint, bei dieser Art der Vermittlung würden Verzögerungen auftreten, der täuscht sich. Die Datenübertragung erfolgt, wie bei Datex-R mit bis zu 64000 Baud. Das reicht auch für den schnellsten Sprecher.

In Zukunft werden also Telefongespräche digital vermittelt und übertragen. Dies hat den Vorteil, daß wie bei Datex-P durch die virtuelle Verbindung wesentlich weniger Leitungen benötigt werden. Und dieselben Leitungen können auch für den Datenaustausch zwischen Computern verwendet werden. Telefongespräche, Datex-R Bildschirmtext und die Telebox können in Zukunft direkt über dasselbe Kabel laufen.

Das ISDN-Netz soll ab 1988 zur Realität werden.

(rg)

Info: Die Informationsbroschüren der Bundespost sind über jedes Fernmeldeamt erhältlich.

# Die Scroll-Machine: Das Fenster zur Spielewelt \[52,56-67]

> Dieses außergewöhnliche Programm verschiebt den Bildschirm flimmerfrei in jede Richtung, wie es sonst nur von professionellen Spielen her bekannt ist — und das mit Basic.

Bildschirmscrolling in eine beliebige Richtung ist im Commodore Basic V2.0 nicht realisierbar. Wer es dennoch versucht, wird mit dem Ergebnis nicht zufrieden sein. Dieses Programm macht es auch dem Anfänger leicht, Soft-Scrolling, ein Synonym für ruckfreies Verschieben des Bildschirms in alle Richtungen, in seine eigene Programme einzubauen. Besonders gut eignet es sich dazu mit dem Pseudoschirm-Editor Spielfelder zu konstruieren, die die Größe des normalen Bildschirms überschreiten. Durch eine große Anzahl von Befehlen ist jeder in der Lage, mittels Soft-Scroll immer den Teil des Feldes darzustellen, in dem sich die Spielfigur befindet. Die Spielfiguren werden ähnlich wie in professionellen Programmen durch Basic-Befehle, die die Beschleunigung, Reibung oder Höchstgeschwindigkeit festlegen, beliebig auf dem sichtbaren Pseudoschirm bewegt, einem Schirm, der in x- und y-Richtung größer ist als der normale Textbildschirm (x>40, y>25). Jeder kann maximal zwei Textfenster realisieren, die beliebige Spielinformationen enthalten. Das Programm stellt zum Laden und Abspeichern von SEQ- und PRG-Files einige sehr leistungsfähige Befehle zur Verfügung.

Aber nicht nur für die Gestaltung von Spielen ist dieses Programm geeignet. Der Anwender kann zum Beispiel von Basic aus Textverarbeitungsprogramme gestalten, die durch horizontales Scrollen mehr als 40 Zeichen pro Zeile darstellen können, wie es bei fast allen kommerziellen Programmen der Fall ist.

Bei dem Pseudoschirm-Editor handelt es sich um ein in Basic geschriebenes Programm, das durch einfache Befehle und einen geeigneten Zeichensatz beliebige Landschaften auf dem Bildschirm entstehen läßt. Die Konstruktion von Gängen und Höhlen wird im Kontur- und Micromodus zum Kinderspiel. Das Programm arbeitet sowohl mit einfarbigen wie aber auch mehrfarbigen Zeichensätzen. Die beiden Bilder sind ein ausgezeichnetes Beispiel für die Leistungsfähigkeit dieses Programms.

(Thilo Herrmann/ah)

TODO ASIDE

## Lebenslauf

Ich wurde am 20.12.1968 in Göppingen geboren und ging nach erfolgreichem Besuch der Grundschule 1979 auf das Gymnasium, wo ich nun wenig begeistert die 10te Klasse besuche. Bis zum 14ten Lebensjahr stieg mein Interesse an Computern langsam an. Im Göppinger Computershop entdeckte ich einen TI99 4/A. Nach kurzer Zeit wurde mir das Herumexperimentieren mit diesem Computer zu wenig und ich entschloß mich, von meinen Ersparnissen einen VC 20 mit Datasette zu kaufen. Mit ihm war es mir möglich, das Commodore Basic zu erlernen. Ein halbes Jahr später stieß ich im Kaufhaus auf einen C 64 und war von seinen Fähigkeiten begeistert. So wurde der VC 20 kurzerhand zu Weihnachten gegen seinen größeren Bruder eingetauscht. Vom Rest meiner Ersparnisse schaffte ich mir ein 1541-Diskettenlaufwerk an. Nun konnte ich endlich richtig programmieren. Zuerst noch viel in Basic, doch dann immer mehr in Maschinensprache. Das Ergebnis meiner Bemühungen ist die Scroll-Machine, die mein bisher größtes Maschinenprogramm ist. Ohne Zweifel werden ihr noch größere Programme folgen. Es war nicht immer einfach, sämtliche Hürden zu überwinden, denn beim Programmieren des Videoprozessors sind viele Besonderheiten zu beachten, die nicht leicht zu verstehen und in keinem Buch zu finden sind.

(Thilo Herrmann/ak)

TODO END ASIDE

> Bringen Sie Bewegung in Ihre Grafik. Nutzen Sie einen Bildschirm, der bis zu 30 mal größer ist als der normale Textbildschirm. Scrolling wie bei dem Spiel Zeppelin wird dadurch möglich.

Das Programm besteht aus 3 KByte Maschinensprache, die im Bereich von $COOO (49152) bis fast $CBFF (52223) liegen. Die Variablen stehen von 828 bis 959 im Kassettenpuffer. Das Video-RAM, das vom Programm benutzt wird, liegt im Bereich von 52224 bis 53223. Da die Spritepointer immer dem Video-RAM folgen, stehen sie nun von 53240 bis 53247 (normal: 2040 bis 2047). Im Bereich von $D000 (53248) bis $D7FF (55295) steht der Zeichensatz, der leicht verändert werden kann. Dabei ist zu beachten, daß der Bereich von $D000 bis $DFFF dreimal belegt ist, einmal durch die Ein-/ Ausgabe (VIC, SID, CIA 1 und 2), den C 64-Zeichensatz und das RAM, in das der Zeichensatz kopiert oder ein neuer geladen wird.

Außerdem benötigt die Scroll-Machine noch eine Multiplikationstabelle, die von $DE00 (56832) bis $DFFF (57343) steht. Der Rest von $D800 bis $DDFF (55296 bis 56831) kann von Sprites genutzt werden. Ebenfalls für Sprites frei ist das RAM unter dem Kernal von $E000 bis $FFFF (57344 bis 65535). Dort kann auch ein 8-KByte-Pseudoschirm stehen, der eine größere X/Y-Ausdehnung hat als der normale Textbildschirm. Wenn dieser Bereich jedoch frei ist, kann man insgesamt 152 verschiedene Sprites im Speicher halten. Es muß aufgrund einer Besonderheit des VICs darauf geachtet werden, daß die Speicherstelle 65535 den Wert Null enthält. Die Sprites müssen nach wie vor vom Basic-Programm bewegt werden.

Es sei nicht unerwähnt, daß ich die Restore-Taste geändert habe. Sie funktioniert nun auch ohne daß man RUN-STOP drückt. Die NMI-Vektoren $0318/$0319 (792/793) und $FFFA/$FFFB (65530/65531) im RAM enthalten immer die Adresse der neuen Restore-Routine. Soll die Restore-Taste gesperrt werden, so hilft POKE 51692,64. Die RUN/STOP-Taste kann mit POKE 49710,52 außer Kraft gesetzt werden (Tl wird damit auch unbrauchbar).

## Die Funktionsweise

Das Programm arbeitet mit drei Rasterzeileninterrupts, zwei für den oberen Text/Soft-Scroll-Übergang und einer für den unteren. Alle Interrupts können mit dem RZ-Befehl verschoben werden, so daß die Bildschirmfenster beliebig groß werden können.

Jede der drei Interruptroutinen setzt erst die Parameter des Videoprozessors: Hintergrundfarbe, Rahmenfarbe und so weiter. Die erste Interruptroutine hat damit ihre Aufgabe erfüllt. Sie setzt die Hintergrundfarbe auf die Zeichenfarbe, damit ein sauberer Übergang zwischen Soft-Scroll und normalem Text entsteht.

Die zweite Routine berechnet die Werte für Bewegung und Steuerung. Dann springt sie zum normalen Systeminterrupt, der die Tastatur abfragt und die Zeit erhöht.

Der dritte Interrupt ruft die Scroll-Routine auf, die den Pseudobildschirm abtastet und am meisten Zeit verschlingt.

Dieser Teil des Programms muß sehr schnell sein, da er seine Aufgabe erledigt haben muß, bevor der nächste Interrupt ausgelöst wird.

Die neuen Basic-Befehle werden mit Hilfe des Pointers $0308/$0309 eingebunden.

TI$ wird unbrauchbar, da der Systeminterrupt nun nicht mehrjede 60stel Sekunde, sondernjede 50stel Sekunde ausgeführt wird. Die Sekunde errechnet sich während des Betriebs des Soft-Scrolls nun mit TI/50.

## Joysticksteuerung

Wie sich aus der Befehlsliste ersehen läßt, besitzt das Programm vier Befehle zur Steuerung des Joysticks.

Es gibt mehrere Möglichkeiten, ein Objekt zu steuern. Zum einen gibt es die »lineare« Steuerung. Sie wird wohl am häufigsten verwendet, zum Beispiel bei Fort Apocalypse und den meisten selbstgeschriebenen Spielen. Das funktioniert so: Man drückt den Steuerknüppel in eine bestimmte Richtung und das Objekt setzt sich in Bewegung. Es bewegt sich so lange, bis man den Knüppel wieder losläßt. Diese Steuerung ist jedoch wenig wirklichkeitsnah, man denke nur an eine Raumkapsel, die durch Raketenschübe gesteuert wird. Sie setzt sich nicht sprunghaft in Bewegung, sondern langsam. Wenn der Antrieb dann abgeschaltet wird, stoppt unser Flugkörper nicht plötzlich, sondern fliegt mit der gleichen Geschwindigkeit weiter. Diese träge Steuerung und die lineare Steuerung lassen sich mit der Scroll-Machine verwirklichen.

Da die lineare Steuerung besonders einfach ist, werden ihre Werte im JS-Befehl mit angegeben. Nämlich so:

### ← JS m,x,y,p (m = Joystickmodus, p = Port)

x und y stellen die Geschwindigkeiten der linearen Steuerung dar. Bei x = 8 und y = 0 hat man in etwa die Space-Invader-Einstellung.

Die träge Steuerung benötigt drei Befehle, was schon andeutet, daß sie etwas kompliziert ist. Hier bestimmt man nicht die Geschwindigkeit, sondern die Beschleunigung. Da vor jedem Trägheitsbefehl ein T steht, lautet der Befehl:

### ← TB x,y

x und y geben die X-Y-Beschleunigung an. Sie können Werte zwischen Null und 255 annehmen.

Wenn man nun den Steuerknüppel in eine Richtung drückt, wird die Geschwindigkeit immer größer. Die größtmögliche Geschwindigkeit kann man mit dem TG-Befehl festlegen.

### ← TG x, y

Dies kann man sehr genau regeln, weil x und y Werte zwischen Null und 32767 annehmen können.

Wenn man einen Gegenstand auf einer waagrechten Fläche beschleunigt, so hält dieser Gegenstand irgendwann auch wieder an. Daran ist die Reibung schuld. Das kann man auch simulieren, der Befehl lautet:

### ← TR x,y

x und y müssen kleiner sein als die entsprechenden Werte beim TB-Befehl. Die Routine zieht x und y einfach von der Geschwindigkeit ab.

Natürlich kann man die lineare und die träge Steuerung auch mischen. (Es muß vor jedem Befehl ein Pfeil stehen.)

Zum Beispiel: Defender:←RS:←CP:←ZF 1:←US 1.
Diese Befehle setzen die Standardeinstellung.

TODO TABLE

In diese Steuerung kann man auch noch Bewegung einmischen mit:

TODO TABLE

Ergebnis: Der Bildschirm bewegt sich kontinuierlich nach oben. Mit dem Joystick kann man die Y-Geschwindigkeit erhöhen oder vermindern.

## Die Befehle

Vor jedem Befehl steht der Pfeil nach links. Die folgenden zwei Buchstaben stellen das Befehlswort dar. Danach muß man teilweise einige Parameter angeben, wie zum Beispiel beim normalen POKE-Befehl. Nach einer IF...THEN-Entscheidung muß nach dem THEN ein Doppelpunkt stehen, wenn ein Scroll-Machine-Befehl folgt, zum Beispiel IF A=1 THEN: ← RS. Wem der Pfeil nicht paßt, der kann mit POKE 50550,ASC(X$) ein anderes Zeichen auswählen. So wird nach POKE 50550,ASC(”!”) nur noch das Ausrufezeichen angenommen. Folgende Zeichen lassen sich verwenden: !"#$%&'(),.:; sowie Klammeraffe, die eckigen Klammern, Pfund, PI, Pfeil links sowie fast alle Buchstaben:

Damit man das Programm auch von Maschinensprache aus verwenden kann, habe ich jeweils die entsprechenden Adressen und gegebenenfalls auch die Einsprungadressen mit angegeben.

Die Befehle:

### RS
Reset. Dieser Befehl sollte am Anfang jedes Programms stehen. Er löscht alle Einstellungen und schaltet auf den Normalzustand, das heißt, er führt unter anderem folgende Befehle aus:
MT 40960,40,0: VI 52224,21
ML: JSR $C5C0

### MT aa,xd,yd

Erstellt die Multiplikationstabelle, das heißt, man legt mit diesem Befehl die Anfangsadresse und die X- und Y-Ausdehnung des Pseudoschirms fest.

aa = Anfangsadresse, xd = Ausdehnung des Schirms in X-Richtung, yd = Ausdehnung in Y-Richtung.

Der normale Videoschirm hätte zum Beispiel die X- und Y-Werte 40 und 25. Die des Pseudoschirms können theoretisch zwischen Null und 8191 liegen.

Die Y-Ausdehnung ist völlig unwichtig. Sie gehörtjedoch der Vollständigkeit halber dazu, wird mitgespeichert und -geladen und kann über USR(12) abgefragt werden.

Wenn der Schirm im Basic-RAM liegt (aa < 40960), sollte man das Basic-Ende so herabsetzen:

AA = Startadresse aa: H = INT(AA/256): L=AA-H\*256: POKE 55,L: POKE 56,H: CLR
ML: aa:$CBFA/CBFB, xd:$CBFC/CBFD, yd:$CBFE/CBFF, JSR $C6AC

### CP

Kopiert den Zeichensatz vom ROM in das darunterliegende RAM. Erführt UT 53248, 55295, 53248,51,48 aus. Dieser Befehl sollte ebenfalls am Anfang eines Programms stehen, falls nicht ein neu definierter Zeichensatz mit dem LD-Befehl geladen wurde.
ML: JSR $C8BC

### US n

Umschalten zwischen Soft-Scroll (n=1) und Text (n=0). Bei n=0 werden alle Einstellungen des Textfensters gesetzt.
ML:LDX#n:JSR$C5F8

### ZFf

Dient zum Setzen der Zeichenfarbe f. Wenn man im Multicolormodus arbeitet, kann man nur die Farben Null bis Sieben nutzen und muß jeweils Acht dazuzählen (Bit 3 setzen).
ML : LDA #n: JSR $C8EB

### HF f1,f2,f3

Wählt die Hintergrundfarben der drei Bereiche.
f1 = Hintergrundfarbe des Textfensters,
f2 = Hintergrundfarbe des Streifens, f2 muß gleich der Zeichenfarbe sein, damit ein sauberer Übergang entsteht.
f3 = Hintergrundfarbe des Soft-Scroll-Bereiches.
ML: $C568/$C569/$C56A

### RF f1,f2,f3

Die Randfarben können beliebig gewählt werden.
ML: $C56B/$C56C/$C56D

### PO x,y

Positioniert den Bildschirm innerhalb des Pseudoschirms, x und y können negativ und positiv sein.

Sinnvoll sind jedoch nur 0 < x < xd\*8 und 0 < y < yd\*8.
ML: x:$0358/$0359, y:$035A/$035B

### BWx,y

Bewegt den Bildschirm in der angegebenen X- und Y-Geschwindigkeit. x und y können zwischen -127 und 128 liegen.
ML: x:$0385, y:$0386

### JS m,x,y,p

Bestimmt die Werte für den Joystick.
m = Modus.
Bei m=0 keine Steuerung.
Bei m=1 lineare Steuerung.
Bei m=2 lineare und träge Steuerung.
x und y geben die Geschwindigkeit der linearen Steuerung an. Sie kann zwischen 0 und 255 liegen.
p steht für den Joystickport.
Die letzten drei Angaben können weggelassen werden.
ML: n:$033E, x:$0374, y:$0375, p:$03A5

Zur trägen Steuerung gibt es drei Befehle. Sie bewirken nur etwas, wenn der Joystickmodus zwei gewählt wurde. Der erste Buchstabe lautet immer »T«.

### TB x,y

Regelt die Beschleunigung, x und y kann zwischen 0 und 255 liegen.
ML: x:$034A, y:$034B

### TR x,y

Bestimmt die Reibung, x und y sind auch hier 1-Byte-Werte.
ML: x:$0392, y:$0393

### TG x,y

Legt die Höchstgeschwindigkeit fest, x und y sind hier 2-Byte-Werte, sie können also Werte zwischen 0 und 65535 annehmen.
ML: x:$038E/$038F, y:$0390/$0391

Die nachfolgenden Befehle sind allgemeingültig:

### GR x,x2,y,y2

Die hier festgelegten Grenzen können nicht überschritten werden. Die Werte können wie beim PO-Befehl zwischen 0 und 65535 liegen.
ML x:$0396/$0397, x2:$0398/$0399, y:$039A/$039B, y2:$039C/$039D

### GM m

Der Grenzmodus wird gewählt: Bei m=O bestehen keine Grenzen. Bei m=1 wird bei den Grenzen abgestoppt. Bei m=2 wird der Bildschirm an die gegenüberliegende Grenze gesetzt.
ML: m:$039E

### AS n

Läßt den Interrupt n mal aussetzen, bevor er wieder ausgeführt wird. Das ist besonders nützlich, wenn man Rechenzeit sparen will.

Nachteil: Je größer n ist, desto stärker ruckt das Bild.
ML: LDX #n: JSR $C78D

### TM m

Wählt den »Tastmodus«. Bei m=0 wird der Pseudoschirm nur abgetastet, wenn es nötig ist.
Bei m=1 wird er immer abgetastet (= jede 50stel Sekunde), was natürlich Rechenzeit kostet.

Nützlich, wenn im Pseudoschirm laufend etwas verändert wird. Ein Beispiel: RS:CP:ZF 1:MT 1024,40,25:PO O,O:TM 1:US 1
PRINT ”<HO>”

Ergebnis: Der blinkende Cursor erscheint doppelt auf dem Schirm. Der zweite Cursor macht alle Bewegungen mit. Wenn man TM 0 eingibt, ändert sich das.
ML: m:$03A2

### SY n

Synchronisiert die Scroll-Machine mit dem laufenden Programm, das heißt, der Interrupt wird nicht mehr im 50stel-Sekunden-Takt ausgeführt, sondern im Programmtakt.
n=1 schaltet Sync-Modus ein und führt den nächsten Interrupt aus.
n=0 schaltet den Sync-Modus aus.

Diese Funktion ist wichtig bei langsamen Basic-Programmen wie dem Editor. Achtung: Die X/Y-Position wird erst beim darauffolgenden SY 1-Befehl gesetzt.

ML: LDX #n: JSR $C88C

### VI aa,z

Verlegt das Video-RAM, in das geschrieben wird.
aa = neue Anfangsadresse, z = Anzahl der Zeilen (z < = 21). Normal: aa= 52224, z=21. Je kleiner z ist, desto schneller wird das Programm.

ML: aa:$C4D9/$C4DA, LDX #z: JSR $C7AE

### 1R n1,n2,n3

Inhalt des 1. Steuerregisters (VIC+17) in den drei Bereichen. Normal: 27,23,16
ML: $C55C/$C55D/$C55E

### 2R n1,n2,n3

Der entsprechende Befehl für das 2. Steuerregister (VIC+22). Normal: 200,200,192
ML: $C55F/$C560/$C561

### MC n1,n2,n3

Dasselbe für das Memory-Control-Register (VIC+24). Normal: 21,52,52
ML: $C562/$C563/$C564

### CI n1,n2,n3

Das Gleiche gilt für die Basisadresse der CIA 2 (56576). Normal: 151,148,148
ML: $C565/$C566/$C567

### RZ z1,z2,z3
Legt die Rasterzeilen für die drei Interrupts fest. Normal: 81,88,248 andere Möglichkeit: 106,115,232 + SU 4
ML: $C56E/$C56F/$C570

### SU n

Behebt Fehler, die bei der Änderung der Rasterzeilen entstehen können. Das erkennt man am Rucken des Scrollings, n kann Werte von 0 bis 7 annehmen.
Den richtigen Wert kann man nur durch Ausprobieren feststellen.
Wenig Probleme wird man haben, wenn man die RZ-Werte in Achterschritten verändert. Normal: n=5
ML: n:$C571

Die folgenden zwei Befehle sind als allgemeine Hilfe gedacht:

### FU a,e,n,w

Dieser Befehl füllt den Speicher von a bis e mit n, während in der Speicherstelle 1 w steht, w kann weggelassen werden.
ML: a:$FB/$FC, e:$FD/$FE, n:$03B0, LDX #w: JSR $C842

### UT a,e,a2,r,w

Es wird der Block von a bis e nach a2 übertragen. Dabei steht in 1 während des Lesens r und während des Schreibens w.
ML: a:$FB/$FC, e:$03A6/$03A7, a2:$FD/$FE,
LDA #r : LDX #w : JSR $C725

Natürlich kann man die Erweiterung auch ausschalten:

### OF

Schaltet die Erweiterung vollständig ab. Sie muß mit SYS49152 wieder gestartet werden. Die Wirkung ähnelt der der Run-Stop/Restore-Funktion.

Dieser Befehl wird zum Beispiel dann benötigt, wenn man etwas von der Datasette laden will.
ML: JSR $C65E

## Die Diskettenbefehle

### LD ”Name”

Lädt den Pseudoschirm mit der Bezeichnung Name von der Diskette. Die Anfangsadresse, die X-Ausdehnung und die Y-Ausdehnung werden mitgeladen und gesetzt.

TODO TABLE

ML: LDA #0 : STA $CBF8
LDX # < Namenadr. : LDY # > Namenadr. : LDA # Namenlänge
JSR $FFBD (Setnam-Routine)
JSR $CAC8

### LD ”Name”,aa

Lädt ein beliebiges Datenfile absolut an die Adresse aa von der Diskette. Achtung: Das File wird vollständig geladen, inklusive den beiden Adreßbytes am Anfang jedes Programms. Man sollte deshalb von aa zwei abziehen.

Wenn man sequentielle Files oder Userfiles laden will, dann hängt man an den Namen einfach noch ,S oder ,U an.
ML: aa:$FB/$FC, LDA #1 : STA $CBF8

Ansonsten weiter wie oben.

### SV ”Name”,ea

Speichert einen Pseudoschirm mit der Bezeichnung »Name« auf Diskette. Die Endadresse ea errechnet sich aus Anfangsadresse + X-Ausdehnung \* Y-Ausdehnung.
ML: ea:$FD/$FE

LDX # < Namenadr. LDY # > Namenadr. LDA # Namenlänge

JSR $FFBD (Setnam-Routine)

JSR $CB3E

## Die USR(x)-Funktion

Mit ihrer Hilfe kann sich der Benutzer einige wichtige Werte holen. Je nachdem, welchen Wert x annimmt, wird zu verschiedenen Routinen verzweigt.

TODO TABLE

x=0	Jedesmal, wenn eine Grenze berührt wird, die mit dem GR-Befehl gesetzt wurde, setzt das Programm ein Flag auf eins. Mit dieser Funktion wird das Flag abgefragt und gelöscht.
ML: $03AD
x=1	Liefert die momentane X-Position.
ML $0358/$0359
x=2	Liefert die Y-Position.
ML: $035A/$035B
x=3	Gibt die Adresse im Pseudoschirm an, die der Bildmitte entspricht.
ML: $C50C/$C50D
x=4	Ergibt eins, wenn der Feuerknopf des Joysticks in Port 2 gedrückt ist.
ML: Es empfiehlt sich der normale Joystickport $DCOO.
x=5	Dasselbe für Port 1.
ML: $DC01
x=10	Übermittelt die Anfangsadresse des Pseudoschirms (die möglicherweise nicht bekannt ist, weil der Schirm eben geladen wurde).
ML: $CBFA/$CBFB
x=11	Liefert die X-Ausdehnung.
ML: $CBFC/$CBFD
x=12	Liefert die Y-Ausdehnung.
ML: $CBFE/$CBFF
x>255	Übermittelt den Inhalt der Speicherstelle x. Es wird immer der Inhalt des RAMs gelesen. Man hat damit also die Möglichkeit, das versteckte RAM zu lesen.
ML: Die allgemeine Methode funktioniert so:
SEI: LDX #48:STX 1:LDA x:LDX #55:STX 1:CLI

Übrigens: In $036A/$036B (874/875) und $036C/$036D (876/877) stehen die X- und Y-Werte für die Trägheitsgeschwindigkeit.

## Der Pseudoschirmeditor

Der Editor ist ein Basic-Programm, das mit den wichtigsten Funktionen zur komfortablen Erstellung eines Pseudoschirms ausgestattet ist.

Er benötigt die Scroll-Machine, um arbeiten zu können. Man muß sie also von Datasette oder Diskette laden. Dann lädt man den Editor und startet ihn mit RUN.

Zuerst wird man nach der X/Y-Ausdehnung und der Anfangsadresse gefragt. Die Werte XD=128, YD=64 und AA=40960 sind vorgegeben, so daß der Pseudoschirm das RAM unter dem Basic-ROM voll belegt ($AOOO — $BFFF). In diesem Fall ist RETURN zu drücken. Dann will das Programm wissen, ob der Zeichensatz vom ROM ins RAM kopiert werden soll. Wenn man das Programm eben erst geladen hat, sollte man mit »J« antworten. Steht jedoch schon ein neuer Zeichensatz, der erhalten werden soll, im Speicher, so gibt man »N« ein. Anschließend erscheint die Frage »MULTICOLOR (J/N)« auf dem Bildschirm. Wenn der normale Commodore-Zeichensatz benutzt wird, lautet die Antwort immer »N«, ansonsten hängt das vom Zeichensatz ab. Natürlich muß man auch noch die Farben eingeben, wenn man nur Return drückt, erhält man die Standardeinstellung. Schließlich kann man entscheiden, ob der Pseudoschirm gelöscht werden soll. Normalerweise antwortet man mit »J« und der Pseudoschirm wird nach einer Rückversicherung mit dem Zeichen 32 (Space) gefüllt.

Nach diesen Eingaben hat man endlich das normale Bild des Editors vor sich, das folgendermaßen aufgebaut ist:

Der Bildschirm ist in zwei Bereiche unterteilt. Oben wird immer der Teil des Pseudoschirms gezeigt, der gerade bearbeitet wird. In der Mitte dieses Bereiches befindet sich ein Sprite, der als Cursor fungiert. Der Bildschirm läßt sich mit Hilfe eines Joysticks in Port zwei bewegen. Unten kann man den kompletten C 64-Zeichensatz erkennen. Er ist in acht Zeilen ä 32 Zeichen unterteilt, wie bei vielen Zeichengeneratorprogrammen. Es wird der große Zeichensatz benützt, weil er mehr Grafikzeichen zur Verfügung stellt. Auch hier wird ein Sprite als Cursor benutzt, der sich mit den Cursortasten auf der Zeichenpalette bewegen läßt.

Im Normalmodus wird durch einen Druck auf den Joystickknopf jeweils das Zeichen von der Palette auf den Pseudoschirm übertragen, auf das der Zeichencursor zeigt.

Das ist die einfachste Funktion des Programms, mit ihr allein ist esjedoch fast unmöglich, einen Pseudoschirm zu erstellen. Deshalb bietet es noch einige andere Möglichkeiten wie Rechteck füllen, Rechteck übertragen und so weiter, die man von Programmen wie Paint Magic oder Koalapainter her kennt. Sie bedürfen keiner langen Erklärung, da die Bedienung einfach und logisch aufgebaut ist.

Auch der Mikromodus ist schnell erklärt. Er benutzt die Zeichen 32, 97, 98, 108, 123, 124, 126,127 und ihre reversen Entsprechungen, um eine vierfache Auflösung zu erreichen. Mit dem Klammeraffen kann man zwischen Punkt löschen und Punkt setzen umschalten. Mit Shift-M kann man die Zeichenfolge neu definieren. Wenn man einen selbstdefinierten Zeichensatz benutzt, stimmen die Codes 97, 98, 108 etc. nicht mehr. Der Einfachheit halber müssen die neuen Zeichen aufeinanderfolgen, mit Leerraum (=Space) beginnen und mit einem vollständig gefüllten Zeichen enden. Eine nicht ganz einfache Funktion ist der Konturmodus, der im folgenden näher erläutert wird.

Mit den Zeichen 100, 111, 121, 98 und so weiter, kann man eine sanft aufsteigende Linie bilden. Das wird im Konturmodus ausgenutzt. Wenn man F7 betätigt, wird dieser Modus gesetzt. Jetzt kann man Landschaften formen, die sanft auf- und absteigen. Jedoch kann man keine Höhlendecken oder ähnliches bilden, auch senkrechte Wände bleiben einem versagt. Das kann man mit einem Druck auf »K« ändern. Man wird nach X+, X—, Y+, Y— gefragt. Mit den Tasten 1-4 kann man die gewünschte Einstellung wählen. X bedeutet senkrechte Wände, Y steht für waagrechte Wände. Plus und Minus geben jeweils an, welche Seite Freiraum und welche Wand ist. Anschließend muß man noch die Geschwindigkeit angeben, die regelt, ob der Berg sanft oder steil ansteigt.

Wenn man senkrechte Wände bearbeitet, wird man feststellen, daß die Kontur fehlerhaft ist. Das liegt am Zeichensatz des C 64. Die Zeichen 101 und 116 sind identisch, was von Commodore so geregelt wurde, damit das Zeichen auf einem Fernsehschirm besser sichtbar ist. Mit einem VC 20-Zeichensatz hätten wir diese Probleme nicht. Wenn man einen eigenen Zeichensatz benutzt, ist das Problem auch gelöst. Denn wie beim Mikromodus gibt es hier ebenfalls die Möglichkeit, das Programm an den eigenen Zeichensatz anzupassen.

Mit SHIFT-K ruft man die entsprechende Routine auf. Man benötigtvierZeichenfolgen. Jeweils eine fürX+, X—, Y+, Y— Mit 1-4 kann man wählen, welche man neu definieren will. Jede Zeichenfolge muß aus acht Zeichen bestehen, von denen das erste Space (32) oder das letzte Revers-Space (160) ist. Man steuert mit den Cursortasten auf das erste Zeichen und drückt dann RETURN. Nun muß man sich für +1 oder—1 entscheiden. Hier hilft nur ausprobieren. Dann gibt man nur noch die Geschwindigkeit an und die neue Zeichenfolge ist im Speicher.

Ein Pseudoschirm muß auch abgespeichert und geladen werden können, was man mit F1 und F3 erreichen kann. Die Scroll-Machine enthält bereits Routinen, um einen Pseudoschirm aus irgendeinem Speicherbereich auf Diskette Gerätenummer 8 abzuspeichern und in den gleichen Bereich wieder zu laden. Für die Datasette existiertjedoch kein Befehl, so daß man dafür die ROM-Routinen verwenden muß. Deshalb kann man mit der Datasette nur das Basic-RAM benutzen, da sich die Bereiche von 40960 bis 49151 und 57344 bis 65535 von den ROM-Routinen nicht auslesen lassen. Man kann jedoch einen Pseudoschirm in das Basic-RAM laden, um ihn dann mit dem UT-Befehl in das versteckte RAM zu schieben. Wenn man einen Pseudoschirm mit dem eigenen Programm von Kassette laden will, muß man das Unterprogramm des Editors verwenden (ab Zeile 17 500). Der Wechselmodus wird mit»W«aktiviertund mitSHIFT-W definiert. Man kann einen Bereich von Zeichen festlegen, die dann zyklisch wiederholt verwendet werden. Nützlich ist dies für flächige Felsstrukturen oder ähnliches. Denn wenn man den ganzen Bereich mit dem gleichen Zeichen gestaltet, wird die Struktur regelmäßig und sieht nicht echt aus.

Aus allen Modi kommt man wieder heraus, indem man den Pfeil nach links drückt. Dadurch wird der Editor wieder in den Normalzustand zurückgesetzt.

Zum Editor ist damit alles Wichtige gesagt. Abtippen muß man ihn wie jedes andere Programm, die REM- und Doppelpunkt-Zeilen werden jedoch nicht angesprungen, deshalb können sie weggelassen werden.

Die Befehlsliste gibt Auskunft über die restlichen Funktionen und deren Handhabung.

Ich hoffe, daß das Programm möglichst fehlerlos ist und wünsche Ihnen viel Spaß damit

Um die Fähigkeiten von »Scroll-Machine« aufzuzeigen, soll auch gleich ein kleines Beispielprogramm angeführt werden. Da man es niemandem zumuten kann, einen Pseudoschirm von 8 KByte oder mehr abzutippen, muß sich das Spiel den Schirm selbst aufbauen. Daß darunter die Qualität der Grafik leidet ist klar. Außerdem habe ich keinen neudefinierten Zeichensatz verwendet, sondern nur die Commodore-Zeichen Space (32), lnvers-Space (160) und lnvers-Shift-0 (207). Der Pseudoschirm besitzt nur eine Auflösung von 128 x 64, was genau 8 KByte entspricht. Eigene Schirme sollte man größer machen — etwa 20 bis 30 KByte — und wenn möglich mit einem eigenen Zeichensatz versehen.

## Atomdepot, ein Demoprogramm zur Scroll-Machine

Doch dieses Spiel ist trotzdem ein gutes Beispiel dafür, wie man die Scroll-Machine benutzt.

Der Handlungsort ist ein Bergwerksstollen in nicht allzu ferner Zukunft, in dem noch drei Atommüllfässer lagern. Sinn des Spiels ist es, die drei Fässer von der hinteren Kammer in die vordere zu bringen, von wo sie abtransportiert werden können. Der Greifer des Transporters wird mit dem Feuerknopf des Joysticks (Port 2) bedient, doch erst dann, wenn Greifarme punktgenau am Faß anliegen. Ebenso vorsichtig muß man es auf den Boden stellen. In einem engen Stollen ist der Transport nicht einfach, doch mit genügend Geduld und etwas Übung ist auch das kein Problem.

(Thilo Herrmann/ah)


# MSE-Abtippen sicher und leicht gemacht \[54-55]

> Ähnlich wie der »Checksummer« ist auch der MSE ein Hilfsmittel bei der Eingabe von Listings, diesmal jedoch bei reinen Maschinensprache-Programmen.

Im Gegensatz zum »Checksummer« aber ist die Eingabe nicht ohne den MSE möglich. Der M8E verringert die Tipparbeit um ein Drittel und schließt Fehleingaben vollkommen aus. Außerdem können Sie die DATAs blind eingeben, ohne andauernd auf den Bildschirm schauen zu müssen. Dies wird durch akustische Meldungen realisiert.

MSE ist ein Maschinenspracheditor, mit dem ein Vertippen ausgeschlossen ist. Eine abgetippte Zeile wird nur angenommen, wenn sie richtig ist. Eine Checksumme am Ende jeder Zeile prüft, ob die richtigen Werte in der richtigen Zeile an der richtigen Stelle stehen. Wenn nicht, ertönt ein Warnsignal, und man beseitigt den Fehler.

War die Zeile korrekt, erklingt ein Gong, und die nächste Zeilennummer wird ausgegeben. Damit ist also auch »blindes« Eintippen möglich; Sie können sich voll auf den Text konzentrieren.

### So arbeitet man mit MSE

Laden und starten Sie MSE. Zuerst wird der Programmname und die Start- und Endadresse erfragt. **Diese Angaben entnehmen Sie dem Kopf des jeweiligen abgedruckten Listings.** MSE meldet sich dann mit der Zeilennummer der ersten Zeile. Wenn Sie die Zeile richtig eingegeben haben, erscheint die nächste Zeilennummer und so weiter bis zum Ende. Zum Schluß wird das fertige Programm mit »CTRL-S« auf Diskette oder Kassette abgespeichert. Dazu sind keine weiteren Angaben mehr erforderlich. Das Programm kann dann ganz normal wieder geladen und gestartet werden. Wenn Sie nicht alles auf einmal tippen wollen, können Sie jederzeit unterbrechen und den eingetippten Teil mit »CTRL-S« abspeichern. Wollen Sie weiterarbeiten, laden und starten Sie MSE wieder.

Geben Sie auf die Frage nach der Startadresse aberjetzt »L« ein, um Ihr Teilprogramm zu laden. Jetzt können Sie mit »CTRL-N« die Adresse eingeben, an der Sie weitertippen müssen. Wenn Sie sich nicht gemerkt haben, wie weit Sie gekommen sind, geben Sie nach dem Laden »CTRL-M« ein.

Auf die Frage nach der Startadresse antworten Sie mit der Anfangsadresse, die links in der Kopfzeile auf dem Bildschirm steht. Nun wird Ihr Programm aufgelistet. Mit »SPACE« wird das Listen fortgesetzt, mit »STOP« abgebrochen. Das Ende Ihres Programmteils erkennen Sie sehr einfach daran, daß nur noch der Wert »AA« in der Zeile steht. Die Adresse dieser Zeile müssen Sie anschließend mit »CTRL-N« eingeben. Das Programm ist nur mit »STOP/RESTORE« zu verlassen. Speichern Sie aber vorher unbedingt immer Ihren Text ab.

### Hinweise zum Abtippen

Vor dem Abtippen oder späteren Wiederladen des MSE-Laders müssen Sie unbedingt folgende Zeile eingeben:
**POKE 43,1:POKE 44,32:POKE 8192,0 NEW**

Starten Sie das Programm mit RUN. Fehlerhafte Zeilen werden angezeigt und müssen korrigiert werden, bis der Lader zum »READY« durchläuft. Jetzt müssen Sie das fertige MSE-Programm abspeichern. Dazu brauchen Sie nur »RETURN« zu drücken, weil die erforderlichen Angaben schon auf dem Bildschirm stehen. (Kassettenbesitzer müssen in Zeile 343 die letzte Zahl in »1« abändern). Abjetzt können Sie »MSE V1.0« direkt, also ohne den DATA-Lader, benutzen, MSE V1.0 wird ganz normal mit »,8« geladen (keine POKEs notwendig).

(N. Mann /D. Weineck/gk)

TODO ASIDE

### MSE-Befehle:

DEL löscht die letzt Eingabe.
CTRL-S speichert das eingetippte Programm ab.
CTRL-L lädt ein Programm. Start- und Endadresse werden automatisch ermittelt.
CTRL-M listet den Speicherinhalt. Abbruch mit STOP-Taste, weiter mit Leertaste.
CTRL-N erlaubt die Eingabe einer neuen Adresse zum Weitertippen.
CTRL-P gibt ein MSE-Listing auf dem Drucker aus.

# Kurvenplotten mit Hardcopy \[68]

> Mit Hilfe dieses Programmes ist es auf demC 16 möglich, eine oder mehrere Funktionen in ein Koordinatensystem zu plotten und anschließend eine Hardcopy herzustellen.

Da der C 16 bei hochauflösender Grafik leider nur noch 2 KByte für Basic übrig hat, mußte auf REM-Zeilen verzichtet werden, wodurch die Übersichtlichkeit des Programms etwas leidet.

Das Programm gliedert sich in folgende Teile:

TODO TABLE

10-190 Initialisierung, Eingabe der Funktion, Wahl von Koordinatensystem und Maßstab
200-320 Funktion wird geplottet
330-390 Festlegung des Nullpunktes
400-480 Festlegung der Vergrößerung
510-610 Koordinatensystem und Beschriftung zeichnen 620-710 Bildschirm lesen und Ausgabe an Drucker

Nach dem Starten des Programmes mit RUN muß zunächst die gewünschte Funktion eingegeben werden. Dies geschieht dadurch, daß in der aufgelisteten Zeile 200 die gewünschte Funktion anstelle von F(x) eingegeben wird (x muß als Variable benutzt werden).

Durch Drücken von RETURN wird die Zeile programmiert. Wenn Sie wünschen, daß der hochauflösende Bildschirm gelöscht werden soll, so drücken Sie nun F1; soll die neue Funktion dagegen zu bestehenden Kurven hinzugeplottet werden, so drücken Sie F3.

Nun müssen Sie den Maßstab eingeben (für eine Sinusfunktion ist beispielsweise 40 ein guter Wert) und eines von den drei möglichen Koordinatensystemen auswählen.

Bei der Eingabe der Funktion braucht man nicht auf Definitionslücken zu achten, da die TRAP-Anweisung in Zeile 240 »DIVISION BY ZERO« Fehler und andere abfängt.

Nach Beendigung des Plottens erscheint in der rechten oberen Ecke ein »E«. Drückt man jetzt auf »C«, wird der Bildschirm gelesen und als Hardcopy über den Drucker ausgegeben. Dies dauert leider fast 30 Minuten, da jeder der 64000 Bildpunkte einzeln ausgelesen und in ein dem Drucker genehmes Bitmuster umgewandelt werden muß. Dieser Programmteil (ab Zeile 620) wurde für den Seikosha GP100VC geschrieben und muß für andere Drucker eventuell geändert werden. Jeder andere Tastendruck führt zu einem kurzen Menü.

Man kann durch Druck auf F1 Maßstab und Koordinatensystem neu wählen.

Durch Druck auf F2 kommt man wieder zur Anfangsroutine und kann eine neue Funktion eingeben.

(Christian Schoske/ev)

# HI-EDDI — Druckerroutinen \[69-70]

> Schon lange warten HI-EDDI-Besitzer auf eine Anpassung für ihren Drucker. Die in Ausgabe 1/85 abgedruckte Version ließ eine Superhardcopy nur für den Epson zu. Doch jetzt kommen auch Besitzer von Commodore-Drucker in den Genuß, HI-EDDI-Bilder ausgeben zu können.

Welcher 64’er Leser kennt ihn nicht—den HI-EDDI, das fantastische Zeichen- und Malprogramm aus Ausgabe 1/85. Jeder der einen Epson oder dazu kompatiblen Drucker besaß, kam sogar in den Genuß der ausgezeichneten Hardcopy-Funktion. Jetzt folgen Anpassungen für Drucker anderer Hersteller, diesmal für die Commodore-Drucker MPS 801/802/ 803 und kompatible. Für andere Drucker werden noch Lösungen gesucht.

## Hi-EDDI für MPS 802 und kompatible

Ich begann nach Überwindung meiner Abneigung gegen stundenlanges Tastenklopfen HI-EDDI abzutippen. Nach den ersten Tests dieses fantastischen Zeichen- und Malprogramms, bereute ich es aber nicht mehr mich dieser Tortur unterzogen zu haben. Doch mußte ich als Besitzer eines MPS-802-Druckers feststellen, was ist HI-EDDI ohne Superhardcopy?

Die Antwort darauf veranlaßte mich dazu, die Anregung in der Funktionsbeschreibung aufzugreifen und eine Lösung für einen anderen Drucker zu suchen. Gesagt — getan, hier ist mein Lösungsvorschlag für den Commodore MPS-802 (Listing 1)

Die Druckerroutine hat dieselben Eigenschaften wie die in 1/85 veröffentlichte und von Hans Haberl geschriebene Routine für Epson-Drucker. Daher kann auf eine Funktionsbeschreibung verzichtet werden. Ich hoffe, daß der Ausdruck von Hl-EDDI-Grafikbildern mit diesem Programm auf allen Versionen des Commodore 1526/MPS-802 Druckers funktioniert. Bei meinerAusführung (REV 07C) konnte ich bisjetztkeine Fehler feststellen.

(Franz llletschko/gk)

## HI-EDDI für MPS 801/803 und kompatible

Eine Lösung für den Commodore MPS 801/803 schickte uns Florian Kulzer (Listing 2). Auch hier braucht am HI-EDDI selbst nichts verändert zu werden. Die Hardcopy wird, wie im 64’er 1/85 beschrieben, mit den Tasten »Commodore« und »P« gestartet.

Allerdings ist mit diesem Programm das Nebeneinanderdrucken zweier Bilder nicht möglich. Ausgegeben wird immer eine Hardcopy des aktuellen Bildschirms. Daher können die Fragen nach Nummer und Format der Hardcopy beliebig beantwortet werden.

(Florian Kulzer/gk)

## HI-EDDI mit der Datasette

Die Anpassung von HI-EDDI an die Datasette war doch nicht ganz so einfach wie zuerst gedacht. Hier sind die notwendigen Informationen. Die folgenden Listingsverweise beziehen sich auf 64’er, Ausgabe 1/85.

a)	Am Listing 3 (HI-EDDI) folgende Änderungen vornehmen: In Zeile 50, 110 und 640 LOAD” .. ”,8,1 durch LOAD”.. ”,1 ersetzen.

TODO PRE

160 ON A+1 GOSUB 290,250,300,290,290,600,290,290,500, 510,300:GOTO150
300	POKE8115,1:PRINT...
330 PRINT C$:POKE 780,ASC(C$):H$=W$:W$=” ”
340 INPUT”[Cursor Down]FILENAME”;W$:SYS 3331:W$=H$:H$=" ”
350 RETURN

Folgende Zeilen weglassen: 200-220, 400

b)	Das so modifizierte Listing 3 als erstes auf die Programmkassette aufnehmen.
c)	Folgende Befehle im Direktmodus eingeben:

TODO PRE

NEW
POKE8192,0:POKE43,1:POKE44,32:NEW

d)	Den DATA-Lader (Listing 2) laden und folgende Änderungen vornehmen:

TODO PRE
9 :
10 :
50	D=H(H)\*16 + H(L):S=S+D:POKEI,D
85 IFA<0THEN95
90 S=O:A=O:PRINT:NEXT
95	POKE43,0:POKE44,13:POKE45,76:POKE46,31
96 SAVE”HI-EXE”,1,1:END

e)	Programmkassette einlegen (nach Listing 3) und Listing 2 starten. Wenn keine Fehler mehrdrin sind, erzeugt der Lader auf der Kassette das Maschinenprogramm HI-EXE.

f)	HI-EDDI istjetzt bereits lauffähig: Programmkassette zurückspulen, Computer kaltstarten, Listing 3 laden und starten. Das Maschinenprogramm wird nun geladen.

g)	Die HI-EDDI-Befehle LOAD und SAVE funktionieren ebenfalls, somit kann auch schon das Menü erstellt werden. Die fertige Menütafel (mit Listing 4 verbunden) sollte an dritter Stelle auf die Programmkassette aufgenommen werden.

h)	Hier die erforderlichen Änderungen am Listing 1: Zunächst wieder die POKEs wie unter c) eingeben und dann Listing 1 laden und folgende Änderungen vornehmen:

TODO PRE
720 FOR I = 3326 TO 3708
730 READA:IF A<0THEN 730
740 POKEI,A:NEXT
750	POKE43,0:POKE44,13:POKE45,125:POKE46,14
760 SAVE”HI-PRINT”,1,1
770 END

i)	Programmkassette einlegen (an 4. Stelle) und Listing 1 starten. Auf der Kassette wird nun das Maschinenprogramm Hl-PRINT erzeugt.

Wenn nun im Programmlauf vor einem Druckvorgang diese Druckroutine geladen wurde, muß die Kassette zurückgespult werden, so daß das Maschinenprogramm HI-EXE nach Beendigung des Druckvorganges wieder geladen werden kann.

(Hans Haberl/gk)

# Tips & Tricks gesucht \[70]

Jeder Computer und jedes Programm hat seine speziellen Schwachstellen und Unzulänglichkeiten. Allerdings ist kaum ein Programmierer oder Anwender auf Dauer bereit, sich damit abzufinden. Wo auch sorgfältigste Lektüre von Handbüchern nicht weiterhilft, da wird so manche Stunde experimentiert, um eine Lösung zu finden (die oft in einer Basic-Zeile Platz hat).

Wir suchen solche Tips und Tricks, um sie allen Lesern zugänglich zu machen. Schließlich ist es wenig sinnvoll, sich wochenlang mit Problemen herumzuschlagen, die andere bereits gelöst haben.

Wenn Sie also interessante Tips für den Umgang mit Computer, Floppy, Drucker oder sonstiger Hardware haben, wenn Sie bei kommerzieller Software einige Kniffe kennen, die nicht in der Anleitung stehen, oder wenn Sie interessante Problemlösungen statt in vier Seiten Listing in ein oder zwei Basic-Zeilen untergebracht haben, dann sollten Sie uns auf jeden Fall einmal schreiben.

Bitte geben Sie genau den Computertyp und die Gerätekonfiguration oder die Software an, und senden Sie Ihren Tip oder Trick an die
Redaktion 64’er
Markt & Technik Verlag Aktiengesellschaft
Hans-Pinsel-Str. 2
8013 Haar bei München

# Samurai \[72-74]

Samurai ist ein Strategiespiel für zwei Personen. Gespielt wird auf einem acht mal acht Felder großem Spielplan. Jeder Spieler besitzt 16 Spielfiguren, darunter der König. Ziel des Spieles ist es, den gegnerischen König zu schlagen oder so viele Spielsteine zu entfernen, daß außer dem König nur eine Figur übrig bleibt. Geschlagen werden Spielsteine, ähnlich wie bei Schach, wenn ein eigener Spielstein auf das Feld des Gegners gesetzt wird. Die Zahl aufjedem Spielstein zeigt an, wie weit der Stein ziehen muß. Nach jedem Zug ändert sich diese Zahl des bewegten Spielsteines. Bei dem König erscheinen nur die Eins und die Zwei, bei den übrigen Steinen Eins bis Vier.

Die Spielsteine dürfen nur waagerecht oder senkrecht bewegt werden. Dabei darf der Spieler einmal rechtwinklig abbiegen. Es dürfen keine Spielsteine übersprungen werden.

Der Computer überwacht die Züge. Sind diese falsch, erscheint auf dem Bildschirm »N. möglich«. Wird ein Spielstein geschlagen, so erscheint »F. geschlagen«. Rechts oben steht immer der Name des Spielers, der am Zug ist.

Man kann die Steine bewegen, indem man die Koordinaten der Anfangs- und Endposition der Steine eingibt. Eine weitere Möglichkeit ist, die Spielsteine durch den Joystick zu steuern.

Mit dem Joystick kann man die Spielsteine folgendermaßen bewegen: am Anfang erscheint ein Pfeil. Der Spieler mit dem roten Stein hat einen weißen Pfeil und umgekehrt. Diesen Pfeil kann man nun beliebig, mit Hilfe des Joysticks, über das Spielfeld bewegen. Hat man den Pfeil auf dem Spielstein, den man aufnehmen will, so muß man auf den Feuerknopf drücken. Nun kann man entsprechend der Zahl auf dem Spielstein fahren. Der Spielstein bleibt aber auf seiner Position. Wenn man den Stein nun absetzen will, so muß man wiederum auf den Feuerknopf drücken. Der Rahmen um den Pfeil verschwindet nun und der Stein wird dort hingesetzt. Wenn man den Stein mit Hilfe der Koordinaten bewegen will, muß man am Anfang (nach der Anleitung) ein »K« drücken. Derjeweilige Spieler muß dann während des Spieles die Zeile und Spalte des Anfangs- und Endpunktes des Spielsteines über Tastatur eingeben. Falls man keinen oder nur einen Joystick besitzt, kann man den fehlenden durch die Tastatur ersetzen.

Man muß folgende Zeilen ändern (Am Beispiel für Spieler 1, Joystickport 1):

TODO TABLE

(Thomas Strigl/rg)

# Prost mit dem C 64 \[76-78]

> Dieses Programm macht Ihren C 64 zum elektronischen Steuermann. Mit dem User-Port können Sie bis zu acht Geräte ein- und ausschalten.

Der Name Pro.St steht für programmierbare Steuerung; das Programm erlaubt die Steuerung von acht Geräten, die über entsprechende Treiberschaltungen am User-Port des C 64 angeschlossen sind. Für den Steuerungsablauf stehen Ihnen etwa 30 000 Einzelschritte zur Verfügung. Jeder Schritt wird als ein Byte im verbleibenden Basic-Speicher abgelegt. Zur Bearbeitung des Programmablaufs hat Pro.St einen eigenen Editor, mit dem Abläufe erstellt, geändert, angezeigt, ausgeführt, gespeichert und geladen werden.

Nach dem Starten des Programms wird in Zeile 9 das User-Port-Display von Jan Legenhausen, 64’er Ausgabe 8/84, geladen. Sollten Sie dieses Programm (noch) nicht haben, sei gesagt, daß Pro.St auch ohne diese Anzeige läuft, dann aber an eine Autofahrt mit schwarzen Scheiben erinnert: Man weiß nie, woran man ist. Haben Sie das Programm von Jan Legenhausen nur als Basic-Lader, starten Sie den Lader und laden dieses Programm manuell. Vergessen Sie dann nicht, Zeile 9 von Pro.St zu löschen.

Pro.St meldet sich nach dem Start mit seinem Hauptmenü, das sieben Wahlmöglichkeiten hat:

**1**:	Eingabe eines Steuerprogramms über die Tastatur. Es werden für jeden Kanal des User-Ports die Schaltzustände (an/aus) binär eingegeben. Tippfehler können Sie mit DELete löschen. Korrekte Eingaben schließen mit RETURN ab. Das Programm wandelt die Eingabe in eine Dezimalzahl und POKEt siein den Programmspeicher, der ab Adresse 10240im Basic-RAM beginnt. Beendet wird der Eingabemodus durch Eingabe von E und bei vollem Programmspeicher (RAM-Ende bei 40960).

**2**:	Schaltet in den Edit-Modus. In einem Untermenü können Sie bestimmen, ob ein Schritt gelöscht (1), eingefügt (2) oder ersetzt (3) werden soll. Um den entsprechenden Schritt zu ändern, mußdessenNummereingetipptwerden. Die letzte Wahlmöglichkeit (4) zeichnet eine grafische Darstellung des Programmablaufs. Die Schaltzustände am User-Port werden dazu in einem Diagramm gegen die Zeit aufgetragen, indem bis zu 35 Schritte aus dem Speicher geholt, ins Binärsystem umgerechnet und als High-Low-Diagramm auf den Bildschirm gedruckt werden. Mit den V- und Z-Tasten kann dabei im Programmablaufplan geblättert werden.

**3**:	Führt ins Disketten-Unterprogramm. Hier können erstellte Programme gespeichert (1), geladen (2) und Directories gezeigt werden.

**4**:	Löscht den Programmspeicher von Pro.St.

**5**:	Startet das Programm im Speicher. Zuvor können Sie noch zwischen Freilauf (1) und Einzelschrittverarbeitung (2) wählen. Bei Freilauf müssen Sie die Zeit zwischen zwei Schritten angeben. Bei Einzelschritt können Sie mit der CTRL-Taste den nächsten Schritt starten. In beiden Fällen bestimmen Sie zusätzlich die Anzahl der Programmdurchläufe.

**6**:	Dient zum direkten Testen der angeschlossenen Peripherie. Mit den Tasten 1 bis 8 kann ein Gerät, das am entsprechenden User-Port-Kanal angeschlossen ist, geschaltet werden.

**7**:	Beendet das Programm. Nach einer Sicherheitsabfrage wird der User-Port wieder in den Anfangszustand versetzt.

### Hinweis

Da das Programm in Basic geschrieben ist, kann es nicht für zeitkritische Fälle verwendet werden. Wegen der Ungenauigkeit der internen Uhr des C 64 bedarf es einer Zeitkorrektur. Sie sollten den Korrekturfaktor in Zeile 2065 mit einer Stoppuhr nachprüfen. Der Korrekturfaktor wird mit Ihrer Sekundenangabe (ZD) für einen Schaltschritt multipliziert und dann ständig mit der internen Uhr (Tl) verglichen. Da TI im 1/60-Sekundentakt zählt, ist der Standard für den Korrekturfaktor 60.

(Michael Anton/hm)

# Durch POKEs zum Erfolg — Die Spiele-Trickkiste (2) \[78-79]

> Wieder einmal greifen wir tief in unsere Trickkiste und ermöglichen damit auch dem nicht so ganz versierten Spielefan einen Ausflug in höhere oder sogar höchste Spiel-Level.

Stellen Sie sich vor, Sie hätten bei Ghostbusters 1 000 000 Dollar (!) Startkapital, könnten bei H.E.R.O. Ihre Feinde verschwinden lassen oder bei Pitfall endlich alle Bilderzu Gesicht bekommen. Zauberei? Nein, ein paar POKEs und andere Tricks reichen völlig aus.

Allerdings erheben die folgenden POKEs keinen Anspruch auf Funktionsfähigkeit bei jeder Version der angegebenen Spiele. Insbesondere kommt es natürlich dann zu Problemen, wenn das Programm mit einem Autostart versehen ist und man keinen Reset-Schalter zur Verfügung hat.

Auch die Freunde von Ghostbusters kommen diesmal zu ihrem Recht: Zwar haben wir für dieses Spiel noch keinen POKE zur Hand, aber einige Tips, wie man das reichlich magere Startkapital kräftig erhöhen kann.

(ev)

TODO TABLE

Die Super-Nummer jedoch stammt von Mathias Höschen: $ 1 Million (!) erhält man bei Ghostbusters, wenn man statt eines Namens nur die RETURN-Taste drückt und als Kontonummer »458« eingibt. Als Anzeige erscheintjetzt nur »000000«, aber nach dem ersten Einkauf merkt man, daß man damit eine Million zur Verfügung hat.

(Hermann Gorges/Mathias Höschen/Christoph Peter/Peter Siegert/Dirk Vreden)

# Tips & Tricks \[80]

## Directory ohne Programmverlust

Häufig möchte man sich das Directory einer Diskette ansehen ohne das gerade im Speicher befindliche Programm zu zerstören. Wenn man das DOS 5.1 nicht geladen hat, behilft man sich meist mit der zeitaufwendigen Zwischenspeicherung des Programms auf der Diskette. Es geht jedoch auch einfacher und schneller. Geben Sie einfach den folgenden Befehl ein:
POKE 44, PEEK(46) + 1

Damit wird der Basic-Anfang auf einen freien Speicherbereich gestellt. Sie können jetzt wie gewohnt mit »LOAD ”$” ,8« das Directory laden und anschließend auflisten.

Mit POKE 44,8 sind Sie dann wieder im eigentlichen Programm.

(Heinzpeter Oelkers)

## Commodore-Joystick verbessert

Der Commodore-Joystick VIC-1311 benötigt eine relativ große Hebelbewegung, um die Kontakte zu schließen. Bei Spielen, die eine hohe Reaktionsgeschwindigkeit erfordern, ist diese Eigenschaft sehr ungünstig. Man kann jedoch recht einfach Abhilfe schaffen:

Man entfernt die vier Schrauben an der Unterseite des Gehäuses und hebt den oberen Teil des Joysticks mit der Platine vorsichtig ab. Nun wird die Platine an den Durchtrittsöffnungen der Schrauben mit je einer etwa 1 Millimeter dicken Unterlegscheibe verstärkt. Die vier Unterlegscheiben können mit einem Tropfen Alleskleber (Vorsicht, nicht die Kontakte verkleben !) gegen Verrutschen gesichert werden. Danach wird der Joystick wieder zusammengeschraubt. Wenn Sie alles richtig gemacht haben und insbesondere keine Teile übriggeblieben sind, dann werden die Kontakte des Joysticks nun bei erheblich kleineren Hebelbewegungen geschlossen.

(M. Kunze)

## Sequentielle Datei als Basic-Programm laden

Es sind eine Reihe von Anwendungen denkbar, bei denen aus einer sequentiellen Datei auf Diskette oder Kassette ein lauffähiges Basic-Programm erstellt werden soll (Datenfernübertragung, Umwandlung von Textfiles in Basic-Programme). Der folgende Einzeiler macht's für den VC 20 möglich:
OPEN 1, ⟨Gerät⟩, ⟨Sekundäradresse⟩, ”⟨Name⟩” : POKE 812, 238 : POKE 781, 1 : SYS 65478

Dieses Miniprogramm öffnet das File Nummer 1 als Eingabefile (anstelle der Tastatur). Außerdem wird der CLALL-Vektor des Betriebssystems auf ein »RTS« gesetzt, so daß beim Einlesen von Programmzeilen keine Files geschlossen werden.

Deshalb werden nach Eingabe der obigen Befehlszeile von der ausgewählten Datei so lange Zeilen eingelesen und anschließend sofort im Direktmodus ausgeführt, bis die Betriebssystem-Routine CLRCHN aufgerufen wird (zum Beispiel durch einen Syntaxfehler in den gelesenen Zeilen oder durch GET #1, A$).

Um in den normalen Eingabemodus zurückzukehren, muß nur »POKE 812, 239 : CLR« eingegeben werden.

Zum Ausprobieren: Laden Sie ein beliebiges Basic-Programm und geben Sie danach im Direktmodus ein:
OPEN 1,8,3,”LlSTING,S,W”: CMD 1 : LIST : PRINT#1 : CLOSE 1

## Tips zum C 64

Mit »POKE 808,225« wird die STOP-Taste ausgeschaltet und das Programm kann nicht mehr angehalten werden. »POKE 808,237« schaltet STOP wieder ein.

Eine Repeat-Funktion für alle Tasten wird mit »POKE 650,128« aktiviert. »POKE 650,0« schaltet wieder auf den Normalzustand zurück (Repeat-Funktion nur für die Leertaste und die Cursortasten sowie bei DEL und IN8T). Mit »POKE 650, 64« wird auch die Wiederholfunktion für diese Tasten abgeschaltet.

»POKE 657, 128« verhindert die Umschaltung zwischen Text- und Grafikmodus mit der Kombination von Shift- und Commodore-Taste. »POKE 657,0« hebt dies wieder auf.

Die Cursorfarbe kann mit »POKE 646,x« festgelegt werden, wobei für »x« der entsprechende Farbcode einzusetzen ist.

»PRINT PEEK(186) ergibt die Gerätenummer des zuletzt angesprochenen Peripheriegerätes.

(Thomas Lopatic)

## Zwei Tips für den C 64

Die Speicherstellen 57 und 58 enthalten die Zeilennummer der aktuellen Basic-Zeile. Die Abfrage geschieht mit »PRINT PEEK(57) + 256 \* PEEK(58)«.

Mit »PRINT PEEK(1)« kann abgefragt werden, ob eine Taste an der Datasette gedrückt ist. Es gibt drei mögliche Werte:
7: Taste gedrückt,
55: keine Taste gedrückt,
39: Taste gedrückt, aber Programmlauf unterbrochen.

Diese Abfragen sind für die benutzerfreundliche Programmierung von Kassettenoperationen recht nützlich.

(Wolfgang Meyer)

## VC 20-Grundversion simuliert

Mit der folgenden kurzen Routine lassen sich die meisten Grundversions- oder +3 KByte-Programme auch mit einer 8 KByte-Erweiterung laden und ausführen:
POKE 648, 30 : SYS 64821
POKE 4096, 0 : POKE 44, 16 : NEW

Danach wird das Programm ganz normal geladen und gestartet. Da der Bildschirmspeicher durch die kleine Routine an der gleichen Stelle wie in der Grundversion liegt, sind die meisten Grundversions-Programme ohne weitere Änderungen direkt lauffähig.

## VC 20-Tips

POKE 792, 34 : POKE 793, 3 — Nach Drücken der RESTORE-Taste führt der Computer einen Kaltstart aus.

SYS 65511 — Dieser Befehl schließt alle Dateien

POKE 198,0:WAIT 198, 1 —DerComputerwartet, biseine Taste gedrückt wird.

SYS 64802 — Es wird ein vollständiger Kaltstart ausgeführt

SYS 64818 — Kaltstart des VC 20, ist schneller als SYS 64802

POKE 818,34 : POKE 819,253 : POKE 37150,2 — Damit wird das Abspeichern von Programmen verhindert (Kopierschutz). Nach der Eingabe von »SAVE« führt der Computer einen Kaltstart durch.

(Thomas Hahn)

# Fehlerteufelchen \[84]

### Änderungsvorschlag zur Turtle-Grafik, Ausgabe 3/85, Seite 90

Der POKE-Befehl lautet korrekt: POKE 44,18: POKE 18 \* 256,0: NEW. In Zeile 960 ist das Komma nach der 3 wegzulassen, so daß 32 entsteht. In Zeile 1040 ist nach dem 6. Datum nochmal eine 29 einzufügen.

### Erst ein IEC-Bus öffnet Tür und Tor, Ausgabe 3/85, Seite 24

Das IEEE 488-Interface von Luda erlaubt, im Gegensatz zu der Angabe in der Tabelle auf Seite 26, die Verwendung einer Datasette. Was in der Kernalversion wegfällt, sind die Routinen zur seriellen Datenübertragung. Sie werden erst durch Umschalten auf den Standardkernal wieder möglich. Das Luda-Interface überträgt auch das EOI-Signal.

### Mit 80 fängt das Leben an, Ausgabe 4/85, Seite 19

Die 80-Zeichenkarte XL-80 wird nicht direkt von General Automation vertrieben, sondern nur über Händler. Der Preis ist also von Fall zu Fall zu erfragen, er liegt über 250 Mark.

### Sternenhimmel, Ausgabe 5/85, Seite 58

In den Zeilen 50140, 50340, 50360, 50400, 50440, 50470, und 50510 muß zwischen den Anführungszeichen jeweils ein Cursor up durchgeführt werden. In Zeile 50300 zwischen den Anführungsstrichen ein CLR (Bildschirm löschen) einfügen. In Zeile 50210 muß der Variablen pi der Wert π zugewiesen werden, also pi = π.

### Trickfilm mit dem C 64, Ausgabe 5/85, Seite 64

Im Listing »Trick.Obj« auf Seite 65 ist in Zeile C1D8 das dritte Datum etwas schlecht zu lesen, es lautet: A5 und nicht A3!

## Sonderheft Abenteuerspiele

### Quasimodo, Seite 76

Wenn die Fehlermeldung »Next without for« in der Zeile 715 auftritt, so geben Sie vor dem Starten im Direktmodus POKE 44,64:POKE 16384,0 ein, und die Sache funktioniert. Die fehlende GOTO-Anweisung in Zeile 2100 ist ohne Bedeutung für den Ablauf des Programms.

### Zeittunnel, Seite 93

Bitte ergänzen Sie die Zeile 4870 auf Seite 99 wie folgt: 4870 PRINT”(DOWN,RIGHT,RED) ZERSCHMETTERT. DU BIST TOT.”:GOTO 4450.

### Floppy 1541 jetzt für PC-1500, Ausgabe 5/85, Seite 9

Bei der angegebenen Telefonnummer fehlte leider eine Null. Die korrekte Anschrift lautet: Ing. Rudolf W. Fankhauser, Postfach 1115, D-7893 Jestetten. Das ist die Postanschrift für Deutschland. Die Anschrift in der Schweiz: SRS, Micro Computer Products, Ing. Rudolf W. Fankhauser, Postfach 1207, CH-8213 Neunkirch/SH, Tel. (**0**0 4153) 6 25 93.

0041 ist die internationale Vorwahl für die Schweiz!

### Leserservice, Ausgabe 5/85, Seite 165

Obwohl nicht durch das Diskettensymbol explizit gekennzeichnet, sind folgende Listings auf der Leserservice-Diskette für die Ausgabe 5 enthalten: VIC — das intelligente Programm, Seite 175; 6510, Seite 71; Mini-Grafik für den VC 20, Seite 69; Sternenhimmel, Seite 58.


# Bücher, die zum C 64 gehören \[115,128]

> Wer seinen C 64 wirklich kennenlernen möchte, kommt um den Kauf zusätzlicher Literatur nicht herum. Wir haben für Sie eine Hitliste aus dem unüberschaubar groß gewordenen Angebot an begleitender Literatur zusammengestellt. Mit diesem Sortiment ist jeder Basic- oder Assemblerprogrammierer, aber auch der Hardware-Bastler bestens ausgestattet.

## Das eigentliche Handbuch

»Alles über den Commodore 64« aus der Commodore-Sachbuchreihe (Band 1) heißt das Standardwerk zum C 64. Wie schön wäre es, wenn dieses gute Buch mitjedem C 64 anstelle des mageren Handbuches ausgeliefert würde. Erstmals auf der Hannover-Messe 1984 angeboten, erfüllt dieses Programmierhandbuch einen lange gehegten Wunsch vieler Programmierer: Der englischsprachige »Programmers Reverence Guide« wurde ins Deutsche übersetzt.

Das fast 500 Seiten starke Programmierhandbuch ist im wesentlichen in drei Abschnitte gegliedert: Die Programmierung in Basic, in Assembler und die Beschreibung der Hardware. In allen drei Abschnitten wird auf die besonderen Baugruppen (Grafik, Musik, Ein-/Ausgabe) des C 64 und deren Programmierung eingegangen. Dem Konzept folgend, kein Lehrbuch, sondern mehr ein Nachschlagewerk zu sein, sind die abgedruckten Beispiele relativ kurz gehalten. Gerade aus der Kürze der Darstellung leitet sich aber der wichtigste Vorteil dieses Buches ab: Es ist sehr leicht, Informationen zu den verschiedensten Problemen zu finden. Sogar bei Fragen zum generellen Konzept des C 64 hilftdas Programmierhandbuch, denn am Ende des Buches ist ein kompletter Schaltplan des C 64 eingeheftet.

Es gibt kaum ein Buch zum C 64, das gleichermaßen umfassend informiert und trotzdem leicht verständlich geschrieben ist. Dabei bleibt der Wert des Buches auch mit steigenden Programmierfähigkeiten des Besitzers erhalten, denn viele Kapitel (Bausteinbeschreibung, Assemblerprogrammierung, Z80-Modul) sind erst für den fortgeschrittenen Programmierer wichtig. Das Programmierhandbuch »Alles über den Commodore 64« sollte nebenjedem C 64 liegen, auch wenn derzeit noch 59 Mark zusätzlich investiert werden müssen.

Info: »Alles über den Commodore 64«, Commodore Sachbuchreihe Band 1, Bezug über Fachhandel, ISBN3-89133-000-6, Preis 59 Mark

## Das Handbuch für den Profi

Mit dem »Systemhandbuch zum Commodore 64 und VC 20« haben die Profis von Interface Age das Handbuch für den fortgeschrittenen Programmierer geschaffen. Die Autoren Ralph Babel, M. Krause und A. Dripke haben in dieses mehr als 300 Seiten starke Buch ihre ganzen Erfahrungen aus der jahrelangen Arbeit mit Commodore-Computern einfließen lassen. Die eindeutige Aussage dieses Buches liegt in der Einsicht, daß ein so hervorragender Computer wie der C 64 erst in Assembler richtig programmiert werden kann. Dazu bedarf es aber der Kenntnis jedes einzelnen Bausteins im C 64. Herabsteigend bis auf die Chip-internen Grundvoraussetzungen werden die Bedingungen der Programmierung des C 64 umfassend und leicht verständlich beschrieben. In den vielen ausführlichen Kapiteln räumen die Autoren mit Unklarheiten und Halbwahrheiten über den C 64 auf. Folgende Themen werden dabei behandelt:

* Der Basic-Interpreter (Interne Codierung, Token-Tabelle, Binärarithmetik, Darstellung und Ablage von Variablen/ USR-Funktion, Steuercode-Tabelle
* Assembler (Assembler-Programm, Befehlsliste, Befehlserklärung, Adressierungsarten)
* Grafik und Farbe (Bildschirm- und Farbspeicher, Zeichengenerator, HiRes-Grafik, Sprites, Interrupt- und Grafikkontrolle, Screen Blanking, Smooth Scrolling, Registerübersicht, Farben, Sprite-Generator, Hardware des VIC)
* Funktionstasten
* Tonerzeugung (Tongeneratoren, Frequenzberechnung, ADSR-Funktion, Wellenformen, Tonerzeugung, A/D-Wandler, Registerübersicht, Hardware des SID)
* Ein-/Ausgabe (Serieller Bus, RS232, CIA-Chip, Portprogrammierung, Timer, Interrupt-Handling, Registerübersicht, Kontrollports, Joystick, Paddles, Lightpen, Datenspeicherungauf Kassette/Diskette)
* Adaption von CBM-Programmen
* Speicheraufteilung (Speicherübersicht, dokumentierte Memory-Map, CPU-Speicherverwaltung, Prozessorport, s Banking, Pinbelegung der CPU) — ROM-Listing (ausführlich kommentiert)

Besonders das ausführlich kommentierte ROM-Listing ist von unschätzbarem Wert, denn kaum ein Assembler-Programm, das nicht auf die Systemroutinen angewiesen ist. Leider sind alle Adressen in dezimaler Schreibweise aufgeführt. Besser wäre es gewesen, die vom Assembler her gewohnte hexadezimale Form zu verwenden. Auch wer das Betriebssystem an seine eigenen Bedürfnisse anpassen möchte, findet hier alle notwendigen Informationen. Dieses Buch trägt zu Recht den Namen »Systemhandbuch«. Kompromißlos richtet sich das Buch an den fortgeschrittenen Programmierer, trotzdem ist es leicht verständlich.

Info: Babel, M. Krause, A. Dripke »Das Interface Age Systemhandbuch zum Commodore 64 und VC 20«, Bezug durch Fachhandel, Preis: 74 Mark, ISBN 3-88986-001-X

## Der Klassiker

Obwohl das Haus Data Becker in den letzten Jahren den Computer-Literaturmarkt mit einer Vielzahl von Werken überschwemmt hat, gehört eines der ersten zu den besten. »64 Intern« war zu einer Zeit, als kaum jemand den Commodore kannte (beziehungsweise kaufte, weil er zu teuer war), das einzige Buch, das dem mit seinem Handbuch alleine gelassenen C 64-Besitzer von seinem Informationsdefizit befreien konnte.

Ähnlich einem Systemhandbuch aufgebaut, soll »64 Intern« durch gute Beschreibung der Hardware und ihrer Programmierung ein ständiger Begleiter beim Programmieren sein. Diesen Anspruch unterstreicht das kommentierte ROM-Listing (in hexadezimaler Form) am Ende des Buches. Die wichtigsten Kapitel dieses Buches sind: — Hardware (CPU, Speicherbelegungspläne, User-Port, Expansion-Port)

* Tonprogrammierung (Der SID, Register, A/D-Wandler, Synthy 64)
* Grafik (Der VIC, Registerbeschreibung, Betriebsarten, Schnittstellen zum Prozessor)
* Ein/Ausgabebausteine (Register-Plan, Ports, Timer, die CIAs, Joystickprogrammierung)
* Der Basic-Interpreter (Erweiterung des Basic, Monitor-Programm, wichtige Kernal-Adressen, RS232, serieller Bus)
* Vergleich: VC 20 — CBM — C 64
* ROM-Listing

Ebenso wie das Interface Age Systemhandbuch ist »64 Intern« für den fortgeschrittenen Programmierer nahezu unverzichtbar. Obwohl sich einige Informationen beider Bücher überschneiden, wird gerade durch die unterschiedliche Erklärung in beiden Büchern mancher Sachverhalt erst richtig verständlich.

Info: Angershausen, Brückmann, Englisch, Gerits, 64 Intern, Data Becker, 4. Auflage 1984, 350 Seiten, Preis: 59 Mark

## Von Basic zu Assembler

»Das Commodore-Buch Band 4«, ein Leitfaden für Systemprogrammierer, ist die Fortsetzung der Buchreihe von Markt&Technik. Dem Basic entwachsen, strebt so mancher Programmierer nach Höherem. Dieses Buch wendet sich deshalb vor allem an den Personenkreis, der gerade an der Schwelle der Assemblerprogrammierung steht. Somit widmen sich auch die ersten Kapitel der Beschreibung des Prozessors und seiner Befehle. Sehr übersichtlich werden Register, Adressierungsarten und Darstellungsformen der Assemblerschreibweise erklärt. Damit der Programmierer die neuen Kenntnisse auch gleich in die Tat umsetzen kann, haben die Autoren H. L. Schneider und W. Eberl in ihrem Buch gleich zwei Assembler und einen Disassembler mitgeliefert. Die erste Assemblerversion ist in Basic geschrieben. Die zweite Version wurde in durch Maschinensprache unterstütztem Basic entwickelt. Selbstverständlich stehen zu jedem Programm ausführliche Beschreibungen und Anleitungen zur Verfügung. Weitere Kapitel widmen sich der Zusammenarbeit von Maschinenprogrammen mit Basic. Sehr gut gelungen ist dabei die Tabelle der Basic-ROM-Routinen. Sie helfen besonders bei der Erstellung eigener Maschinenprogramme, denn durch geschicktes Verwenden dieser Routinen wird viel Platz gespart. Der Leser lernt nebenbei rationell zu programmieren. Trotzdem ist der Leitfaden für Systemprogrammierer kein Assembler-Lehrbuch, sondern ein für den Assembler-Anfänger lehrreiches und für den Profi hilfreiches Buch, das in keiner Sammlung fehlen sollte. Der pädagogische Wert dieses Buches wird durch die für 58 Mark erhältliche Diskette mit allen Programmen unterstützt.

(Arnd Wängler)

Info: H. L. Schneider, W. Eberl, Das Commodore 64-Buch, Band 4, ISBN-Nr.: 3-922120-70-9, Markt & Technik Verlag Haar b. München. Preis: 38 Mark

## Einführung in CAD mit dem Commodore C 64

Das rechnerunterstützte Konstruieren (Computer aided Design, kurz CAD) macht Gebrauch von den Fähigkeiten des Computers, zu rechnen, Daten zu verwalten und (auf dem Bildschirm oder dem Grafikdrucker) zu zeichnen, womit hier technisches Zeichnen, nicht Malen gemeint ist. Der Autor dieses neuen Data-Becker-Buches betont zu Beginn, daß im Vergleich zu professionellen Systemen die geringe Bildschirm-Auflösungsfähigkeit des C 64 der einzige echte Nachteil sei; die geringe Speicherkapazität und Rechengeschwindigkeit sei durch geschickte Organisation und Geduld wettzumachen. Und so stellt er Schritt für Schritt eine Reihe von kleinen Bausteinen zusammen (Zeichnen von Punkt, Linie, Rechteck, Kreis, Bogen; Strichlinien, Maßpfeile, Schraffuren), aus denenwiederum Makroelemente (Quader, Pyramide, Prisma, Zylinder, Kegel, Kegelstumpf, Kugel) gebildet werden können.

Techniken wie Vergrößerung, Verkleinerung, Zoomen, Duplizieren, Drehen, Spiegeln und Setzen oder Löschen von Einzelpunkten mit einem »Hires-Cursor« werden ebenfalls behandelt und gehören sicherlich zu den interessantesten und nützlichsten Ausführungen des Buches. So hat man schließlich einen Satz von Bausteinen mit den entsprechenden Programmen in Simons Basic zur Verfügung, mit'denen man eigene Aufgaben angehen kann.

In diesem Zusammenhang ist allerdings anzumerken, daß die Lösung der betrachteten Probleme hauptsächlich in den Programmen selbst stattfindet und im Text relativ wenig erklärt wird. Dazu gesellt sich die Bemerkung: »Wer wissen will, wie ein Programm strukturiert ist, kommt auch ohne Erklärungen dahinter, und wer es ohne Erklärungen nicht schafft, wird auch mit ihnen nicht glücklich.« Anstelle von 35 Seiten Programmlisting für eine spezielle Beispielzeichnung wäre es vielleicht angebrachter, einige grundsätzliche Dinge etwas ausführlicher zu erklären; seine Programme für eigene Anwendungen muß der Leser schließlich doch selber schreiben.

Auf dem Wege dazu bietet dieses Buch letztlich aber doch eine Reihe von nützlichen Hilfsmitteln, Anregungen und Lösungsansätzen, so daß man das Buch jedem an technischer Grafik Interessierten durchaus empfehlen kann. (Dr. Wolfgang Bunse)

Info: Werner Heift, Einführung in CAD mit dem Commodore 64, Data Becker, Düsseldorf 1985, 302 Seiten, ISBN 3-89011-067-3, 49 Mark.


# In die Geheimnisse der Floppy eingetaucht (Teil 7) \[116-119]

> Dieser Teil zeigt wie das DOS codiert und physikalisch auf Diskette schreibt. Haben Sie gewußt, daß ein Block auf Diskette länger als 256 Byte ist?

Dieser Artikel bildet den Abschluß der festen Kursreihe. Ab jetzt soll der Floppy-Kurs in lockerer Reihenfolge fortgesetzt werden. Wir werden nun versuchen, auf die von Ihnen bevorzugten Themen einzugehen, um darüber dann in unregelmäßigen Abständen weitere Folgen zu bringen. Wir wollen Sie deshalb dazu anregen, uns Ihre Probleme und Sorgen mit der 1541 mitzuteilen.

An dieser Stelle soll aber noch ein wichtiger Sachverhalt besprochen werden, der bisher einfach unterschlagen wurde: die GCR-Codierung.

## Was ist eine GCR-Codierung?

Wenn Sie den Floppy-Kurs schon länger verfolgen sind Ihnen bestimmt schon einige Ungereimtheiten aufgefallen, was den Direktzugriff auf die Diskette betrifft. Auch in der letzten Folge über das Formatieren waren zum Beispiel im Listing von S-Format einige Sprungbefehle, die nicht erklärt wurden.

Erinnern Sie sich noch an den Artikel, der sich das erste mal mit dem Schreiben von Daten auf die Diskette beschäftigte? Dort wurden, unter anderem, die SYNC-Markierungen auf der Diskette besprochen, die dem Disk-Controller als Positionsanzeiger dienen.

Ich schrieb damals, daß sich diese SYNC-Markierungen bei der 1541 aus fünf $FF-Bytes zusammensetzen, die hintereinander auf Diskette geschrieben werden. Was ist aber, wenn ein Datenblock geschrieben werden soll, der nur aus $FF-Bytes besteht? Eigentlich müßten dann diese Bytes als SYNC-Markierung wirksam werden und den gesamten Schreib- und Lesebetrieb stören. Wie die Praxis zeigt, tritt dieser Fehler nicht auf. Auch bei mehreren Blöcken aus $FF-Bytes kommt es zu keinen Komplikationen. Bei der Konstruktion der Floppy hat man sich nämlich eine Codierung der Daten einfallen lassen, die eine Eindeutigkeit der Daten schafft. Die Codierung heißt GCR, was nichts anderes als eine Abkürzung der englischen Wörter »Group Code Recording« ist.

Es stellt sich jetzt natürlich die Frage, was bei der GCR-Codierung passiert, damit eine Verwechselung zwischen SYNC- und Datenbytes unmöglich wird. Zur Beantwortung dieser Frage muß ein wenig intensiverauf das Lesen und Schreiben der Floppy eingegangen werden.

## Was macht die GCR-Codierung

Das Lesen von Bytes durch den Lesekopfes steuert ein Timer des Disk-Controllers. Auf der Diskette selbst wird jedes »l«-Bit physikalisch durch einen Wechsel der Magnetisierungsrichtung dargestellt und ein »0«-Bit durch gleichbleibende Richtung der Magnetisierung. Bild 1 zeigt, was gemeint ist. Soll ein Byte von Diskette gelesen werden, so wartet der Disk-Controller einfach die Zeitspanne ab, die zum Lesen von acht Bits erforderlich ist. Innerhalb dieser Zeit liest der Schreib-/Lesekopf eine gewisse Folge von Magnetisierungswechseln und Nicht-Magnetisierungswechseln.

Dazu ein Beispiel: Auf der Diskette steht ein $55-Byte. $55 wird binär durch die Kombination %01010101 dargestellt. Der Tonkopf stellt also während der Lesezeit die folgenden Magnetisierungswechsel fest:

Magnetisierung wechselt nicht, wechselt, wechselt nicht, wechselt, wechselt nicht, wechselt, wechselt nicht, wechselt.

Das Erkennen eines Bits geschieht dabei völlig zeitgesteuert. Der Disk-Controller »weiß«, daß er zum Lesen eines Bits eine bestimmte Zeit warten muß. Danach gilt das Bit als gelesen, und es wird eine »1« oder eine »0« bereitgestellt, je nachdem, ob ein Magnetisierungswechsel stattgefunden hat oder nicht.

Praktisch könnte man das folgendermaßen beschreiben: Sie machen mit einem Freund eine Zeit von 10 Sekunden aus. Er hat dann die Aufgabe innerhalb dieser 10 Sekunden entweder zu pfeifen oder nicht. Danach warten Sie diese 10 Sekunden ab. Hat er während dieser Zeit gepfiffen, dann entspricht das einem Magnetisierungswechsel. Hat er innerhalb der 10 Sekunden nicht gepfiffen, bedeutet das ein »O«-Bit, also keinen Magnetisierungswechsel. Da eine Diskette im Laufwerk nicht absolut gleichmäßig gedreht werden kann, also Drehzahlschwankungen unterliegt, muß noch für eine Kompensation der mechanischen Fehler gesorgt werden. Dazu wird der Timer, der die abzuwartende Zeit für jedes Bit bestimmt, bei jedem Magnetisierungswechsel neu getriggert (gestellt). Ein »l«-Bit hat also neben seinem Informationsgehalt noch die wichtige Aufgabe, Laufwerksschwankungen auszugleichen, um Lesefehler zu verhindern. Aus diesem Grund darf es zum Beipiel nicht passieren, daß mehrere $00-Bytes hintereinander auf der Diskette stehen, da sonst zu lange keine Laufwerkskontrolle mehr stattfinden könnte.

Aber auch zuviele »l«-Bits sind nicht gestattet, da mehr als acht »l«-Bits ein SYNC-Signal auslösen.

Aus den genannten Gründen werden alle Daten, die auf die Diskette geschrieben werden, vorher GCR-codiert. Mit dieser Codierung wird ausgeschlossen, daß mehr als acht »l«-Bits und mehr als zwei »O«-Bits direkt hintereinander auf die Diskette geschrieben werden und so die Schreib- und Lese-Elektronik durcheinanderbringen.

Einzig und allein die SYNC-Markierungen (mehr als acht »1«-Bits) werden vom DOS (Disk Operating System, Controller) uncodiert auf die Diskette geschrieben.

## Es gibt zwei Schreibarten

Man kann also zwischen zwei Schreibarten auf Diskette unterscheiden:

1)	Schreiben von Markierungen. Hier werden fünf $FF-Bytes direkt hintereinander auf die Diskette geschrieben, um eine SYNC-Markierung zu bilden, die der Orientierung dient.
2)	Schreiben von Daten.

In diesem Modus werden Byte-Inhalte codiert, um sich von den Markierungen zu unterscheiden.

Sehen Sie sich jetzt einmal Tabelle 1 an, die Umwandlungstabelle für die Konvertierung Binär nach GCR und umgekehrt.

Wie Sie unschwer erkennen können, handelt es sich beim GCR-Code um einen 5-Bit-Code. Jedes 4-Bit-Nibble, das Sie umwandeln, wird zu einem 5-Bit-GCR-Nibble. Ein Byte, das vorher aus 8 Bits bestand wird also durch die Codierung 10 Bits lang. Allgemein nimmt die Länge der codierten Daten, um den Faktor 5/4 zu. Deshalb ist die Handhabung der GCR-Bytes nicht ganz einfach. Wandeln Sie doch einmal zwei Bytes in den GCR-Code um. Als Ergebnis erhalten Sie »zweieinhalb« Bytes, die sicherlich schwer zu behandeln sind.

Bei der GCR-Codierung geht man aus diesem Grund einen ganz einfachen Weg, um keine Format-Probleme zu bekommen: Es werden jeweils immer 4 Bytes gleichzeitig umgewandelt. Als Ergebnis erhält man 5 vollständige Bytes, die sich ohne Probleme weiterverarbeitet werden können.

Lassen Sie mich das einmal an einem Beipiel erläutern:

Nehmen wir einmal an, wir hätten vier Bytes mit dem Wert $FF. Eine Kombination also, die nicht direkt auf die Diskette geschrieben werden darf.

Wir wandeln diese vier Hex-Bytes nun in die entsprechenden fünf GCR-Bytes um, indem wir in Tabelle 1 nachsehen,was die entsprechenden GCR-Äquivalente dieser Bytes sind. Wir kommen zu folgendem Ergebnis:

TODO TABLE

HEX BINÄR GCR-Gode
$FF 1111 1111 10101 10101
$FF 1111 1111 10101 10101
$FF 1111 1111 10101 10101
$FF 1111 1111 10101 10101

Die binär dargestellten GCR-Werte müssen wir jetzt nur noch zu fünf Bytes zusammenfassen, um auf folgendes Ergebnis zu kommen:
1010 + 1101 = AD
(**1010 1 + 101** 01)
0110 + 1011 = 6B
0101 + 1010 = 5A
1101 + 0110 = D6
1011 + 0101 = B5

Vier $FF-Bytes werden also bei der GCR-Codierung in die fünf Bytes $AD, $6B, $5A, $D6 und $B5 umgewandelt, und Sie können sich jetzt leicht davon überzeugen, daß diese fünf Bytes für den Disk-Controller absolut ungefährlich und unkritisch sind, und daß sie die vorgeschriebenen Normen (nicht mehr als zwei »0«-Bytes und nicht mehr als acht »1«-Bytes) erfüllen.

Um Ihnen die Umwandlung der Bytes zu erleichtern, habe ich diesem Kurs zwei Programmlistings beigefügt. Listing 1 enthält ein Programm, das Ihnen vier Hex-Bytes in fünf GCR-Bytes umwandelt. In Listing 2 sehen Sie ein Programm abgedruckt, das die GCR-Codierung wieder rückgängig macht. Hier werden fünf GCR-Bytes in vier Hex-Bytes zurückverwandelt, wobei Sie mit unerlaubten Bitkombinationen vorsichtig sein sollten. Kann ein Byte nicht zurückverwandelt werden, so haben Sie eine unerlaubte GCR-Bitkombination, die sich im Ergebnis dadurch äußert, daß entsprechende Nibbles fehlen. Sie erhalten dann unter Umständen nur »halbe« Bytes.

Die Floppy hält übrigens für diesen Fall eine Fehlermeldung bereit, einen »24, READ ERROR«.

Damit Sie auch in Maschinensprache in der Lage sind, Hex-GCR-Konvertierungen durchzuführen, ist noch ein weiteres Listing (Listing 3) beigefügt. Dieses enthält die Originalroutinen des DOS zur Umwandlung von Hex-Bytes in GCR-Bytes und umgekehrt.

**$F6D0**: Dieses Programm holt vier Hex-Bytes aus den Speicherstellen $52 bis $55 und wandelt diese Bytes in die fünf entsprechenden GCR-Werte um. Diese fünf Bytes werden anschließend im Puffer der Adresse $30/31 (L,H) mit dem Pufferzeiger in $34 abgelegt.

Pufferadresse und Pufferzeiger müssen dabei vor Aufruf dieser Routine übergeben werden.

**$F78F**: Diese Routine wandelt einen gesamten Puffer, dessen Adresse in $30/31 (L,H) stehen muß, in GCR-Werte um und speichert diese in den Ausweichpuffer sowie den ursprünglichen Puffer zurück. Der Pufferinhalt vergrößert sich durch diese Umwandlung von 256 auf 324 Bytes.

**$F7E6**: Diese Routine wandelt fünf GCR-Bytes aus einem Puffer (dessen Adresse in $30/31 (L,H) und dessen Pufferzeiger in $34 steht) wieder in vier Hex-Bytes zurück, wobei diese dann in der Zeropage von $52 bis $55 abgespeichert werden.

**$F8E0**: Diese Routine decodiert einen gesamten GCR-Pufferinhalt in die ursprüngliche Form und legt diese 256 Bytes dann im Puffer mit der Adresse $30/31 (L,H) ab. Die vorherigen 324 GCR-Bytes müssen im gleichen Puffer und im Ausweichpuffer ($01BB bis $01FF) stehen.

Die Anwendungen dieser Routinen sind äußerst vielfältig. So können Sie diese Programme zum Beispiel für einen Disk-Monitor verwenden, in dem man zwischen der Anzeige von GCR-Bytes und der Anzeige von normalen Hex-Bytes hin- und herschalten kann. Die einzigen Änderungen, die Sie dazu machen müssen, bestehen in der Umrechnung der Adressen für die Speicherbereiche im Computer und der Angabe neuer Parameter als Puffer- und Zeropagebereiche. Ihrer Phantasie, was die Möglichkeiten des Monitors angeht, sind außer dem Speicherplatz im Computer keine Grenzen gesetzt.

## Bis zu 365 Byte in einem Block

Durch die Verwendung der GCR-Codierung ergeben sich noch Konsequenzen. Wie sieht es beispielsweise in den Puffern der Floppy aus, wenn ein Puffer mit einem vollständigen Datenblock (also 256 Bytes) gefüllt wurde und dieser aufgezeichnet werden soll? Für dieses Problem hat der Controller einen speziellen Ausweichpuffer. Der Puffer hat eine Größe von 68 Bytes und befindet sich im Bereich von $01BB bis $01FF.

Wird nun ein Datenblock in Puffer 1 ($0400-$04FF) codiert, so werden die ersten 68 GCR-Bytes in den Ausweichpuffer übernommen. Die restlichen Bytes stehen in Puffer 1.

Aus den 256 Bytes an Information macht das DOS durch die Konvertierung also 324 Bytes, die einen gesamten Datenblock darstellen (inklusive Prüfsumme). Natürlich werden auch die Parameter im Datenblockheader (ID, Track, Sektor, Prüfsumme und Kennzeichen) vor dem Schreiben auf die Diskette in GCR-Bytesumgewandelt, wobei der Blockheader dann mit den zwei Lückenbytes auf eine Länge von zehn GCR-Bytes anwächst, da der Header aus ursprünglich acht Hex-Werten besteht.

Zusammenfassend besteht ein Sektor auf der Diskette aus den fünf Bytes der ersten SYNC-Markierung; danach folgen die zehn Bytes des Blockheaders. Vor der SYNC-Markierung des Datenblocks folgen jedoch noch neun $55-Bytes, die der GCR-Norm entsprechen und direkt auf die Diskette geschrieben werden. Sie dienen als Pufferlücke, in der dem Disk-Controller Zeit bleibt, zwischen Schreiben und Lesen umzuschalten.

Nach den fünf Bytes der SYNC-Markierung folgen die 324 Bytes des Datenblocks inklusive dessen Prüfsumme und anschließend noch die Lücke zwischen zwei Sektoren, die erfahrungsgemäß zwischen acht und zwölf Bytes lang ist. Wie Sie sehen hat also so ein Sektor auf der Diskette die stattliche Länge von 361 bis 365 Bytes.

Jetzt werden Ihnen bestimmt auch ein paar zweifelhafte JSR-Befehle in der letzten Folge des Floppy-Kurses klar: bei dem Formatiersystem in Ausgabe 5/ 1985, wird einmal ein Befehl JSR $FE30 und an anderer Stelle ein Befehl JSR $F78F ausgeführt. Diese Adressen sind die Einsprünge der Codier-Routinen.

Vielleicht kommt Ihnen auch noch einmal die Herstellung eines Killertracks in Erinnerung. Hier wird ein gesamter Track direkt mit $FF-Bytes vollgeschrieben und stellt so eine »Riesen-SYNC-Markierung« dar. Da eine solche Bitfolge jedoch unzulässig ist, kommt die Lese- und Schreibelektronik der Floppy völlig aus dem Konzept; der Controller »stürzt ab«.

Wenn Sie noch mehr über Ihre 1541, über schnelle Kopierprogramme und Kopierschutz-Methoden erfahren oder ein gut dokumentiertes DOS-Listing haben wollen, dann sollten Sie einmal in das M&T Floppy-Buch schauen.

(Karsten Schramm/hm)

# Hier gibt's Clubs \[119]

### Luxemburg

**Commodore Club Luxemburg (C.C.L.)**, 1 Rue des Muguets,
L 5970 Itzig/Luxemburg,
Clubmagazin, Extrainfos, Musikteil, Kummertelefon;

### Holland

**Copy Tronics**, Postbus 700, 7400 AS Deventer Nederland,
Clubzeitschrift, Clubtreffen;

### Österreich

**CHIPSI-Computer-Club**, Jasomirgottstr. 3, Mezzanin, 1010 Wien, Programm- und Literaturtausch, Programmierkurse, begünstigter Bezug von Computern, praktische Programmiertips, Clubzeitung, Clubtreffen;
**Wiener Hard- u. Software Computerclub**, Rene Fürst, Herbortgasse 22, 1110 Wien, Softwareerstellung und Tausch, Hardwareunterstützung, Beitrag 150 Schilling pro Quartal, Beitrittsgebühr 1x150 Schilling, Tel. (02 22) 7 43 9154, (02 22) 6126 83
**Bund Technischer Amateure**, Stromstr. 36-38/29/1, 1200 Wien,
Clubtreffen, Grundlagen, Tips und Tricks, PRG-Bibliothek, Softwaretausch;
**COMUSCLUS**, Computer User Club Salzburg, A-5033 Salzburg, Postfach 133,
Clubtreffen, Clubstammtisch, monatliche Zeitschrift, Buch- und Softwarebibliothek, Arbeitskreise, Programmierkurse, auch für Nichtmitglieder, Sammelbestellungen;
**Ruf-Commodore-User-Club**/Salzburg, A-5020 Salzburg, Haunspergstraße 21, Tel. (0662) 75770, Herr Wiedermann Ruf-Commodore-User-Club/ Graz, Grazbachgasse 60, Tel. (0316) 70 02 66, Herr Hiess Ruf-Commodore-U ser-Club/ Klagenfurth, A-9020 Klagenfurt, Sponheimer Straße 9-11, Tel. 0 42 22) 5 5105, Herr Krassnitzer Clubtreffen (wöchentlich), Softwarebibliothek, Hardwareangebot, Programmierkurse etc.
**IKC, Internationaler Kommunikationsclub**, Postfach 18, CH-6312 Steinhausen
Info gegen 3 DM, Clubzeitschrift, Beratertelefon, DFÜ, Sektionen, Kurse, Listingkorrekturservice, Meisterschaften, etc. Aktiv-, Passiv- und Ehremitglieder sowie Gönner.

### Schweiz

**COBEC Computer-Benutzer-Club Wohlen**, Postfach 10, CH-5613 Hilfikon AG, Schweiz,
Clubtreffen, Softwarebibliothek, diverse Hardware, Kurse;
**C 64-Anwenderclub Zürich (ACZ)**, Postfach 194, 8029 Zürich,
Clubtreffen, Softwarebibliothek, Hardware, Modem, Assembler- und Basic-Kurse, Jahresbeitrag 50 Franken;
**C 64 Club, J. Reich**, Am Glattbogen 170, 8050 Zürich
für Anfänger, Clubtreffen, Zeitschrift (geplant), Kurse, Seminare, Softwaretausch, vergünstigter Bezug von Soft- und Hardware, Beitrag 30 Franken
**Syntax Error C 64**, Postfach 253, CH-9004 St. Gallen,
Clubtreffen, Mailbox, DFÜ, Softwarebibliothek, Hard- und Softwareentwicklung.

# Memory Map mit Wandervorschlägen \[120,122-123]

> Diesmal kommen die Adressen 144 bis 152 an die Reihe, die beim C 64 und VC 20 für Kassetten- und Ein-/Ausgabe-Operation verantwortlich sind.

Zu Beginn möchte ich heute einen Nachtrag zu den in Ausgabe 4/85 behandelten Speicherzellen 65/66 bringen. Das kleine Demonstrationsprogramm zur Änderung der Reihenfolge von DATA-Befehlen ist zwar richtig, kann aber unter ganz bestimmten Umständen zu Fehlern führen. Darauf hat mich ein aufmerksamer Leser hingewiesen — ich gebe daher seinen Leserbrief im folgenden direkt wieder. Die Adressen gelten nur für den C 64. Beim VC 20 ist der Sachverhalt aber derselbe.

## Korrektur zu Adressen 65 bis 66

Leserbrief von Martin Kröger aus Kiel:

Bei der Behandlung der Adresse 65/66 hat Dr. H. Hauck auf einen Trick hingewiesen, mit dem der Befehl »RESTORE Zeilennummer« simuliert werden kann. Die Idee ist gut — doch die Ausführung hat einen kleinen, aber entscheidenden Fehler: Die Adresse 61/62 darf nicht mit zwei Befehlen, sondern muß mit einem Befehl ausgelesen werden, da bei einem möglichen Page-Wechsel zwischen den zwei Befehlen der Zeiger nicht verbogen, sondern abgeknickt wird.

Was passiert in der ersten Zeile des Demo-Programms?

10 A1 = PEEK(61):B1 = PEEK(62)

Mit »A1 = PEEK(61)« wird der Variablen Al der Wert des LOW-Bytes des Zeigers 61/62 zugewiesen. Dieser zeigt am Anfang einer Zeile auf das 0-Byte vor der Linkadresse (hier 2048), so daß A1 den Wert (2048 AND 255) = 0 erhält. Mit »B1 = PEEK (62)« wird der Variablen B1 der Wert des High-Bytes des Zeigers 61/62 zugewiesen. Dieser zeigt aber inzwischen auf das Trennzeichen (»:«) zwischen den beiden Befehlen (hier 2061), so daß B1 den Wert (INT(2061/ 256)) = 8 erhält. Als Zeiger auf das aktuelle DATA-Element erhalten wir die erwartete Adresse (A1 + B1\*256) = 2048.

Was aber, wenn Zeilenanfang und Trennzeichen nicht in derselben Page liegen? Dazu setzen Sie bitte den Basic-Anfang um eine Stelle zurück:

POKE 43,0:POKE 2047,0:NEW

Die Zeiger auf den Zeilenanfang und das Trennzeichen werden dadurch ja ebenfalls verändert, so daß Al jetzt den Wert (2047 AND 255) = 255 und B1 den Wert (INT(2060/256)) = 8 erhält. Als Zeiger auf das aktuelle DATA-Element erhalten wir nun die völlig unbrauchbare Adresse (Al + B1\*256) = 2303.

Das korrigierte Demo-Programm könnte wie folgt aussehen:

TODO PRE

10 A1 = PEEK(61)+PEEK(62)\*256
20 DATA DAS IST DIE 1. ZEILE
30 A2 = (61) + PEEK(62)\*256
40 DATA DAS IST DIE 2. ZEILE
50 A3 = PEEK(61)+PEEK(62)\*256
60 DATA DAS IST DIE 3. ZEILE
70 POKE 65,A3 AND 255: POKE 66,A3/256: READ A$:PRINT A$
80 POKE 65,A1 AND 255: POKE 66,Al/256: READ A$:PRINT A$
90 POKE 65,A2 AND 255: POKE 66,A2/256: READ A$:PRINT A$

Ich freue mich über Leserbriefe, wie diesen von Herrn Kröger, zeigen sie mir doch, daß meine Erklärungen gelesen und verdaut werden. Und was kann mir besseres passieren, als auf meine eigenen Schlampereien hingewiesen zu werden! Ich habe nämlich den Trick der DATA-Zeilen nicht selbst erfunden, sondern von Sheldon Leemon (eine meiner üblichen Quellen) kritiklos übernommen — und das war falsch.

So, nach diesem Rückblick geht es weiter mit unserer Wanderung. Heute habe ich wieder ein paar Besonderheiten zu bieten.

## Adresse 144 ($90)<br>Statusvariable ST

Diese Adresse enthält ein Byte, welches mit der Statusvariablen ST von Basic identisch ist. Diese reservierte Variable ist im nebenstehenden Texteinschub 1 »ST-atus« näher beschrieben.

Alle Routinen des Betriebssystems, die mit Ein- und Ausgabe zu tun haben, benutzen diese Speicherzelle zum Abspeichern und Abfragen des Status der Ein-/Ausgabeoperationen.

Genauer gesagt, alle Ein-/Ausgabeoperationen, die mit der Datasette und mit dem Floppy-Gerät beziehungsweise dem Drucker zu tun haben, benutzen die Adresse 144. Im Fachjargon sprechen wir vom Kassettenport und vom seriellen Port.

Der dritte Anschluß des Computers nämlich der RS232 oder User-Port benutzt für den Status die Speicherzelle 663. Jedes Bit der Zelle 144 hat eine eigene Bedeutung.

TODO TABLE

Alle nicht aufgeführten Bits sind nicht benutzt.

Diese Speicherzelle beziehungsweise die Statusvariable ST kann recht nützlich sein. Einige Kochrezepte dafür werden im Texteinschub 1 behandelt.

## Adresse 145 ($91)<br>Zwischenspeicher für Abfrage der STOP-Taste

In den Bildern 1 und 2 ist dargestellt, wie die Tasten des VC 20 und des C 64 miteinander über eine Matrix verbunden sind.

Sechzig mal in der Sekunde unterbricht der Computer seine Arbeit, merkt sich, wo er gerade ist und fragt dann, unter anderem, ob die STOP-Taste gedrückt worden ist. Dadurch wird erreicht, daß die STOP-Taste jederzeit Priorität hat.

Die Abfrage geht so vonstatten, daß das Betriebssystem über das im Bild 1 und 2 gezeigte Spaltenregister 56320 (beim VC 20: 37152) diejenige Tastenspalte anwählt, in welcher sich die STOP-Taste befindet. Aus Bild 1 und 2 sehen wir, daß dies die Spalte mit der Codenummer 127 beziehungsweise 247 ist. Ist in dieser Spalte eine Taste gedrückt, wird an ihrer Stelle eine Null in das Auslese-Register 56321 (VC 20: 37153) geschrieben. Die dadurch entstandene Dualzahl wird in die Speicherzelle 145 gebracht.

Es ist sicher verständlich, daß auf diese Weise nicht nur die STOPTaste, sondern alle Tasten der Spalte 127 (247) abgefragt werden können. Ein kleines Demonstrationsprogramm kann das beweisen:
10 PRINT PEEK (656321); PEEK (145)
20 GOTO 10

Beim VC 20 ist statt 56321 natürlich 37153 einzusetzen.

Das Zahlenband kann durch die Tasten der genannten Spalte — und nur durch diese — beeinflußt werden.

## Adresse 146 ($92)<br>Zeitkonstante beim Lesen vom Band

Die Speicherzelle enthält eine vom Betriebssystem einstellbare Zahl, welche die kleinen Unterschiede in der Aufnahmegeschwindigkeit ausgleicht, die bei verschiedenen Datasetten vorkommen können.

Diese Zeitkonstante steht im Zusamenhang mit der Zahl, die in den Speicherzellen 176/177 steht.

Eine Veränderung der Konstante in Basic ist nicht möglich.

## Adresse 147 ($93)<br>Flagge für LOAD oder VERIFY

Diese Flagge dient dem. Betriebssystem, um zu unterscheiden, ob eine LOAD-Operation nur LOADen oder aber VERIFYen soll.

Sie ist identisch mit der Flagge des Basic-Übersetzers in Speicherzelle 10. Genauere Hinweise bitte ich der Beschreibung von Zelle 10 in Ausgabe 12/84, Seite 132 zu entnehmen.

## Adresse 148 ($94)<br>Flagge für Floppy/Drucker Ausgang

Das Betriebssystem benutzt diese Speicherzelle, um anzuzeigen, daß ein Zeichen im Ausgabepuffer steht, welches zum Floppy-Gerät oder zum Drucker geleitet werden soll. Diese Flagge setzt alle am seriellen Port angeschlossenen Geräte in den Zustand »Listen«, das heißt bereit zu sein, Daten aufzunehmen.

## Adresse 149 ($95)<br>Zeichen im Ausgabepuffer

In dieser Speicherzelle wird das Zeichen abgelegt, welches als nächstes über den Serial Port zum Floppy-Gerät oder zum Drucker transportiert wird, sobald die Flagge in 148 die Bereitschaft anzeigt.

## Adresse 150 ($96)<br>Arbeitsspeicher für die Band-Leseroutine

Diese Speicherzelle wird zur Zwischenspeicherung von Daten beim Lesen einer Kassette benutzt.

## Adresse 151 ($97)<br>Zwischenspeicher des X-Registers

Maschinen-Programmierer kennen das X-Register des Mikroprozessors. Beim Lesen eines Zeichens von der Datasette wird der Inhalt des X-Registers in dieser Adresse zwischengespeichert.

## Adresse 152 ($98)<br>Anzahl der offenen Files

Ein File, oder auf Deutsch gesagt, eine Datei, wird mit dem Befehl OPEN eröffnet. Nach OPEN folgt die Nummer der Datei; sie ist beliebig wählbar bis maximal 255. Als zweites folgt die Nummer des Gerätes, mit dem die Verbindung hergestellt werden soll.

Es ist erlaubt, mehrere Dateien gleichzeitig geöffnet zu halten, vorausgesetzt die Nummern der Dateien sind verschieden.

In Speicherzelle 152 wird festgehalten, wieviel Dateien gleichzeitig geöffnet sind. Dieses kleine Programm zeigt es uns deutlich:

TODO PRE

10 FOR K = 1O TO 22
20 PRINT PEEK (152),K
30 OPEN K,0
40 NEXT K

Mit der FOR...NEXT-Schleife der Zeilen 10 und 40 eröffnen wir 13 Dateien hintereinander, und zwar — wie Zeile 30 uns deutlich macht — mit der Tastatur. Die Tastatur hat die Nummer 0, der Drucker die Nummer 4, das Floppy-Gerät die Nummer 8 und die Datasette die Nummer 1. Ich habe die Tastatur gewählt, obwohl es keinen Sinn ergibt, weil sie die vielen Eröffnungen ohne zu unterbrechen akzeptiert.

Nach RUN sehen wir links untereinander den Inhalt von 152, also die Anzahl der eröffneten Dateien. Rechts steht jeweils die Nummer der eröffneten Datei.

Nach der 10. Datei bricht das Programm ab und druckt uns die Fehlermeldung TOO MANY FILES aus.

Das heißt es sind gleichzeitig nur 10 Dateien betreibbar. Wenn wir oben in Zeile 10 die Zahl 22 durch 19 ersetzen, läuft das Programm fehlerfrei.

Eine Datei, die unter einer bestimmten Nummer eröffnet ist, kann nicht noch einmal eröffnet werden. Fügen Sie bitte dem Programm noch die folgende Rücksprungzeile hinzu: 50 GOTO 10

In der 10. Zeile sehen wir jetzt die 10 als Inhalt von 152 und als neue Dateinummer (K) wieder die 10. Das Programm bleibt aber stehen und meldet FILE OPEN. Es hat recht, denn die Datei 10 ist bereits als erste eröffnet, aber nicht wieder geschlossen worden.

Das Betriebssystem macht das so, daß jede der Dateinummern in eine Tabelle geschrieben wird, die in den Speicherzellen 601 bis 610 stehen. Bei jedem OPEN-Befehl wird dort nachgeschaut, ob die Filenummer existiert. Wenn ja wird die Fehlermeldung FILE OPEN ERROR ausgegeben. Beijedem CLOSE-Befehl wird die entsprechende Nummer aus der Tabelle gelöscht.

Wir können aber auch eine 0 in die Speicherzelle 152 POKEn, wodurch dem Betriebssystem vorgegaukelt wird, daß keine Datei eröffnet ist. Schieben Sie im Programm einfach die Zeile ein:
45 POKE 152,0
und das Programm läuft ewig weiter.

Die Speicherzelle 152 ist also der Wächter über die Anzahl der eröffneten Dateien. Steht sie auf 0, dann wird eine Neueröffnung am Anfang der Tabelle ab 601 eingetragen. Die Tabelle ihrerseits ist der Wächter über Exklusivität der Dateinummern. Ich zeige Ihnen das noch genauer, wenn wir zu 601 kommen.

Sie werden vielleicht fragen, warum ich das so ausführlich beschreibe. Nun, in einem Programm kann es sicher sehr nützlich sein, die Zelle 152 mit PEEK nach der Datei-Lage abzufragen und entsprechend Maßnahmen zu treffen, ehe die Fehlermeldung das Programm abbricht.

Mit POKE 152,0 aber müssen Sie aufpassen. Es ersetzt nämlich nicht (!!) den CLOSE-Befehl. Probieren Sie es aus: Um das kleine Programm oben per Drucker auszudrucken, brauchen wir:
OPEN 1,4: CMD 1: LIST

Wenn Sie jetzt die Zeile 152 auf 0 POKEn und dann LIST eintippen, wird trotzdem wieder auf dem Drucker gelistet und nicht auf dem Bildschirm. Die vorgeschriebene Schließmethode mit PRINT #l:CLOSE 1 geht jetzt aber auch nicht mehr, denn das Betriebssystem ist ja im Glauben, daß keine Datei eröffnet ist — schöner Schlamassel!

Erst eine Neueröffnung bringt alles wieder in die Reihe. Also Vorsicht mit der Anwendung der Speicherzelle 152. Eine Möglichkeit, alle Dateien auf einen Schlag zu schließen, gibt es aber doch:

SYS 65511 besorgt das, sowohl beim C 64 als auch beim VC 20.

(Dr. Helmut Hauck/ah)

TODO ASIDE

## Texteinschub 1

### ST-atus

Neben den Befehlen (wie PRINT) und den Funktionen (wie COS) hat Basic auch noch drei fest definierte Variable, nämlich TI, TI$ und ST.

Von den dreien ist ST wohl am seltensten anzutreffen, Grund genug, hier ein wenig darüber zu berichten.

Der Anlaß ist natürlich, daß der Wert von ST immer in der Speicherzelle 144 steht, die ja heute in der Memory Map vorkommt.

Bei der Beschreibung wurde schon erwähnt, daß ST den Status nach der letzten Ein- beziehungsweise Ausgabeopration angibt, beschränkt allerdings nur auf Operationen mit der Datasette und der an einem gemeinsamen Ausgang angeschlossenen Floppy und Drucker.

Dementsprechend zeigt die Tabelle bei der Speicherzelle 144 diese beiden Fälle.

Wichtig ist noch zu erwähnen, daß nicht nur die in der Tabelle gezeigten Zahlen für ST auftreten, sondern auch Kombinationen davon. So ergibt zum Beispiel ein zu kurzer Block (4) und ein gleichzeitig aufgetretener Prüfsummenfehler (32) ein Wert von 36.

### Kassettenoperationen

Zuerst testen wir mit einem Datei-Programm auf »File-Ende«. Geben Sie bitte folgendes Programm ein:

TODO PRE

10 OPEN 1,1,1,”DATEI”
20 PRINT#1, "QWERTY”
30 CLOSE 1
40 END

Zur Erinnerung: nach dem OPEN-Befehl folgt zuerst die Nummer der Datei (ich nehme hier 1), dann die Gerätenummer (1 = Datasette) und schließlich die Sekundäradresse (1 = Schreiben).

Jetzt kommt der Lesevorgang:

TODO PRE

50 OPEN 2,1,0”DATEI”
60 FOR K = 1 TO 10
70 GET#2,A$
80 PRINT A$;ST
90 NEXT K
100 CLOSE 2

In Zeile 50 eröffnen wir wieder eine Datei (diesmal Nummer 2) für die Datasette, jetzt aberzum Lesen(Sekundäradresse = 0). Die Schleife der Zeilen 60 und 90 schreiben uns 10 mal ein Zeichen (A$) und den Wert von ST auf den Bildschirm.

Jetzt geht es los. Mit RUN starten wir den ersten Teil des Programms. Nach dem Schreibvorgang und der READY-Meldung (nach Zeile 40) müssen Sie das Band zurückspulen und mit GOTO 50 ab Zeile 50 weiterfahren. Jetzt wird die Datei gelesen.

Wir erhalten untereinander die sechs Buchstaben von Zeile 20, daneben für ST lauter Nullen. Am Ende allerdings erscheint eine 64. Das ist der in der Tabelle angegebene Wert von ST für »File-Ende«.

Da die FOR-NEXT-Schleife zu lang ist, schießen wir mit dem Lesen über das File-Ende hinaus. Normalerweise kennen wir natürlich die Länge einer Datei nicht. Deshalb ist es besser mit GOTO zurückzuspringen und das File-Ende abzufragen.

Löschen Sie bitte Zeile 60 und 90 und fügen Sie als Rücksprung und Prüfung ein:

TODO PRE

85 IF ST = 64 THEN 100
90 GOTO 70

Statt nach ST können wir natürlich genau so gut nach PEEK(144) fragen.

Ein erneutes GOTO 50 bringt das erwünschte Resultat.

Um den vorhin schon erwähnten »kurzen Block« zu sehen, müssen wir einen entsprechenden Fehler künstlich erzeugen.

Löschen Sie bitte den ersten Teil des Programms bis einschließlich Zeile 40. Wir behalten also nur den Leseteil ab Zeile 50. Dann laden wir dieses Programm (Band vorher am besten wieder zurückspulen) mit SAVE "DATEI” nicht als Datei, sondern als ganz gewöhnliches Programm. Wenn es geladen ist, bitte das Band wieder zurückspulen.

Mit RUN starten wir jetzt das Lese-Programm, welches eine Datei sucht, aber nur ein Programm findet, allerdings mit dem richtigen Namen. Natürlich findet es einen Fehler und wir erhalten als Ausdruck:

TODO TABLE

36 oder manchmal auch 4
64	64

Die Zahl 36 entsteht aus 32 + 4, das bedeutet Prüfsummenfehler + Block zu kurz. Danach folgt wie vorher das File-Ende.

Die normale Blocklänge entspricht der Länge des Bandpuffers, in den die Datasette einspeichert. Er ist 191 Bytes lang. In unserem Fall war offenbar der Block nicht ganz voll.

Der Prüfsummenfehler tritt dann auf, wenn eine der Überprüfungen von Kassettenoperationen einen Fehler gefunden hat. Der Blockfehler, auch der des zu langen Blocks, interessiert wohl weniger. Aber ein durch die Prüfungen gefundener Fehler könnte, frühzeitig noch vor dem Ausstieg des Programms entdeckt, abgefangen und ausgenutzt werden.

Die Formel dafür, ins obige Program eingebaut ist:
85 IF ST<64 OR ST>8 THEN..(zum Beispiel LIST)

Statt LIST kann man natürlich auch etwas anderes nehmen.

### Floppyoperationen

Bei der Floppy bedeutet ST = 64, »Daten-Ende«, das ist etwa dasselbe wie bei der Datasette. Um es zu überprüfen nehmen wir dasselbe Programm wie vorher, nur müssen wir die Datei-Zeilen der Floppy anpassen. Das sieht dann so aus:

TODO PRE

10 OPEN 1,8,1,”DATEI,S,W”
20 PRINT#1,”QWERTY”
30 CLOSE 1
40 END

50 OPEN 2,8,0,”DATEI,S,R”
60 FORK = 1 TO 10
70 GET#2,A$
80 PRINT A$;ST
90 NEXT K
100 CLOSE 2

Das Ergebnis sieht hier so aus:
64
66
66

Die 64 ist natürlich wie erwartet der »Wert« für Daten-Ende. Die 66 ist 64 + 2, entstanden dadurch, daß wir über das Datenende hinausgelesen haben. Die 2 bedeutet »Fehler beim Lesen« (in den englischen Beschreibungen heißt es »Read Time Out«). Ähnliches gilt für ST = 1, das bededutet »Fehler beim Schreiben« (englisch: Write Time Out), nur weiß ich leider nicht, wie es vorzuführen ist. Wie bei der Datasette kann das Überlesen natürlich mit der Abfrage IF ST=64 THEN...und GOTO... gestoppt werden.

Interessant ist noch der Status beim Fehler »DEVICE NOT PRESENT«, den wir dadurch erzeugen, daß wir ein Programm, oder die Directory, aus der Floppy laden wollen, ohne daß dieses Gerät angeschlossen oder eingeschaltet ist. Nach der Fehlermeldung geben wir direkt ein: PRINT ST oder PRINT PEEK(144) und wir erhalten die Zahl 128.

Wie man allerdings in einem Basic-Programm durch Abfrage von ST= 128 die Fehlermeldung »Device Not Present« und den dann folgenden Programmabbruch vermeiden kann, weiß ich leider auch nicht. Die einzige Möglichkeit, die ich kenne, verwendet die sogenannte Interrupt-Methode. Diese ist von Christoph Sauer im letzten Teil seines Kurses »Der gläserne VC 20« in Heft 3/85, Seite 155, beschrieben worden.

# Effektives Programmieren (6): Sortieren mit dem Computer — (Teil 3) \[124,126,128]

> Nachdem wir in den letzten beiden Folgen mehrere einfache Sortieralgorithmen besprochen haben, wollen wir uns diesmal nur mit einem einzigen Algorithmus auseinandersetzen, dem Heapsort. Heapsort ist mit Sicherheit die komplizierteste der bekannten Sortiermethoden und verdient deshalb unsere ganze Aufmerksamkeit, zumal sie dazu noch eine der schnellsten ist.

Zuerst einmal zum Ausdruck »heap«. Ein Heap (engl.: Haufen, Menge) bezeichnet ein Variablenfeld, das auf eine ganz bestimmte Art sortiert wurde und damit einige wichtige Eigenschaften erfüllt, auf die wir später noch zu sprechen kommen werden.

## Grundlagen

Beschäftigen wir uns zunächst einmal mit dem Grundgedanken des Heapsort. Unsere bisherigen Sortierprogramme waren alle relativ langsam. In den beschriebenen Formeln konnte man das durch den Faktor A2 erkennen, der besagt, daß die Sortierzeit mit dem Quadrat der Feldgröße steigt. Die Ursache für diese ungünstigen Zeiten war die oft unnötige Anzahl von Durchläufen, obwohl gewisse Voraussetzungen schon gegebenwaren. Anders ausgedrückt haben unsere bisherigen Programme bei ihren Durchläufen nie alle Informationen genutzt, die ihnen zur Verfügung standen. Heapsort hat an dieser Stelle etwas geändert. Der Sortieralgorithmus verarbeitet bei jedem Durchlauf mehrere Informationseinheiten, die dann ein systematischeres Vorgehen erlauben.

## Was ist ein »Baum«?

Um Heapsort zu verstehen, müssen wir uns jetzt ersteinmal mit dem mathematischen Begriff des »Baums« beschäftigen. Ein mathematischer Baum ist eine Anordnung von Elementen einer Menge. Ein Beispiel für einen Baum sehen Sie in Bild 1. Jetzt stellt sich natürlich die Frage, wie wir einen solchen Baum in unsere Feldstruktur überführen können, denn immerhin ist ein Baum zweidimensional, wir arbeiten jedoch nur mit eindimensionalen Feldern. Sehen Sie sich dazu einmal Bild 2 an. Es zeigt den Baum aus Bild 3 in eindimensionaler Darstellung als Feld. Wie Sie sehen können, ist die Aufstellung streng hierarchisch und berechnet sich wie folgt: Wir nehmen ein Element an einer Position I. Handelt es sich bei unserer Menge aus Elementen um einen Heap (Variablenfeld), so muß der Wert an der Stelle INT (1/2) größer oder gleich des Wertes an der Stelle I sein. Mathematisch beschrieben sieht die Sache folgendermaßen aus (wobei A$(I) ein Feldelement ist):
A$(INT(I/2)) >= A$(I), für 2 <= I <= A (A ist die Gesamtanzahl der Elemente des Feldes).

Anschaulich können wir sagen, daß das Element A$ (INT(I/2)) immer der nächsthöhere »Knoten« des Baumes über den Elementen A$(I) und A$(I + 1) ist.

## Welchen Sinn hat die Baumstruktur?

Sie werden sich jetzt sicherlich fragen, was denn der Vorteil dieser recht komplizierten Baumstruktur ist. Nun, wir sind jetzt in der Lage, in einem Feld, welches einer Baumstruktur entspricht, ganz einfach nach einem Element die Position der nächstgrößeren, beziehungsweise die Position der nächstkleineren Elemente festzustellen und haben damit schon einmal eine Vorsortierung erreicht. Wie Sie vielleicht schon gemerkt haben, lassen sich die Positionen durch die oben genannte Formel ganz leicht aus der Position des Ausgangselements berechnen. Wenn Sie sich noch einmal die Bedingung für einen Baum betrachten, so werden Sie erkennen, daß auch Sonderfälle auftreten können. So kann ein Feld beispielsweise keinen vollständigen Baum darstellen, sondern nur ab einer gewissen Stelle eine Sortierung aufweisen, die der obigen Formel entspricht (Bild 3 zeigt ein Beispiel für eine solche Sortierung). Diese Form der Sortierung bezeichnet man als Heap. Ein Heap ist also nicht vollständig durchsortiert; er zeigt jedoch eine Eigenschaft, die für unser Sortieren von entscheidender Bedeutung ist: das Maximum des Feldes steht jeweils an der Spitze, also auf Position 1.

Nehmen wir jetzt einmal an, Sie entfernen das Element an der Spitze des Heap und setzen den Rest des Feldes wieder zusammen. Der Arrayrest besteht jetzt aus A-1 Elementen, unter denen sich nun das zweitgrößte befindet. Jetzt stellen Sie diese A-1 Elemente wieder so zusammen, daß ein Heap entsteht...

Wie die Reihe weitergeht, können Sie sich jetzt bestimmt denken. Wir nehmen wiederum das erste Element weg und haben somit das insgesamt zweitgrößte Element aussortiert. Diese Schritte wiederholen sich so lange, bis nur noch ein Element, das kleinste, im Heap übrigbleibt. Durch die relativ geordnete Struktur des Variablenfeldes während der Arbeit sind keine langen Suchzeiten erforderlich. Das verkürzt die Sortierdauer erheblich.

Die Formel zeigt die Berechnung der mittleren Anzahl der Bewegungen bei einem Sortiervorgang, wobei A die Anzahl der Elemente des Feldes angibt: mittbew = ungefähr 1/2\*A\*ld(A)

Heapsort ist schneller, als die bisherigen Sortiermethoden

An dieser Stelle zeigt sich bereits der deutliche Unterschied von Heapsort zu den vorher besprochenen Sortiermethoden. Während diese immer den Faktor A2 in ihren Formeln hatten, steigt die Zahl der Bewegungen bei Heapsort im Mittel nur um den Faktor ld (A), wobei ld den Logarithmus zur Basis 2 darstellt. Der Logarithmus ld kann durch den natürlichen Logarithmus (ln) auf die folgende Art dargestellt werden:
ld(A) = ln(A)/ln(2).

An dieser Stelle gleich einmal eine Bemerkung zum Logarithmus: Auf dem C 64 und auf dem VC 20 existiert jeweils nur der natürliche Logarithmus (ln). Im Basic-Dialekt dieser Computer wird jedoch eine unübliche Abkürzung für diesen Logarithmus verwendet. Eine Berechnung erfolgt hier mit dem Befehl LOG, der eigentlich für den Logarithmus der Basis 10 (Zehnerlogarithmus) steht.

Jetzt aber wieder zurück zu Heapsort. In Bild 4 können Sie erkennen, was vorher besprochen wurde. Unser Beispiel-Heap aus Bild 3 wird sortiert, wobei jeweils das erste Element aussortiert und dann der Rest des Arrays wieder zusammengesetzt wird.

Das Programm zu Heapsort ist in Listing 1 dargestellt und benötigt zu seiner Ausführung die beiden anderen Programmteile, die als Listing 1 und 2 in der 64'er, Ausgabe 4/1985 auf Seite 149 abgedruckt wurden. Um die Abfragepunkte bei Heapsort deutlich darzustellen, wurde in Listing 1 auf FOR-NEXT-Schleifen verzichtet, was allerdings zu Lasten der Geschwindigkeit geht. Wenn wir in der nächsten Ausgabe Quicksort besprechen, werden wir unter anderem auch auf Geschwindigkeitsfaktoren (Garbage-Collection, Vergleiche, Indizierung) eingehen. Außerdem werden wir einen Zeitvergleich über alle bisher besprochenen Routinen durchführen, zu dessen Zweck die Programme natürlich optimiert werden. Bild 5 zeigt einen Ausdruck von Heapsort während der Arbeit. In Bild 6 sehen Sie, wie schon in den vorherigen Folgen, einen Programmablaufplan, anhand dessen es keine großen Probleme bereiten sollte, Heapsort für eigene Anwendungen oder auf andere Programmiersprachen umzuschreiben.

Hiermit wollen wir es für heute aber auch schon bewenden lassen. Heapsort dürfte Sie sicherlich noch einige Zeit beschäftigen, da diese Methode nicht ganz leicht zu durchschauen ist. In der nächsten Folge werden wir uns ausführlich mit dem Quicksort beschäftigen, dem wohl schnellsten Sortieralgorithmus.

(Karsten Schramm/gk)

# Floppy oder Datasette? \[129,131]

> Die Zeiten, in denen das Floppy-Laufwerk 1541 noch weit über 1000 Mark gekostet hat, sind längst vorbei. So nach und nach scheint die Datasette verdrängt zu werden.

Ein Computer ohne Massenspeicher ist wie ein Auto ohne Räder. Man kann ihn zwar in Betrieb nehmen, doch kommt man nicht allzu weit damit. Erst Massenspeicher machen den Computer so ungeheuer flexibel. Durch sie hat man die Möglichkeit, Programme und Daten dauerhaft zu konservieren, aber auch die Weitergabe und der Kauf von Software wird erst mit einem solchen Medium möglich.

Zu einem Computer gehört also in jedem Fall ein externer Speicher. Für Homecomputer und speziell für den Commodore ist das die Datasette oder das Floppy-Laufwerk 1541. Doch für welchen Massenspeicher soll man sich entscheiden? Ein gewichtiges Argument fällt sofort, auch für den Laien, ins Auge: der Preis. Die Datasette ist mittlerweile für rund 99 Mark zu haben, während das Floppy-Laufwerk immerhin noch mehr als das sechsfache kostet. Doch der Siegeszug der Floppy-Laufwerke ist nicht aufzuhalten. Für Datasette-Besitzer ein Grund zum Nachdenken.

## Floppy oder Datasette?

Was zeichnet denn nun die Floppy gegenüber der Datasette aus? Das gewichtigste Argument dürfte der Komfort sein. Mit der Floppy zu arbeiten ist wesentlich übersichtlicher und auch schneller als mit dem Kassettenrecorder. Das beginnt mit dem Anlegen eines Inhaltsverzeichnisses, dem Directory. Die Titel aller Programme und Dateien, die auf einer Diskette gespeichert sind, werden in dem Directory mit einem Befehl erkennbar. Es informiert Sie über den Namen, die Programmlänge und ob es sich um ein Programm (PRG) oder um Daten (Dateien) handelt. Dateien werden mit SEQ oder USR (sequentielle) oder REL (relative) gekennzeichnet. Gelöschte Programme oder Dateien erhalten die Kennzeichnung DEL, werden aber nicht mehr angezeigt.

Auch der restliche auf der Diskette verfügbare Platz wird angegeben. Soll ein Programm geladen werden, kann das aus diesem Inhaltsverzeichnis heraus aber auch direkt geschehen. Wird ein Programm gelöscht, so wird der freigewordene Platz ohne Verlust und Lücken wieder zur Verfügung gestellt. Bei der Datasette bestehen diese Möglichkeiten nicht.

Sollte ein Datasette-Besitzer in den Genuß einer nicht von seinem Gerät bespielten Kassette kommen, so kann es vorkommen, daß dessen Programme nicht geladen werden können. Der Tonkopf der anderen Datasette braucht nur etwas anders eingestellt sein und schon wird es problematisch. Manche Kassetten haben ab und zu nicht einwandfrei beschichtete Stellen auf dem Band. Sollte beim Speichern eines Programms solch eine Stelle beschrieben werden, wird es später unmöglich, das Programm wieder zu laden. Datasetten-Besitzer gewöhnen sich deshalb sehr schnell an eine Kontrollfunktion, VERIFY genannt. Hier wird das soeben auf Band gespeicherte Programm noch einmal mit dem Inhalt des Computers verglichen. Das bedeutet schon mehr als doppelten Zeitaufwand (vor dem VERIFY muß ja die Kassette zurückgespult werden). Diskettenbesitzer vergessen diesen Befehl bald. Disketten sind viel sicherer als Kassetten.

Sollten Sie sich zu einem leidenschaftlichen Programmierer entwickeln, und das ist beim C 64 nicht ganz ausgeschlossen, werden Sie nicht an die Programmierung einer Dateiverwaltung herumkommen (wollen). Und jetzt bekommt die Datasette gleich zweimal eins aufs Dach. Turbotape-Besitzer (Turbotape beschleunigt Laden und Speichern von Programmen auf Kassette) können dieses Programm jetzt vergessen, denn Daten von sequentiellen Dateien werden nur mit der normalen Geschwindigkeit geladen. Das gibt Ihnen Zeit für Kaffee- und Zigarettenpausen. Den zweiten Schlag erhalten Sie, wenn Sie mit Ihrem Programmierwissen noch weiter vorangeschritten sind und in Zeitschriften oder Büchern über die Begriffe »Relative Datei« und »Direktzugriffsdatei« stolpern. Überlesen Sie einfach diese Kapitel, denn solche interessanten Dateiformen sind mit der Datasette nicht möglich. Aber selbst wenn Sie keine große Ambitionen als Programmierer haben: Dateiverwaltungsprogramme, die diese Formen der Verwaltung besitzen (und das sind die wirklich guten), erhalten Sie nur auf und für Diskette.

Damit wären wir bei einem weiteren Thema: Softwareangebot. Mit stetig sinkendem Preis des Diskettenlaufwerks und damit dessen wachsender Beliebtheit wird immer mehr Software auf den Markt kommen, die es nur auf Diskette gibt, beziehungsweise nur zusammen mit einem Diskettenlaufwerk funktioniert. Selbst die Literatur, dazu zählen auch Computerzeitschriften, befaßt sich immer mehr mit der Floppy. Auch bei uns in der Redaktion bekommen wir die wachsende Präsenz der 1541-Besitzer zu spüren. Das Verhältnis der Programmeinsendungen mit Diskette zu denen mit Kassette liegt zur Zeit bei ungefähr 7:3, mit sinkender Tendenz für Kassette.

## Floppy im Detail

Obwohl der Preisunterschied zwischen Datasette und Floppy-Disklaufwerk nicht gerade gering ist, darf man nicht vergessen, daß die 1541 zu den preisgünstigsten Diskettenlaufwerken überhaupt zählt. Viele Hersteller von Homecomputern bieten erst gar keins an. Und erst recht findet man keine »intelligenten« Laufwerke. Intelligent deshalb, weil die 1541 einen eigenen Mikroprozessor, den 6502, und ein Disketten-Operations-System (DOS) besitzt.

Die Speicherkapazität der 1541 ist zwar nicht berauschend, aber mit ungefähr 170 KByte pro formatierter 5¼-Zoll-Diskette für die meisten Anwendungen voll ausreichend. Dabei können bis zu 144 Einträge ins Directory gemacht werden, eine Zahl, die Sie wohl selten erreichen werden. Auch die Übertragungsgeschwindigkeit von Daten vom Computer zur Floppy ist mit runden 3200 Baud nicht gerade als Hexerei zu bezeichnen. Schuld daran ist nicht so sehr die serielle Datenübertragung, sondern vielmehr das DOS selber. Aber immerhin geht das immer noch rund 10 mal schneller als mit der Datasette.

## Eine oder zwei Floppies?

Wirklich keine Frage für Leute, die viel mit Dateiverwaltungen oder auch dem Kopieren von Programmen zu tun haben. Denn gerade diese Arbeiten erfordern oft einen Wechsel der Disketten. Mit zwei Floppy-Laufwerken ist dieses zeitraubende und auf die Dauer nervtötende Problem beseitigt. Genaugenommen lassen sich sogar bis zu fünf verschiedene 1541 hintereinander anschließen. Und das Schöne daran ist, daß, ausgenommen natürlich für das Laufwerk selber, keine zusätzlichen Kosten für Interfaces oder sonstige Hardwarezusätze hinzukommen. Einfach mit dem mitgelieferten Kabel an den Computer stecken und fertig. Vielleicht haben Sie jetzt auch den Eindruck, daß die Floppy gegenüber der Datasette doch entscheidende Vorteile hat, auch wenn die Existenzberechtigung der Datasette nicht ganz verschwunden ist. Denn für viele ist letzten Endes die Geldbörse das überzeugendste Argument — jedenfalls bis auf weiteres.

(gk)

# Reset-Taster für alle Fälle \[130-131]

> Ein Reset-Taster der herkömmlichen Bauart führt nicht immer zum gewünschten Ergebnis. Abhilfe schafft diese 3-Mark-Lösung, die fast jedes Programm abbricht. Sie müssen den C 64 also nicht immer aus- und wieder einschalten, um ein Programm zu beenden.

Ein normaler Reset-Taster für den C 64 kann viele Programme nicht stoppen. Das ist immer dann der Fall, wenn im Programm ein sogenannter Modulstart enthalten ist.

## So funktioniert der Modulstart

Was ist ein überhaupt ein Modulstart? Um das zu erklären, muß man sich das Betriebssystem des C 64 näher betrachten. Nach einem Reset, der auch softwareseitig mit SYS64738 ausgelöst werden kann, sieht sich der Computer den Inhalt der Speicherstellen $8004 bis $8008 an. Steht dort »cbm80« in Form der Commodore-ASCII-Codes, springt der C 64 an die Adresse, die in $8000 und $8001 angegeben ist. Dabei steht in $8000 das Low- und in $8001 das High-Byte des Reset-Vektors. In $8002 und $8003 steht der Warmstart-Vektor, also die Adresse, die durch Drücken von RESTORE angesprungen wird. Steht nun in $8000 und $8001 der Anfang eines Programmes, startet das Programm nach einem Reset immer wieder von neuem. Der Name »Modulstart« kommt daher, daß in jedem Modul, das nach dem Einschalten auch starten soll »cbm80« steht.

Wie Sie sehen, entscheidet also der Inhalt der Speicherzellen $8000-8008 über die Wirksamkeit eines herkömmlichen Reset-Taster, der die Reset-Leitung des C 64 auf Masse legt.

## Wir brechen aus

Da ein Modul die ROM-Konfiguration des C 64 ändert, ist klar, daß kein Reset-Taster ein Modul abschalten kann. Das Modul schließt nämlich eine oder mehrere Leitungen am Expansion-Port kurz und sagt dem C 64 dadurch, welche Speicheraufteilung zu aktivieren ist. Wird die EXROM-Leitung (externes ROM) auf Masse gelegt, schaltet der C 64 den RAM-Speicher von $8000 bis $A000 ab und greift in diesem Bereich auf das ROM des Moduls (EPROM) zu. Genau das hilft uns, um dem Software-Modulstart eines Programmes zu entkommen. Wird nämlich während eines Reset die EXROM-Leitung auf Masse gelegt, sucht der C 64 in einem (nicht vorhandenen) Modul nach der bekannten »cbm80«-Kennung. Da in einem nicht vorhandenen Modul kein »cbm80« steht, durchläuft der C 64 die normale Reset-Routine mit Basic-Kaltstart-Einsprung (Einschaltmeldung). Nach dem Reset wird dann die Verbindung EXROM — Masse aufgehoben und damit die normale Speicherkonfiguration wieder hergestellt. Der C 64 meldet sich mit dem Einschaltbild. Wenn Sie nun einen normalen Reset — etwa mit SYS64738 — auslösen, wird das Programm wieder gestartet. Ob es allerdings noch funktionsfähig ist, hängt vom Programm selbst ab.

## Reset-Schalter in der Praxis

Wie bereits erwähnt, muß während des Reset die EXROM-Leitung auf Masse (GND) gelegt werden. Das macht man am einfachsten mit einem Taster, der zwei Leitungen gleichzeitig schaltet (2 x Ein). Da EXROM während des ganzen Reset Low-Potential haben muß, wird mit einem Kondensator die »Reset-Dauer« begrenzt. Dazu wird ein Elektrolyt-Kondensator mit 16V/47µF in die Leitung vom Reset-Kontakt (Pin C, Expansion-Port) zum Taster geschleift. Minuspol in Richtung Masse. Die Funktion ist einfach zu erklären: Nach Drücken des Tasters liegt auf beiden Kondensatorplatten Masse an, der Reset wird gestartet. Der Kondensator lädt sich nun innerhalb kürzester Zeit auf und die Reset-Leitung liegt wieder auf High-Pegel, während EXROM (Pin 9) noch solange Low-Potential hat bis der Taster losgelassen wird. Damit sich der Elko nach dem Reset wieder entladen kann, überbrückt man ihn mit einem 1OkOhm-Widerstand, 1/8 Watt.

Die Resetleitung liegt durch diese »Einschaltbegrenzung« so kurzzeitig auf Masse, daß das Commodore Diskettenlaufwerk 1541 davon vielleicht gar nichts merkt und keinen Reset macht.

## Ein- oder Anbau — das ist hier die Frage

Für den Versierten in Sachen Löten empfiehlt sich der feste Einbau in den C 64 (Garantie beachten). Die Kontakte des Expansion-Ports werden bei dieser Lösung am besten auf der Lötseite der C 64-Platine abgegriffen. In Bild 1 ist Masse an Pin 1 angeschlossen (gelbes Kabel). EXROM an Pin 9 (blaues Kabel) und Reset an Pin C (rotes Kabel). Den Schaltplan finden Sie in Bild 2, die Stückliste in Tabelle 1.

Eine andere Lösung wäre der Anschluß über einen Platinenstecker. Der Stecker muß allerdings selbst gebaut werden. Uns ist keine Bezugsquelle bekannt. Zur Steckerfertigung brauchen Sie eine beidseitig kupferkaschierte Epoxidharzplatte mit einer Größe 58 x 50 mm. 58 mm ist die Breite des Expansion-Ports. Bei ausgeschaltetem (!) Computer stecken Sie nun die Platine einige Male in den Expansion-Port und wieder aus, bis die Schleifspuren der Kontakte deutlich zu sehen sind. Zwischen den Spuren wird das Kupfer auf der ganzen Länge der beiden Platinenseiten etwa 1 mm breit abgekratzt. Das kann mit einem Stichel, Körner oder einem spitzen Nagel und einem Lineal als Anschlag geschehen. An die Leiterbahnen können Sie nun die Zuleitungen zum Reset-Taster anschließen. Wer es professionell machen will, kann auch eine kleine Platine speziell dafür ätzen.

(hm)

TODO TABELLE ("Tabelle 1")

## Stückliste
Taster 2xEin
Elko 16V/47µF
Widerstand 1OkOhm, 1/8 Watt
Schaltdraht (verseh. Farben)
event. beidseitig kupferkaschierte Epoxidharzplatte 58 x 50 mm

# Textomat Plus kontra Vizawrite 64 \[132-135]

> Der seit langem bekannte Textomat hat einen großen Bruder bekommen — Textomat Hus. Wird der »Neue« den bisherigen Spitzenreiter Vizawrite 64 verdrängen können?

Für diejenigen, die unsere Zeitschrift seit einiger Zeit lesen, sind sowohl Textomat als auch Vizawrite 64 bereits alte Bekannte. In Ausgabe 9/84 haben wir den alten Textomat und in Ausgabe 10/84 Vizawrite 64 getestet. Seit damals galt Vizawrite 64 wegen seines ausgereiften und fehlerfreien Konzeptes als bestes Textverarbeitungsprogramm in der Klasse über zweihundert Mark. Für die knappere Kasse konnte man damals den Textomat für 99 Mark ruhigen Herzens empfehlen. Mittlerweile war man in Düsseldorf bei Data Becker nicht müßig und bemühte sich, ein Textverarbeitungsprogramm für den gehobenen Anspruch, in der gleichen Preisgruppe wie Vizawrite 64, zu entwickeln. Seit kurzem ist nun der von W. Schellenberger programmierte Textomat Plus für 248 Mark erhältlich.

Die Einleitung zum Textomat Plus ist vielversprechend — viele Ideen und Anregungen aus dem Kundenkreis sollen beim Textomat Plus berücksichtigt worden sein. Alles in allem soll Textomat Plus in eine neue Dimension der Textverarbeitung führen. Ein hoher Anspruch, den es natürlich zu prüfen galt. Wir haben im Test besonders auf folgende Punkte geachtet:

* Bedienungsfreundlichkeit (sind alle Funktionen einfach erreichbar und sinnvoll plaziert?)
* Arbeitsgeschwindigkeit (wie lange dauert das Erstellen eines Testschriftstückes?)
* Übersichtlichkeit (der Texteingabe, der Textkorrektur, der Sonderfunktionen)

Textomat Plus wird nur auf Diskette geliefert. In alt bekannter Art beginnt kurz nach dem Laden der Weg durch eine Reihe verschiedener Vormenüs. Als erstes möchte Textomat Plus wissen, welcher Bildschirmzeichensatz geladen werden soll. Auf der Masterdiskette sind ein amerikanischer (C 64 Normaltastatur) oder ein deutscher Zeichensatz (simuliert eine deutsche Schreibmaschinentastatur) vorhanden. Im Regelfall wird man den schon voreingestellten deutschen Zeichensatz wählen (Taste Fl drücken), denn Textomat Plus erzeugt auf fast allen Druckern deutsche Sonderzeichen. Im nächsten Menü wird man dazu aufgefordert, den Druckertyp anzugeben. Hat man einen MPS 801, genügt ein Druck auf die Funktionstaste Fl. Besitzer eines anderen Druckers müssen hier ihren Druckertyp eintragen und den Rest der Zeile löschen. Im dritten und glücklicherweise letzten Menü kann das Datum in beliebiger Form eingegeben werden. Kurz nach dem Bestätigen mit Fl befindet man sich im Schreibmodus.

## Unterschiedliche Menütechnik

Es ist schon ärgerlich, was man beim Textomat Plus alles anstellen muß, um endlich einen Text eingeben zu dürfen. Flexibilität in allen Ehren, aber wer wechselt seinen Drucker schon täglich? Alle dauerhaften Konfigurationsparameter wie Bildschirmzeichensatz, Druckertyp, Anzahl der Laufwerke und die Bildschirmfarben gehören einmal festgelegt und abgespeichert. Hierzu ist die auch sonst sinnvolle Funktion des Formulars bestens geeignet. Beim Laden des Programms sollte ein vom Anwender erstelltes und unter bestimmten Namen (beispielsweise »Standardformular«) abgespeichertes Formular automatisch mitgeladen werden. Wer dann noch etwas ändern möchte, kann das im Textmodus immer noch tun. Auch die Eingabe des Datums sollte dem Wunsch des Anwenders vorbehalten bleiben. Das wurde auch erkannt, denn im Formular kann jederzeit das Datum eingegeben werden, fragt sich, warum dann noch ein extra Menü kurz nach dem Laden dafür vorgesehen ist?

Das Konzept, das in dieser Hinsicht von Vizawrite 64 verwirklicht wird, gefällt da schon wesentlich besser. Nach dem Start erscheint ein Hauptmenü, von dem aus alle wesentlichen Grundfunktionen angewählt werden können. Man kann den Inhalt einer Diskette ansehen, ein altes oder neues Dokument laden oder einen DOS-Befehl geben.

Farbeinstellungen, Laufwerkparameter und Druckerparameter werden erst viel später eingestellt, nämlich dann wenn man sie braucht. Wer nichts ändern möchte, wird aber auch nicht dazu gezwungen. Eine sinnvolle Eigenschaft von Vizawrite 64 ist es, alle wesentlichen Parameter wie Farbgebung, Zeilenformat, Druckertyp und Druckerparameter mit dem Dokument abzuspeichern. Der Anwender merkt davon nichts: Er erhält ein einmal abgespeichertes Dokument wieder so auf den Bildschirm, wie er es abgespeichert hat, ohne sich Gedanken über Formulare machen zu müssen. Damit ist allerdings der Nachteil verbunden, daß es bei Vizawrite 64 gegenüber Textomat Plus etwas länger dauert, das gesamte Format eines Textes zu ändern.

Textomat Plus arbeitet gegenüber Vizawrite 64 nur teilweise bildschirmorientiert. Das heißt, der Text erscheint im Schreibmodus nur annähernd in seiner späteren Form. Zwar besitzt auch Textomat Plus nun einen sogenannten »Word wrap«, der ein Wort, das nicht mehr ganz in eine Zeile passen würde, mit in die nächste Zeile übernimmt. Prinzipiell faßt Textomat Plus den Text aber als eine fortlaufende Folge von Zeichen auf, die erst durch entsprechende Formatbefehle im Text ihr späteres Aussehen erhalten. Damit sind einige Nachteile verbunden, denn der beschriebene Text kann, besonders wenn öfters korrigiert oder ergänzt wurde, recht unübersichtlich werden. Das gilt wohlgemerkt nur im Schreibmodus, in der Funktion »Ansehen«, die den Text mit 40- und sogar 80 Zeichen auf den Bildschirm darstellt, werden überzählige Leerstellen ignoriert und der Text, besonders im 80-Zeichenmodus, so gezeigt, wie er später tatsächlich aussieht. Leider sind in dieser Funktion keine Korrekturen am Text möglich. Man muß sich entweder alle Fehler, die behoben werden sollen, aufschreiben, oder öfters zwischen Schreib- und Ansehmodus wechseln. Bei längeren Texten ist das aber ein vollkommen unpraktisches und sehr zeitraubendes Unterfangen, denn um von einem Modus in den anderen zu gelangen, muß Textomat Plus immer wieder auf die Masterdiskette zugreifen (Ladedauer im 80-Zeichenmodus insgesamt 48 Sekunden). Eine leichte Abhilfe ist es, wenn man das File »80« auf die Textdiskette kopiert, denn dann spart man sich wenigstens den Diskettenwechsel. Etwas unverständlich ist bei diesem Konzept die Funktion der variablen Zeilenbreite. Sie ist im Normalfall auf 40 Zeichen eingestellt, das heißt nachdem der rechte Bildschirmrand erreicht wird springt der Cursor in eine neue Zeile. Wer möchte, kann aber auch bis zu 240 Zeichen in eine Zeile eingeben, der Text wird dann horizontal verschoben. Eine solche Funktion ist aber eigentlich nur bei einem rein bildschirmorientierten Textsystem sinnvoll, in der Regel wird man deshalb auch bei 40 Zeichen pro Zeile bleiben.

## Vizawrite 64 kann's besser

Vizawrite 64 ist dagegen vollkommmen bildschirmorientiert. Der Text wird im Schreibmodus so eingegeben und formatiert, wie er später aussehen soll. Der Text wird dabei, entsprechend der in der jeweiligen Formatzeile angegebenen Zeilenbreite, horizontal verschoben. Alle Absätze, Einrückungen und Zentrierungen haben direkte Wirkung auf das Aussehen des Textes. Vizawrite 64 besitzt keinen »Anseh-Modus«, mit dem der Text in seinem späteren Aussehen, möglicherweise sogar in 80-Zeichendarstellung, betrachtet werden kann. Wer den Text als ganzes sehen möchte, ohne dabei mit dem Cursor durch die Zeilen fahren zu müssen, kann den gesamten Text mit der »Width-«Funktion blitzschnell auf 40 Zeichen umformatieren. Da in diesem Modus weiterhin geschrieben werden kann, ist die Korrektur eines Textes schnell durchführbar. Aber auch beim Editieren eines Textes ist Vizawrite 64 seinem Konkurrenten überlegen. Bei Vizawrite 64 können beliebige Textteile (auch mitten aus einer Zeile heraus) kopiert, dupliziert oder aber gelöscht werden. Die betreffenden Textteile werden durch überfahren mit dem Cursor (auch Zeilen- und Seitenweise möglich) hell unterlegt. Durch Bestätigung mit der RETURN-Taste wird die gewünschte Funktion mit sehr hoher Geschwindigkeit ausgeführt. Die Bedienung ist dabei denkbar einfach. Soll beispielsweise mitten in einer Zeile ein ganzer Satz eingefügt werden, genügt ein Druck auf die F7-Taste, um beliebig viele Zeichen einzufügen. Drückt man nochmals auf die F7-Taste, wird der restliche Text perfekt an den neu geschriebenen Text angefügt.

Mit Textomat Plus ist das schon etwas komplizierter. Zunächst gestattet dieser nur das zeilenweise Kopieren oder Verschieben, wobei zunächst ein Block markiert werden muß. Zum anderen ist ein Löschen nur zeilenweise, oder ab Cursor/bis Cursor möglich. Ein Einfügen von Text ist ähnlich wie bei Vizawrite 64, leider werden dabei immer wieder Leerzeichen hinzugemogelt, die zwar nicht den Ausdruck verändern, wohl aber die Übersichtlichkeit erschweren. Diese Leerzeichen werden deshalb eingefügt, weil Textomat Plus bei allen Editierbefehlen immer nur zwei Zeilen hinter dem Cursor erkennt. Beim Löschen entsteht deshalb in der zweiten Zeile eine Lücke. Übrigens ist es bei Textomat Plus nur im Einfüge-Modus möglich, einen nachträglichen Absatz einzufügen, denn sonst wird beim Drücken von SHIFT-RETURN der Rest der Zeile einfach gelöscht. In Praxi sind somit im ungünstigen Fall bis zu vier Tasten notwendig, um einen Absatz nachträglich zu setzen. Auch sollte die Funktion von RETURN (Zeilenwechsel ohne Absatz) und SHIFT-RETURN (Zeilenwechsel mit Absatz) vertauscht werden.

Textomat Plus arbeitet mit einer Vielzahl von Menüs (Bild 1). Diese Menüs zum Ansteuern der Befehle sind alle hierarchisch geordnet. Um zu einer bestimmten Funktion zu kommen, bietet Textomat Plus zwei Wege an. Entweder wird von oben nach unten durch alle Menüs gewandert, oder aber der direkte Weg durch Drücken einer bestimmten Taste im Menü-Modus gewählt. Leider ist letzterer Weg zurück zum Schreibmodus nicht möglich. Es bleibt oft nichts anderes übrig, als immer wieder auf die Funktionstaste F2 zu drücken, bis man wieder im Schreibmodus ist. Eine »Escape«-Taste, die sofort wieder in den Schreibmodus führt, wäre sicherlich eine sinnvolle Ergänzung.

Vizawrite 64 kennt dagegen nur zwei Menüs: Das Haupt- und das Druckermenü. Alle wesentlichen Funktionen werden direkt durch bestimmte Tasten in Verbindung mit der Commodore-Taste aufgerufen. Ein effizientes Verfahren, an das man sich schnell gewöhnt.

Bislang haben wir hauptsächlich die Standardfunktionen unserer beiden Testkandidaten betrachtet. Dabei ist es natürlich unmöglich, alle Funktionen direkt miteinander zu vergleichen. Eine Übersicht aller Funktionen von Textomat Plus und Vizawrite 64 ist deshalb in Tabelle 1 zusammengestellt.

## Das große Plus

Beim Textomat Plus wurden erstmalig eine Reihe von Sonderfunktionen programmiert, die sonst in keinem anderen Textverarbeitungsprogramm für den Standard C 64 zu finden sind. In diesem Abschnitt soll darauf etwas genauer eingegangen werden.

Textomat Plus verarbeitet Grafiken! Einerseits ist es möglich Grafiken einzuladen, zu betrachten und ganz oder abschnittweise abzuspeichern. Andererseits werden durch ein spezielles Steuerzeichen Grafiken, die im Standardformat ab dezimal 8192 = hex 2000 abgespeichert sind, im Text eingefügt (Bild 2). Leider kann bei dieser Funktion der Grafikabschnitt immer nur vertikal und nicht horizontal bestimmt werden, deshalb ist es auch nicht möglich, links oder rechts neben eine Grafik etwas zu schreiben. Das geht nur, wenn man das Papier entweder von Hand zurückdreht oder bei Druckern mit Rückwärtstransport die entsprechenden Steuerzeichen sendet.

Jedes Terminalprogramm ist eigentlich auch ein kleines Textverarbeitungsprogramm. Warum sollte deshalb nicht in einem Textverarbeitungsprogramm auch ein Terminalmodus vorhanden sein? Textomat Plus besitzt eine spezielle Funktion zum Senden und Empfangen von Texten via Akustikkoppler. Am günstigsten ist es, wenn empfangene Texte von einem Computer gesendet wurden, der ebenfalls mit Textomat Plus arbeitet. In diesem Fall kommt es zu keinerlei Problemen beim Datenempfang. Soll aber beispielsweise mit einer Mailbox kommuniziert werden, wird es notwendig, zuerst eine RS232-Parametertabelle und dann eine Liste der ASCII-Zeichen einzugeben. Hier wäre es wünschenswert, wenn die gängigsten Normen auf der Masterdiskette mitgeliefert würden oder wenigstens im Handbuch aufgeführt wären. Mit einem speziellen Terminalprogramm ist Textomat Plus allerdings nicht zu vergleichen.

### Allerlei Druckmodi

Das wohl interessanteste am Textomat Plus sind seine verschiedenen Druckmodi. Er besitzt drei davon, mit jeweils ganz unterschiedlichen Fähigkeiten. Der wohl gebräuchlichste ist der Standarddruck, bei ihm werden die Zeichen in Form eines Codes an den Drucker geschickt. Das hat den Vorteil, daß der Ausdruck relativ schnell vonstatten geht und alle Steuerzeichen (Fettschrift, Unterstreichen) verarbeitet werden.

Im Grafikdruck werden alle Zeichen über Grafik erzeugt (auch auf den Commodore-Druckern!). Das bedeutet, daß eine selbst entworfene Schrift und diese sogar in proportionalem Zeichenabstand auf das Papier gebracht werden kann. Diese Methode verlangsamt den gesamten Druckvorgang natürlich wesentlich, außerdem werden keine Steuerzeichen mehr akzeptiert. Einzige Ausnahme sind Drucker mit einem ladbaren Zeichensatz. Wer sich auf eine 11\*8 Punktmatrix beschränkt, kann auch weiterhin Steuerzeichen verwenden.

Als Mischdruck wird beim Textomat Plus ein Druckverfahren bezeichnet, das sich aus dem Standarddruck und dem Grafikdruck zusammensetzt. Dieser Mischdruck erlaubt die Definition eigener Sonderzeichen, die dann im Grafikdruck eingefügt werden.

### Hilfsprogramme eingebaut

Natürlich ist es ohne geeignete Hilfsprogramme nicht gerade einfach, einen neuen Drucker- oder Bildschirmzeichensatz zu entwerfen. Deshalb hat man den Textomat Plus auch mit einer ganzen Reihe von Programmierhilfen ausgestattet. Ein komfortables Programm (von T. Müller) das direkt aus dem Textmodus geladen werden kann, erfüllt alle Ansprüche an einen komfortablen Bildschirm- und Zeicheneditor (Bild 3). Die Definition neuer Zeichen wird so kinderleicht. Besondere Befehle erlauben es, ein Zeichen vielgestaltig zu bearbeiten. Wer mit neuen Schriften, aber auch mit wissenschaftlichen Sonderzeichen arbeiten muß, wird von dieser Funktion des Textomat begeistert sein.

### Flexibilität großgeschrieben

Textomat Plus ist so programmiert, daß es mit möglichst vielen Druckern zusammenarbeitet. Neben der bereits vom Vorgänger her bekannten Tabelle zur ASCII-Code-Zuweisung, sind bereits aufder Masterdiskette einige Steuer-Codes wichtiger Druckertypen abgespeichert (siehe Tabelle). Textomat Plus arbeitet außerdem mit einigen Datenbanken (Superbase, Datamat) zusammen, um Serienbriefe erstellen zu können. Für kleinere Anwendungen ist es sogar vorgesehen, eigene Adreßdateien anzulegen, die später im Text eingefügt werden. Endlich ist es auch möglich, den Druck vorzeitig abzubrechen.

Textomat Plus ist ohne Zweifel eines der besten Textverarbeitungsprogramme für den C 64. In einigen Bereichen ist er sogar unerreicht. Leider weist der Schreib-Modus einige Mängel auf, die Textomat Plus von der professionellen Ebene (in der er sich preislich bewegt) trennen. Die exzessive Menütechnik ist Geschmacksache. Bei längerem Arbeiten wird es allerdings lästig, die Menüs rauf und runter zu wandern, man tut gut daran die Befehlstasten schnell zu lernen. Der größte Mangel des Textomat Plus ist aber die extrem unkomfortable Art der Textkorrektur. Es kann niemanden zugemutet werden, sich alle Änderungen, die ihm im »Anseh-Modus« auffallen, zu merken, um sie später im Schreibmodus zu korrigieren. Vorbildlich ist dagegen die Hilfsprogrammsammlung. Es gibt kein anderes Textverarbeitungsprogramm, das auch nur ähnliche Manipulationen des Bildschirm- und Druckerzeichensatzes zuläßt.

Wenn es darum geht, schnell und sehr komfortabel Texte zu erstellen, ohne dabei auf spezielle Grafikschriften zurückzugreifen, gibt es nach wie vor kaum ein besseres Programm als Vizawrite 64. Die reichhaltige Ausstattung und die Möglichkeit, beliebig viele Druckbefehle zu definieren, heben Vizawrite 64 eindeutig in die professionelle Klasse. Es ist natürlich Ansichtssache, aber es scheint, daß ein konsequent bildschirmorientiertes Textsystem am vorteilhaftesten ist. Unerreicht ist bislang die Korrektur- und Editierfunktion von Vizawrite 64. Schon oft haben wir das beliebige Umkopieren oder Löschen einzelner Textteile schätzen gelernt. Mit 34 000 freien Zeichen ist der Textspeicher von Vizawrite 64 übrigens um 10000 Zeichen größer als beim Textomat Plus.

Wer gerne mit Schriften experimentiert, oder aber Grafik und Text mischen möchte, aber auch diejenigen, die oft spezielle Sonderzeichen benötigen, sind mit Textomat Plus (248 Mark) bestens bedient. Für alle, die schnell, komfortabel und vor allem übersichtlich Texte erstellen möchten, bleibt Vizawrite 64 (298 Mark) die beste Empfehlung.

(Arnd Wängler/gk)

Bezugsquellen: Textomat Plus: Data Becker, Postfach 1440, 4000 Düsseldorf 1, Vizawrite 64: Interface Age, Josephsburgstr. 6, 8000 München 80

# Macro-Basic: Die Unterprogramm-Bibliothek \[137-139]

> Herkömmliche Basic-Erweiterungen sind in der Regel aus einem Guß, mit vielen nützlichen, aber auch unnötigen Befehlen. Und oft fehlen gerade die Funktionen, die man am dringendsten braucht. Damit will Macro-Basic ein für anemal Schluß machen.

An anderen Befehlserweiterungen fehlt immer etwas: Exbasic Level II hat keine Grafikmöglichkeiten, Simons Basic kein richtiges RENUMBER, um nur einige Beispiele zu nennen. Der Gedanke, ein flexibles Software-Instrument zu bauen, welches aus einer Vielzahl von Modulen besteht, die man — je nach aktuellem Bedarf — in den Computer lädt, drängt sich da geradezu auf. Verwirklicht wurde dieses einleuchtende Konzept mit Macro-Basic.

Packt man Macro-Basic aus, dann fällt dem in dieser Hinsicht von Commodore nicht gerade verwöhntem C 64-Besitzer zunächst einmal ein mehrere hundert DIN-A4-Seiten starkes Handbuch auf. Da merken Sie dann, was es heißt, seinen verfügbaren Basic-Befehlssatz in etwa zu vervierfachen. Das ist aber noch nicht alles, denn im Mai soll noch eine Grafikerweiterung auf den Markt kommen mit nochmal 18 neuen Befehlen. Daneben übersieht man fast die doppelseitig beschriebene Diskette und den Dongle, einen Kopierschutzstecker, der in den Kassettenport geschoben werden muß.

Wie ist Macro-Basic aufgebaut? Zwei Softwarepakete bilden derzeit das komplette System, von denen das erste aus einem Ladeprogramm und 260 Befehlen besteht, das zweite aber eine Dateiverwaltungs-Bibliothek mit weiteren 30 Befehlen bereithält. Das Ganze verteilt sich auf 160, größtenteils voneinander unabhängige, Module, die mittels eines Linkprogramms nach Belieben zusammengestellt werden können. Theoretisch verfügt man mit Macro-Basic nicht nur über eine, sondern über 160 x 160 = 25 600 mögliche Befehlserweiterungen, je nachdem, wie man sich die Module zusammenbastelt. Jedes Modul enthält einen oder meist mehrere Befehle in Form von optimierten Maschinenprogrammen. Das kleinste Modul beansprucht 7 Byte, das größte — wenn ich mich nicht vertan habe — 3670 Byte an Speicherplatz. Im Schnitt opfert man für jedes Modul etwa 100 bis 200 Byte. Wohin man im Speicher seine Befehlsbibliothek packen will, bleibt im eigenen Ermessen. Eine fertig erstellte Basic-Erweiterung kann unter einem Kennwort abgespeichert werden. Sollten Sie Zugang zu anderen Commodore-Computern haben, dann können Sie die Befehlserweiterung auch auf diese anwenden, denn Macro-Basic ist mit besonderem Augenmerk auf Kompatibilität gebaut worden.

Das Erstellen der individuellen Basic-Erweiterung geschieht relativ einfach im Dialog. Dazu lädt man das erste Programm auf der Macro-Basic-Diskette, gibtein, aufwelchem Commodore-System man arbeitet, steckt auf Anforderung den Datenstecker in den Kassettenport und gibt an, wo im Speicher die Maschinenprogramme abgelegt werden sollen. Man hat dann die Möglichkeit, sich auf dem Drucker ein Protokoll der weiteren Prozedur mitschreiben zu lassen. Das empfiehlt sich besonders bei größeren Erweiterungen, weil man nach einiger Zeit sicher nicht mehr weiß, welche Kombinationen man gewählt hat, und wohin man im Speicher das ganze Werk lädt. Die Startadresse braucht man nämlich, um die Erweiterungzu initialisieren. Von nun an ist alles ein Kinderspiel. Das Programm erfragt Stück für Stück die Kennzahlen der einzelnen Module bis man schließlich END eingibt. Dann erteilt man dem Ganzen einen Namen, legt eine formatierte Diskette ins Laufwerk, der Drucker schließt das Protokoll ab und das Ladeprogramm speichert alles ab, bevor es sich diskret aus dem Geschehen zurückzieht. Zum Testen habe ich mir mal eine Erweiterung aus 154 Modulen zusammengestellt, die etwa 23,6 KByte beansprucht. Das Ganze dauert ungefähr eine halbe Stunde. Wenn man mehr Übung darin hat, reduziert sich der Zeitaufwand sicher noch erheblich. In diesen 23,6 KByte liegen immerhin 260 neue Befehle! Für den Normalgebrauch kommt man sicher leicht mit den 4 KByte im oberen RAM des Commodore 64 ($C000 bis $D000) aus.

Benötigt man nun irgendwann eines der auf diese Weise zusammengestellten Instrumente, dann lädt man es unter dem zugeteilten Namen, gibt danach NEW ein und startet mittels SYS Startadresse,\*. Die Startadresse holt man sich aus dem Protokoll als Startadresse Original. Automatisch wird nun auch der Basic-Speicher begrenzt und alle Befehle der Erweiterung stehen zur Verfügung.

Um welche Befehle es sich dabei handelt, sehen Sie aus der beigefügten Tabelle. Es ist allerdings unmöglich, in diesem Rahmen alle 290 Befehle vorzustellen. Deswegen habe ich nur eine — sicherlich etwas willkürliche — Auswahl der wichtigsten dort aufgeführt. Allen Macro-Basic-Befehlen ist ein »&« voranzustellen.

Sind Sie ein Verfechter der strukturierten Programmierung? Dann verfügen Sie über Befehle wie IF... THEN... ELSE... ENDIF, aber auch SELECT. CASE.. OTHER.. ENDSEL, DO...DO WHILE...DO UNTIL... mit END DO und EXIT Label können gesetzt und mit GOSUB oder GOTO angesprungen werden. Echte Unterprogramme mit eigenen Variablen, die per CALL anzusteuern sind, sind möglich. Variable und Arrays können aber auch vom Hauptprogramm an das Unterprogramm übergeben werden. Mittels ’ (Hochkomma) können Kommentare ins Programm geschrieben werden. Durch SUBMIT ist es möglich, auf einfache Weise mit Overlay-Technik zu arbeiten, was auch durch den OVERLAY-Befehl für einzelne Programme möglich ist. ON ERROR und RESUME erlauben das Auffangen von Fehlermeldungen, die in Variablen EC%, EL% und ET$ als Fehlercode, fehlerhafte Basic-Zeile und Fehlertext abfragbar sind. Fast schon selbstverständlich sind Befehle wie AUTO (AUTONUMBER-Funktion, die auch noch Texte wie zum Beispiel DATA schreiben kann), BLOAD oder BSAVE (ladender oder speichernder Zugriff auf beliebige Speicherbereiche), DELETE (Löschen beliebiger Zeilen), DLINK (Anhängen von Programmen) und DMERGE (Mischen von Programmen nach Zeilennummern!), DUMP-Funktionen, die auch die Auflistung von Arrays erlauben, LIM (zum Begrenzen des Basic-Speichers), LPAGE (zum seitenweisen Vorwärtsoder Rückwärts-Auflisten von Programmen), RENUM (das ist ein echtes RENUMBER), RLOAD (zum Laden und Starten eines Programmes), FIND und SEARCH (durchsucht Programme nach Variablen, Befehlen oder Konstanten und listet nach Speicherposition oder Basic-Zeilennummer auf) und TRACE-Möglichkeiten zur schrittweisen Bearbeitung von Basic-Programmen.

Der Verkehr mit Peripherie wird gefördert durch SPOOLING-Befehle, Anweisungen zur Druckeranpassung, DISK zum Ermitteln von Diskettenparametern, HCOPY zum Ausdrucken des Bildschirminhaltes. SCR LOAD oder SAVE erlaubt das Einladen oder Abspeichern von Bildschirmen. Mittels RLIST und SLIST lassen sich relative oder sequentielle Dateien auf dem Bildschirmzeigen. TURBO beschleunigt Diskettenoperationen.

Grafiken können — ab Mai angekündigt, auch mit Hochauflösung — durch Pixel oder Balken erstellt werden. FLASH-Funktionen lassen Bildschirmteile blinken, SOUND und BEEP sorgen für Lautuntermalungen. Eine Reihe von Befehlen greifen direkt auf den Bildschirm zu und erlauben beispielsweise das Füllen von Fenstern mit Zeichen.

Mathematisch Interessierte haben eine Vielzahl von neuen Möglichkeiten zur Verfügung, angefangen vom ACOS über Rechnungen mit mehrfach genauer Zahlendarstellung (bis zu 100 Ziffern!), Umrechnungen innerhalb der Zahlensysteme dezimal/sedezimal/binär, Winkelmaß-Umrechnungen etc. bis zur Berechnung des Gregorianischen Datums aus dem Julianischen und umgekehrt. Strings können wie mathematische Ausdrücke behandelt oder sogar als Basic-Anweisungen interpretiert werden.

Und beim Stichwort Strings sind wir bei der eigentlichen Stärke von Macro-Basic angelangt. Ich habe nie gewußt, was man alles mit Strings anstellen kann, bis ich Macro-Basic kennenlernte! Sie werden kaum eine String-Operation vermissen. Mir ist jedenfalls keine mehr eingefallen. Ob es sich um Suchen von ganzen Strings oder Teilen davon, Tauschen oder Verändern, Ein- oder Ausgabe, Positionieren, Prüfen, Umwandeln, Formatieren, Löschen... dreht, alles ist vorhanden.

Stringverarbeitung spielt beim Verwalten von Daten eine Rolle. Neben einer ganzen Reihe von neuen Befehlen, die den Datenzugriff auf Diskette oder im Speicher betreffen, gibt es sechs Module mit 30 Befehlen, die einen Dateityp schaffen, der ISAM/VSAM genannt wird. ISAM kennt vielleicht manch einer als IBM-Begriff: Indexed Sequential Access Method (also Index-sequentieller Dateizugriff). VSAM steht für Virtual Storage Access Method, also virtuelle Dateizugriffsmethode. Mittels ISAM/VSAM kann auf dreierlei Wegen Dateiverarbeitung geschehen: Sequentielle Verarbeitung in der Eingabereihenfolge, sequentielle Verarbeitung in Schlüsselfolgen und die gezielte Verarbeitung über Schlüssel. Datensätze dürfen variable Länge haben, die Datenspeicherung erfolgt blocküberspannend, mehrere Schlüssel dürfen pro Datensatz verwendet werden, aber auch mehrere Datensätze pro Schlüssel sind möglich, wobei übrigens der Schlüssel nicht Bestandteil des Datensatzes sein muß. Bis zu fünf Diskettenstationen der unterschiedlichen CBM-Formate können parallel verwaltet werden. Außer den Befehlen zum Einrichten, Löschen und Sichern solcher Dateien stehen Befehle zum Verarbeiten von Diskettenfehlern, zum Update, zum Suchen von Datensätzen, zum Überschreiben, zum Kopieren, zum Reorganisieren der Datei beziehungsweise der Einträge zur Verfügung.

Sicherlich werden Sie in dieser Beschreibung Befehle vermissen. Das liegt aber nicht daran, daß Macro-Basic sie nicht zur Verfügung stellen würde, sondern daran, daß es unmöglich ist, hier alle aufzuführen. Kritik muß das Handbuch finden. Nicht, daß es vor Rechtschreibfehlern nur so strotzt stört, sondern, daß es offensichtlich für die großen Brüder des Commodore 64 geschrieben wurde, denn alle den Bildschirm betreffenden Operationen beziehen sich auf einen Bildschirmstart bei 32768. Einige Demoprogramme enthalten schlichtweg Fehler. Der Gebrauch der Bezeichnung BCD (binary coded decimal) als Abkürzung für Bildschirmcode verwirrt auch einigermaßen. Der Autor versichert aber, das Handbuch sei inzwischen überarbeitet worden und die neue Version enthalte diese Fehler nicht mehr. Der Preis hält sich im üblichen Rahmen: 298 Mark zahlt man für die Normalausführung (inklusive Dongle), dazu noch 34 Mark für das Handbuch. Als Zusatzpackung erhält man für 148 Mark die ISAM/VSAM Dateipackung. Nach Auskunft des Autors sind der Grafikzusatz und weitere geplante Ergänzungen darin schon enthalten.

Fazit: Durch Macro-Basic wird der Commodore 64 zu einem derart vielseitigen Computer, daß dieses Software-Paket für ernsthafte Anwender guten Gewissens zu empfehlen ist.

(Heimo Ponnath/gk)

Info: S&A Software, Bernd, Lambertusstr. 32, 5210 Troisdorf-Muellekoven

# Directory-Manipulationen \[140-142]

> Wer seine Programme vor den Augen anderer schützen möchte, der muß heutzutage schon zu recht harten Methoden greifen. Erstaunlich ist, was man allein schon mit dem Directory einer Diskette anfangen kann.

So mancher benutzt den C 64 doch tatsächlich noch, um Programme selber zu schreiben, und nicht nur zur Anwendung von »vorgefertigter« Software, nicht zuletzt Spielen. Und diese selbstgeschriebenen Meisterwerke sollen vor fremdem Zugriff, also dem Kopieren geschützt werden. Allerdings haben sich gerade manche dieser unermüdlichen Freaks darauf spezialisiert, Kopierprogramme zu schreiben, die einfach alles kopieren, was sich auf der Diskette befindet, seien das »Errors«, »Halb-« oder »verschmierte Spuren«, »Lücken« und »Synchronmarkierungen«. Ein wirksamer Kopierschutz ist also kaum noch realisierbar. Eines kann man aber nach wie vor: Die Programme wenigstens so sicher machen, daß keiner einen Blick hinter die Kulissen werfen, oder gar Teile in eigene Programme übernehmen kann. Meistens ist dann von »Autostart« und »Listschutz« die Rede. Ein Kapitel, mit dem man sich noch relativ wenig beschäftigt hat, sind die Directories der Disketten. Gerade diese lassen sich mit relativ wenig Aufwand so geschickt »vermurksen«, daß ein nicht Eingeweihter beim Versuch an das Programm heranzukommen, dasteht, wie der Ochs vorm Berg.

Alle hier vorgestellten Methoden haben allerdings einen Nachteil: Sie schützen nicht vor Kopierversuchen mit Programmen, die ganze Disketten blockweise kopieren (FCopy, Quickcopy und ähnliche). Sie verhindern aber den Einblick in die abgespeicherten Programme, unter denen sich dann natürlich ein Schutzprogramm befinden kann. Alles, was Sie im folgenden benötigen, ist ein Diskettenmonitor, beispielsweise den SMON, sowie Grundkenntnisse über die Blockorganisation auf Diskette.

## Der Trick mit dem Gänsefüßchen

Ein absoluter Verblüffungseffekt läßt sich mit minimalem Aufwand erreichen, man benötigt noch nicht einmal einen Diskmonitor. Werfen Sie doch mal einen genauen Blick auf das Directory in Bild 1. Und nun überlegen Sie sich mal, wie Sie das zweite Programm laden können, das von der Blocklänge her das Hauptprogramm sein müßte. Das Problem scheint unlösbar, lädt doch LOAD ”\*”,8 immer das erste Programm. Welchen Filenamen hat denn das zweite Programm überhaupt? Nun, des Rätsels Lösung lautet: Das Filename lautet» ” «. Dies ist kein Druckfehler, sondern tatsächlich ein einzelnes Gänsefüßchen. Nun, selbst mit dieser Information scheinen wir aber immer noch nicht weiter zu kommen: LOAD	,8 erzeugt eine Fehlermeldung. Falls Sie selbst drauf kommen wollen: Denken Sie an den ASCII-Code. Und für alle anderen, die es nicht selber ausknobeln wollen: Der entsprechende LOAD-Befehl lautet: LOAD CHR$(34),8

Das Gänsefüßchen hat den ASCII-Code 34. Der einzige Weg, dies als Filenamen an die Floppy zu senden, ist die CHR$-Funktion. Das Ganze funktioniert analog dazu beim SAVE- und VERIFY-Befehl.

Und das ist noch nicht alles: Probieren Sie mal doch spaßeshalber folgenden SAVE-Befehl aus: SAVE "64"CHR$(34)"ER",8. Nachteil dieser Schreibweise: Das Programm läßt sich vom Unkundigen auch mit LOAD"64\*",8 laden. Wichtig zu wissen ist nur folgendes: Tauchen im Filenamen ein oder mehrere Gänsefüßchen auf, so folgt kein abschließendes Gänsefüßchen. Der ganze Dreh beruht auf einigen Macken in der Directory-Sende-Routine des Floppy-DOS.

Noch eines ist interessant: Hinter dem Anführungszeichen im Filenamen werden die folgenden Steuercodes (Farbwechsel, Cursorbewegungen und ähnliches), sofern deren ASCII-Codes unter 128 liegen, nicht in Grafikzeichen übersetzt, sondern ausgeführt. Farbige Directories? Warum nicht!

## Schräge Typen

Hiermit sind nicht die dunklen Gestalten aus Gangsterfilmen gemeint, sondern die vermurkste Anzeige des Filetyps im Directory. Schauen Sie noch einmal auf das Beispieldirectory in Bild 1. Glauben Sie mir, daß der dritte Eintrag kein sequentielles File, sondern ein Programm ist? Schön und gut, werden Sie sagen, aber wie lad ich's? Auch hier darf über die Einfachheit gestaunt werden: Es genügt ein einfaches LOAD"6510,S,R",8 und schon wird ganz brav das doch eigentlich sequentielle File in den Computerspeicher befördert. Natürlich muß hier vorher mit SAVE"6510,S,W" gearbeitet worden sein. Leider kann man auch echte sequentielle Files so laden, was dann und wann zu einem sauberen Systemabsturz führen kann. Damit die Vielfalt gewährt bleibt, funktioniert der Trick auch mit USR-Files, dann muß allerdings auch im LOAD-Befehl ein »U« anstelle eines »S« stehen.

Probleme gibt es allerdings bei relativen Files. Hier weigert sich die Floppy beharrlich, selbige als Programm an den Computer zu senden.

So, nun wird es etwas komplizierter. Als nächstes wollen wir einzelne Files kurzzeitig »wiederbeleben«. Dazu brauchen wir aber die Block-Lese- und Schreib-Befehle.

Im folgenden benötigen wir eine leere Diskette. Dann speichern wir das zu sichernde Programm ab und danach ein Ladeprogramm, über das gleich noch zu reden sein wird. Wichtig ist, daß diese Reihenfolge streng eingehalten wird. Und nun benutzen wir den Scratch-Befehl der Floppy, um das erste File, also das Hauptprogramm, wieder zu löschen. Warnung! Ab sofort dürfen keine Schreibzugriffe mehr auf diese Diskette ausgeführt werden. Im Directory ist jetzt also nur das zweite File, der Lader, verzeichnet? Weit gefehlt: Das erste File steht jetzt immer noch auf der Diskette und im Diskettendirectory, allerdings mit dem Filetyp \*DEL. Der Stern vor dem DEL ist ebenfalls kein Druckfehler, sondern bedeutet in der Directory-Sprache, daß ein nicht ordnungsgemäß geschlossenes File vorliegt. Solche Sternchen findet man meist bei sequentiellen Dateien, wenn man einen Fehler gemacht hat, oder bei Programm-Files, wenn diese nicht mehr auf die Diskette paßten. Und da sich unsere Floppy intelligent schimpft, unterschlägt sie die \*DEL-Einträge beim Laden von Directories in den Computerspeicher, um uns nicht mit nicht mehr vorhandenen Files nerven zu müssen. Natürlich ist das File auch noch auf der Diskette vorhanden. Um es wieder zu regenerieren, muß das Filetyp-Byte des Eintrages auf den Wert 130 ($82) gesetzt werden. Beim ersten Eintrag ist das Filetyp-Byte das Byte Nummer 2 (also das dritte! Zählungen beginnen bei Computern grundsätzlich bei Null) im Block Track 18, Sektor 1. Im Lader sollte nun in etwa folgende Befehlssequenz stehen:
OPEN 3,4,3,"#”
OPEN 15,8,15
PRINT#15,"U1:3 0 18 1”
PRINT#15,"B-P:3 2”
PRINT#3,CHR$(130)
PRINT#15,"U2:3 0 18 1”
PRINT#15,"I"
CLOSE 15,3
LOAD":\*",8

Der letzte LOAD-Befehl lädt nun nicht, wie man bei einem Blick auf das Directory vermuten würde, das Ladeprogramm, sondern das Hauptprogramm, das wir jetzt regeneriert haben. Wichtig ist, daß die Diskette vor dem Laden des Hauptprogramms initialisiert wird. Die Floppy merkt sich nämlich immer einige Teile des Directories, und liest diese gar nicht erst von der Diskette, wenn ein Directory vom Computer abgerufen wird. Die Folge wäre, daß wir immer noch nicht mit dem alten Directory arbeiten, obwohl schon das neue auf der Diskette steht. Beim Initialisieren werden dann allerdings die internen Zwischenspeicher der Laufwerks aktualisiert.

Die ersten Befehle im Hauptprogramm sollten das Hauptprogramm auf der Diskette wieder »löschen«, indem die obere Sequenz verwendet wird, aber anstelle des CHR$(130) ein CHR$(0). Dies ist die Kennzeichnung für ein \*DEL-File. Das geht schneller und ist weniger auffällig als ein Scratch-Befehl.

Dieses Prinzip läßt sich fast beliebig ausweiten und stark verbessern, so zum Beispiel wenn man die Filenamen verändert oder die Angabe der Anzahl der Blöcke, die ein Programm belegt. Wer hier ansetzen will, der sollte sich ruhig noch einmal die Folgen Eins und Zwei unseres Floppykurses ansehen (64’er, Ausgabe 10und 11/84), dortsindalle wichtigen Informationen über den Directoryaufbau enthalten.

Ein Nachtragzu Bild 1: Falls Sie die komische FREE-Meldung irritiert haben sollte: Sie läßt sich durch Freigeben aller Blöcke in der BAM mittels Diskmonitor erreichen.

## Ein Directory verschwindet...

Eine gute, alte Lebensweisheit lautet: »Wenn du nicht überzeugen kannst, verwirre!« Ähnliches haben wirjetzt vor, denn jeder, der sich von den bisherigen Tricks nicht überzeugen ließ, den versuchen wir jetzt durch ein nicht vorhandenes Directory in tiefste Zweifel an der eigenen Intelligenz (und der der Floppy) zu stürzen.

Es gibt zwei verschiedene Methoden, Directories gegen Einblick zu sichern. Die bekanntere folgt zuerst: Wer sich ein wenig mit der internen Struktur des C 64 auskennt, der weiß, daß der LIST-Befehl nur so lange arbeitet, bis er auf die Bytefolge 0,0,0 also dreimal Null, stößt. Dann wird das LISTen eines Programms sofort abgebrochen. Nun, was ist ein Directory, sofern es im Computerspeicher steht, aber anderes als ein nicht lauffähiges aber LISTbares Programm? Bringen wir irgendwo die drei Nuller unter, haben wir schon fast gewonnen. Wo man die drei Nuller versteckt, hängt ganz vom Benutzer ab: Ganz zu Anfang im Diskettennamen oder erst später in irgendeinem Filenamen, so daß man zumindest noch die ersten Filenamen lesen kann.

Dieser Trick in Verbindung mit anderen (Cursorbewegungen, Reversumschaltungen), sorgt schon für einigermaßen große Verblüffungseffekte.

Nachteil dieser Methode: Sie ist schon sehr bekannt, und außerdem steht das Directory im RAM des Computers und kann entweder mit einem Monitor oder aber mit einigen Tricks wieder LISTbar gemacht werden.

Noch gemeiner und sicherer, aber einfacher, kann man folgendermaßen vorgehen: Nehmen wir an, auf der Diskette befinden sich maximal acht Programme. Damit ist nur der Directoryblock 18,1 belegt. Die ersten beiden Bytes dieses Blocks enthalten die Werte 0 und 255, um 18,1 gleichzeitig als letzten Directoryblock zu kennzeichnen. Ändern Sie diese Werte mit einem Diskmonitor auf zwei völlig verrückte Werte, so zum Beispiel 64,85. Sollten Sie nun ein Directory laden wollen, beschwert sich die Floppy mit »ILLEGAL TRACK OR SECTOR«. Der Hammer bei der Geschichte ist aber: Es wird kein Filename an den Computer gesandt, beim Auflisten des Directories sieht man nur den Diskettennamen und die ID. Hier helfen dann auch keine Tricks und kein Monitor mehr: Das Directory, oder zumindest die vernünftigen ersten Einträge kommen nie beim Computer an.

Trotzdem funktionieren LOAD-Befehle immer noch einwandfrei, die floppyinternen Funktionen des Directory sind also nicht außer Kraft gesetzt. Einziger Nachteil der Methode ist, daß man sich auf acht Fileeinträge beschränken muß. Natürlich lassen sich alle bisher vorgestellten Methoden beliebig miteinander kombinieren, auch wenn das im Augenblick sinnlos erscheint. Wieso sollte man schon die Filetyp-Einträge manipulieren, wenn man doch niemals ein Directory sieht? Aber gerade die Kombination macht es dem Neugierigen besonders schwer, hinter die Geheimnisse des Directories zu kommen.

## Die beste Methode »Compiler Schutz«

Zum Schluß noch einige allgemeine Tips: Schutzprogramme, die in Basic geschrieben wurden, sollten Sie unbedingt compilieren. Jeder Compiler erstellt einen derartigen »Wurschtel«-Code, der fast unlesbar ist, so daß da selbst die ausgebufftesten Knack-Profis resignieren müssen. Wichtig ist aber, daß Befehle, die an die Floppy gesandt werden, im Programmtext verschlüsselt stehen sollten. Zum Beispiel, in dem sie mit dem CHR$-Befehl arbeiten und die einzusetzenden Zahlenwerte über einen Entschlüsselungsalgorithmus errechnet werden. Dann kann man dem Compilat noch nicht einmal über einen Monitor entnehmen, welche Befehle zur Floppy gesandt werden. Soweit zu den Manipulationen an der Directory. Der Einblick in unsere Disketten ist nun verwehrt. Verwenden Sie dann auch noch einen Compiler, bleibt auch das Programm ein Buch mit sieben Siegeln. Nun sollten Sie auch noch Autostart-Programme verwenden. Wie man ein Autostart-File erzeugt, das mit verblüffenden Eigenschaften ausgestattet ist, werde ich in einer der nächsten Ausgaben zeigen.

(Boris Schneider/rg)

# New York City — The Big Apple & Air Support \[145]

Lange hat es ja gedauert, aber jetzt ist es da, oder besser gesagt, sind sie da, zwei neue Spiele der amerikanischen Softwarefirma Synapse. Beide Spiele bekommt man auf einer Diskette. Wie man es von Synapse gewohnt ist, zeichnen sich beide Spiele durch interessante Grafik und außergewöhnliche Spielideen aus. In »New York City — The Big Apple« wird der Spieler in die Lage eines Touristen versetzt, der es sich zur Aufgabe gemacht hat, möglichst alle Sehenswürdigkeiten der Großstadt zu besichtigen. Allerdings ist das für den armen Mann schwerer, als er sich das vorgestellt hat. Als Autofahrer muß er darauf achten, nicht in einen der vielen Verkehrsunfälle (fast jede Sekunde ein Unfall; die New Yorker sind rücksichtslose Autofahrer) verwickelt zu werden, als Fußgänger droht ihm der Tod durch Überfahren oder ein längerer, kostspieliger Krankenhaus-Aufenthalt. Nachdem er sein Auto sicher geparkt hat, beginnt ein Wettlauf mit der Zeit, da das Auto nach Ablauf der Parkuhr offiziell abgeschleppt wird. In diesem Fall steht ihm ein längerer Fußmarsch zur Sammelgarage bevor, wo er sein Auto gegen Entgelt wiederbekommt. Der Computer zeigt während des Spiels den Stadtplan von New York, und scrollt je nach Bewegung des Spielers in eine der vier Richtungen. Wird ein Gebäude besucht, wie zum Beispiel das Empire State Building, das World Trade Center oder der Zoo, so wird auf eine andere Spielszene umgeschaltet, in der der Tourist mit verschiedenen Gefahren zu kämpfen hat. So muß er kurzerhand im Post Office Briefe abstempeln und sortieren, im Zoo ausgebrochene Tiere einfangen, hat beim Geldabheben auf der Bank mit Bankräubern kämpfen oder läuft Gefahr, in der U-Bahn-Station erschossen zu werden. Insgesamt müssen zwölf Sehenswürdigkeiten besichtigt werden, bevor die aufregende Reise beendet ist.

## Air Support — Taktik und Strategie mit faszinierender Animation

Air Support, ein Taktik- und Strategiespiel, das auf der Rückseite der Diskette aufgezeichnet ist, weist eine faszinierende Animation auf. Es ist wirklich zu bewundern, wie Hunderte von Objekten fast stufenlos über den Bildschirm bewegt werden. Ziel des Spiels ist, mit einer Armee von Robotern gegnerische Roboter zu vernichten. Der Spieler steuert einen Helikopter über eine Landschaft aus Bäumen, Felsen und Wiesen, die je nach Bewegung nach oben oder unten gescrollt wird. Je nach Schwierigkeitsgrad wird er von feindlichen Geschützen beschossen und kann selber Bomben abwerfen. Es besteht die Möglichkeit, eigene Roboter aufzunehmen und mit dem Helikopter im Feindgebiet abzusetzen. Mit Hilfe von Sammelkommandos können ganze Armeen von über 100 Robotern über das Spielfeld gelenkt und zu Sperrlinien und Schlachtordnungen aufgestellt werden. Besonders, wenn man hohe Feindroboterzahlen wählt, wird der kleinste taktische Fehler zum Verhängnis. Air Support ist eine der interessantesten und abwechslungsreichsten Strategiespiele und erreicht auf alle Fälle die Qualität anderer Taktikspiele, wie zum Beispiel Combat Leader oder Operation Whirlwind.

Alles in allem hat Synapse es mal wieder geschafft, zwei hervorragende Spiele zu veröffentlichen. Der Preis von zirka 80 Mark für beide Programme ist daher durchaus akzeptabel.

(H. J. Deeg/rg)

Info: Ariolasoft, Steinhauser Str. 3, 8000 München 80, Preis: etwa 80 Mark

# Des Rätsels Lösung \[145-146]

> Das Abenteuerspiel Amazon, erst in unserer vorletzten Ausgabe vorgestellt, ist schon gelöst.

Trotz der Lösung dieses Adventures wird Ihnen der Spaß nicht verdorben werden. Denn Amazon besitzt drei Schwierigkeitsgrade, von denen die letzten zwei noch zu meistern sind. Die Lösung zur Anfängerstufe stellen wir Ihnen hier vor.

Sie sollten aber nicht einfach abtippen. Das würde Ihnen den Spaß verderben. Benutzen Sie unsere Schritt-für-Schritt-Lösung am besten als Spickzettel, den Sie nur zwischendurch mal ansehen — aber auch nur dann, wenn Sie mal eine harte Nuß überhaupt nicht knacken können.

Und bevor Sie das tun, sollten Sie die Lösung lieber mit Papier abdecken und die folgenden kurzen Tips beachten:

Obwohl Paco ein sehr guter Helfer ist, sagt er nicht immer die Wahrheit.

Die »Goggles«, also die Brille, ist übrigens eine Infrarot-Brille. Sie ist gut bei Dunkelheit, besonders wenn man ganz bestimmte Leute nicht wecken will...

An der Brücke genügt es, Paco durch den Anblick des Gewehres zu überzeugen.

Vör dem Abflug nach Südamerika unbedingt den Spielstand abspeichern; Sie könnten die später so dringend benötigten Zigaretten womöglich schon am Flughafen loswerden.

Bei der Statue sollten Sie die Nordwand untersuchen. Und, was noch sehr wichtig ist: Die Bilder sind so aufgebaut, daß man immer nach Norden sieht.

(M. Kohlen/rg)

WAIT, dann mit Joystick Sender einstellen, GO TO THE OFFICE, dann Name eingeben, gestellte Frage beantworten. Dann NOVICE eingeben. GO TO THE AIRPORT, OPEN LETTER, GO TO GATE 9, bei Taxifahrer: GO TO THE INSTITUTE, auf Frage (Hotel) mit NO antworten, ENTER INSTITUTE, ’ SHOW LETTER, ENTER INSTITUTE. Geben Sie Ihren Namen ein und beantworten Sie die Frage mit YES, GO TO THE OFFICE, ENTER OFFICE, REMOVE DRAPE, Name eingeben, OPEN CAGE, OPEN REFRIGERATOR, GET MEDICINE, GET FRUIT, OFFER FRUIT, vier Fragen mit Yes oder Okay beantworten, PACO, OPEN CUPBOARD, INSPECT CUPBOARD, GET FOOD, INSPECT GLIMMER, GET GUN, INSPECT GUN, EXIT OFFICE, BRIBE DIRECTOR, dreimal NO sagen, bis er 5000 Dollar annimmt, GO TO THE AIRPORT, BUY TWO TICKETS, GO TO THE BOOTH, (Frage) YES, GET PACK, INVENTORY, Untersuchen Sie jetzt alles, um die Funktionen zu erfahren. Jetzt SAVE.

ENTER PLANE. Wenn jetzt jemand kommt, der Zigaretten haben will, dann LOAD. Weiter mit: SIT UR WEST, WEST, ACTIVATE COMPUTER (Code = 969), WEST, NORTH, NORTH, NORTH, WEST, SMILE, OFFER CIGARETTES, auf Frage (Food essen) mit YES antworten. NORTH, NORTH, N, N, WAIT, WAIT, auf die Frage irgend etwas antworten, nächste Frage mit YES beantworten, LOOK IN PACK, PACO, GET PACK, WEST, WEAR GOGGLES, N, REMOVE GOGGLES, ACTIVATE COMPUTER (diesmal den emergency code benutzen = 072), dem Computer die Richtung angeben, bis man die genannte Position erreicht (mit Hilfe der mitgelieferten Landkarte), NORTH, N, WEAR PARKA, N, N, ACTIVATE COMPUTER (wieder so wie oben verfahren), N, N, ENTERTUBE, OFFERFOOD, ACTIVATE COMPUTER (mit 969), SLEEP, N, N, N, N, E, E, E, E, GET PARACHUTE, OPEN CARTON, GET OAR, N, WEAR GOGGLES, FREEZE, W W REPAIR BOAT, USE PARACHUTE, SHOOT PACO, ENTER BOAT, CROSS RIVER, HIT ALLIGATORS WITH OAR, WAIT, ACTIVATE COMPUTER(mit 969), INVENTORY, ACTIVATE COMPUTER (969 etc., dann wieder Richtung eingeben, bis angegebene Stelle erreicht ist, dort im Actionspiel den Affen einfangen), E, E, S, S, S, W ACTIVATE COMPUTER (969), SOUTH, ACTIVATE LASER AND WEAR GOGGLES Qetzt im Actionspiel die Huni-Warriors abschießen), SLEEP, N, GO IN, N, N, E, N, N, PUSH WALL, PULL LEVER, DOWN, W, UR W, N, GET KEY, S, E, N, OPEN LOCK WITH KEY, GET PAPER, READ PAPER, ACTIVATE COMPUTER (969), W, OPEN 132. Jetzt dürfen Sie sich erstmal am Schatz und der Musik erfreuen, dann... alles bebt und: SOUTH, SOUTH, S, S, UP, WEST, ENTER THE HELICOPTER.
THE END

(M. Kohlen/rg)

# Interview \[146]

> Was sagt ein »Game Designer« über die Zukunft des Softwaremarktes?

David Crane, einer der Gründer von Activision und Autor von Softwarehits wie Pitfall, Decathlon und Ghostbusters stand uns Rede und Antwort. »Activision wird auch in der nahen Zukunft keine Anwendersoftware herausbringen; nur Unterhaltungssoftware. Wobei der Begriff Unterhaltungssoftware aber weiter ausgelegt werden muß, denn Unterhaltung besteht nicht nur aus Spielen. Activision wird in Zukunft auch neue Formen der Entertainment-Software bringen. Die ersten Schritte dazu machten wir schon mit Designer's Pencil und Music Studio.«

Die Zukunft der Computer innerhalb unserer Gesellschaft sieht Crane positiv: »Eine Welt ohne einen Computer in jedem Haushalt kann ich mir nicht vorstellen. Es wird zwar lange Dauern, aber die Entwicklung kann man mit dem Einzug des Fernsehers in das Wohnzimmer vergleichen. Der Hauptzweck des Computers ist eben die Unterhaltung; wäre dies nicht der Fall, würde ich die Entwicklung nicht so optimistisch beurteilen.« Wir befragten David Crane auch gleich über die Zukunftspläne von Activision im Zusammenhang mit den neuen Computern von Commodore und Atari. Cranes Antwort: »Wir werden für jeden Computer Software herstellen, der sich gut verkauft.« Unsere nächste Frage betraf speziell den PC 128. »Activision wird keine Spiele machen, die nur auf einzelnen Computertypen laufen. Spiele, die viel RAM benötigen, werden wir eher in mehrere Teile trennen (von Diskette nachladbar), damit jeder unsere Software genießen kann — auch Besitzer von kleineren Computern.« Und wie programmiert David Crane seine Spiele?

»Spiele entwickeln ist dem Drehen eines Filmes sehr ähnlich. Als erstes wird das Drehbuch geschrieben. Bei uns geschieht dies, indem der Game-Designer erst selbst Spiele spielt und mit ihnen herumprobiert. So lange, bis das Konzept (Drehbuch) fertig ist. Der Entwickler eines Spieles ist Drehbuchautor und Regisseur. Ein bißchen Kamera-Arbeit macht er auch. Die »Special Effects« wie Grafik oder Sound werden von Spezialisten gemacht.

Für ein Spiel benötigen wir in der Regel acht Monate bis ein Jahr. Dazu setzen sich Gruppen von etwa vier bis zwölf Programmierern zusammen, die gemeinsam ein Spiel erarbeiten, das von einem einzelnen Designer erdacht wurde.

Der Erfolg meiner Spiele liegt darin, daß ich immer voraussehen muß, was die Leute in einem Jahr wollen. Mittlerweile programmiere ich meine Spiele immer auf dem C 64, der zur Zeit mein Lieblingscomputer ist. Die Umsetzung auf andere Systeme wird dann von anderen Programmierern gemacht. Ghostbusters war übrigens mein C 64-Erstlingswerk.«

Wie bewertet David Crane den Einfluß des Deutschen Software-Marktes auf die USA? Viele Softwarehäuser in den USA scheinen den europäischen Markt gar nicht zu beachten. Oft müssen europäische Händler monatelang auf die Software aus den Vereinigten Staaten warten. Existiert der europäische Software-Markt für Amerika überhaupt? Wir bekamen auf diese Frage zwei Antworten von Crane. »Zum einen ist Europa ein sehr guter Stabilisierungsfaktor für uns. Läuft das Geschäft in den USA nicht, so läuft es in Europa. Die Konjunkturzyklen sind genau entgegengesetzt. Das andere ist etwas, was die Europäer noch gar nicht bemerkt haben. Amerikanische Marketing- und Vertriebsexperten behaupten, Europa sei dem US-Software-Markt um zwei Jahre voraus. In den USA wurde durch den Boom der Telespielbranche der Beginn des Heimcomputer-Zeitalters zurückgedrängt; in Europa wuchsen beide Sektoren zugleich. Sie waren gleichzeitig existierende Marktsegmente. Im Endeffekt hatte der europäische Software-Markt mehr Zeit zur Entwicklung als der amerikanische. Deshalb gibt es in den USA viele Fachleute, die sich das europäische Konsumentenverhalten ansehen, um die Entwicklung im eigenen Land besser voraussagen zu können.«

Europa, ein Testmarkt für das amerikanische Käuferverhalten der Zukunft? Nicht leicht vorstellbar, aber Insider wie David Crane scheinen davon überzeugt zu sein.

(M. Kohlen/rg)

# Semmelservice mit dem C 64 \[147,152]

> Wie zu Omas Zeiten wird Ihnen in München das Frühstück vor die Haustür gebracht. Bei Sonnenschein und Reqen. Der Unterschied zu früher: Anstelle eines Fahrrads ein Lieferwagen und ein C 64 für die Buchführung und Streckenplanung.

So ein Pech! Da hat man gerade eine Wette mit seiner Freundin verloren: Eine ganze Woche Frühstück ans Bett. Und das bei der Saukälte am Novembermorgen! Da fällt einem brühwarm der Handzettel ein, der vorgestern im Briefkasten lag. Jemand bot doch da einen Semmel- und Frühstücksdienst an? Der Blick in den Müll findet das gelbe Blättchen: Wie zu Omas Zeiten kann man sich Semmeln, Brezen, Milch, Butter und Eier morgens bis halb acht vor die Haustür bringen lassen. Die Laune steigt um hundert Prozent. Der Service rettet Ihre Morgenstunden.

Eines Tages hatte es der Medizinstudent Helmut Radspieler satt, »immer mit dem letzten Zwanziger in der Tasche« herumzulaufen. Da fiel ihm seine Jugend ein. Damals hatte er mit seinem Freund in einem amerikanischen Film (wo denn sonst?) gesehen, wie ein Botenjunge außer der Zeitung noch eine Tüte mit Brot und Butter an die Tür einer Vorstadtvilla schleuderte. Die damaligen Schüler versuchten die Idee in ihrer Wohngegend zu kopieren. Es funktionierte. Nur das Durchhaltevermögen der Jungs ließ nach, und nach dem Abi gaben sie endgültig auf. Bis vor zwei Jahren Helmut Radspieler das Geschäft wieder ankurbelte. Diesmal aber besser organisiert. »Professioneller« und mit Computerunterstützung. Als Computer benutzt er einen C 64 mit Diskettenstation und Drucker.

## Freunde leisteten Hilfestellung

Ein Freund, Informatik-Student, hat Helmut dazu ein menügesteuertes Programm geschrieben, das drei Dateien verwaltet: eine Kundendatei, eine Bäckerliste und eine Tourenliste. Bäcker- und Tourenliste ergeben sich dabei jeweils auf Befehl aus der Kundendatei. Die Tourenliste wird nach den verschiedenen Gebieten aufgebaut, die vom Frühstückservice beliefert werden. Dort stehen in optimierter Reihenfolge die anzusteuernden Adressen. Dazu kommt bei jedem Kunden die Uhrzeit, zu der er spätestens seine Brötchen haben will. Ist der Fahrer mal in Verzug, muß er auch mal einen kleinen Umweg fahren, um einem Früh-aus-dem-Haus-Geher zu versorgen. Die Kundendatei enthält außer Namen und Adresse auch die Standard-Mengen, die ein Kunde pro Tag haben möchte. Will jemand nur am nächsten Dienstag drei Brötchen mehr, kann das genauso vermerkt werden, wie die Änderung »jeden Dienstag drei Brezen«. Per Telefon und Anrufbeantworter werden die vom Normalfall abweichenden Werte vom Kunden an Helmuts Frühstücksdienst und von diesem an den Bäcker und die Molkerei gemeldet.

## Ein typischer Arbeitstag:

»Um halb fünf morgens rasselt der Wecker, denn ich will mit Helmut auf Tour. In einer halben Stunde müssen wir in der Molkerei Schwabing die Milch abholen. Der weißbekittelte Helfer übergibt uns einen Korb mit 28 ganzen und 19 halben Litern Milch. Dazu elf Joghurt und 20 Halbpfünder Butter. Danach geht’s zum Bäcker. Da liegen 687 Semmeln und Brezen, 15 Croissants und zwei Vollkornbrote für uns bereit. Wir laden das Zeug in einen japanischen Mini-Transporter ein. Damit grast »Helmuts Frühstücksservice« die Münchner Gegend zwischen Olympiazentrum und Schwabing ab. Ein angestellter zweiter Fahrer kutschiert die Ware durch Reihenhausgebiete im Münchner Westen. Den 150, meist festen Kunden kommt der Service nicht allzu teuer: Drei Mark die Woche, wenn jeden Tag geliefert wird und zwei, wenn’s weniger als drei Tage sind. Auch die Preise für Semmeln, Croissants, Milch und Brezen sind kaum teurer als beim Bäcker oder dem Supermarkt an der Ecke. Die Masse macht's. Nachdem der zweite Fahrer bezahlt ist, bleibt ein hervorragender »Nebenverdienst«. Fast 3 000 Mark im Monat bei dreieinhalb Stunden Arbeit am Tag, inklusive Buchführung.

Die Buchführung wird genauso wie das Schreiben von Rechnungen auch vom C 64 übernommen. Säumige Zahler werden gemahnt und Kunden-individuelle Fakturen geschrieben. Das Programm holt sich selbständig aus der Kundendatei die wöchentliche Bestellmenge und die Sonderlieferungen und Abbestellungen einzelner Tage. Die Preise pro Einheit werden getrennt gehalten, wie in jedem flexiblen System. Selbstverständlich werden Feiertage, an denen keine Semmeln ausgefahren werden, automatisch berücksichtigt. Das Kontrollieren der Rechnungen, die Helmut selber zahlen muß, also Molkerei und Bäcker, übernimmt ebenfalls der Computer. Man kann einen beliebigen Zeitraum eingeben, für den eine Rechnung erstellt oder überprüft werden soll. Mit dem Bäcker ergeben sich ab und zu Differenzen von vier oder fünf Brötchen, aber die regelt man problemlos. Der Bäcker kalkuliert und fakturiert ja auch per Computer.

Bei der morgendlichen Tour sehen wir keinen unserer Kunden. Die meisten von ihnen kennt auch Helmut nur per Telefon und Brief. Die Türen der Häuser, an denen er das Frühstück abliefert, sind um sechs Uhr früh geschlossen. Illustre Namen sind dabei: Freiherr von X, GrafY und sogar Prinz Z. Dazu beliefern wir Münchens Villengegend. Da erstaunt es nicht, daß auch ein gewisser Herr Flick sich beliefern ließ. Junge Polizisten nehmen dankbar die Abwechslung in ihrer Dienstroutine zur Kenntnis.

Wir stellen die Papiertüten unter den Sims. Falls es regnen sollte, stopfen wir sie in bereitliegende Plastiktüten und schon hat uns die Straße wieder. Um halb acht sind wir fertig, das letzte Kipferl wartet auf den, der es verschlingen wird.

Der Frühsport — fahren, aussteigen, Äutotür auf, Sachen raustragen, Tür zu, einsteigen, weiterfahren — steckt einem noch eine Zeitlang in den Knochen.

Leider kam an diesem Morgen keine Begegnung der Art zustande, wie sie mir Helmut schilderte: An einer Ampel bat ihn einmal eine junge Studentin um ein Brötchen. Er gab es ihr. Anschließend fuhr sie mit und half ihm bei der Arbeit. Als er schließlich das Angebot machte, ihr seinen C 64 zu zeigen, folgte sie ihm gerne zum Kaffeetrinken in seine Wohnung.

(Tomas F. Lansky/hm)

# Formatierte Eingabe \[148]

> Für professionelle Programme wird oft eine INPUT-Routine benötigt, die nur bestimmte Zeichen zuläßt. Mit diesem Maschinenprogramm können Sie sehr einfach Eingabemasken realisieren.

Haben Sie schon mal wirklich professionelle Programme geschrieben? Dann hat Ihnen mit Sicherheit die INPUT-Routine des C 64-Betriebssystems zu schaffen gemacht, die sämtliche Zeichen zuläßt. Auch solche, die zu völligem Unsinn oder Fehlermeldungen führen. Dieser Mißstand wird in Basic-Programmen meist mit einer GET-Schleife umgangen. Bei dieser Methode wird ständig ein Zeichen von der Tastatur geholt, auf Zulässigkeit überprüft und auf den Bildschirm gedruckt. Die einzelnen Zeichen werden in einem String addiert. Wenn sie mit INS oder DEL im Eingabefeld Korrekturen ausführen wollen, können Sie sich vorstellen, wie kompliziert und zeitraubend eine solche Routine werden kann.

Eine schnelle Lösung dieses Problems schafft dieses Maschinenprogramm, das einen neuen Input-Befehl generiert. Die Syntax des Befehls lautet:

INPUT>Eingabelänge, Spalte, Zeile, Variable

Wie Sie schon an der Syntax sehen, ein recht komfortabler INPUT-Befehl. Mit der Eingabelänge geben Sie an, wie lang das Eingabefeld höchstens sein darf. Durch Angabe von Zeile und Spalte können Sie das Eingabefeld direkt an jeder beliebigen Bildschirmstelle positionieren. Als Variable müssen Sie eine Stringvariable einsetzen, zum Beispiel A$. Sollen ausschließlich Zahlen eingegeben werden, braucht der String nur noch auf Buchstaben hin überprüft werden. Beispielsweise mit folgender Routine:
10 INPUT>4,1,1,A$
20 IF STR$(VAL(A$))=” ”+A$ THEN PRINT ”ES IST EINE ZAHL":END
30 PRINT "KEINE ZAHL":GOTO 10

### Tips zur Eingabe

Das Programm müssen Sie mit dem MSE eingeben und abspeichern. Laden Sie dann die Input-Routine mit LOAD »name«,8,1 oder LOAD ”name”,1,1 und geben Sie NEW und SYS 49152 zur Initialisierung ein. Danach können Sie Ihre Basic-Programme eintippen und mit dem neuen INPUT>-Befehl verwenden. Die Routine können Sie natürlich auch mit dem Basic-Programm nachladen und mit dem neuen INPUT>-Befehl verwenden.

## Zusammenfassung

* Die Routine wird mit SYS49152 initialisiert
* Das Programm benötigt den Speicherbereich von Adresse 49152 bis 49617
* Die Syntax lautet: INPUT>Eingabelänge, Zeile, Spalte, Stringvariable
* Die CLR-, HOME-, RUN-, STOP- und SHIFT-Taste ist bei der Eingabe gesperrt.
* Das Eingabefeld kann mit den Cursortasten nicht verlassen werden.
* INST/DEL wirkt nur innerhalb des Eingabefeldes
* Leerzeichen am Ende der Eingabe werden nicht mit übernommen.
* Benötigen Sie die Leerzeichen am Schluß geben Sie einfach POKE 49298,131 ein. POKE 49298,94 schaltet wieder in den Normalzustand.

Ein Nachteil soll nicht verschwiegen werden:

Fragetext kann nicht, wie beim serienmäßigen INPUT-Befehl, ausgegeben werden. Der Text muß mit PRINT gedruckt werden.

(Thomas Graf/hm)

# Wir suchen die Anwendung des Monats \[151]

Anwendung des Monats, was ist das? Nun, Sie haben einen Commodore 64 oder einen VC 20 und versuchen diesen irgendwie sinnvoll einzusetzen. Unter einer sinnvollen Anwendung versteht die 64’er Redaktion alles, was beispielsweise Programme im häuslichen Bereich bewirken. Es kann sich dabei um die Berechnung der Benzinkosten für Ihren Wagen handeln, um ein eigenes Textverarbeitungsprogramm gehen, sich um die Verwaltung Ihrer Tiefkühltruhe drehen oder ein ausgeklügeltes Telefon- und Adreßregister sein.

Setzen Sie Ihren VC 20/C 64 mehr oder weniger beruflich ein? Auch, oder vor allem, das ist eine sinnvolle Anwendung. Sie führen die Lohn- und Gehaltsabrechnung, Ihre Lagerverwaltung, die Bestellungen auf einem Commodore-Heimcom-

puter durch? So spezielle Anwendungen wie die Berechnung der Statik von selbstgezimmerten Regalen, von Klimadiagrammen oder Vokabellernprogrammen für den Schulunterricht oder die Zinsberechnung bei Krediten sind ebenfalls Themen, die mehr als konkurrenzfähig sind.

Uns ist die Anwendung des Monats
**500 Mark**
wert.

Schreiben Sie uns, was Sie mit Ihrem Computer machen:

Redaktion 64’er, Aktion: Anwendung des Monats, Hans-Pinsel-Str. 2, 8013 Haar bei München.

# Einmal im Monat gibt es die SUPERCHANCE das Listing des Monats \[151]

Diese nicht einmalige Gelegenheit sollten Sie nutzen. Wie? Schicken Sie uns Ihr bestes, selbst erstelltes Programm. Bei der Art des Programms sind wir nicht wählerisch.

Sie haben ein sehr gutes (Schieß-, Knobel-, Denk-, Action-, Abenteuer-)Spiel geschrieben: einschicken!

Sie verfügen über ein komfortables Disketten-Kopier-(Sortier) Programm mit einigen außergewöhnlichen Leistungsmerkmalen: einschicken!

Sie haben das Basic um einige sinnvolle Befehle erweitert: einschicken!

Sie arbeiten mit einem selbsterstellten Textverarbeitungsprogramm, einer eigenen Tabellenkalkulation, einem semiprofessionellen Datenverwaltungsprogramm: einschicken!

Sie zeichnen und konstruieren mit einem selbsterstellten Programm in hochauflösender Grafik: einschicken!

Wir freuen uns über jeden Beitrag und honorieren mit bis zu
**2000 Mark**

Aus den besten Listings, die veröffentlicht werden, sucht die 64’er-Redaktion einmal im Monat das »Listing des Monats« aus. Alle Listings, die im 64’er abgedruckt sind, werden mit 100 bis 300 Mark honoriert. Die genaue Vorgehensweise beim Einsenden von Listings ist in dem Beitrag »Wie schicke ich meine Programme ein?« in verschiedenen Ausgaben beschrieben.

Schicken Sie Ihr Listing an: Redaktion 64’er, Superchance: Listing des Monats, Hans-Pinsel-Str. 2, 8013 Haar bei München.

# Mitmachen — mitgewinnen \[152-154]

> Die 64'er will noch besser werden. Dafür müssen wir aber mehr über Sie, den Leser, wissen. Deshalb starten wir einen großen Umfragewettbewerb mit tollen Preisen.

Was ist Ihre Aufgabe, um bei diesem Wettbewerb mitmachen zu können? Zunächst einmal, sollten Sie sich den Artikel über das Floppy-Laufwerk durchlesen, um die ersten sieben Fragen beantworten zu können. Nur wenn diese sieben Fragen richtig beantwortet sind, nehmen Sie an der Verlosung der Preise teil. Sodann bitten wir Sie den »Fragebogen« vollständig auszufüllen. Mit dieser Befragung haben Sie die Möglichkeit an der künftigen Gestaltung der 64’er mitzuwirken.

Der 64’er-Redaktion ist es bisher im Großen und Ganzen gelungen, ein in fast allen Belangen zufriedenstellendes Magazin für den C 64- und VC 20-Anwender zu machen. Doch der Markt ändert sich schnell, besonders auf dem Gebiet der Computerei. Nur wer genau weiß, was die Leser wollen, kann auch eine Zeitschrift machen, die für alle etwas beinhaltet. So haben wir beispielsweise erkennen müssen, daß nach mehr als einem Jahr seit dem die 64’er erscheint, wir uns von der Auswahl der Themen her immer mehr am Profi orientieren. Das hatte bittere Klagen der Anfänger und Fortgeschrittenen zur Folge. Eine andere Gruppe, die sich benachteiligt fühlte, waren die Datasette-Besitzer; ihr Argument: wir brächten zuviel für die Floppy. Auch die Basic-Programmierer fühlen sich benachteiligt, zuviel in Maschinensprache.

Sind das nun die Beschwerden von ein paar Unentwegten, oder steht eine schweigende Mehrheit dahinter? Ist Datenfernübertragung für alle interessant oder nur für Hacker? Begeistern Grafikprogramme oder Tabellenkalkulation mehr? Sollen wir mehr Listings für den technisch/naturwissenschaftlichen Bereich oder für die kaufmännische Anwendung bringen? Wie umfangreich sollen die Aktuellmeldungen sein oder bringen die Kurse mehr. Welche Kurse werden gewünscht? Ist die neue optische Aufmachung (Layout) bei Ihnen angekommen, oder sollen wir wieder mehr auf den »Bravo«-Stil umschwenken? Bevorzugen Sie Hardware- oder Software-Test? Was halten Sie von Bastelanleitungen? Soll der Computer-Markt ausgedehnt werden oder ist er gar zu groß? Welche Themen begeistern so viele, daß ein Sonderheft daraus gemacht werden kann?

Fragen über Fragen. Nur Sie als Leser können diese Fragen beantworten. Aber nur, wenn Sie sich so zahlreich wie nur irgend möglich beteiligen. Sie haben hier die Möglichkeit das Gesicht »Ihrer« 64’er zu gestalten. Es ist klar, daß die Beantwortung der Fragen einige Zeit in Anspruch nimmt, und die 80 Pfennig sind auch kein Pappenstiel, doch wir glauben, es lohnt sich, vor allem für Sie. Je mehr mitmachen, umso sicherer wird die statistische Auswertung, desto besser wird die 64’er in der Zukunft. Und daß die 64’er eine Zukunft hat, daran glauben alle Redakteure und Mitarbeiter von Markt & Technik. Arbeiten Sie mit an Ihrer Zeitschrift.

Zum Thema Datenschutz: Ihre Adresse wird nicht zusammen mit den statistischen Daten, die lediglich für die zukünftige Gestaltung der 64’er von Interesse sind, abgespeichert. Sie dient lediglich dazu, Sie im Falle eines Gewinnes zu benachrichtigen. Schicken Sie den Fragebogen an Markt&Technik Verlag AG, Redaktion 64’er, **Stichwort: Umfrage**, Hans-Pinsel-Str. 2, 8013 Haar bei München.

TODO ASIDE

Folgende Preise sind zu gewinnen:
1. Preis:
Ein PC 10
(IBM-kompatibel, 256 KByte RAM, zwei Diskettenlaufwerke mit je 360 KByte Speicherkapazität, MS/DOS-Betriebssystem, Centronics- und V.24-Schnittstelle und Monitor: Wert 5500 Mark)
2. bis 11. Preis:
je ein Diskettenlaufwerk 1541 für den Commodore 64 oder VC 20
12. bis 50. Preis:
je ein Buchgutschein im Wert von 50 Mark. Einzulösen nur beim Verlag Markt & Technik AG.

TODO UMFRAGE

# »Dokumentationshilfe«: Cross-Referenz-Liste C 64 \[155-159]

> Die Dokumentation von Basic-Programmen ist manchmal eine mühevolle Aufgabe. Trotzdem ist sie sinnvoll oder sogar notwendig. Aus diesem Grund schlugen wir einen Programmierwettbewerb zur Dokumentationshilfe vor, dessen Ergebnis hier vor Ihnen liegt.

TODO ASIDE

## Lebenslauf

Angefangen hat meine Computerbegeisterung mit etwa zehn Jahren. Damals schenkte meine Großmutter mir einige Spiele von Atari. Diese Spiele waren aber nur kurzzeitig von Interesse.

Ich kaufte mir fast alle Computer-Zeitschriften und konnte in den Kaufhäusern nicht an den Computern vorbeigehen, die dort ausgestellt waren.

Als mein Vater sich für seine Handelsvertretung einen Commodore-Computer zulegte, hatte ich Gelegenheit, durch meine Vorkenntnisse, die Gespräche zwischen einer Leasingfirma und meinem Vater zu beeinflussen.

Meine Großmutter unterstützte mein Computerhobby auch finanziell und ich war mit 15 Jahren in der Lage, mir meinen eigenen C 64 mit Floppy zu kaufen. Nach den großen Ferien komme ich in die gymnasiale Oberstufe. Als Abiturfächer werde ich Physik, Mathematik und Englisch wählen, da ich Informatik studieren möchte. Diesen Beruf würde ich gern in der Forschung ausüben.

Zur Zeit überarbeite ich das EDV-Programm der Firma meines Vaters, um es bedienungsfreundlicher zu gestalten und dieses auch für einen Tennisclub von etwa 500 Mitgliedern (Verwaltung, Mitteilungen, Beitragseinzug) zu verwenden.

(Stefan Becker)

---

Jeder Basic-Programmierer kennt das Problem: Man schreibt lange und auch komplizierte Programme und merkt, daß langsam aber sicher der Überblick verloren geht. Oder auch, wenn versucht wird, ein fremdes, nicht selbst erstelltes Programm zu verstehen: Was bedeutet diese Variable, und wo taucht sie im Programm noch auf? Von wo und wie oft wird diese Programmzeile angesprungen?

Bei gut strukturierten Programmen findet man relativ schnell durch, aber die sind selten zu finden. Doch selbst dann ist eine gute Beschreibung eine hilfreiche Sache und erleichtert den späteren Wiedereinstieg.

Eine Crossreferenzliste unterstützt bei der Erstellung einer Dokumentation. Gerade bei kommerziellen Software-Projekten wird nicht auf sie verzichtet. Sie enthält dabei nicht nur eine Aufzählung aller Sprünge (sofern bei höheren Programmiersprachen überhaupt vorhanden), sondern vor allem eine komplette Variablenliste. Und diese Funktionen hat auch unser Programm. Im einzelnen enthält sie:

1.	Liste aller Zeilen, in denen Sprungbefehle enthalten sind. Angegeben wird die Zeilennummer und die angesprungene Zeile.
2.	Liste aller Zeilen, die angesprungen werden. Angegeben sind die Zeilennummer und alle Zeilen, von denen aus diese Zeile angesprungen wird. Eine sehr nützliche Information.
3.	Eine Liste aller im Programm vorkommenden Variablen. Angegeben wird, alphabetisch sortiert, der Variablenname und die Zeilen, in denen sie vorkommt. Zusätzlich hat man die Möglichkeit, zu jeder Variablen einen kurzen Kommentar mit einzugeben.
4.	Liste aller Variablen mit dem vorhin genannten Kommentar, aber ohne Hinweise auf die Zeilen, in denen sie vorkommen.

Mit diesen Informationen kann man schon etwas anfangen. Dochjetzt etwas für Programmierer selbst:

## Wie funktioniert das?

Wie sucht man nach Variablen? Wie nach Sprungbefehlen? Wie so oft, ist die Lösung ganz einfach.

Wie ein Basic-Programm im Speicher steht, wurde ausführlich im 64’er, Ausgabe 2/85, Seite 87, beschrieben. Fast in der gleichen Form wird ein Programm auch auf Diskette gespeichert. Lediglich zwei Byte für die Ladeadresse des Programms kommen dazu. Beim absoluten Laden eines Programms (LOAD”NAME”,8,1) holt sich der Basic-Interpreter diese zwei Byte, um festzustellen, an welcher Stelle im Speicher das Programm beginnt. Beim normalen LOAD-Befehl, also ohne die ”,1” am Ende, wird jedes Programm ab Basic-Anfang gesetzt, also ab $801 ( = dezimal 2049).

An einem kleinen Beispiel soll gezeigt werden, wie man sich alle Zeilen anzeigen lassen kann, die den Befehl GOTO enthalten. Sehen Sie sich dazu das Flußdiagramm (Bild 1) an.

Als erstes muß eine »Programmdatei« geöffnet werden. Das geht zum Beispiel mit OPEN2,8,2,”NAME,P,R”. »P« steht dabei für Programm und »R« für READ, also lesen.

Dann folgt das Lesen der Byte. Dazu nimmt man den GET#-Befehl. Der INPUT #-Befehl ist zwar wesentlich schneller, »schafft« aber nur maximal 88 Zeichen, benötigt ein Carriage Return (CHR$(13)) als Endekennzeichen (bei Programmen sind es Null-Byte) und verträgt keine Kommata (in Basic-Programmen oft vorhanden). Außerdem erlaubtuns der GET#-Befehl die Überprüfung einzelner Zeichen direkt nach dem Laden.

Lesen wir jetzt also die ersten Byte eines Basic-Programms. Am Anfang, das sind die ersten zwei Bytes, steht die Startadresse. Bei Basic-Programmen ist sie 2049, hexadezimal ausgedrückt $0801. Darauf folgen zwei Byte für die Anfangsadresse der nächsten Basic-Zeile (gemeint ist hier die Adresse im RAM, die natürlich auch gespeichert wird). Erst jetzt beginnt die wirkliche Basic-Zeile: Zwei Byte für die Zeilennummer, aufgetrennt in Low- und High-Byte, gefolgt vom Basic-Text. Das Ende einer Basic-Zeile erkennen Sie (und der Basic-Interpreter) an einem Null-Byte. Danach folgt wieder die Anfangsadresse der nächsten Basic-Zeile (Low- und High-Byte) und der nächsten Zeilennummer (auch Low- und High-Byte), danach der Basic-Text, etc., etc.. Das Ende eines Basic-Programms ist gekennzeichnet durch drei aufeinanderfolgende Null-Byte, und auch die Statusvariable ST wird auf 64 gesetzt.

Das war’s schon. Mit diesem Wissen sind Sie in der Lage, ein Basic-Programm komplett zu analysieren. Eine vollständige Liste aller Token, das sind die Abkürzungen, die Codes der Basic-Befehle, finden Sie in Bild 2.

Doch nun zum Programm »Cross-Ref 64«.

## Cross-Ref 64

Das hier vorgestellte Programm Cross-Ref 64 (Listing 2) arbeitet auf allen Commodore-Computern, mit einem Floppy- oder Kassetten-Laufwerk und einem Drucker.

Nach dem Start mit RUN kann die Ausgabe der fertigen Listen auf Drucker oder Bildschirm gewählt werden (siehe auch Zeile 200 bis 260). Die Variable DV enthält die jeweils gültige Gerätenummer. Danach müssen Sie den Dateinamen des zu durchsuchenden Files eingeben.

Ihr Computer liest sich nun das Programm wie ein sequentielles File Byte für Byte durch. Das Programm steht auf der Diskette im gleichen Format wie im RAM, lediglich die ersten beiden Bytes geben den Start des Programms an. Liegt Ihr Programm nicht ab 2049, zum Beispiel bei Maschinenprogrammen üblich, so bricht das Programm die Bearbeitung ab. Sollten Sie das Programm auf einem anderen Commodore-Computer betreiben, so geben Sie einfach Listing 3 ein und tauschen die auf dem Bildschrim erscheinende Zahl gegen die in Zeile 290 stehende 2049 aüs.

Beim Durchsuchen »hangelt« sich der Computer durch die Zeilen, indem er, immer wenn er auf einen Charakter 0 trifft, eine neue Zeile beginnt. Im ersten Paß durchsucht er das Programm auf die Token für die Sprungbefehle GOTO, RUN, GOSUB und THEN (Zeile 330). Sie haben, in der gleichen Reihenfolge, die ASCII-Werte 137, 138, 141 und 167. Gefundene Sprünge werden auf zwei Arten gespeichert. Als erstes im Format ZEILENNUMMER : SPRUNGZIEL (Bild 3) in den Zeilen 400 bis 420, darauf im Format SPRUNGZIEL : ZEILENNUMMERN (Bild 3). Wobei SPRUNGZIEL immer die Zahl ist, die hinter GOTO oder THEN steht. ZEILENNUMMER ist jeweils die Zeile, in der der Sprungbefehl auftaucht.

Die Zeilennummern werden in den Feldern ps$( und sp$( gespeichert. Wird in einem der Felder die Maximallänge von 70 Zeichen überschritten, so wird ein neues Feld angelegt (Zeile 410 und 450).

Haben Sie den ersten Pass glücklich überstanden, so wird die Liste auf das von Ihnen gewählte Gerät übertragen (Zeile 580 bis 680). Die aufsteigend sortierten Zeilennummern werden so ausgegeben, daß nie zwei gleiche Zeilennummern untereinanderstehen. Statt dessen werden sechs Leerzeichen gedruckt (Zeile 660).

Der zweite Pass läuft im Prinzip wie der erste ab. Die Variablen mit zugehörigen Zeilennummern werden lediglich im Feld VA$( gespeichert und sortiert. Selbstverständlich wird der Text hinter REM und DATA sowie Anführungszeichen überlesen (Zeile 750-790).

In diesem Stadium kommt Arbeit auf Sie zu. Jetzt haben Sie die Möglichkeit, die Variablen mit einem Text zu versehen. Dabei müssen Sie sich allerdings auf 25 Zeichen beschränken.

Antworten Sie auf die Frage »WOLLEN SIE ZU DEN VARIABLEN BEMERKUNGEN EINGEBEN« mit »J«, so können sie mit Cursor UP und DOWN durch die Liste wandern. Die momentane Variable wird jeweils angezeigt. Haben Sie die richtige Stelle gefunden, so drücken Sie »RETURN« und können Ihren Text eingeben. Durch nochmaliges Drücken der »RETURN«-Taste wird der Text gespeichert.

Haben Sie Ihre Texte verteilt, so beginnt das Programm nach Drücken der »N«-Taste zu drucken (Zeilen 1180 bis 1280). Auch hier können Sie den Druckvorgang wiederholen (Bild 4 und 5).

### Umstellungshinweise

Dieses Programm ist auf allen Computern lauffähig, die ihren Basic-Text nach Commodoreart speichern. Potentielle »Umschreiber«’können sich daher auf die Zeile 330 beschränken. Auch die Druckausgabe ist leicht modifizierbar. Die Sekundäradresse der OPEN-Befehle in den Zeilen 580 und 1180 stellen den Epson MX-80 über das Print-64-Interface auf Klein/Großschrift um. Dies kann auch durch normale »OPENs« mit nachfolgenden Steuercodes erfolgen.

Sogar bei einem Kassettenlaufwerk ist das Programm verwendbar. Auch hier ändern Sie in den Zeilen 290 und 730 die OPEN-Befehle (Listing 4).

(Stefan Becker/gk)

# Gewinnen Sie zwei Btx-Femsehgerüte Loewe MCP 114 und eine Reise zur Internationalen Funkausstellung '85 in Berlin! \[160-161]

> Gesucht: Vier originelle Spiel- und Lernprogramme für den C 64. Schreiben Sie die erste C 64-Telesoftwure für das deutsche Bildschirmtext-System! Jeder der mitmacht hat eine Chance.

Die Deutsche Bundespost wird bei der Internationalen Funkausstellung 1985 in Berlin erstmals das Fernladen von Computerprogrammen für den C 64 mittels Bildschirmtext demonstrieren. Die vier Programme, die auf diesem Weg von der Btx-Zentraldatenbank in Ulm in fünf Demonstrationsmodelle C 64 in Halle 13 des Internationalen Ausstellungsgeländes am Funkturm geschickt werden, sollen von den 64’er-Lesern geschrieben werden. Gesucht wird nach je zwei originellen Spiel- und zwei Lernprogrammen.

* Der erste Preis ist ein Btx-Fernsehgerät Loewe MCP 114 und eine Reise zur Preisverleihung während der Funkausstellung im September für eine Person.
* Der zweite Preis ist ein Btx-Fernsehgerät Loewe MCP 114.
* Der dritte und vierte Preis ist je ein Drucker MPS 802.

## Das ist Bildschirmtext

Bildschirmtext ist ein neuer Informationsdienst der Post. Dabei können Informationen aus Btx-Zentralen (Computern) der Post über die Telefonleitung auf dem Bildschirm im Wohnzimmer abgerufen und wegen der Dialogfähigkeit des Systems auch gesendet werden.

Für die Nutzung von Bildschirmtext braucht man ein Farbfernsehgerät mit einer Zusatzeinrichtung (Decoder). Dazu eine Btx-Anschlußbox, die von der Post zwischen Telefon und Fernsehgerät installiert wird. Dort werden die digitalen Signale moduliert und so umgewandelt, daß sie über die Fernsprechleitung der Post-Zentrale zugeführt werden können.

Die Möglichkeiten bei der Nutzung von Bildschirmtext beschränken sich allerdings nicht nur auf den Abruf visueller Informationen (Text, Zeichengrafik, Kleingrafik), sondern man kann auch Daten übermitteln, die einen Bildplattenspieler steuern, die ein Programm für einen Mikrocomputer darstellen oder die Eingangsdaten für ein Computerprogramm. Die Faszination dieserart Programme in den eigenen Heimcomputer zu laden und dort ablaufen zu lassen liegt nicht zuletzt in der Nutzung eines modernen Telekommunikationsnetzes. Zum anderen kommt man so problemlos an ein umfassendes Programmangebot. Um in der Btx-Zentrale gespeicherte Programme und Daten in den Computer laden zu können (downloading), bedarf es auf der Benutzerseite neben dem Rechner, wie beim normalen Empfang von Btx-Informationsseiten eines Btx-Fernsehgerätes (mit Btx-Anschluß), einer Verbindung zwischen Rechner und Fernsehgerät und der Betriebssoftware für den Rechner zur Steuerung der Kommunikation und des Ladevorganges.

### Folgende Bedingungen müssen die Programme erfüllen:

* Das Programm kann in Basic oder Maschinensprache geschrieben sein
* Die maximale Länge beträgt 7 KByte, oder 30 Blocks auf der Diskette
* Das Programm muß vollständig im Speicher stehen, das heißt es dürfen keine weiteren Programmteile nachgeladen werden
* Der Speicherbereich zwischen $C000 und $CFFF und die Puffer in der Zeropage dürfen nicht benutzt werden
* Das Programm darf nicht über einen Autostart verfügen, das heißt, es darf sich nach dem Laden nicht selbst starten
* Es sollte eine Bedienungsanleitung im Programm wahlweise angesprungen werden können
* Spielprogramme müssen überJoysticks gesteuert werden
* Während des Programmlaufs dürfen keine Zugriffe auf Diskette oder Kassette erfolgen, das heißt es dürfen weder Daten nachgeladen noch abgespeichert werden
* Die schriftliche Bedienungsanleitung zum Programm sollte die üblichen »Zutaten« enthalten: Programmbeschreibung, Variablendefinition, Programmaufschlüsselung nach Zeilennummern, Flußdiagramm, bei Maschinensprache dokumentierter Quellcode, etc.
* Strukturierte Programmierung ist nicht erforderlich.

Zu den Spielprogrammen: Bei der Art des Programms sind wir nicht wählerisch, das heißt sie können aus dem gesamten Bereich des

Spielespektrums von Schieß-, Kletter- und Hüpfspielen bis zu Denk- und Strategiespielen kommen. Wichtigste Voraussetzung: Alles muß mit dem oder den Joysticks zu steuern sein.

Zu den Lernprogrammen: Auch hier kann jede Art von Programmen, die irgend etwas mit Lernen zu tun haben, eingesandt werden. Die Rechte an den Programmen gehen an den Verlag Markt & Technik AG über. Schicken Sie Ihre Programme an:
Verlag Markt & Technik AG
**Stichwort: Btx-Wettbewerb**
Hans-Pinsel-Str. 2
8013 Haar bei München

**Einsendeschluß ist der 15. Juni 1985**

Es gilt das Datum des Poststempels. Der Rechtsweg ist ausgeschlossen.

# Vorschau \[164]

## Modems und Akustikkoppler

Das Angebot der Modems und Akustikkoppler ist seit unserer letzten Marktübersicht um einiges größer geworden. Es reicht von einfachen Platinen bis zu preiswerten und leistungsstarken Geräten. Auf welche Leistungsmerkmale man achten sollte, zeigt unser Bericht.

## Was ist ein EPROM?

Möchten Sie das Betriebssystem des C 64 ändern, ist die Anschaffung eines EPROM-Programmierers unumgänglich. In einem Test stellen wir Ihnen neben einer ausführlichen Funktionsbeschreibung in einer Marktübersicht die zur Zeit erhältlichen Geräte für den C 64 vor.

## Die anderen Drucker

Was gibt Tintenstrahldruckern und Plottern den Ruf des Besonderen? In der nächsten Ausgabe sagen wir Ihnen, was an diesem Ruf »dran« ist. Das Prinzip der Billigsten, der Thermodrucker, wird ebenfalls erklärt. Eine Marktübersicht dieser Druckertypen soll Ihnen beim Kauf helfen.

## Test: PC 128 (2. Teil)

Im zweiten Teil unseres großen PC 128-Tests finden Sie alles über den neuen RGB/Composite-Farbmonitor 1902 und über das schnelle 1571-Floppy-Laufwerk, das dem PC 128 auch zu CP/M verhilft. Das ist das Stichwort zum zweiten großen Thema unseres Testberichts. Sie erfahren, was CP/M ist, wie es auf dem PC 128 funktioniert und natürlich auch, welche Software damit läuft.

## Terminalprogramm zum Abtippen

Viele gute Programme erreichten die Redaktion zum Wettbewerb Terminalprogramme. Ein Programm jedoch ließ die anderen weit hinter sich. Auch den Vergleich mit professionellen Terminalprogrammen braucht es nicht zu scheuen. Überzeugen Sie sich in der nächsten Ausgabe selbst.

## IEEE-Interface zum Selberbauen

Um beispielsweise Peripheriegeräte von den großen CBM-Rechnern (Floppy-Laufwerke, Drucker oder Meßgeräte) an den C 64 anschließen zu können, benötigen Sie ein IEEE-Interface. Die zur Zeit erhältlichen Geräte kosten meist über 200 Mark. Das hier beschriebene Interface ist zu einem Bauteilepreis von unter 50 Mark zu haben.

## Der Top-Assembler

Zusammen mit dem SMON wird mit diesem Assembler dem Maschinenprogrammierer ein Programmpaket zur Verfügung gestellt, das leistungsfähiger ist als viele kommerziell angebotene Programme. Die hervorstechenste Eigenschaft dieses Assemblers ist die Möglichkeit, Macros anzulegen, in denen lokale Variablen benutzt werden können. Neben vielen Pseudo-Opcodes kann auch bedingt assembliert werden. Ein eingebautes Hilfstool enthält Befehle wie zum Beispiel Auto, Renumber und formatiertes Listen. Ein Listing des Monats par excellence.

## Software-Test Promal, Forth und Pilot

Drei ganz unterschiedliche Programmiersprachen für den C 64: Pil'ot wurde in erster Linie für Ausbildungszwecke entwickelt, Forth stammt aus der Steuerungstechnik, und bei Promal handelt es sich um eine völlig neue Sprache, die in der Struktur an Pascal angelehnt ist. Alle drei Programmiersprachen haben eines gemeinsam: Sie ermöglichen sehr effektives Programmieren — das bedeutet kurze, schnelle Programme, die wenig Speicherplatz benötigen, aber viel leisten. Wir haben diese drei Sprachen daher für Sie ausführlich getestet.

## Außerdem ...

* ein File-Compactor
* eine Centronics-Schnittstelle ohne Speicherplatzverbrauch
* ein Bericht, wie der 64er für die Auswertung von internationalen Sportveranstaltungen eingesetzt wird
* sowie wieder viele Tips & Tricks für C 16, VC 20 und C 64

